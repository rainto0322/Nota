import{createRequire as k71}from"node:module";var I71=Object.create;var{getPrototypeOf:T71,defineProperty:nz,getOwnPropertyNames:O71}=Object;var S71=Object.prototype.hasOwnProperty;var C7=(A,F,B)=>{B=A!=null?I71(T71(A)):{};let $=F||!A||!A.__esModule?nz(B,"default",{value:A,enumerable:!0}):B;for(let Z of O71(A))if(!S71.call($,Z))nz($,Z,{get:()=>A[Z],enumerable:!0});return $};var C=(A,F)=>()=>(F||A((F={exports:{}}).exports,F),F.exports);var m5=(A,F)=>{for(var B in F)nz(A,B,{get:F[B],enumerable:!0,configurable:!0,set:($)=>F[B]=()=>$})};var A1=k71(import.meta.url);var cI=C((mI)=>{Object.defineProperty(mI,"__esModule",{value:!0});mI.parse=EX1;mI.serialize=LX1;var zX1=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,qX1=/^[\u0021-\u003A\u003C-\u007E]*$/,HX1=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,UX1=/^[\u0020-\u003A\u003D-\u007E]*$/,CX1=Object.prototype.toString,KX1=(()=>{let A=function(){};return A.prototype=Object.create(null),A})();function EX1(A,F){let B=new KX1,$=A.length;if($<2)return B;let Z=F?.decode||wX1,D=0;do{let X=A.indexOf("=",D);if(X===-1)break;let J=A.indexOf(";",D),Y=J===-1?$:J;if(X>Y){D=A.lastIndexOf(";",X-1)+1;continue}let W=hI(A,D,X),G=dI(A,X,W),Q=A.slice(W,G);if(B[Q]===void 0){let q=hI(A,X+1,Y),z=dI(A,Y,q),H=Z(A.slice(q,z));B[Q]=H}D=Y+1}while(D<$);return B}function hI(A,F,B){do{let $=A.charCodeAt(F);if($!==32&&$!==9)return F}while(++F<B);return B}function dI(A,F,B){while(F>B){let $=A.charCodeAt(--F);if($!==32&&$!==9)return F+1}return B}function LX1(A,F,B){let $=B?.encode||encodeURIComponent;if(!zX1.test(A))throw new TypeError(`argument name is invalid: ${A}`);let Z=$(F);if(!qX1.test(Z))throw new TypeError(`argument val is invalid: ${F}`);let D=A+"="+Z;if(!B)return D;if(B.maxAge!==void 0){if(!Number.isInteger(B.maxAge))throw new TypeError(`option maxAge is invalid: ${B.maxAge}`);D+="; Max-Age="+B.maxAge}if(B.domain){if(!HX1.test(B.domain))throw new TypeError(`option domain is invalid: ${B.domain}`);D+="; Domain="+B.domain}if(B.path){if(!UX1.test(B.path))throw new TypeError(`option path is invalid: ${B.path}`);D+="; Path="+B.path}if(B.expires){if(!VX1(B.expires)||!Number.isFinite(B.expires.valueOf()))throw new TypeError(`option expires is invalid: ${B.expires}`);D+="; Expires="+B.expires.toUTCString()}if(B.httpOnly)D+="; HttpOnly";if(B.secure)D+="; Secure";if(B.partitioned)D+="; Partitioned";if(B.priority)switch(typeof B.priority==="string"?B.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${B.priority}`)}if(B.sameSite)switch(typeof B.sameSite==="string"?B.sameSite.toLowerCase():B.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${B.sameSite}`)}return D}function wX1(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch(F){return A}}function VX1(A){return CX1.call(A)==="[object Date]"}});var gJ=C((TB0,iI)=>{var lI=12,RX1=0,gq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function PX1(A){var F=A.indexOf("%");if(F===-1)return A;var B=A.length,$="",Z=0,D=0,X=F,J=lI;while(F>-1&&F<B){var Y=pI(A[F+1],4),W=pI(A[F+2],0),G=Y|W,Q=gq[G];if(J=gq[256+J+Q],D=D<<6|G&gq[364+Q],J===lI)$+=A.slice(Z,X),$+=D<=65535?String.fromCharCode(D):String.fromCharCode(55232+(D>>10),56320+(D&1023)),D=0,Z=F+3,F=X=A.indexOf("%",Z);else if(J===RX1)return null;else{if(F+=3,F<B&&A.charCodeAt(F)===37)continue;return null}}return $+A.slice(Z)}var jX1={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function pI(A,F){var B=jX1[A];return B===void 0?255:B<<F}iI.exports=PX1});var l4=C((SY1)=>{var dJ1=(()=>{let A=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(F)=>A.call(F)})();function vF(A){return dJ1(A)==="Uint8Array"}function xH(A){return typeof A==="object"&&A!=null&&Symbol.toStringTag in A&&(A[Symbol.toStringTag]==="ArrayBuffer"||A[Symbol.toStringTag]==="SharedArrayBuffer")}function hF(A){return A instanceof RegExp||Object.prototype.toString.call(A)==="[object RegExp]"}function bH(A){return typeof A==="object"&&A!=null&&Symbol.toStringTag in A&&A[Symbol.toStringTag]==="Map"}function dF(A){return A instanceof Date||Object.prototype.toString.call(A)==="[object Date]"}function K9(A,F){return JSON.stringify(A,(B,$)=>{if(typeof $==="bigint")return{$numberLong:`${$}`};else if(bH($))return Object.fromEntries($);return $})}function mJ1(A){if(A!=null&&typeof A==="object"&&"stylize"in A&&typeof A.stylize==="function")return A.stylize}var DA=6,lF=Symbol.for("@@mdb.bson.version"),UZ=2147483647,CZ=-2147483648,zO=Math.pow(2,63)-1,qO=-Math.pow(2,63),HO=Math.pow(2,53),UO=-Math.pow(2,53),fH=1,CO=2,gH=3,KO=4,uH=5,cJ1=6,EO=7,LO=8,wO=9,yH=10,WY=11,lJ1=12,vH=13,VO=14,NO=15,zZ=16,MO=17,hH=18,RO=19,PO=255,jO=127,pJ1=0,dH=4,IO=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class n extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(A,F){super(A,F)}static isBSONError(A){return A!=null&&typeof A==="object"&&"bsonError"in A&&A.bsonError===!0&&"name"in A&&"message"in A&&"stack"in A}}class F5 extends n{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${DA}.x.x`)}}class qZ extends n{get name(){return"BSONRuntimeError"}constructor(A){super(A)}}class u7 extends n{get name(){return"BSONOffsetError"}constructor(A,F,B){super(`${A}. offset: ${F}`,B);this.offset=F}}var rT,oT;function TO(A,F,B,$){if($){rT??=new TextDecoder("utf8",{fatal:!0});try{return rT.decode(A.subarray(F,B))}catch(Z){throw new n("Invalid UTF-8 string in BSON document",{cause:Z})}}return oT??=new TextDecoder("utf8",{fatal:!1}),oT.decode(A.subarray(F,B))}function OO(A,F,B){if(A.length===0)return"";let $=B-F;if($===0)return"";if($>20)return null;if($===1&&A[F]<128)return String.fromCharCode(A[F]);if($===2&&A[F]<128&&A[F+1]<128)return String.fromCharCode(A[F])+String.fromCharCode(A[F+1]);if($===3&&A[F]<128&&A[F+1]<128&&A[F+2]<128)return String.fromCharCode(A[F])+String.fromCharCode(A[F+1])+String.fromCharCode(A[F+2]);let Z=[];for(let D=F;D<B;D++){let X=A[D];if(X>127)return null;Z.push(X)}return String.fromCharCode(...Z)}function iJ1(A,F,B){if(F.length===0)return 0;if(F.length>25)return null;if(A.length-B<F.length)return null;for(let $=0,Z=B;$<F.length;$++,Z++){let D=F.charCodeAt($);if(D>127)return null;A[Z]=D}return F.length}function nJ1(A){return e8.fromNumberArray(Array.from({length:A},()=>Math.floor(Math.random()*256)))}var sJ1=(()=>{try{return A1("crypto").randomBytes}catch{return nJ1}})(),e8={toLocalBufferType(A){if(Buffer.isBuffer(A))return A;if(ArrayBuffer.isView(A))return Buffer.from(A.buffer,A.byteOffset,A.byteLength);let F=A?.[Symbol.toStringTag]??Object.prototype.toString.call(A);if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return Buffer.from(A);throw new n("Cannot create Buffer from the passed potentialBuffer.")},allocate(A){return Buffer.alloc(A)},allocateUnsafe(A){return Buffer.allocUnsafe(A)},equals(A,F){return e8.toLocalBufferType(A).equals(F)},fromNumberArray(A){return Buffer.from(A)},fromBase64(A){return Buffer.from(A,"base64")},toBase64(A){return e8.toLocalBufferType(A).toString("base64")},fromISO88591(A){return Buffer.from(A,"binary")},toISO88591(A){return e8.toLocalBufferType(A).toString("binary")},fromHex(A){return Buffer.from(A,"hex")},toHex(A){return e8.toLocalBufferType(A).toString("hex")},toUTF8(A,F,B,$){let Z=B-F<=20?OO(A,F,B):null;if(Z!=null)return Z;let D=e8.toLocalBufferType(A).toString("utf8",F,B);if($){for(let X=0;X<D.length;X++)if(D.charCodeAt(X)===65533){TO(A,F,B,!0);break}}return D},utf8ByteLength(A){return Buffer.byteLength(A,"utf8")},encodeUTF8Into(A,F,B){let $=iJ1(A,F,B);if($!=null)return $;return e8.toLocalBufferType(A).write(F,B,void 0,"utf8")},randomBytes:sJ1,swap32(A){return e8.toLocalBufferType(A).swap32()}};function aJ1(){let{navigator:A}=globalThis;return typeof A==="object"&&A.product==="ReactNative"}function tJ1(A){if(A<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${A}`);return HZ.fromNumberArray(Array.from({length:A},()=>Math.floor(Math.random()*256)))}var rJ1=(()=>{let{crypto:A}=globalThis;if(A!=null&&typeof A.getRandomValues==="function")return(F)=>{return A.getRandomValues(HZ.allocate(F))};else{if(aJ1()){let{console:F}=globalThis;F?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return tJ1}})(),eT=/(\d|[a-f])/i,HZ={toLocalBufferType(A){let F=A?.[Symbol.toStringTag]??Object.prototype.toString.call(A);if(F==="Uint8Array")return A;if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer.slice(A.byteOffset,A.byteOffset+A.byteLength));if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return new Uint8Array(A);throw new n("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(A){if(typeof A!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(A)}`);return new Uint8Array(A)},allocateUnsafe(A){return HZ.allocate(A)},equals(A,F){if(A.byteLength!==F.byteLength)return!1;for(let B=0;B<A.byteLength;B++)if(A[B]!==F[B])return!1;return!0},fromNumberArray(A){return Uint8Array.from(A)},fromBase64(A){return Uint8Array.from(atob(A),(F)=>F.charCodeAt(0))},toBase64(A){return btoa(HZ.toISO88591(A))},fromISO88591(A){return Uint8Array.from(A,(F)=>F.charCodeAt(0)&255)},toISO88591(A){return Array.from(Uint16Array.from(A),(F)=>String.fromCharCode(F)).join("")},fromHex(A){let F=A.length%2===0?A:A.slice(0,A.length-1),B=[];for(let $=0;$<F.length;$+=2){let Z=F[$],D=F[$+1];if(!eT.test(Z))break;if(!eT.test(D))break;let X=Number.parseInt(`${Z}${D}`,16);B.push(X)}return Uint8Array.from(B)},toHex(A){return Array.from(A,(F)=>F.toString(16).padStart(2,"0")).join("")},toUTF8(A,F,B,$){let Z=B-F<=20?OO(A,F,B):null;if(Z!=null)return Z;return TO(A,F,B,$)},utf8ByteLength(A){return new TextEncoder().encode(A).byteLength},encodeUTF8Into(A,F,B){let $=new TextEncoder().encode(F);return A.set($,B),$.byteLength},randomBytes:rJ1,swap32(A){if(A.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<A.length;F+=4){let B=A[F],$=A[F+1],Z=A[F+2],D=A[F+3];A[F]=D,A[F+1]=Z,A[F+2]=$,A[F+3]=B}return A}},oJ1=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,l=oJ1?e8:HZ;class L4{get[lF](){return DA}[Symbol.for("nodejs.util.inspect.custom")](A,F,B){return this.inspect(A,F,B)}}var mF=new Float64Array(1),N0=new Uint8Array(mF.buffer,0,8);mF[0]=-1;var YH=N0[7]===0,j1={isBigEndian:YH,getNonnegativeInt32LE(A,F){if(A[F+3]>127)throw new RangeError(`Size cannot be negative at offset: ${F}`);return A[F]|A[F+1]<<8|A[F+2]<<16|A[F+3]<<24},getInt32LE(A,F){return A[F]|A[F+1]<<8|A[F+2]<<16|A[F+3]<<24},getUint32LE(A,F){return A[F]+A[F+1]*256+A[F+2]*65536+A[F+3]*16777216},getUint32BE(A,F){return A[F+3]+A[F+2]*256+A[F+1]*65536+A[F]*16777216},getBigInt64LE(A,F){let B=BigInt(A[F+4]+A[F+5]*256+A[F+6]*65536+(A[F+7]<<24)),$=BigInt(A[F]+A[F+1]*256+A[F+2]*65536+A[F+3]*16777216);return(B<<BigInt(32))+$},getFloat64LE:YH?(A,F)=>{return N0[7]=A[F],N0[6]=A[F+1],N0[5]=A[F+2],N0[4]=A[F+3],N0[3]=A[F+4],N0[2]=A[F+5],N0[1]=A[F+6],N0[0]=A[F+7],mF[0]}:(A,F)=>{return N0[0]=A[F],N0[1]=A[F+1],N0[2]=A[F+2],N0[3]=A[F+3],N0[4]=A[F+4],N0[5]=A[F+5],N0[6]=A[F+6],N0[7]=A[F+7],mF[0]},setInt32BE(A,F,B){return A[F+3]=B,B>>>=8,A[F+2]=B,B>>>=8,A[F+1]=B,B>>>=8,A[F]=B,4},setInt32LE(A,F,B){return A[F]=B,B>>>=8,A[F+1]=B,B>>>=8,A[F+2]=B,B>>>=8,A[F+3]=B,4},setBigInt64LE(A,F,B){let $=BigInt(4294967295),Z=Number(B&$);A[F]=Z,Z>>=8,A[F+1]=Z,Z>>=8,A[F+2]=Z,Z>>=8,A[F+3]=Z;let D=Number(B>>BigInt(32)&$);return A[F+4]=D,D>>=8,A[F+5]=D,D>>=8,A[F+6]=D,D>>=8,A[F+7]=D,8},setFloat64LE:YH?(A,F,B)=>{return mF[0]=B,A[F]=N0[7],A[F+1]=N0[6],A[F+2]=N0[5],A[F+3]=N0[4],A[F+4]=N0[3],A[F+5]=N0[2],A[F+6]=N0[1],A[F+7]=N0[0],8}:(A,F,B)=>{return mF[0]=B,A[F]=N0[0],A[F+1]=N0[1],A[F+2]=N0[2],A[F+3]=N0[3],A[F+4]=N0[4],A[F+5]=N0[5],A[F+6]=N0[6],A[F+7]=N0[7],8}};class N1 extends L4{get _bsontype(){return"Binary"}constructor(A,F){super();if(A!=null&&typeof A==="string"&&!ArrayBuffer.isView(A)&&!xH(A)&&!Array.isArray(A))throw new n("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=F??N1.BSON_BINARY_SUBTYPE_DEFAULT,A==null)this.buffer=l.allocate(N1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(A)?l.fromNumberArray(A):l.toLocalBufferType(A),this.position=this.buffer.byteLength}put(A){if(typeof A==="string"&&A.length!==1)throw new n("only accepts single character String");else if(typeof A!=="number"&&A.length!==1)throw new n("only accepts single character Uint8Array or Array");let F;if(typeof A==="string")F=A.charCodeAt(0);else if(typeof A==="number")F=A;else F=A[0];if(F<0||F>255)throw new n("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=F;else{let B=l.allocate(N1.BUFFER_SIZE+this.buffer.length);B.set(this.buffer,0),this.buffer=B,this.buffer[this.position++]=F}}write(A,F){if(F=typeof F==="number"?F:this.position,this.buffer.byteLength<F+A.length){let B=l.allocate(this.buffer.byteLength+A.length);B.set(this.buffer,0),this.buffer=B}if(ArrayBuffer.isView(A))this.buffer.set(l.toLocalBufferType(A),F),this.position=F+A.byteLength>this.position?F+A.length:this.position;else if(typeof A==="string")throw new n("input cannot be string")}read(A,F){F=F&&F>0?F:this.position;let B=A+F;return this.buffer.subarray(A,B>this.position?this.position:B)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return l.toBase64(this.buffer.subarray(0,this.position))}toString(A){if(A==="hex")return l.toHex(this.buffer.subarray(0,this.position));if(A==="base64")return l.toBase64(this.buffer.subarray(0,this.position));if(A==="utf8"||A==="utf-8")return l.toUTF8(this.buffer,0,this.position,!1);return l.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(A){if(A=A||{},this.sub_type===N1.SUBTYPE_VECTOR)o8(this);let F=l.toBase64(this.buffer),B=Number(this.sub_type).toString(16);if(A.legacy)return{$binary:F,$type:B.length===1?"0"+B:B};return{$binary:{base64:F,subType:B.length===1?"0"+B:B}}}toUUID(){if(this.sub_type===N1.SUBTYPE_UUID)return new P6(this.buffer.subarray(0,this.position));throw new n(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${N1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(A,F){return new N1(l.fromHex(A),F)}static createFromBase64(A,F){return new N1(l.fromBase64(A),F)}static fromExtendedJSON(A,F){F=F||{};let B,$;if("$binary"in A){if(F.legacy&&typeof A.$binary==="string"&&"$type"in A)$=A.$type?parseInt(A.$type,16):0,B=l.fromBase64(A.$binary);else if(typeof A.$binary!=="string")$=A.$binary.subType?parseInt(A.$binary.subType,16):0,B=l.fromBase64(A.$binary.base64)}else if("$uuid"in A)$=4,B=P6.bytesFromString(A.$uuid);if(!B)throw new n(`Unexpected Binary Extended JSON format ${JSON.stringify(A)}`);return $===dH?new P6(B):new N1(B,$)}inspect(A,F,B){B??=K9;let $=l.toBase64(this.buffer.subarray(0,this.position)),Z=B($,F),D=B(this.sub_type,F);return`Binary.createFromBase64(${Z}, ${D})`}toInt8Array(){if(this.sub_type!==N1.SUBTYPE_VECTOR)throw new n("Binary sub_type is not Vector");if(this.buffer[0]!==N1.VECTOR_TYPE.Int8)throw new n("Binary datatype field is not Int8");return o8(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==N1.SUBTYPE_VECTOR)throw new n("Binary sub_type is not Vector");if(this.buffer[0]!==N1.VECTOR_TYPE.Float32)throw new n("Binary datatype field is not Float32");o8(this);let A=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(j1.isBigEndian)l.swap32(A);return new Float32Array(A.buffer)}toPackedBits(){if(this.sub_type!==N1.SUBTYPE_VECTOR)throw new n("Binary sub_type is not Vector");if(this.buffer[0]!==N1.VECTOR_TYPE.PackedBit)throw new n("Binary datatype field is not packed bit");return o8(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==N1.SUBTYPE_VECTOR)throw new n("Binary sub_type is not Vector");if(this.buffer[0]!==N1.VECTOR_TYPE.PackedBit)throw new n("Binary datatype field is not packed bit");o8(this);let F=(this.length()-2)*8-this.buffer[1],B=new Int8Array(F);for(let $=0;$<B.length;$++){let Z=$/8|0,D=this.buffer[Z+2],X=7-$%8,J=D>>X&1;B[$]=J}return B}static fromInt8Array(A){let F=l.allocate(A.byteLength+2);F[0]=N1.VECTOR_TYPE.Int8,F[1]=0;let B=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);F.set(B,2);let $=new this(F,this.SUBTYPE_VECTOR);return o8($),$}static fromFloat32Array(A){let F=l.allocate(A.byteLength+2);F[0]=N1.VECTOR_TYPE.Float32,F[1]=0;let B=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);if(F.set(B,2),j1.isBigEndian)l.swap32(new Uint8Array(F.buffer,2));let $=new this(F,this.SUBTYPE_VECTOR);return o8($),$}static fromPackedBits(A,F=0){let B=l.allocate(A.byteLength+2);B[0]=N1.VECTOR_TYPE.PackedBit,B[1]=F,B.set(A,2);let $=new this(B,this.SUBTYPE_VECTOR);return o8($),$}static fromBits(A){let F=A.length+7>>>3,B=new Uint8Array(F+2);B[0]=N1.VECTOR_TYPE.PackedBit;let $=A.length%8;B[1]=$===0?0:8-$;for(let Z=0;Z<A.length;Z++){let D=Z>>>3,X=A[Z];if(X!==0&&X!==1)throw new n(`Invalid bit value at ${Z}: must be 0 or 1, found ${A[Z]}`);if(X===0)continue;let J=7-Z%8;B[D+2]|=X<<J}return new this(B,N1.SUBTYPE_VECTOR)}}N1.BSON_BINARY_SUBTYPE_DEFAULT=0;N1.BUFFER_SIZE=256;N1.SUBTYPE_DEFAULT=0;N1.SUBTYPE_FUNCTION=1;N1.SUBTYPE_BYTE_ARRAY=2;N1.SUBTYPE_UUID_OLD=3;N1.SUBTYPE_UUID=4;N1.SUBTYPE_MD5=5;N1.SUBTYPE_ENCRYPTED=6;N1.SUBTYPE_COLUMN=7;N1.SUBTYPE_SENSITIVE=8;N1.SUBTYPE_VECTOR=9;N1.SUBTYPE_USER_DEFINED=128;N1.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function o8(A){if(A.sub_type!==N1.SUBTYPE_VECTOR)return;let F=A.position,B=A.buffer[0],$=A.buffer[1];if((B===N1.VECTOR_TYPE.Float32||B===N1.VECTOR_TYPE.Int8)&&$!==0)throw new n("Invalid Vector: padding must be zero for int8 and float32 vectors");if(B===N1.VECTOR_TYPE.Float32){if(F!==0&&F-2!==0&&(F-2)%4!==0)throw new n("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if(B===N1.VECTOR_TYPE.PackedBit&&$!==0&&F===2)throw new n("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(B===N1.VECTOR_TYPE.PackedBit&&$>7)throw new n(`Invalid Vector: padding must be a value between 0 and 7. found: ${$}`)}var WH=16,eJ1=/^[0-9A-F]{32}$/i,AY1=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class P6 extends N1{constructor(A){let F;if(A==null)F=P6.generate();else if(A instanceof P6)F=l.toLocalBufferType(new Uint8Array(A.buffer));else if(ArrayBuffer.isView(A)&&A.byteLength===WH)F=l.toLocalBufferType(A);else if(typeof A==="string")F=P6.bytesFromString(A);else throw new n("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(F,dH)}get id(){return this.buffer}set id(A){this.buffer=A}toHexString(A=!0){if(A)return[l.toHex(this.buffer.subarray(0,4)),l.toHex(this.buffer.subarray(4,6)),l.toHex(this.buffer.subarray(6,8)),l.toHex(this.buffer.subarray(8,10)),l.toHex(this.buffer.subarray(10,16))].join("-");return l.toHex(this.buffer)}toString(A){if(A==="hex")return l.toHex(this.id);if(A==="base64")return l.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(A){if(!A)return!1;if(A instanceof P6)return l.equals(A.id,this.id);try{return l.equals(new P6(A).id,this.id)}catch{return!1}}toBinary(){return new N1(this.id,N1.SUBTYPE_UUID)}static generate(){let A=l.randomBytes(WH);return A[6]=A[6]&15|64,A[8]=A[8]&63|128,A}static isValid(A){if(!A)return!1;if(typeof A==="string")return P6.isValidUUIDString(A);if(vF(A))return A.byteLength===WH;return A._bsontype==="Binary"&&A.sub_type===this.SUBTYPE_UUID&&A.buffer.byteLength===16}static createFromHexString(A){let F=P6.bytesFromString(A);return new P6(F)}static createFromBase64(A){return new P6(l.fromBase64(A))}static bytesFromString(A){if(!P6.isValidUUIDString(A))throw new n("UUID string representation must be 32 hex digits or canonical hyphenated representation");return l.fromHex(A.replace(/-/g,""))}static isValidUUIDString(A){return eJ1.test(A)||AY1.test(A)}inspect(A,F,B){return B??=K9,`new UUID(${B(this.toHexString(),F)})`}}class F3 extends L4{get _bsontype(){return"Code"}constructor(A,F){super();this.code=A.toString(),this.scope=F??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(A){return new F3(A.$code,A.$scope)}inspect(A,F,B){B??=K9;let $=B(this.code,F),Z=$.includes(`
`);if(this.scope!=null)$+=`,${Z?`
`:" "}${B(this.scope,F)}`;let D=Z&&this.scope===null;return`new Code(${Z?`
`:""}${$}${D?`
`:""})`}}function SO(A){return A!=null&&typeof A==="object"&&"$id"in A&&A.$id!=null&&"$ref"in A&&typeof A.$ref==="string"&&(!("$db"in A)||("$db"in A)&&typeof A.$db==="string")}class z8 extends L4{get _bsontype(){return"DBRef"}constructor(A,F,B,$){super();let Z=A.split(".");if(Z.length===2)B=Z.shift(),A=Z.shift();this.collection=A,this.oid=F,this.db=B,this.fields=$||{}}get namespace(){return this.collection}set namespace(A){this.collection=A}toJSON(){let A=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)A.$db=this.db;return A}toExtendedJSON(A){A=A||{};let F={$ref:this.collection,$id:this.oid};if(A.legacy)return F;if(this.db)F.$db=this.db;return F=Object.assign(F,this.fields),F}static fromExtendedJSON(A){let F=Object.assign({},A);return delete F.$ref,delete F.$id,delete F.$db,new z8(A.$ref,A.$id,A.$db,F)}inspect(A,F,B){B??=K9;let $=[B(this.namespace,F),B(this.oid,F),...this.db?[B(this.db,F)]:[],...Object.keys(this.fields).length>0?[B(this.fields,F)]:[]];return $[1]=B===K9?`new ObjectId(${$[1]})`:$[1],`new DBRef(${$.join(", ")})`}}function kO(A){if(A==="")return A;let F=0,B=A[F]==="-",$=A[F]==="+";if($||B)F+=1;let Z=!1;for(;F<A.length&&A[F]==="0";++F)Z=!0;if(!Z)return $?A.slice(1):A;return`${B?"-":""}${A.length===F?"0":A.slice(F)}`}function FY1(A,F){F=F??10;let B="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,F);return new RegExp(`[^-+${B}]`,"i").test(A)?!1:A}var m9=void 0;try{m9=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var AO=65536,BY1=16777216,cF=AO*AO,_O=cF*cF,$Y1=_O/2,FO={},BO={},ZY1=20,DY1=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class f extends L4{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(A=0,F,B){super();let $=typeof F==="boolean"?F:Boolean(B),Z=typeof F==="number"?F:0,D=typeof A==="string"?f.fromString(A,$):typeof A==="bigint"?f.fromBigInt(A,$):{low:A|0,high:Z|0,unsigned:$};this.low=D.low,this.high=D.high,this.unsigned=D.unsigned}static fromBits(A,F,B){return new f(A,F,B)}static fromInt(A,F){let B,$,Z;if(F){if(A>>>=0,Z=0<=A&&A<256){if($=BO[A],$)return $}if(B=f.fromBits(A,(A|0)<0?-1:0,!0),Z)BO[A]=B;return B}else{if(A|=0,Z=-128<=A&&A<128){if($=FO[A],$)return $}if(B=f.fromBits(A,A<0?-1:0,!1),Z)FO[A]=B;return B}}static fromNumber(A,F){if(isNaN(A))return F?f.UZERO:f.ZERO;if(F){if(A<0)return f.UZERO;if(A>=_O)return f.MAX_UNSIGNED_VALUE}else{if(A<=-9223372036854776000)return f.MIN_VALUE;if(A+1>=$Y1)return f.MAX_VALUE}if(A<0)return f.fromNumber(-A,F).neg();return f.fromBits(A%cF|0,A/cF|0,F)}static fromBigInt(A,F){let B=BigInt(4294967295),$=BigInt(32);return new f(Number(A&B),Number(A>>$&B),F)}static _fromString(A,F,B){if(A.length===0)throw new n("empty string");if(B<2||36<B)throw new n("radix");let $;if(($=A.indexOf("-"))>0)throw new n("interior hyphen");else if($===0)return f._fromString(A.substring(1),F,B).neg();let Z=f.fromNumber(Math.pow(B,8)),D=f.ZERO;for(let X=0;X<A.length;X+=8){let J=Math.min(8,A.length-X),Y=parseInt(A.substring(X,X+J),B);if(J<8){let W=f.fromNumber(Math.pow(B,J));D=D.mul(W).add(f.fromNumber(Y))}else D=D.mul(Z),D=D.add(f.fromNumber(Y))}return D.unsigned=F,D}static fromStringStrict(A,F,B){let $=!1;if(typeof F==="number")B=F,F=!1;else $=!!F;if(B??=10,A.trim()!==A)throw new n(`Input: '${A}' contains leading and/or trailing whitespace`);if(!FY1(A,B))throw new n(`Input: '${A}' contains invalid characters for radix: ${B}`);let Z=kO(A),D=f._fromString(Z,$,B);if(D.toString(B).toLowerCase()!==Z.toLowerCase())throw new n(`Input: ${A} is not representable as ${D.unsigned?"an unsigned":"a signed"} 64-bit Long ${B!=null?`with radix: ${B}`:""}`);return D}static fromString(A,F,B){let $=!1;if(typeof F==="number")B=F,F=!1;else $=!!F;if(B??=10,A==="NaN"&&B<24)return f.ZERO;else if((A==="Infinity"||A==="+Infinity"||A==="-Infinity")&&B<35)return f.ZERO;return f._fromString(A,$,B)}static fromBytes(A,F,B){return B?f.fromBytesLE(A,F):f.fromBytesBE(A,F)}static fromBytesLE(A,F){return new f(A[0]|A[1]<<8|A[2]<<16|A[3]<<24,A[4]|A[5]<<8|A[6]<<16|A[7]<<24,F)}static fromBytesBE(A,F){return new f(A[4]<<24|A[5]<<16|A[6]<<8|A[7],A[0]<<24|A[1]<<16|A[2]<<8|A[3],F)}static isLong(A){return A!=null&&typeof A==="object"&&"__isLong__"in A&&A.__isLong__===!0}static fromValue(A,F){if(typeof A==="number")return f.fromNumber(A,F);if(typeof A==="string")return f.fromString(A,F);return f.fromBits(A.low,A.high,typeof F==="boolean"?F:A.unsigned)}add(A){if(!f.isLong(A))A=f.fromValue(A);let F=this.high>>>16,B=this.high&65535,$=this.low>>>16,Z=this.low&65535,D=A.high>>>16,X=A.high&65535,J=A.low>>>16,Y=A.low&65535,W=0,G=0,Q=0,q=0;return q+=Z+Y,Q+=q>>>16,q&=65535,Q+=$+J,G+=Q>>>16,Q&=65535,G+=B+X,W+=G>>>16,G&=65535,W+=F+D,W&=65535,f.fromBits(Q<<16|q,W<<16|G,this.unsigned)}and(A){if(!f.isLong(A))A=f.fromValue(A);return f.fromBits(this.low&A.low,this.high&A.high,this.unsigned)}compare(A){if(!f.isLong(A))A=f.fromValue(A);if(this.eq(A))return 0;let F=this.isNegative(),B=A.isNegative();if(F&&!B)return-1;if(!F&&B)return 1;if(!this.unsigned)return this.sub(A).isNegative()?-1:1;return A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1}comp(A){return this.compare(A)}divide(A){if(!f.isLong(A))A=f.fromValue(A);if(A.isZero())throw new n("division by zero");if(m9){if(!this.unsigned&&this.high===-2147483648&&A.low===-1&&A.high===-1)return this;let Z=(this.unsigned?m9.div_u:m9.div_s)(this.low,this.high,A.low,A.high);return f.fromBits(Z,m9.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?f.UZERO:f.ZERO;let F,B,$;if(!this.unsigned){if(this.eq(f.MIN_VALUE))if(A.eq(f.ONE)||A.eq(f.NEG_ONE))return f.MIN_VALUE;else if(A.eq(f.MIN_VALUE))return f.ONE;else if(F=this.shr(1).div(A).shl(1),F.eq(f.ZERO))return A.isNegative()?f.ONE:f.NEG_ONE;else return B=this.sub(A.mul(F)),$=F.add(B.div(A)),$;else if(A.eq(f.MIN_VALUE))return this.unsigned?f.UZERO:f.ZERO;if(this.isNegative()){if(A.isNegative())return this.neg().div(A.neg());return this.neg().div(A).neg()}else if(A.isNegative())return this.div(A.neg()).neg();$=f.ZERO}else{if(!A.unsigned)A=A.toUnsigned();if(A.gt(this))return f.UZERO;if(A.gt(this.shru(1)))return f.UONE;$=f.UZERO}B=this;while(B.gte(A)){F=Math.max(1,Math.floor(B.toNumber()/A.toNumber()));let Z=Math.ceil(Math.log(F)/Math.LN2),D=Z<=48?1:Math.pow(2,Z-48),X=f.fromNumber(F),J=X.mul(A);while(J.isNegative()||J.gt(B))F-=D,X=f.fromNumber(F,this.unsigned),J=X.mul(A);if(X.isZero())X=f.ONE;$=$.add(X),B=B.sub(J)}return $}div(A){return this.divide(A)}equals(A){if(!f.isLong(A))A=f.fromValue(A);if(this.unsigned!==A.unsigned&&this.high>>>31===1&&A.high>>>31===1)return!1;return this.high===A.high&&this.low===A.low}eq(A){return this.equals(A)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(f.MIN_VALUE)?64:this.neg().getNumBitsAbs();let A=this.high!==0?this.high:this.low,F;for(F=31;F>0;F--)if((A&1<<F)!==0)break;return this.high!==0?F+33:F+1}greaterThan(A){return this.comp(A)>0}gt(A){return this.greaterThan(A)}greaterThanOrEqual(A){return this.comp(A)>=0}gte(A){return this.greaterThanOrEqual(A)}ge(A){return this.greaterThanOrEqual(A)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(A){return this.comp(A)<0}lt(A){return this.lessThan(A)}lessThanOrEqual(A){return this.comp(A)<=0}lte(A){return this.lessThanOrEqual(A)}modulo(A){if(!f.isLong(A))A=f.fromValue(A);if(m9){let F=(this.unsigned?m9.rem_u:m9.rem_s)(this.low,this.high,A.low,A.high);return f.fromBits(F,m9.get_high(),this.unsigned)}return this.sub(this.div(A).mul(A))}mod(A){return this.modulo(A)}rem(A){return this.modulo(A)}multiply(A){if(this.isZero())return f.ZERO;if(!f.isLong(A))A=f.fromValue(A);if(m9){let z=m9.mul(this.low,this.high,A.low,A.high);return f.fromBits(z,m9.get_high(),this.unsigned)}if(A.isZero())return f.ZERO;if(this.eq(f.MIN_VALUE))return A.isOdd()?f.MIN_VALUE:f.ZERO;if(A.eq(f.MIN_VALUE))return this.isOdd()?f.MIN_VALUE:f.ZERO;if(this.isNegative())if(A.isNegative())return this.neg().mul(A.neg());else return this.neg().mul(A).neg();else if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(f.TWO_PWR_24)&&A.lt(f.TWO_PWR_24))return f.fromNumber(this.toNumber()*A.toNumber(),this.unsigned);let F=this.high>>>16,B=this.high&65535,$=this.low>>>16,Z=this.low&65535,D=A.high>>>16,X=A.high&65535,J=A.low>>>16,Y=A.low&65535,W=0,G=0,Q=0,q=0;return q+=Z*Y,Q+=q>>>16,q&=65535,Q+=$*Y,G+=Q>>>16,Q&=65535,Q+=Z*J,G+=Q>>>16,Q&=65535,G+=B*Y,W+=G>>>16,G&=65535,G+=$*J,W+=G>>>16,G&=65535,G+=Z*X,W+=G>>>16,G&=65535,W+=F*Y+B*J+$*X+Z*D,W&=65535,f.fromBits(Q<<16|q,W<<16|G,this.unsigned)}mul(A){return this.multiply(A)}negate(){if(!this.unsigned&&this.eq(f.MIN_VALUE))return f.MIN_VALUE;return this.not().add(f.ONE)}neg(){return this.negate()}not(){return f.fromBits(~this.low,~this.high,this.unsigned)}notEquals(A){return!this.equals(A)}neq(A){return this.notEquals(A)}ne(A){return this.notEquals(A)}or(A){if(!f.isLong(A))A=f.fromValue(A);return f.fromBits(this.low|A.low,this.high|A.high,this.unsigned)}shiftLeft(A){if(f.isLong(A))A=A.toInt();if((A&=63)===0)return this;else if(A<32)return f.fromBits(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned);else return f.fromBits(0,this.low<<A-32,this.unsigned)}shl(A){return this.shiftLeft(A)}shiftRight(A){if(f.isLong(A))A=A.toInt();if((A&=63)===0)return this;else if(A<32)return f.fromBits(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned);else return f.fromBits(this.high>>A-32,this.high>=0?0:-1,this.unsigned)}shr(A){return this.shiftRight(A)}shiftRightUnsigned(A){if(f.isLong(A))A=A.toInt();if(A&=63,A===0)return this;else{let F=this.high;if(A<32){let B=this.low;return f.fromBits(B>>>A|F<<32-A,F>>>A,this.unsigned)}else if(A===32)return f.fromBits(F,0,this.unsigned);else return f.fromBits(F>>>A-32,0,this.unsigned)}}shr_u(A){return this.shiftRightUnsigned(A)}shru(A){return this.shiftRightUnsigned(A)}subtract(A){if(!f.isLong(A))A=f.fromValue(A);return this.add(A.neg())}sub(A){return this.subtract(A)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*cF+(this.low>>>0);return this.high*cF+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(A){return A?this.toBytesLE():this.toBytesBE()}toBytesLE(){let A=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,A&255,A>>>8&255,A>>>16&255,A>>>24]}toBytesBE(){let A=this.high,F=this.low;return[A>>>24,A>>>16&255,A>>>8&255,A&255,F>>>24,F>>>16&255,F>>>8&255,F&255]}toSigned(){if(!this.unsigned)return this;return f.fromBits(this.low,this.high,!1)}toString(A){if(A=A||10,A<2||36<A)throw new n("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(f.MIN_VALUE)){let Z=f.fromNumber(A),D=this.div(Z),X=D.mul(Z).sub(this);return D.toString(A)+X.toInt().toString(A)}else return"-"+this.neg().toString(A);let F=f.fromNumber(Math.pow(A,6),this.unsigned),B=this,$="";while(!0){let Z=B.div(F),X=(B.sub(Z.mul(F)).toInt()>>>0).toString(A);if(B=Z,B.isZero())return X+$;else{while(X.length<6)X="0"+X;$=""+X+$}}}toUnsigned(){if(this.unsigned)return this;return f.fromBits(this.low,this.high,!0)}xor(A){if(!f.isLong(A))A=f.fromValue(A);return f.fromBits(this.low^A.low,this.high^A.high,this.unsigned)}eqz(){return this.isZero()}le(A){return this.lessThanOrEqual(A)}toExtendedJSON(A){if(A&&A.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(A,F){let{useBigInt64:B=!1,relaxed:$=!0}={...F};if(A.$numberLong.length>ZY1)throw new n("$numberLong string is too long");if(!DY1.test(A.$numberLong))throw new n(`$numberLong string "${A.$numberLong}" is in an invalid format`);if(B){let D=BigInt(A.$numberLong);return BigInt.asIntN(64,D)}let Z=f.fromString(A.$numberLong);if($)return Z.toNumber();return Z}inspect(A,F,B){B??=K9;let $=B(this.toString(),F),Z=this.unsigned?`, ${B(this.unsigned,F)}`:"";return`new Long(${$}${Z})`}}f.TWO_PWR_24=f.fromInt(BY1);f.MAX_UNSIGNED_VALUE=f.fromBits(-1,-1,!0);f.ZERO=f.fromInt(0);f.UZERO=f.fromInt(0,!0);f.ONE=f.fromInt(1);f.UONE=f.fromInt(1,!0);f.NEG_ONE=f.fromInt(-1);f.MAX_VALUE=f.fromBits(-1,2147483647,!1);f.MIN_VALUE=f.fromBits(0,-2147483648,!1);var XY1=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,JY1=/^(\+|-)?(Infinity|inf)$/i,YY1=/^(\+|-)?NaN$/i,uF=6111,GZ=-6176,$O=6176,ZO=34,GH=l.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),DO=l.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),XO=l.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),WY1=/^([-+])?(\d+)?$/,GY1=31,JO=16383,QY1=30,zY1=31;function YO(A){return!isNaN(parseInt(A,10))}function qY1(A){let F=f.fromNumber(1e9),B=f.fromNumber(0);if(!A.parts[0]&&!A.parts[1]&&!A.parts[2]&&!A.parts[3])return{quotient:A,rem:B};for(let $=0;$<=3;$++)B=B.shiftLeft(32),B=B.add(new f(A.parts[$],0)),A.parts[$]=B.div(F).low,B=B.modulo(F);return{quotient:A,rem:B}}function HY1(A,F){if(!A&&!F)return{high:f.fromNumber(0),low:f.fromNumber(0)};let B=A.shiftRightUnsigned(32),$=new f(A.getLowBits(),0),Z=F.shiftRightUnsigned(32),D=new f(F.getLowBits(),0),X=B.multiply(Z),J=B.multiply(D),Y=$.multiply(Z),W=$.multiply(D);return X=X.add(J.shiftRightUnsigned(32)),J=new f(J.getLowBits(),0).add(Y).add(W.shiftRightUnsigned(32)),X=X.add(J.shiftRightUnsigned(32)),W=J.shiftLeft(32).add(new f(W.getLowBits(),0)),{high:X,low:W}}function UY1(A,F){let B=A.high>>>0,$=F.high>>>0;if(B<$)return!0;else if(B===$){let Z=A.low>>>0,D=F.low>>>0;if(Z<D)return!0}return!1}function g7(A,F){throw new n(`"${A}" is not a valid Decimal128 string - ${F}`)}class n6 extends L4{get _bsontype(){return"Decimal128"}constructor(A){super();if(typeof A==="string")this.bytes=n6.fromString(A).bytes;else if(A instanceof Uint8Array||vF(A)){if(A.byteLength!==16)throw new n("Decimal128 must take a Buffer of 16 bytes");this.bytes=A}else throw new n("Decimal128 must take a Buffer or string")}static fromString(A){return n6._fromString(A,{allowRounding:!1})}static fromStringWithRounding(A){return n6._fromString(A,{allowRounding:!0})}static _fromString(A,F){let B=!1,$=!1,Z=!1,D=!1,X=0,J=0,Y=0,W=0,G=0,Q=[0],q=0,z=0,H=0,U=0,K=new f(0,0),E=new f(0,0),L=0,V=0;if(A.length>=7000)throw new n(""+A+" not a valid Decimal128 string");let M=A.match(XY1),O=A.match(JY1),R=A.match(YY1);if(!M&&!O&&!R||A.length===0)throw new n(""+A+" not a valid Decimal128 string");if(M){let N=M[2],y=M[4],S=M[5],k=M[6];if(y&&k===void 0)g7(A,"missing exponent power");if(y&&N===void 0)g7(A,"missing exponent base");if(y===void 0&&(S||k))g7(A,"missing e before exponent")}if(A[V]==="+"||A[V]==="-")$=!0,B=A[V++]==="-";if(!YO(A[V])&&A[V]!=="."){if(A[V]==="i"||A[V]==="I")return new n6(B?DO:XO);else if(A[V]==="N")return new n6(GH)}while(YO(A[V])||A[V]==="."){if(A[V]==="."){if(Z)g7(A,"contains multiple periods");Z=!0,V=V+1;continue}if(q<ZO){if(A[V]!=="0"||D){if(!D)G=J;D=!0,Q[z++]=parseInt(A[V],10),q=q+1}}if(D)Y=Y+1;if(Z)W=W+1;J=J+1,V=V+1}if(Z&&!J)throw new n(""+A+" not a valid Decimal128 string");if(A[V]==="e"||A[V]==="E"){let N=A.substr(++V).match(WY1);if(!N||!N[2])return new n6(GH);U=parseInt(N[0],10),V=V+N[0].length}if(A[V])return new n6(GH);if(!q)Q[0]=0,Y=1,q=1,X=0;else if(H=q-1,X=Y,X!==1)while(A[G+X-1+Number($)+Number(Z)]==="0")X=X-1;if(U<=W&&W>U+16384)U=GZ;else U=U-W;while(U>uF){if(H=H+1,H>=ZO){if(X===0){U=uF;break}g7(A,"overflow")}U=U-1}if(F.allowRounding){while(U<GZ||q<Y){if(H===0&&X<q){U=GZ,X=0;break}if(q<Y)Y=Y-1;else H=H-1;if(U<uF)U=U+1;else{if(Q.join("").match(/^0+$/)){U=uF;break}g7(A,"overflow")}}if(H+1<X){let N=J;if(Z)G=G+1,N=N+1;if($)G=G+1,N=N+1;let y=parseInt(A[G+H+1],10),S=0;if(y>=5){if(S=1,y===5){S=Q[H]%2===1?1:0;for(let k=G+H+2;k<N;k++)if(parseInt(A[k],10)){S=1;break}}}if(S){let k=H;for(;k>=0;k--)if(++Q[k]>9){if(Q[k]=0,k===0)if(U<uF)U=U+1,Q[k]=1;else return new n6(B?DO:XO)}else break}}}else{while(U<GZ||q<Y){if(H===0){if(X===0){U=GZ;break}g7(A,"exponent underflow")}if(q<Y){if(A[Y-1+Number($)+Number(Z)]!=="0"&&X!==0)g7(A,"inexact rounding");Y=Y-1}else{if(Q[H]!==0)g7(A,"inexact rounding");H=H-1}if(U<uF)U=U+1;else g7(A,"overflow")}if(H+1<X){if(Z)G=G+1;if($)G=G+1;if(parseInt(A[G+H+1],10)!==0)g7(A,"inexact rounding")}}if(K=f.fromNumber(0),E=f.fromNumber(0),X===0)K=f.fromNumber(0),E=f.fromNumber(0);else if(H<17){let N=0;E=f.fromNumber(Q[N++]),K=new f(0,0);for(;N<=H;N++)E=E.multiply(f.fromNumber(10)),E=E.add(f.fromNumber(Q[N]))}else{let N=0;K=f.fromNumber(Q[N++]);for(;N<=H-17;N++)K=K.multiply(f.fromNumber(10)),K=K.add(f.fromNumber(Q[N]));E=f.fromNumber(Q[N++]);for(;N<=H;N++)E=E.multiply(f.fromNumber(10)),E=E.add(f.fromNumber(Q[N]))}let _=HY1(K,f.fromString("100000000000000000"));if(_.low=_.low.add(E),UY1(_.low,E))_.high=_.high.add(f.fromNumber(1));L=U+$O;let P={low:f.fromNumber(0),high:f.fromNumber(0)};if(_.high.shiftRightUnsigned(49).and(f.fromNumber(1)).equals(f.fromNumber(1)))P.high=P.high.or(f.fromNumber(3).shiftLeft(61)),P.high=P.high.or(f.fromNumber(L).and(f.fromNumber(16383).shiftLeft(47))),P.high=P.high.or(_.high.and(f.fromNumber(140737488355327)));else P.high=P.high.or(f.fromNumber(L&16383).shiftLeft(49)),P.high=P.high.or(_.high.and(f.fromNumber(562949953421311)));if(P.low=_.low,B)P.high=P.high.or(f.fromString("9223372036854775808"));let T=l.allocateUnsafe(16);return V=0,T[V++]=P.low.low&255,T[V++]=P.low.low>>8&255,T[V++]=P.low.low>>16&255,T[V++]=P.low.low>>24&255,T[V++]=P.low.high&255,T[V++]=P.low.high>>8&255,T[V++]=P.low.high>>16&255,T[V++]=P.low.high>>24&255,T[V++]=P.high.low&255,T[V++]=P.high.low>>8&255,T[V++]=P.high.low>>16&255,T[V++]=P.high.low>>24&255,T[V++]=P.high.high&255,T[V++]=P.high.high>>8&255,T[V++]=P.high.high>>16&255,T[V++]=P.high.high>>24&255,new n6(T)}toString(){let A,F=0,B=new Array(36);for(let V=0;V<B.length;V++)B[V]=0;let $=0,Z=!1,D,X={parts:[0,0,0,0]},J,Y,W=[];$=0;let G=this.bytes,Q=G[$++]|G[$++]<<8|G[$++]<<16|G[$++]<<24,q=G[$++]|G[$++]<<8|G[$++]<<16|G[$++]<<24,z=G[$++]|G[$++]<<8|G[$++]<<16|G[$++]<<24,H=G[$++]|G[$++]<<8|G[$++]<<16|G[$++]<<24;if($=0,{low:new f(Q,q),high:new f(z,H)}.high.lessThan(f.ZERO))W.push("-");let K=H>>26&GY1;if(K>>3===3)if(K===QY1)return W.join("")+"Infinity";else if(K===zY1)return"NaN";else A=H>>15&JO,D=8+(H>>14&1);else D=H>>14&7,A=H>>17&JO;let E=A-$O;if(X.parts[0]=(H&16383)+((D&15)<<14),X.parts[1]=z,X.parts[2]=q,X.parts[3]=Q,X.parts[0]===0&&X.parts[1]===0&&X.parts[2]===0&&X.parts[3]===0)Z=!0;else for(Y=3;Y>=0;Y--){let V=0,M=qY1(X);if(X=M.quotient,V=M.rem.low,!V)continue;for(J=8;J>=0;J--)B[Y*9+J]=V%10,V=Math.floor(V/10)}if(Z)F=1,B[$]=0;else{F=36;while(!B[$])F=F-1,$=$+1}let L=F-1+E;if(L>=34||L<=-7||E>0){if(F>34){if(W.push("0"),E>0)W.push(`E+${E}`);else if(E<0)W.push(`E${E}`);return W.join("")}if(W.push(`${B[$++]}`),F=F-1,F)W.push(".");for(let V=0;V<F;V++)W.push(`${B[$++]}`);if(W.push("E"),L>0)W.push(`+${L}`);else W.push(`${L}`)}else if(E>=0)for(let V=0;V<F;V++)W.push(`${B[$++]}`);else{let V=F+E;if(V>0)for(let M=0;M<V;M++)W.push(`${B[$++]}`);else W.push("0");W.push(".");while(V++<0)W.push("0");for(let M=0;M<F-Math.max(V-1,0);M++)W.push(`${B[$++]}`)}return W.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(A){return n6.fromString(A.$numberDecimal)}inspect(A,F,B){return B??=K9,`new Decimal128(${B(this.toString(),F)})`}}class c9 extends L4{get _bsontype(){return"Double"}constructor(A){super();if(A instanceof Number)A=A.valueOf();this.value=+A}static fromString(A){let F=Number(A);if(A==="NaN")return new c9(NaN);if(A==="Infinity")return new c9(1/0);if(A==="-Infinity")return new c9(-1/0);if(!Number.isFinite(F))throw new n(`Input: ${A} is not representable as a Double`);if(A.trim()!==A)throw new n(`Input: '${A}' contains whitespace`);if(A==="")throw new n("Input is an empty string");if(/[^-0-9.+eE]/.test(A))throw new n(`Input: '${A}' is not in decimal or exponential notation`);return new c9(F)}valueOf(){return this.value}toJSON(){return this.value}toString(A){return this.value.toString(A)}toExtendedJSON(A){if(A&&(A.legacy||A.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(A,F){let B=parseFloat(A.$numberDouble);return F&&F.relaxed?B:new c9(B)}inspect(A,F,B){return B??=K9,`new Double(${B(this.value,F)})`}}class B3 extends L4{get _bsontype(){return"Int32"}constructor(A){super();if(A instanceof Number)A=A.valueOf();this.value=+A|0}static fromString(A){let F=kO(A),B=Number(A);if(UZ<B)throw new n(`Input: '${A}' is larger than the maximum value for Int32`);else if(CZ>B)throw new n(`Input: '${A}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(B))throw new n(`Input: '${A}' is not a safe integer`);else if(B.toString()!==F)throw new n(`Input: '${A}' is not a valid Int32 string`);return new B3(B)}valueOf(){return this.value}toString(A){return this.value.toString(A)}toJSON(){return this.value}toExtendedJSON(A){if(A&&(A.relaxed||A.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(A,F){return F&&F.relaxed?parseInt(A.$numberInt,10):new B3(A.$numberInt)}inspect(A,F,B){return B??=K9,`new Int32(${B(this.value,F)})`}}class XA extends L4{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new XA}inspect(){return"new MaxKey()"}}class JA extends L4{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new JA}inspect(){return"new MinKey()"}}var ZA=null,QZ=new WeakMap;class e0 extends L4{get _bsontype(){return"ObjectId"}constructor(A){super();let F;if(typeof A==="object"&&A&&"id"in A){if(typeof A.id!=="string"&&!ArrayBuffer.isView(A.id))throw new n("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in A&&typeof A.toHexString==="function")F=l.fromHex(A.toHexString());else F=A.id}else F=A;if(F==null||typeof F==="number")this.buffer=e0.generate(typeof F==="number"?F:void 0);else if(ArrayBuffer.isView(F)&&F.byteLength===12)this.buffer=l.toLocalBufferType(F);else if(typeof F==="string")if(e0.validateHexString(F)){if(this.buffer=l.fromHex(F),e0.cacheHexString)QZ.set(this,F)}else throw new n("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new n("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(A){if(this.buffer=A,e0.cacheHexString)QZ.set(this,l.toHex(A))}static validateHexString(A){if(A?.length!==24)return!1;for(let F=0;F<24;F++){let B=A.charCodeAt(F);if(B>=48&&B<=57||B>=97&&B<=102||B>=65&&B<=70)continue;return!1}return!0}toHexString(){if(e0.cacheHexString){let F=QZ.get(this);if(F)return F}let A=l.toHex(this.id);if(e0.cacheHexString)QZ.set(this,A);return A}static getInc(){return e0.index=(e0.index+1)%16777215}static generate(A){if(typeof A!=="number")A=Math.floor(Date.now()/1000);let F=e0.getInc(),B=l.allocateUnsafe(12);if(j1.setInt32BE(B,0,A),ZA===null)ZA=l.randomBytes(5);return B[4]=ZA[0],B[5]=ZA[1],B[6]=ZA[2],B[7]=ZA[3],B[8]=ZA[4],B[11]=F&255,B[10]=F>>8&255,B[9]=F>>16&255,B}toString(A){if(A==="base64")return l.toBase64(this.id);if(A==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(A){return A!=null&&typeof A==="object"&&"_bsontype"in A&&A._bsontype==="ObjectId"}equals(A){if(A===void 0||A===null)return!1;if(e0.is(A))return this.buffer[11]===A.buffer[11]&&l.equals(this.buffer,A.buffer);if(typeof A==="string")return A.toLowerCase()===this.toHexString();if(typeof A==="object"&&typeof A.toHexString==="function"){let F=A.toHexString(),B=this.toHexString();return typeof F==="string"&&F.toLowerCase()===B}return!1}getTimestamp(){let A=new Date,F=j1.getUint32BE(this.buffer,0);return A.setTime(Math.floor(F)*1000),A}static createPk(){return new e0}serializeInto(A,F){return A[F]=this.buffer[0],A[F+1]=this.buffer[1],A[F+2]=this.buffer[2],A[F+3]=this.buffer[3],A[F+4]=this.buffer[4],A[F+5]=this.buffer[5],A[F+6]=this.buffer[6],A[F+7]=this.buffer[7],A[F+8]=this.buffer[8],A[F+9]=this.buffer[9],A[F+10]=this.buffer[10],A[F+11]=this.buffer[11],12}static createFromTime(A){let F=l.allocate(12);for(let B=11;B>=4;B--)F[B]=0;return j1.setInt32BE(F,0,A),new e0(F)}static createFromHexString(A){if(A?.length!==24)throw new n("hex string must be 24 characters");return new e0(l.fromHex(A))}static createFromBase64(A){if(A?.length!==16)throw new n("base64 string must be 16 characters");return new e0(l.fromBase64(A))}static isValid(A){if(A==null)return!1;if(typeof A==="string")return e0.validateHexString(A);try{return new e0(A),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(A){return new e0(A.$oid)}isCached(){return e0.cacheHexString&&QZ.has(this)}inspect(A,F,B){return B??=K9,`new ObjectId(${B(this.toHexString(),F)})`}}e0.index=Math.floor(Math.random()*16777215);function JY(A,F,B){let $=5;if(Array.isArray(A))for(let Z=0;Z<A.length;Z++)$+=WO(Z.toString(),A[Z],F,!0,B);else{if(typeof A?.toBSON==="function")A=A.toBSON();for(let Z of Object.keys(A))$+=WO(Z,A[Z],F,!1,B)}return $}function WO(A,F,B=!1,$=!1,Z=!1){if(typeof F?.toBSON==="function")F=F.toBSON();switch(typeof F){case"string":return 1+l.utf8ByteLength(A)+1+4+l.utf8ByteLength(F)+1;case"number":if(Math.floor(F)===F&&F>=UO&&F<=HO)if(F>=CZ&&F<=UZ)return(A!=null?l.utf8ByteLength(A)+1:0)+5;else return(A!=null?l.utf8ByteLength(A)+1:0)+9;else return(A!=null?l.utf8ByteLength(A)+1:0)+9;case"undefined":if($||!Z)return(A!=null?l.utf8ByteLength(A)+1:0)+1;return 0;case"boolean":return(A!=null?l.utf8ByteLength(A)+1:0)+2;case"object":if(F!=null&&typeof F._bsontype==="string"&&F[lF]!==DA)throw new F5;else if(F==null||F._bsontype==="MinKey"||F._bsontype==="MaxKey")return(A!=null?l.utf8ByteLength(A)+1:0)+1;else if(F._bsontype==="ObjectId")return(A!=null?l.utf8ByteLength(A)+1:0)+13;else if(F instanceof Date||dF(F))return(A!=null?l.utf8ByteLength(A)+1:0)+9;else if(ArrayBuffer.isView(F)||F instanceof ArrayBuffer||xH(F))return(A!=null?l.utf8ByteLength(A)+1:0)+6+F.byteLength;else if(F._bsontype==="Long"||F._bsontype==="Double"||F._bsontype==="Timestamp")return(A!=null?l.utf8ByteLength(A)+1:0)+9;else if(F._bsontype==="Decimal128")return(A!=null?l.utf8ByteLength(A)+1:0)+17;else if(F._bsontype==="Code")if(F.scope!=null&&Object.keys(F.scope).length>0)return(A!=null?l.utf8ByteLength(A)+1:0)+1+4+4+l.utf8ByteLength(F.code.toString())+1+JY(F.scope,B,Z);else return(A!=null?l.utf8ByteLength(A)+1:0)+1+4+l.utf8ByteLength(F.code.toString())+1;else if(F._bsontype==="Binary"){let D=F;if(D.sub_type===N1.SUBTYPE_BYTE_ARRAY)return(A!=null?l.utf8ByteLength(A)+1:0)+(D.position+1+4+1+4);else return(A!=null?l.utf8ByteLength(A)+1:0)+(D.position+1+4+1)}else if(F._bsontype==="Symbol")return(A!=null?l.utf8ByteLength(A)+1:0)+l.utf8ByteLength(F.value)+4+1+1;else if(F._bsontype==="DBRef"){let D=Object.assign({$ref:F.collection,$id:F.oid},F.fields);if(F.db!=null)D.$db=F.db;return(A!=null?l.utf8ByteLength(A)+1:0)+1+JY(D,B,Z)}else if(F instanceof RegExp||hF(F))return(A!=null?l.utf8ByteLength(A)+1:0)+1+l.utf8ByteLength(F.source)+1+(F.global?1:0)+(F.ignoreCase?1:0)+(F.multiline?1:0)+1;else if(F._bsontype==="BSONRegExp")return(A!=null?l.utf8ByteLength(A)+1:0)+1+l.utf8ByteLength(F.pattern)+1+l.utf8ByteLength(F.options)+1;else return(A!=null?l.utf8ByteLength(A)+1:0)+JY(F,B,Z)+1;case"function":if(B)return(A!=null?l.utf8ByteLength(A)+1:0)+1+4+l.utf8ByteLength(F.toString())+1;return 0;case"bigint":return(A!=null?l.utf8ByteLength(A)+1:0)+9;case"symbol":return 0;default:throw new n(`Unrecognized JS type: ${typeof F}`)}}function CY1(A){return A.split("").sort().join("")}class p9 extends L4{get _bsontype(){return"BSONRegExp"}constructor(A,F){super();if(this.pattern=A,this.options=CY1(F??""),this.pattern.indexOf("\x00")!==-1)throw new n(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new n(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let B=0;B<this.options.length;B++)if(!(this.options[B]==="i"||this.options[B]==="m"||this.options[B]==="x"||this.options[B]==="l"||this.options[B]==="s"||this.options[B]==="u"))throw new n(`The regular expression option [${this.options[B]}] is not supported`)}static parseOptions(A){return A?A.split("").sort().join(""):""}toExtendedJSON(A){if(A=A||{},A.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(A){if("$regex"in A)if(typeof A.$regex!=="string"){if(A.$regex._bsontype==="BSONRegExp")return A}else return new p9(A.$regex,p9.parseOptions(A.$options));if("$regularExpression"in A)return new p9(A.$regularExpression.pattern,p9.parseOptions(A.$regularExpression.options));throw new n(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(A)}`)}inspect(A,F,B){let $=mJ1(F)??((X)=>X);B??=K9;let Z=$(B(this.pattern),"regexp"),D=$(B(this.options),"regexp");return`new BSONRegExp(${Z}, ${D})`}}class YA extends L4{get _bsontype(){return"BSONSymbol"}constructor(A){super();this.value=A}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(A){return new YA(A.$symbol)}inspect(A,F,B){return B??=K9,`new BSONSymbol(${B(this.value,F)})`}}var KY1=f;class l9 extends KY1{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(A){if(A==null)super(0,0,!0);else if(typeof A==="bigint")super(A,!0);else if(f.isLong(A))super(A.low,A.high,!0);else if(typeof A==="object"&&"t"in A&&"i"in A){if(typeof A.t!=="number"&&(typeof A.t!=="object"||A.t._bsontype!=="Int32"))throw new n("Timestamp constructed from { t, i } must provide t as a number");if(typeof A.i!=="number"&&(typeof A.i!=="object"||A.i._bsontype!=="Int32"))throw new n("Timestamp constructed from { t, i } must provide i as a number");let F=Number(A.t),B=Number(A.i);if(F<0||Number.isNaN(F))throw new n("Timestamp constructed from { t, i } must provide a positive t");if(B<0||Number.isNaN(B))throw new n("Timestamp constructed from { t, i } must provide a positive i");if(F>4294967295)throw new n("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(B>4294967295)throw new n("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(B,F,!0)}else throw new n("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(A){return new l9(f.fromInt(A,!0))}static fromNumber(A){return new l9(f.fromNumber(A,!0))}static fromBits(A,F){return new l9({i:A,t:F})}static fromString(A,F){return new l9(f.fromString(A,!0,F))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(A){let F=f.isLong(A.$timestamp.i)?A.$timestamp.i.getLowBitsUnsigned():A.$timestamp.i,B=f.isLong(A.$timestamp.t)?A.$timestamp.t.getLowBitsUnsigned():A.$timestamp.t;return new l9({t:B,i:F})}inspect(A,F,B){B??=K9;let $=B(this.t,F),Z=B(this.i,F);return`new Timestamp({ t: ${$}, i: ${Z} })`}}l9.MAX_VALUE=f.MAX_UNSIGNED_VALUE;var EY1=f.fromNumber(HO),LY1=f.fromNumber(UO);function xO(A,F,B){F=F==null?{}:F;let $=F&&F.index?F.index:0,Z=j1.getInt32LE(A,$);if(Z<5)throw new n(`bson size must be >= 5, is ${Z}`);if(F.allowObjectSmallerThanBufferSize&&A.length<Z)throw new n(`buffer length ${A.length} must be >= bson size ${Z}`);if(!F.allowObjectSmallerThanBufferSize&&A.length!==Z)throw new n(`buffer length ${A.length} must === bson size ${Z}`);if(Z+$>A.byteLength)throw new n(`(bson size ${Z} + options.index ${$} must be <= buffer length ${A.byteLength})`);if(A[$+Z-1]!==0)throw new n("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return YY(A,$,F,B)}var wY1=/^\$ref$|^\$id$|^\$db$/;function YY(A,F,B,$=!1){let Z=B.fieldsAsRaw==null?null:B.fieldsAsRaw,D=B.raw==null?!1:B.raw,X=typeof B.bsonRegExp==="boolean"?B.bsonRegExp:!1,J=B.promoteBuffers??!1,Y=B.promoteLongs??!0,W=B.promoteValues??!0,G=B.useBigInt64??!1;if(G&&!W)throw new n("Must either request bigint or Long for int64 deserialization");if(G&&!Y)throw new n("Must either request bigint or Long for int64 deserialization");let Q=B.validation==null?{utf8:!0}:B.validation,q=!0,z,H,U=Q.utf8;if(typeof U==="boolean")z=U;else{q=!1;let O=Object.keys(U).map(function(R){return U[R]});if(O.length===0)throw new n("UTF-8 validation setting cannot be empty");if(typeof O[0]!=="boolean")throw new n("Invalid UTF-8 validation option, must specify boolean values");if(z=O[0],!O.every((R)=>R===z))throw new n("Invalid UTF-8 validation option - keys must be all true or all false")}if(!q){H=new Set;for(let O of Object.keys(U))H.add(O)}let K=F;if(A.length<5)throw new n("corrupt bson message < 5 bytes long");let E=j1.getInt32LE(A,F);if(F+=4,E<5||E>A.length)throw new n("corrupt bson message");let L=$?[]:{},V=0,M=$?!1:null;while(!0){let O=A[F++];if(O===0)break;let R=F;while(A[R]!==0&&R<A.length)R++;if(R>=A.byteLength)throw new n("Bad BSON Document: illegal CString");let _=$?V++:l.toUTF8(A,F,R,!1),P=!0;if(q||H?.has(_))P=z;else P=!z;if(M!==!1&&_[0]==="$")M=wY1.test(_);let T;if(F=R+1,O===CO){let N=j1.getInt32LE(A,F);if(F+=4,N<=0||N>A.length-F||A[F+N-1]!==0)throw new n("bad string length in bson");T=l.toUTF8(A,F,F+N-1,P),F=F+N}else if(O===EO){let N=l.allocateUnsafe(12);for(let y=0;y<12;y++)N[y]=A[F+y];T=new e0(N),F=F+12}else if(O===zZ&&W===!1)T=new B3(j1.getInt32LE(A,F)),F+=4;else if(O===zZ)T=j1.getInt32LE(A,F),F+=4;else if(O===fH){if(T=j1.getFloat64LE(A,F),F+=8,W===!1)T=new c9(T)}else if(O===wO){let N=j1.getInt32LE(A,F),y=j1.getInt32LE(A,F+4);F+=8,T=new Date(new f(N,y).toNumber())}else if(O===LO){if(A[F]!==0&&A[F]!==1)throw new n("illegal boolean type value");T=A[F++]===1}else if(O===gH){let N=F,y=j1.getInt32LE(A,F);if(y<=0||y>A.length-F)throw new n("bad embedded document length in bson");if(D)T=A.subarray(F,F+y);else{let S=B;if(!q)S={...B,validation:{utf8:P}};T=YY(A,N,S,!1)}F=F+y}else if(O===KO){let N=F,y=j1.getInt32LE(A,F),S=B,k=F+y;if(Z&&Z[_])S={...B,raw:!0};if(!q)S={...S,validation:{utf8:P}};if(T=YY(A,N,S,!0),F=F+y,A[F-1]!==0)throw new n("invalid array terminator byte");if(F!==k)throw new n("corrupted array bson")}else if(O===cJ1)T=void 0;else if(O===yH)T=null;else if(O===hH)if(G)T=j1.getBigInt64LE(A,F),F+=8;else{let N=j1.getInt32LE(A,F),y=j1.getInt32LE(A,F+4);F+=8;let S=new f(N,y);if(Y&&W===!0)T=S.lessThanOrEqual(EY1)&&S.greaterThanOrEqual(LY1)?S.toNumber():S;else T=S}else if(O===RO){let N=l.allocateUnsafe(16);for(let y=0;y<16;y++)N[y]=A[F+y];F=F+16,T=new n6(N)}else if(O===uH){let N=j1.getInt32LE(A,F);F+=4;let y=N,S=A[F++];if(N<0)throw new n("Negative binary type element size found");if(N>A.byteLength)throw new n("Binary type size larger than document size");if(S===N1.SUBTYPE_BYTE_ARRAY){if(N=j1.getInt32LE(A,F),F+=4,N<0)throw new n("Negative binary type element size found for subtype 0x02");if(N>y-4)throw new n("Binary type with subtype 0x02 contains too long binary size");if(N<y-4)throw new n("Binary type with subtype 0x02 contains too short binary size")}if(J&&W)T=l.toLocalBufferType(A.subarray(F,F+N));else if(T=new N1(A.subarray(F,F+N),S),S===dH&&P6.isValid(T))T=T.toUUID();F=F+N}else if(O===WY&&X===!1){R=F;while(A[R]!==0&&R<A.length)R++;if(R>=A.length)throw new n("Bad BSON Document: illegal CString");let N=l.toUTF8(A,F,R,!1);F=R+1,R=F;while(A[R]!==0&&R<A.length)R++;if(R>=A.length)throw new n("Bad BSON Document: illegal CString");let y=l.toUTF8(A,F,R,!1);F=R+1;let S=new Array(y.length);for(R=0;R<y.length;R++)switch(y[R]){case"m":S[R]="m";break;case"s":S[R]="g";break;case"i":S[R]="i";break}T=new RegExp(N,S.join(""))}else if(O===WY&&X===!0){R=F;while(A[R]!==0&&R<A.length)R++;if(R>=A.length)throw new n("Bad BSON Document: illegal CString");let N=l.toUTF8(A,F,R,!1);F=R+1,R=F;while(A[R]!==0&&R<A.length)R++;if(R>=A.length)throw new n("Bad BSON Document: illegal CString");let y=l.toUTF8(A,F,R,!1);F=R+1,T=new p9(N,y)}else if(O===VO){let N=j1.getInt32LE(A,F);if(F+=4,N<=0||N>A.length-F||A[F+N-1]!==0)throw new n("bad string length in bson");let y=l.toUTF8(A,F,F+N-1,P);T=W?y:new YA(y),F=F+N}else if(O===MO)T=new l9({i:j1.getUint32LE(A,F),t:j1.getUint32LE(A,F+4)}),F+=8;else if(O===PO)T=new JA;else if(O===jO)T=new XA;else if(O===vH){let N=j1.getInt32LE(A,F);if(F+=4,N<=0||N>A.length-F||A[F+N-1]!==0)throw new n("bad string length in bson");let y=l.toUTF8(A,F,F+N-1,P);T=new F3(y),F=F+N}else if(O===NO){let N=j1.getInt32LE(A,F);if(F+=4,N<13)throw new n("code_w_scope total size shorter minimum expected length");let y=j1.getInt32LE(A,F);if(F+=4,y<=0||y>A.length-F||A[F+y-1]!==0)throw new n("bad string length in bson");let S=l.toUTF8(A,F,F+y-1,P);F=F+y;let k=F,v=j1.getInt32LE(A,F),J1=YY(A,k,B,!1);if(F=F+v,N<8+v+y)throw new n("code_w_scope total size is too short, truncating scope");if(N>8+v+y)throw new n("code_w_scope total size is too long, clips outer document");T=new F3(S,J1)}else if(O===lJ1){let N=j1.getInt32LE(A,F);if(F+=4,N<=0||N>A.length-F||A[F+N-1]!==0)throw new n("bad string length in bson");let y=l.toUTF8(A,F,F+N-1,P);F=F+N;let S=l.allocateUnsafe(12);for(let v=0;v<12;v++)S[v]=A[F+v];let k=new e0(S);F=F+12,T=new z8(y,k)}else throw new n(`Detected unknown BSON type ${O.toString(16)} for fieldname "${_}"`);if(_==="__proto__")Object.defineProperty(L,_,{value:T,writable:!0,enumerable:!0,configurable:!0});else L[_]=T}if(E!==F-K){if($)throw new n("corrupt array bson");throw new n("corrupt object bson")}if(!M)return L;if(SO(L)){let O=Object.assign({},L);return delete O.$ref,delete O.$id,delete O.$db,new z8(L.$ref,L.$id,L.$db,O)}return L}var GY=/\x00/,GO=new Set(["$db","$ref","$id","$clusterTime"]);function QH(A,F,B,$){A[$++]=CO;let Z=l.encodeUTF8Into(A,F,$);$=$+Z+1,A[$-1]=0;let D=l.encodeUTF8Into(A,B,$+4);return j1.setInt32LE(A,$,D+1),$=$+4+D,A[$++]=0,$}function zH(A,F,B,$){let D=!Object.is(B,-0)&&Number.isSafeInteger(B)&&B<=UZ&&B>=CZ?zZ:fH;A[$++]=D;let X=l.encodeUTF8Into(A,F,$);if($=$+X,A[$++]=0,D===zZ)$+=j1.setInt32LE(A,$,B);else $+=j1.setFloat64LE(A,$,B);return $}function qH(A,F,B,$){A[$++]=hH;let Z=l.encodeUTF8Into(A,F,$);return $+=Z,A[$++]=0,$+=j1.setBigInt64LE(A,$,B),$}function yF(A,F,B,$){A[$++]=yH;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,$}function HH(A,F,B,$){A[$++]=LO;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,A[$++]=B?1:0,$}function UH(A,F,B,$){A[$++]=wO;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let D=f.fromNumber(B.getTime()),X=D.getLowBits(),J=D.getHighBits();return $+=j1.setInt32LE(A,$,X),$+=j1.setInt32LE(A,$,J),$}function CH(A,F,B,$){A[$++]=WY;let Z=l.encodeUTF8Into(A,F,$);if($=$+Z,A[$++]=0,B.source&&B.source.match(GY)!=null)throw new n("value "+B.source+" must not contain null bytes");if($=$+l.encodeUTF8Into(A,B.source,$),A[$++]=0,B.ignoreCase)A[$++]=105;if(B.global)A[$++]=115;if(B.multiline)A[$++]=109;return A[$++]=0,$}function KH(A,F,B,$){A[$++]=WY;let Z=l.encodeUTF8Into(A,F,$);if($=$+Z,A[$++]=0,B.pattern.match(GY)!=null)throw new n("pattern "+B.pattern+" must not contain null bytes");$=$+l.encodeUTF8Into(A,B.pattern,$),A[$++]=0;let D=B.options.split("").sort().join("");return $=$+l.encodeUTF8Into(A,D,$),A[$++]=0,$}function EH(A,F,B,$){if(B===null)A[$++]=yH;else if(B._bsontype==="MinKey")A[$++]=PO;else A[$++]=jO;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,$}function LH(A,F,B,$){A[$++]=EO;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,$+=B.serializeInto(A,$),$}function wH(A,F,B,$){A[$++]=uH;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let D=B.length;if($+=j1.setInt32LE(A,$,D),A[$++]=pJ1,D<=16)for(let X=0;X<D;X++)A[$+X]=B[X];else A.set(B,$);return $=$+D,$}function VH(A,F,B,$,Z,D,X,J,Y){if(Y.has(B))throw new n("Cannot convert circular structure to BSON");Y.add(B),A[$++]=Array.isArray(B)?KO:gH;let W=l.encodeUTF8Into(A,F,$);$=$+W,A[$++]=0;let G=KZ(A,B,Z,$,D+1,X,J,Y);return Y.delete(B),G}function NH(A,F,B,$){A[$++]=RO;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;for(let D=0;D<16;D++)A[$+D]=B.bytes[D];return $+16}function MH(A,F,B,$){A[$++]=B._bsontype==="Long"?hH:MO;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let D=B.getLowBits(),X=B.getHighBits();return $+=j1.setInt32LE(A,$,D),$+=j1.setInt32LE(A,$,X),$}function RH(A,F,B,$){B=B.valueOf(),A[$++]=zZ;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,$+=j1.setInt32LE(A,$,B),$}function PH(A,F,B,$){A[$++]=fH;let Z=l.encodeUTF8Into(A,F,$);return $=$+Z,A[$++]=0,$+=j1.setFloat64LE(A,$,B.value),$}function jH(A,F,B,$){A[$++]=vH;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let D=B.toString(),X=l.encodeUTF8Into(A,D,$+4)+1;return j1.setInt32LE(A,$,X),$=$+4+X-1,A[$++]=0,$}function IH(A,F,B,$,Z=!1,D=0,X=!1,J=!0,Y){if(B.scope&&typeof B.scope==="object"){A[$++]=NO;let W=l.encodeUTF8Into(A,F,$);$=$+W,A[$++]=0;let G=$,Q=B.code;$=$+4;let q=l.encodeUTF8Into(A,Q,$+4)+1;j1.setInt32LE(A,$,q),A[$+4+q-1]=0,$=$+q+4;let z=KZ(A,B.scope,Z,$,D+1,X,J,Y);$=z-1;let H=z-G;G+=j1.setInt32LE(A,G,H),A[$++]=0}else{A[$++]=vH;let W=l.encodeUTF8Into(A,F,$);$=$+W,A[$++]=0;let G=B.code.toString(),Q=l.encodeUTF8Into(A,G,$+4)+1;j1.setInt32LE(A,$,Q),$=$+4+Q-1,A[$++]=0}return $}function TH(A,F,B,$){A[$++]=uH;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let{buffer:D,position:X}=B;if(B.sub_type===N1.SUBTYPE_BYTE_ARRAY)X=X+4;if($+=j1.setInt32LE(A,$,X),A[$++]=B.sub_type,B.sub_type===N1.SUBTYPE_BYTE_ARRAY)X=X-4,$+=j1.setInt32LE(A,$,X);if(B.sub_type===N1.SUBTYPE_VECTOR)o8(B);if(X<=16)for(let J=0;J<X;J++)A[$+J]=D[J];else A.set(D,$);return $=$+B.position,$}function OH(A,F,B,$){A[$++]=VO;let Z=l.encodeUTF8Into(A,F,$);$=$+Z,A[$++]=0;let D=l.encodeUTF8Into(A,B.value,$+4)+1;return j1.setInt32LE(A,$,D),$=$+4+D-1,A[$++]=0,$}function SH(A,F,B,$,Z,D,X){A[$++]=gH;let J=l.encodeUTF8Into(A,F,$);$=$+J,A[$++]=0;let Y=$,W={$ref:B.collection||B.namespace,$id:B.oid};if(B.db!=null)W.$db=B.db;W=Object.assign(W,B.fields);let G=KZ(A,W,!1,$,Z+1,D,!0,X),Q=G-Y;return Y+=j1.setInt32LE(A,$,Q),G}function KZ(A,F,B,$,Z,D,X,J){if(J==null){if(F==null)return A[0]=5,A[1]=0,A[2]=0,A[3]=0,A[4]=0,5;if(Array.isArray(F))throw new n("serialize does not support an array as the root input");if(typeof F!=="object")throw new n("serialize does not support non-object as the root input");else if("_bsontype"in F&&typeof F._bsontype==="string")throw new n("BSON types cannot be serialized as a document");else if(dF(F)||hF(F)||vF(F)||xH(F))throw new n("date, regexp, typedarray, and arraybuffer cannot be BSON documents");J=new Set}J.add(F);let Y=$+4;if(Array.isArray(F))for(let G=0;G<F.length;G++){let Q=`${G}`,q=F[G];if(typeof q?.toBSON==="function")q=q.toBSON();let z=typeof q;if(q===void 0)Y=yF(A,Q,q,Y);else if(q===null)Y=yF(A,Q,q,Y);else if(z==="string")Y=QH(A,Q,q,Y);else if(z==="number")Y=zH(A,Q,q,Y);else if(z==="bigint")Y=qH(A,Q,q,Y);else if(z==="boolean")Y=HH(A,Q,q,Y);else if(z==="object"&&q._bsontype==null)if(q instanceof Date||dF(q))Y=UH(A,Q,q,Y);else if(q instanceof Uint8Array||vF(q))Y=wH(A,Q,q,Y);else if(q instanceof RegExp||hF(q))Y=CH(A,Q,q,Y);else Y=VH(A,Q,q,Y,B,Z,D,X,J);else if(z==="object"){if(q[lF]!==DA)throw new F5;else if(q._bsontype==="ObjectId")Y=LH(A,Q,q,Y);else if(q._bsontype==="Decimal128")Y=NH(A,Q,q,Y);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")Y=MH(A,Q,q,Y);else if(q._bsontype==="Double")Y=PH(A,Q,q,Y);else if(q._bsontype==="Code")Y=IH(A,Q,q,Y,B,Z,D,X,J);else if(q._bsontype==="Binary")Y=TH(A,Q,q,Y);else if(q._bsontype==="BSONSymbol")Y=OH(A,Q,q,Y);else if(q._bsontype==="DBRef")Y=SH(A,Q,q,Y,Z,D,J);else if(q._bsontype==="BSONRegExp")Y=KH(A,Q,q,Y);else if(q._bsontype==="Int32")Y=RH(A,Q,q,Y);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")Y=EH(A,Q,q,Y);else if(typeof q._bsontype!=="undefined")throw new n(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}else if(z==="function"&&D)Y=jH(A,Q,q,Y)}else if(F instanceof Map||bH(F)){let G=F.entries(),Q=!1;while(!Q){let q=G.next();if(Q=!!q.done,Q)continue;let z=q.value?q.value[0]:void 0,H=q.value?q.value[1]:void 0;if(typeof H?.toBSON==="function")H=H.toBSON();let U=typeof H;if(typeof z==="string"&&!GO.has(z)){if(z.match(GY)!=null)throw new n("key "+z+" must not contain null bytes");if(B){if(z[0]==="$")throw new n("key "+z+" must not start with '$'");else if(z.includes("."))throw new n("key "+z+" must not contain '.'")}}if(H===void 0){if(X===!1)Y=yF(A,z,H,Y)}else if(H===null)Y=yF(A,z,H,Y);else if(U==="string")Y=QH(A,z,H,Y);else if(U==="number")Y=zH(A,z,H,Y);else if(U==="bigint")Y=qH(A,z,H,Y);else if(U==="boolean")Y=HH(A,z,H,Y);else if(U==="object"&&H._bsontype==null)if(H instanceof Date||dF(H))Y=UH(A,z,H,Y);else if(H instanceof Uint8Array||vF(H))Y=wH(A,z,H,Y);else if(H instanceof RegExp||hF(H))Y=CH(A,z,H,Y);else Y=VH(A,z,H,Y,B,Z,D,X,J);else if(U==="object"){if(H[lF]!==DA)throw new F5;else if(H._bsontype==="ObjectId")Y=LH(A,z,H,Y);else if(H._bsontype==="Decimal128")Y=NH(A,z,H,Y);else if(H._bsontype==="Long"||H._bsontype==="Timestamp")Y=MH(A,z,H,Y);else if(H._bsontype==="Double")Y=PH(A,z,H,Y);else if(H._bsontype==="Code")Y=IH(A,z,H,Y,B,Z,D,X,J);else if(H._bsontype==="Binary")Y=TH(A,z,H,Y);else if(H._bsontype==="BSONSymbol")Y=OH(A,z,H,Y);else if(H._bsontype==="DBRef")Y=SH(A,z,H,Y,Z,D,J);else if(H._bsontype==="BSONRegExp")Y=KH(A,z,H,Y);else if(H._bsontype==="Int32")Y=RH(A,z,H,Y);else if(H._bsontype==="MinKey"||H._bsontype==="MaxKey")Y=EH(A,z,H,Y);else if(typeof H._bsontype!=="undefined")throw new n(`Unrecognized or invalid _bsontype: ${String(H._bsontype)}`)}else if(U==="function"&&D)Y=jH(A,z,H,Y)}}else{if(typeof F?.toBSON==="function"){if(F=F.toBSON(),F!=null&&typeof F!=="object")throw new n("toBSON function did not return an object")}for(let G of Object.keys(F)){let Q=F[G];if(typeof Q?.toBSON==="function")Q=Q.toBSON();let q=typeof Q;if(typeof G==="string"&&!GO.has(G)){if(G.match(GY)!=null)throw new n("key "+G+" must not contain null bytes");if(B){if(G[0]==="$")throw new n("key "+G+" must not start with '$'");else if(G.includes("."))throw new n("key "+G+" must not contain '.'")}}if(Q===void 0){if(X===!1)Y=yF(A,G,Q,Y)}else if(Q===null)Y=yF(A,G,Q,Y);else if(q==="string")Y=QH(A,G,Q,Y);else if(q==="number")Y=zH(A,G,Q,Y);else if(q==="bigint")Y=qH(A,G,Q,Y);else if(q==="boolean")Y=HH(A,G,Q,Y);else if(q==="object"&&Q._bsontype==null)if(Q instanceof Date||dF(Q))Y=UH(A,G,Q,Y);else if(Q instanceof Uint8Array||vF(Q))Y=wH(A,G,Q,Y);else if(Q instanceof RegExp||hF(Q))Y=CH(A,G,Q,Y);else Y=VH(A,G,Q,Y,B,Z,D,X,J);else if(q==="object"){if(Q[lF]!==DA)throw new F5;else if(Q._bsontype==="ObjectId")Y=LH(A,G,Q,Y);else if(Q._bsontype==="Decimal128")Y=NH(A,G,Q,Y);else if(Q._bsontype==="Long"||Q._bsontype==="Timestamp")Y=MH(A,G,Q,Y);else if(Q._bsontype==="Double")Y=PH(A,G,Q,Y);else if(Q._bsontype==="Code")Y=IH(A,G,Q,Y,B,Z,D,X,J);else if(Q._bsontype==="Binary")Y=TH(A,G,Q,Y);else if(Q._bsontype==="BSONSymbol")Y=OH(A,G,Q,Y);else if(Q._bsontype==="DBRef")Y=SH(A,G,Q,Y,Z,D,J);else if(Q._bsontype==="BSONRegExp")Y=KH(A,G,Q,Y);else if(Q._bsontype==="Int32")Y=RH(A,G,Q,Y);else if(Q._bsontype==="MinKey"||Q._bsontype==="MaxKey")Y=EH(A,G,Q,Y);else if(typeof Q._bsontype!=="undefined")throw new n(`Unrecognized or invalid _bsontype: ${String(Q._bsontype)}`)}else if(q==="function"&&D)Y=jH(A,G,Q,Y)}}J.delete(F),A[Y++]=0;let W=Y-$;return $+=j1.setInt32LE(A,$,W),Y}function VY1(A){return A!=null&&typeof A==="object"&&"_bsontype"in A&&typeof A._bsontype==="string"}var NY1={$oid:e0,$binary:N1,$uuid:N1,$symbol:YA,$numberInt:B3,$numberDecimal:n6,$numberDouble:c9,$numberLong:f,$minKey:JA,$maxKey:XA,$regex:p9,$regularExpression:p9,$timestamp:l9};function bO(A,F={}){if(typeof A==="number"){let $=A<=UZ&&A>=CZ,Z=A<=zO&&A>=qO;if(F.relaxed||F.legacy)return A;if(Number.isInteger(A)&&!Object.is(A,-0)){if($)return new B3(A);if(Z){if(F.useBigInt64)return BigInt(A);return f.fromNumber(A)}}return new c9(A)}if(A==null||typeof A!=="object")return A;if(A.$undefined)return null;let B=Object.keys(A).filter(($)=>$.startsWith("$")&&A[$]!=null);for(let $=0;$<B.length;$++){let Z=NY1[B[$]];if(Z)return Z.fromExtendedJSON(A,F)}if(A.$date!=null){let $=A.$date,Z=new Date;if(F.legacy)if(typeof $==="number")Z.setTime($);else if(typeof $==="string")Z.setTime(Date.parse($));else if(typeof $==="bigint")Z.setTime(Number($));else throw new qZ(`Unrecognized type for EJSON date: ${typeof $}`);else if(typeof $==="string")Z.setTime(Date.parse($));else if(f.isLong($))Z.setTime($.toNumber());else if(typeof $==="number"&&F.relaxed)Z.setTime($);else if(typeof $==="bigint")Z.setTime(Number($));else throw new qZ(`Unrecognized type for EJSON date: ${typeof $}`);return Z}if(A.$code!=null){let $=Object.assign({},A);if(A.$scope)$.$scope=bO(A.$scope);return F3.fromExtendedJSON(A)}if(SO(A)||A.$dbPointer){let $=A.$ref?A:A.$dbPointer;if($ instanceof z8)return $;let Z=Object.keys($).filter((X)=>X.startsWith("$")),D=!0;if(Z.forEach((X)=>{if(["$ref","$id","$db"].indexOf(X)===-1)D=!1}),D)return z8.fromExtendedJSON($)}return A}function MY1(A,F){return A.map((B,$)=>{F.seenObjects.push({propertyName:`index ${$}`,obj:null});try{return A3(B,F)}finally{F.seenObjects.pop()}})}function QO(A){let F=A.toISOString();return A.getUTCMilliseconds()!==0?F:F.slice(0,-5)+"Z"}function A3(A,F){if(A instanceof Map||bH(A)){let B=Object.create(null);for(let[$,Z]of A){if(typeof $!=="string")throw new n("Can only serialize maps with string keys");B[$]=Z}return A3(B,F)}if((typeof A==="object"||typeof A==="function")&&A!==null){let B=F.seenObjects.findIndex(($)=>$.obj===A);if(B!==-1){let $=F.seenObjects.map((G)=>G.propertyName),Z=$.slice(0,B).map((G)=>`${G} -> `).join(""),D=$[B],X=" -> "+$.slice(B+1,$.length-1).map((G)=>`${G} -> `).join(""),J=$[$.length-1],Y=" ".repeat(Z.length+D.length/2),W="-".repeat(X.length+(D.length+J.length)/2-1);throw new n(`Converting circular structure to EJSON:
    ${Z}${D}${X}${J}
    ${Y}\\${W}/`)}F.seenObjects[F.seenObjects.length-1].obj=A}if(Array.isArray(A))return MY1(A,F);if(A===void 0)return null;if(A instanceof Date||dF(A)){let B=A.getTime(),$=B>-1&&B<253402318800000;if(F.legacy)return F.relaxed&&$?{$date:A.getTime()}:{$date:QO(A)};return F.relaxed&&$?{$date:QO(A)}:{$date:{$numberLong:A.getTime().toString()}}}if(typeof A==="number"&&(!F.relaxed||!isFinite(A))){if(Number.isInteger(A)&&!Object.is(A,-0)){if(A>=CZ&&A<=UZ)return{$numberInt:A.toString()};if(A>=qO&&A<=zO)return{$numberLong:A.toString()}}return{$numberDouble:Object.is(A,-0)?"-0.0":A.toString()}}if(typeof A==="bigint"){if(!F.relaxed)return{$numberLong:BigInt.asIntN(64,A).toString()};return Number(BigInt.asIntN(64,A))}if(A instanceof RegExp||hF(A)){let B=A.flags;if(B===void 0){let Z=A.toString().match(/[gimuy]*$/);if(Z)B=Z[0]}return new p9(A.source,B).toExtendedJSON(F)}if(A!=null&&typeof A==="object")return PY1(A,F);return A}var RY1={Binary:(A)=>new N1(A.value(),A.sub_type),Code:(A)=>new F3(A.code,A.scope),DBRef:(A)=>new z8(A.collection||A.namespace,A.oid,A.db,A.fields),Decimal128:(A)=>new n6(A.bytes),Double:(A)=>new c9(A.value),Int32:(A)=>new B3(A.value),Long:(A)=>f.fromBits(A.low!=null?A.low:A.low_,A.low!=null?A.high:A.high_,A.low!=null?A.unsigned:A.unsigned_),MaxKey:()=>new XA,MinKey:()=>new JA,ObjectId:(A)=>new e0(A),BSONRegExp:(A)=>new p9(A.pattern,A.options),BSONSymbol:(A)=>new YA(A.value),Timestamp:(A)=>l9.fromBits(A.low,A.high)};function PY1(A,F){if(A==null||typeof A!=="object")throw new n("not an object instance");let B=A._bsontype;if(typeof B==="undefined"){let $={};for(let Z of Object.keys(A)){F.seenObjects.push({propertyName:Z,obj:null});try{let D=A3(A[Z],F);if(Z==="__proto__")Object.defineProperty($,Z,{value:D,writable:!0,enumerable:!0,configurable:!0});else $[Z]=D}finally{F.seenObjects.pop()}}return $}else if(A!=null&&typeof A==="object"&&typeof A._bsontype==="string"&&A[lF]!==DA)throw new F5;else if(VY1(A)){let $=A;if(typeof $.toExtendedJSON!=="function"){let Z=RY1[A._bsontype];if(!Z)throw new n("Unrecognized or invalid _bsontype: "+A._bsontype);$=Z($)}if(B==="Code"&&$.scope)$=new F3($.code,A3($.scope,F));else if(B==="DBRef"&&$.oid)$=new z8(A3($.collection,F),A3($.oid,F),A3($.db,F),A3($.fields,F));return $.toExtendedJSON(F)}else throw new n("_bsontype must be a string, but was: "+typeof B)}function fO(A,F){let B={useBigInt64:F?.useBigInt64??!1,relaxed:F?.relaxed??!0,legacy:F?.legacy??!1};return JSON.parse(A,($,Z)=>{if($.indexOf("\x00")!==-1)throw new n(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify($)}`);return bO(Z,B)})}function gO(A,F,B,$){if(B!=null&&typeof B==="object")$=B,B=0;if(F!=null&&typeof F==="object"&&!Array.isArray(F))$=F,F=void 0,B=0;let Z=Object.assign({relaxed:!0,legacy:!1},$,{seenObjects:[{propertyName:"(root)",obj:null}]}),D=A3(A,Z);return JSON.stringify(D,F,B)}function jY1(A,F){return F=F||{},JSON.parse(gO(A,F))}function IY1(A,F){return F=F||{},fO(JSON.stringify(A),F)}var WA=Object.create(null);WA.parse=fO;WA.stringify=gO;WA.serialize=jY1;WA.deserialize=IY1;Object.freeze(WA);var P2={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function kH(A,F){try{return j1.getNonnegativeInt32LE(A,F)}catch(B){throw new u7("BSON size cannot be negative",F,{cause:B})}}function _H(A,F){let B=F;for(;A[B]!==0;B++);if(B===A.length-1)throw new u7("Null terminator not found",F);return B}function TY1(A,F=0){if(F??=0,A.length<5)throw new u7(`Input must be at least 5 bytes, got ${A.length} bytes`,F);let B=kH(A,F);if(B>A.length-F)throw new u7(`Parsed documentSize (${B} bytes) does not match input length (${A.length} bytes)`,F);if(A[F+B-1]!==0)throw new u7("BSON documents must end in 0x00",F+B);let $=[],Z=F+4;while(Z<=B+F){let D=A[Z];if(Z+=1,D===0){if(Z-F!==B)throw new u7("Invalid 0x00 type byte",Z);break}let X=Z,J=_H(A,Z)-X;Z+=J+1;let Y;if(D===P2.double||D===P2.long||D===P2.date||D===P2.timestamp)Y=8;else if(D===P2.int)Y=4;else if(D===P2.objectId)Y=12;else if(D===P2.decimal)Y=16;else if(D===P2.bool)Y=1;else if(D===P2.null||D===P2.undefined||D===P2.maxKey||D===P2.minKey)Y=0;else if(D===P2.regex)Y=_H(A,_H(A,Z)+1)+1-Z;else if(D===P2.object||D===P2.array||D===P2.javascriptWithScope)Y=kH(A,Z);else if(D===P2.string||D===P2.binData||D===P2.dbPointer||D===P2.javascript||D===P2.symbol){if(Y=kH(A,Z)+4,D===P2.binData)Y+=1;if(D===P2.dbPointer)Y+=12}else throw new u7(`Invalid 0x${D.toString(16).padStart(2,"0")} type byte`,Z);if(Y>B)throw new u7("value reports length larger than document",Z);$.push([D,X,J,Z,Y]),Z+=Y}return $}var pF=Object.create(null);pF.parseToElements=TY1;pF.ByteUtils=l;pF.NumberUtils=j1;Object.freeze(pF);var uO=17825792,A5=l.allocate(uO);function yO(A){if(A5.length<A)A5=l.allocate(A)}function vO(A,F={}){let B=typeof F.checkKeys==="boolean"?F.checkKeys:!1,$=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,Z=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0,D=typeof F.minInternalBufferSize==="number"?F.minInternalBufferSize:uO;if(A5.length<D)A5=l.allocate(D);let X=KZ(A5,A,B,0,0,$,Z,null),J=l.allocateUnsafe(X);return J.set(A5.subarray(0,X),0),J}function hO(A,F,B={}){let $=typeof B.checkKeys==="boolean"?B.checkKeys:!1,Z=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,D=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!0,X=typeof B.index==="number"?B.index:0,J=KZ(A5,A,$,0,0,Z,D,null);return F.set(A5.subarray(0,J),X),X+J-1}function dO(A,F={}){return xO(l.toLocalBufferType(A),F)}function mO(A,F={}){F=F||{};let B=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,$=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0;return JY(A,B,$)}function cO(A,F,B,$,Z,D){let X=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},D),J=l.toLocalBufferType(A),Y=F;for(let W=0;W<B;W++){let G=j1.getInt32LE(J,Y);X.index=Y,$[Z+W]=xO(J,X),Y=Y+G}return Y}var OY1=Object.freeze({__proto__:null,BSONError:n,BSONOffsetError:u7,BSONRegExp:p9,BSONRuntimeError:qZ,BSONSymbol:YA,BSONType:IO,BSONValue:L4,BSONVersionError:F5,Binary:N1,Code:F3,DBRef:z8,Decimal128:n6,Double:c9,EJSON:WA,Int32:B3,Long:f,MaxKey:XA,MinKey:JA,ObjectId:e0,Timestamp:l9,UUID:P6,calculateObjectSize:mO,deserialize:dO,deserializeStream:cO,onDemand:pF,serialize:vO,serializeWithBufferAndIndex:hO,setInternalBufferSize:yO});SY1.BSON=OY1;SY1.BSONError=n;SY1.BSONOffsetError=u7;SY1.BSONRegExp=p9;SY1.BSONRuntimeError=qZ;SY1.BSONSymbol=YA;SY1.BSONType=IO;SY1.BSONValue=L4;SY1.BSONVersionError=F5;SY1.Binary=N1;SY1.Code=F3;SY1.DBRef=z8;SY1.Decimal128=n6;SY1.Double=c9;SY1.EJSON=WA;SY1.Int32=B3;SY1.Long=f;SY1.MaxKey=XA;SY1.MinKey=JA;SY1.ObjectId=e0;SY1.Timestamp=l9;SY1.UUID=P6;SY1.calculateObjectSize=mO;SY1.deserialize=dO;SY1.deserializeStream=cO;SY1.onDemand=pF;SY1.serialize=vO;SY1.serializeWithBufferAndIndex=hO;SY1.setInternalBufferSize=yO});var C0=C((j2)=>{Object.defineProperty(j2,"__esModule",{value:!0});j2.toUTF8=j2.getBigInt64LE=j2.getFloat64LE=j2.getInt32LE=j2.UUID=j2.Timestamp=j2.serialize=j2.ObjectId=j2.MinKey=j2.MaxKey=j2.Long=j2.Int32=j2.EJSON=j2.Double=j2.deserialize=j2.Decimal128=j2.DBRef=j2.Code=j2.calculateObjectSize=j2.BSONType=j2.BSONSymbol=j2.BSONRegExp=j2.BSONError=j2.BSON=j2.Binary=void 0;j2.parseToElementsToArray=XW1;j2.pluckBSONSerializeOptions=JW1;j2.resolveBSONOptions=YW1;j2.parseUtf8ValidationOption=WW1;var EZ=l4(),c2=l4();Object.defineProperty(j2,"Binary",{enumerable:!0,get:function(){return c2.Binary}});Object.defineProperty(j2,"BSON",{enumerable:!0,get:function(){return c2.BSON}});Object.defineProperty(j2,"BSONError",{enumerable:!0,get:function(){return c2.BSONError}});Object.defineProperty(j2,"BSONRegExp",{enumerable:!0,get:function(){return c2.BSONRegExp}});Object.defineProperty(j2,"BSONSymbol",{enumerable:!0,get:function(){return c2.BSONSymbol}});Object.defineProperty(j2,"BSONType",{enumerable:!0,get:function(){return c2.BSONType}});Object.defineProperty(j2,"calculateObjectSize",{enumerable:!0,get:function(){return c2.calculateObjectSize}});Object.defineProperty(j2,"Code",{enumerable:!0,get:function(){return c2.Code}});Object.defineProperty(j2,"DBRef",{enumerable:!0,get:function(){return c2.DBRef}});Object.defineProperty(j2,"Decimal128",{enumerable:!0,get:function(){return c2.Decimal128}});Object.defineProperty(j2,"deserialize",{enumerable:!0,get:function(){return c2.deserialize}});Object.defineProperty(j2,"Double",{enumerable:!0,get:function(){return c2.Double}});Object.defineProperty(j2,"EJSON",{enumerable:!0,get:function(){return c2.EJSON}});Object.defineProperty(j2,"Int32",{enumerable:!0,get:function(){return c2.Int32}});Object.defineProperty(j2,"Long",{enumerable:!0,get:function(){return c2.Long}});Object.defineProperty(j2,"MaxKey",{enumerable:!0,get:function(){return c2.MaxKey}});Object.defineProperty(j2,"MinKey",{enumerable:!0,get:function(){return c2.MinKey}});Object.defineProperty(j2,"ObjectId",{enumerable:!0,get:function(){return c2.ObjectId}});Object.defineProperty(j2,"serialize",{enumerable:!0,get:function(){return c2.serialize}});Object.defineProperty(j2,"Timestamp",{enumerable:!0,get:function(){return c2.Timestamp}});Object.defineProperty(j2,"UUID",{enumerable:!0,get:function(){return c2.UUID}});function XW1(A,F){let B=EZ.BSON.onDemand.parseToElements(A,F);return Array.isArray(B)?B:[...B]}j2.getInt32LE=EZ.BSON.onDemand.NumberUtils.getInt32LE;j2.getFloat64LE=EZ.BSON.onDemand.NumberUtils.getFloat64LE;j2.getBigInt64LE=EZ.BSON.onDemand.NumberUtils.getBigInt64LE;j2.toUTF8=EZ.BSON.onDemand.ByteUtils.toUTF8;function JW1(A){let{fieldsAsRaw:F,useBigInt64:B,promoteValues:$,promoteBuffers:Z,promoteLongs:D,serializeFunctions:X,ignoreUndefined:J,bsonRegExp:Y,raw:W,enableUtf8Validation:G}=A;return{fieldsAsRaw:F,useBigInt64:B,promoteValues:$,promoteBuffers:Z,promoteLongs:D,serializeFunctions:X,ignoreUndefined:J,bsonRegExp:Y,raw:W,enableUtf8Validation:G}}function YW1(A,F){let B=F?.bsonOptions;return{raw:A?.raw??B?.raw??!1,useBigInt64:A?.useBigInt64??B?.useBigInt64??!1,promoteLongs:A?.promoteLongs??B?.promoteLongs??!0,promoteValues:A?.promoteValues??B?.promoteValues??!0,promoteBuffers:A?.promoteBuffers??B?.promoteBuffers??!1,ignoreUndefined:A?.ignoreUndefined??B?.ignoreUndefined??!1,bsonRegExp:A?.bsonRegExp??B?.bsonRegExp??!1,serializeFunctions:A?.serializeFunctions??B?.serializeFunctions??!1,fieldsAsRaw:A?.fieldsAsRaw??B?.fieldsAsRaw??{},enableUtf8Validation:A?.enableUtf8Validation??B?.enableUtf8Validation??!0}}function WW1(A){if(A?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var X1=C((RS)=>{Object.defineProperty(RS,"__esModule",{value:!0});RS.MongoWriteConcernError=RS.MongoServerSelectionError=RS.MongoSystemError=RS.MongoMissingDependencyError=RS.MongoMissingCredentialsError=RS.MongoCompatibilityError=RS.MongoInvalidArgumentError=RS.MongoParseError=RS.MongoNetworkTimeoutError=RS.MongoNetworkError=RS.MongoClientClosedError=RS.MongoTopologyClosedError=RS.MongoCursorExhaustedError=RS.MongoServerClosedError=RS.MongoCursorInUseError=RS.MongoOperationTimeoutError=RS.MongoUnexpectedServerResponseError=RS.MongoGridFSChunkError=RS.MongoGridFSStreamError=RS.MongoTailableCursorError=RS.MongoChangeStreamError=RS.MongoClientBulkWriteExecutionError=RS.MongoClientBulkWriteCursorError=RS.MongoClientBulkWriteError=RS.MongoGCPError=RS.MongoAzureError=RS.MongoOIDCError=RS.MongoAWSError=RS.MongoKerberosError=RS.MongoExpiredSessionError=RS.MongoTransactionError=RS.MongoNotConnectedError=RS.MongoDecompressionError=RS.MongoBatchReExecutionError=RS.MongoStalePrimaryError=RS.MongoRuntimeError=RS.MongoAPIError=RS.MongoDriverError=RS.MongoServerError=RS.MongoError=RS.MongoErrorLabel=RS.GET_MORE_RESUMABLE_CODES=RS.MONGODB_ERROR_CODES=RS.NODE_IS_RECOVERING_ERROR_MESSAGE=RS.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=RS.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;RS.needsRetryableWriteLabel=EW1;RS.isRetryableWriteError=NS;RS.isRetryableReadError=LW1;RS.isNodeShuttingDownError=RW1;RS.isSDAMUnrecoverableError=PW1;RS.isNetworkTimeoutError=jW1;RS.isResumableError=IW1;RS.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");RS.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");RS.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");RS.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});RS.GET_MORE_RESUMABLE_CODES=new Set([RS.MONGODB_ERROR_CODES.HostUnreachable,RS.MONGODB_ERROR_CODES.HostNotFound,RS.MONGODB_ERROR_CODES.NetworkTimeout,RS.MONGODB_ERROR_CODES.ShutdownInProgress,RS.MONGODB_ERROR_CODES.PrimarySteppedDown,RS.MONGODB_ERROR_CODES.ExceededTimeLimit,RS.MONGODB_ERROR_CODES.SocketException,RS.MONGODB_ERROR_CODES.NotWritablePrimary,RS.MONGODB_ERROR_CODES.InterruptedAtShutdown,RS.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,RS.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,RS.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,RS.MONGODB_ERROR_CODES.StaleShardVersion,RS.MONGODB_ERROR_CODES.StaleEpoch,RS.MONGODB_ERROR_CODES.StaleConfig,RS.MONGODB_ERROR_CODES.RetryChangeStream,RS.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,RS.MONGODB_ERROR_CODES.CursorNotFound]);RS.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function KW1(A){return A!=null&&typeof A==="object"&&"errors"in A&&Array.isArray(A.errors)}class q8 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(A,F){super(A,F);this.errorLabelSet=new Set}static buildErrorMessage(A){if(typeof A==="string")return A;if(KW1(A)&&A.message.length===0)return A.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":A.errors.map(({message:F})=>F).join(", ");return A!=null&&typeof A==="object"&&"message"in A&&typeof A.message==="string"?A.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(A){return this.errorLabelSet.has(A)}addErrorLabel(A){this.errorLabelSet.add(A)}}RS.MongoError=q8;class QY extends q8{constructor(A){super(A.message||A.errmsg||A.$err||"n/a");if(A.errorLabels)for(let F of A.errorLabels)this.addErrorLabel(F);this.errorResponse=A;for(let F in A)if(F!=="errorLabels"&&F!=="errmsg"&&F!=="message"&&F!=="errorResponse")this[F]=A[F]}get name(){return"MongoServerError"}}RS.MongoServerError=QY;class iF extends q8{constructor(A,F){super(A,F)}get name(){return"MongoDriverError"}}RS.MongoDriverError=iF;class s6 extends iF{constructor(A,F){super(A,F)}get name(){return"MongoAPIError"}}RS.MongoAPIError=s6;class E9 extends iF{constructor(A,F){super(A,F)}get name(){return"MongoRuntimeError"}}RS.MongoRuntimeError=E9;class pO extends E9{constructor(A,F){super(A,F)}get name(){return"MongoStalePrimaryError"}}RS.MongoStalePrimaryError=pO;class iO extends s6{constructor(A="This batch has already been executed, create new batch to execute"){super(A)}get name(){return"MongoBatchReExecutionError"}}RS.MongoBatchReExecutionError=iO;class nO extends E9{constructor(A){super(A)}get name(){return"MongoDecompressionError"}}RS.MongoDecompressionError=nO;class sO extends s6{constructor(A){super(A)}get name(){return"MongoNotConnectedError"}}RS.MongoNotConnectedError=sO;class aO extends s6{constructor(A){super(A)}get name(){return"MongoTransactionError"}}RS.MongoTransactionError=aO;class tO extends s6{constructor(A="Cannot use a session that has ended"){super(A)}get name(){return"MongoExpiredSessionError"}}RS.MongoExpiredSessionError=tO;class rO extends E9{constructor(A){super(A)}get name(){return"MongoKerberosError"}}RS.MongoKerberosError=rO;class oO extends E9{constructor(A,F){super(A,F)}get name(){return"MongoAWSError"}}RS.MongoAWSError=oO;class zY extends E9{constructor(A){super(A)}get name(){return"MongoOIDCError"}}RS.MongoOIDCError=zY;class eO extends zY{constructor(A){super(A)}get name(){return"MongoAzureError"}}RS.MongoAzureError=eO;class AS extends zY{constructor(A){super(A)}get name(){return"MongoGCPError"}}RS.MongoGCPError=AS;class FS extends QY{constructor(A){super(A);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}RS.MongoClientBulkWriteError=FS;class BS extends E9{constructor(A){super(A)}get name(){return"MongoClientBulkWriteCursorError"}}RS.MongoClientBulkWriteCursorError=BS;class $S extends E9{constructor(A){super(A)}get name(){return"MongoClientBulkWriteExecutionError"}}RS.MongoClientBulkWriteExecutionError=$S;class ZS extends E9{constructor(A){super(A)}get name(){return"MongoChangeStreamError"}}RS.MongoChangeStreamError=ZS;class DS extends s6{constructor(A="Tailable cursor does not support this operation"){super(A)}get name(){return"MongoTailableCursorError"}}RS.MongoTailableCursorError=DS;class XS extends E9{constructor(A){super(A)}get name(){return"MongoGridFSStreamError"}}RS.MongoGridFSStreamError=XS;class JS extends E9{constructor(A){super(A)}get name(){return"MongoGridFSChunkError"}}RS.MongoGridFSChunkError=JS;class YS extends E9{constructor(A,F){super(A,F)}get name(){return"MongoUnexpectedServerResponseError"}}RS.MongoUnexpectedServerResponseError=YS;class WS extends iF{get name(){return"MongoOperationTimeoutError"}}RS.MongoOperationTimeoutError=WS;class GS extends s6{constructor(A="Cursor is already initialized"){super(A)}get name(){return"MongoCursorInUseError"}}RS.MongoCursorInUseError=GS;class QS extends s6{constructor(A="Server is closed"){super(A)}get name(){return"MongoServerClosedError"}}RS.MongoServerClosedError=QS;class zS extends s6{constructor(A){super(A||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}RS.MongoCursorExhaustedError=zS;class qS extends s6{constructor(A="Topology is closed"){super(A)}get name(){return"MongoTopologyClosedError"}}RS.MongoTopologyClosedError=qS;class HS extends s6{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}RS.MongoClientClosedError=HS;class GA extends q8{constructor(A,F){super(A,{cause:F?.cause});this.beforeHandshake=!!F?.beforeHandshake}get name(){return"MongoNetworkError"}}RS.MongoNetworkError=GA;class US extends GA{constructor(A,F){super(A,F)}get name(){return"MongoNetworkTimeoutError"}}RS.MongoNetworkTimeoutError=US;class cH extends iF{constructor(A){super(A)}get name(){return"MongoParseError"}}RS.MongoParseError=cH;class CS extends s6{constructor(A,F){super(A,F)}get name(){return"MongoInvalidArgumentError"}}RS.MongoInvalidArgumentError=CS;class KS extends s6{constructor(A){super(A)}get name(){return"MongoCompatibilityError"}}RS.MongoCompatibilityError=KS;class ES extends s6{constructor(A){super(A)}get name(){return"MongoMissingCredentialsError"}}RS.MongoMissingCredentialsError=ES;class LS extends s6{constructor(A,F){super(A,F);this.dependencyName=F.dependencyName}get name(){return"MongoMissingDependencyError"}}RS.MongoMissingDependencyError=LS;class lH extends q8{constructor(A,F){if(F&&F.error)super(q8.buildErrorMessage(F.error.message||F.error),{cause:F.error});else super(A);if(F)this.reason=F;this.code=F.error?.code}get name(){return"MongoSystemError"}}RS.MongoSystemError=lH;class wS extends lH{constructor(A,F){super(A,F)}get name(){return"MongoServerSelectionError"}}RS.MongoServerSelectionError=wS;class pH extends QY{constructor(A){super({...A.writeConcernError,...A});this.errInfo=A.writeConcernError.errInfo,this.result=A}get name(){return"MongoWriteConcernError"}}RS.MongoWriteConcernError=pH;var VS=new Set([RS.MONGODB_ERROR_CODES.HostUnreachable,RS.MONGODB_ERROR_CODES.HostNotFound,RS.MONGODB_ERROR_CODES.NetworkTimeout,RS.MONGODB_ERROR_CODES.ShutdownInProgress,RS.MONGODB_ERROR_CODES.PrimarySteppedDown,RS.MONGODB_ERROR_CODES.SocketException,RS.MONGODB_ERROR_CODES.NotWritablePrimary,RS.MONGODB_ERROR_CODES.InterruptedAtShutdown,RS.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,RS.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,RS.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,RS.MONGODB_ERROR_CODES.ExceededTimeLimit,RS.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),mH=VS;function EW1(A,F,B){if(A instanceof GA)return!0;if(A instanceof q8){if((F>=9||NS(A))&&!A.hasErrorLabel(RS.MongoErrorLabel.HandshakeError))return!1}if(A instanceof pH){if(B==="Mongos"&&F<9)return mH.has(A.result.code??0);let D=A.result.writeConcernError.code??Number(A.code);return mH.has(Number.isNaN(D)?0:D)}if(A instanceof q8)return mH.has(Number(A.code));if(RS.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message))return!0;if(RS.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message))return!0;return!1}function NS(A){return A.hasErrorLabel(RS.MongoErrorLabel.RetryableWriteError)||A.hasErrorLabel(RS.MongoErrorLabel.PoolRequstedRetry)}function LW1(A){if(typeof A.code==="number"?VS.has(A.code):!1)return!0;if(A instanceof GA)return!0;if(RS.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message))return!0;if(RS.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message))return!0;return!1}var wW1=new Set([RS.MONGODB_ERROR_CODES.ShutdownInProgress,RS.MONGODB_ERROR_CODES.PrimarySteppedDown,RS.MONGODB_ERROR_CODES.InterruptedAtShutdown,RS.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,RS.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),VW1=new Set([RS.MONGODB_ERROR_CODES.NotWritablePrimary,RS.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,RS.MONGODB_ERROR_CODES.LegacyNotPrimary]),NW1=new Set([RS.MONGODB_ERROR_CODES.InterruptedAtShutdown,RS.MONGODB_ERROR_CODES.ShutdownInProgress]);function MS(A){if(typeof A.code==="number")return wW1.has(A.code);return RS.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(A.message)||RS.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message)}function MW1(A){if(typeof A.code==="number")return VW1.has(A.code);if(MS(A))return!1;return RS.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message)}function RW1(A){return!!(typeof A.code==="number"&&NW1.has(A.code))}function PW1(A){if(A instanceof cH||A==null)return!0;return MS(A)||MW1(A)}function jW1(A){return!!(A instanceof GA&&A.message.match(/timed out/))}function IW1(A,F){if(A==null||!(A instanceof q8))return!1;if(A instanceof GA)return!0;if(F!=null&&F>=9){if(A.code===RS.MONGODB_ERROR_CODES.CursorNotFound)return!0;return A.hasErrorLabel(RS.MongoErrorLabel.ResumableChangeStreamError)}if(typeof A.code==="number")return RS.GET_MORE_RESUMABLE_CODES.has(A.code);return!1}});var l2=C((TS)=>{Object.defineProperty(TS,"__esModule",{value:!0});TS.END=TS.CHANGE=TS.INIT=TS.MORE=TS.RESPONSE=TS.SERVER_HEARTBEAT_FAILED=TS.SERVER_HEARTBEAT_SUCCEEDED=TS.SERVER_HEARTBEAT_STARTED=TS.COMMAND_FAILED=TS.COMMAND_SUCCEEDED=TS.COMMAND_STARTED=TS.CLUSTER_TIME_RECEIVED=TS.CONNECTION_CHECKED_IN=TS.CONNECTION_CHECKED_OUT=TS.CONNECTION_CHECK_OUT_FAILED=TS.CONNECTION_CHECK_OUT_STARTED=TS.CONNECTION_CLOSED=TS.CONNECTION_READY=TS.CONNECTION_CREATED=TS.CONNECTION_POOL_READY=TS.CONNECTION_POOL_CLEARED=TS.CONNECTION_POOL_CLOSED=TS.CONNECTION_POOL_CREATED=TS.WAITING_FOR_SUITABLE_SERVER=TS.SERVER_SELECTION_SUCCEEDED=TS.SERVER_SELECTION_FAILED=TS.SERVER_SELECTION_STARTED=TS.TOPOLOGY_DESCRIPTION_CHANGED=TS.TOPOLOGY_CLOSED=TS.TOPOLOGY_OPENING=TS.SERVER_DESCRIPTION_CHANGED=TS.SERVER_CLOSED=TS.SERVER_OPENING=TS.DESCRIPTION_RECEIVED=TS.UNPINNED=TS.PINNED=TS.MESSAGE=TS.ENDED=TS.CLOSED=TS.CONNECT=TS.OPEN=TS.CLOSE=TS.TIMEOUT=TS.ERROR=TS.SYSTEM_JS_COLLECTION=TS.SYSTEM_COMMAND_COLLECTION=TS.SYSTEM_USER_COLLECTION=TS.SYSTEM_PROFILE_COLLECTION=TS.SYSTEM_INDEX_COLLECTION=TS.SYSTEM_NAMESPACE_COLLECTION=void 0;TS.kDecoratedKeys=TS.kDecorateResult=TS.LEGACY_HELLO_COMMAND_CAMEL_CASE=TS.LEGACY_HELLO_COMMAND=TS.MONGO_CLIENT_EVENTS=TS.LOCAL_SERVER_EVENTS=TS.SERVER_RELAY_EVENTS=TS.APM_EVENTS=TS.TOPOLOGY_EVENTS=TS.CMAP_EVENTS=TS.HEARTBEAT_EVENTS=TS.RESUME_TOKEN_CHANGED=void 0;TS.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";TS.SYSTEM_INDEX_COLLECTION="system.indexes";TS.SYSTEM_PROFILE_COLLECTION="system.profile";TS.SYSTEM_USER_COLLECTION="system.users";TS.SYSTEM_COMMAND_COLLECTION="$cmd";TS.SYSTEM_JS_COLLECTION="system.js";TS.ERROR="error";TS.TIMEOUT="timeout";TS.CLOSE="close";TS.OPEN="open";TS.CONNECT="connect";TS.CLOSED="closed";TS.ENDED="ended";TS.MESSAGE="message";TS.PINNED="pinned";TS.UNPINNED="unpinned";TS.DESCRIPTION_RECEIVED="descriptionReceived";TS.SERVER_OPENING="serverOpening";TS.SERVER_CLOSED="serverClosed";TS.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";TS.TOPOLOGY_OPENING="topologyOpening";TS.TOPOLOGY_CLOSED="topologyClosed";TS.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";TS.SERVER_SELECTION_STARTED="serverSelectionStarted";TS.SERVER_SELECTION_FAILED="serverSelectionFailed";TS.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";TS.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";TS.CONNECTION_POOL_CREATED="connectionPoolCreated";TS.CONNECTION_POOL_CLOSED="connectionPoolClosed";TS.CONNECTION_POOL_CLEARED="connectionPoolCleared";TS.CONNECTION_POOL_READY="connectionPoolReady";TS.CONNECTION_CREATED="connectionCreated";TS.CONNECTION_READY="connectionReady";TS.CONNECTION_CLOSED="connectionClosed";TS.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";TS.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";TS.CONNECTION_CHECKED_OUT="connectionCheckedOut";TS.CONNECTION_CHECKED_IN="connectionCheckedIn";TS.CLUSTER_TIME_RECEIVED="clusterTimeReceived";TS.COMMAND_STARTED="commandStarted";TS.COMMAND_SUCCEEDED="commandSucceeded";TS.COMMAND_FAILED="commandFailed";TS.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";TS.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";TS.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";TS.RESPONSE="response";TS.MORE="more";TS.INIT="init";TS.CHANGE="change";TS.END="end";TS.RESUME_TOKEN_CHANGED="resumeTokenChanged";TS.HEARTBEAT_EVENTS=Object.freeze([TS.SERVER_HEARTBEAT_STARTED,TS.SERVER_HEARTBEAT_SUCCEEDED,TS.SERVER_HEARTBEAT_FAILED]);TS.CMAP_EVENTS=Object.freeze([TS.CONNECTION_POOL_CREATED,TS.CONNECTION_POOL_READY,TS.CONNECTION_POOL_CLEARED,TS.CONNECTION_POOL_CLOSED,TS.CONNECTION_CREATED,TS.CONNECTION_READY,TS.CONNECTION_CLOSED,TS.CONNECTION_CHECK_OUT_STARTED,TS.CONNECTION_CHECK_OUT_FAILED,TS.CONNECTION_CHECKED_OUT,TS.CONNECTION_CHECKED_IN]);TS.TOPOLOGY_EVENTS=Object.freeze([TS.SERVER_OPENING,TS.SERVER_CLOSED,TS.SERVER_DESCRIPTION_CHANGED,TS.TOPOLOGY_OPENING,TS.TOPOLOGY_CLOSED,TS.TOPOLOGY_DESCRIPTION_CHANGED,TS.ERROR,TS.TIMEOUT,TS.CLOSE]);TS.APM_EVENTS=Object.freeze([TS.COMMAND_STARTED,TS.COMMAND_SUCCEEDED,TS.COMMAND_FAILED]);TS.SERVER_RELAY_EVENTS=Object.freeze([TS.SERVER_HEARTBEAT_STARTED,TS.SERVER_HEARTBEAT_SUCCEEDED,TS.SERVER_HEARTBEAT_FAILED,TS.COMMAND_STARTED,TS.COMMAND_SUCCEEDED,TS.COMMAND_FAILED,...TS.CMAP_EVENTS]);TS.LOCAL_SERVER_EVENTS=Object.freeze([TS.CONNECT,TS.DESCRIPTION_RECEIVED,TS.CLOSED,TS.ENDED]);TS.MONGO_CLIENT_EVENTS=Object.freeze([...TS.CMAP_EVENTS,...TS.APM_EVENTS,...TS.TOPOLOGY_EVENTS,...TS.HEARTBEAT_EVENTS]);TS.LEGACY_HELLO_COMMAND="ismaster";TS.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";TS.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");TS.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var QA=C((Zk)=>{Object.defineProperty(Zk,"__esModule",{value:!0});Zk.OP_MSG=Zk.OP_COMPRESSED=Zk.OP_DELETE=Zk.OP_QUERY=Zk.OP_INSERT=Zk.OP_UPDATE=Zk.OP_REPLY=Zk.MIN_SUPPORTED_QE_SERVER_VERSION=Zk.MIN_SUPPORTED_QE_WIRE_VERSION=Zk.MAX_SUPPORTED_WIRE_VERSION=Zk.MIN_SUPPORTED_WIRE_VERSION=Zk.MAX_SUPPORTED_SERVER_VERSION=Zk.MIN_SUPPORTED_SERVER_VERSION=void 0;Zk.MIN_SUPPORTED_SERVER_VERSION="4.2";Zk.MAX_SUPPORTED_SERVER_VERSION="8.0";Zk.MIN_SUPPORTED_WIRE_VERSION=8;Zk.MAX_SUPPORTED_WIRE_VERSION=25;Zk.MIN_SUPPORTED_QE_WIRE_VERSION=21;Zk.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Zk.OP_REPLY=1;Zk.OP_UPDATE=2001;Zk.OP_INSERT=2002;Zk.OP_QUERY=2004;Zk.OP_DELETE=2006;Zk.OP_COMPRESSED=2012;Zk.OP_MSG=2013});var i9=C((Xk)=>{Object.defineProperty(Xk,"__esModule",{value:!0});Xk.ReadConcern=Xk.ReadConcernLevel=void 0;Xk.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class sF{constructor(A){this.level=Xk.ReadConcernLevel[A]??A}static fromOptions(A){if(A==null)return;if(A.readConcern){let{readConcern:F}=A;if(F instanceof sF)return F;else if(typeof F==="string")return new sF(F);else if("level"in F&&F.level)return new sF(F.level)}if(A.level)return new sF(A.level);return}static get MAJORITY(){return Xk.ReadConcernLevel.majority}static get AVAILABLE(){return Xk.ReadConcernLevel.available}static get LINEARIZABLE(){return Xk.ReadConcernLevel.linearizable}static get SNAPSHOT(){return Xk.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}Xk.ReadConcern=sF});var E6=C((Yk)=>{Object.defineProperty(Yk,"__esModule",{value:!0});Yk.ReadPreference=Yk.ReadPreferenceMode=void 0;var zA=X1();Yk.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class A0{constructor(A,F,B){if(!A0.isValid(A))throw new zA.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(A)}`);if(B==null&&typeof F==="object"&&!Array.isArray(F))B=F,F=void 0;else if(F&&!Array.isArray(F))throw new zA.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=A,this.tags=F,this.hedge=B?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,B=B??{},B.maxStalenessSeconds!=null){if(B.maxStalenessSeconds<=0)throw new zA.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=B.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===A0.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new zA.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new zA.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new zA.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(A){return new A0(A)}static fromOptions(A){if(!A)return;let F=A.readPreference??A.session?.transaction.options.readPreference,B=A.readPreferenceTags;if(F==null)return;if(typeof F==="string")return new A0(F,B,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:A.hedge});else if(!(F instanceof A0)&&typeof F==="object"){let $=F.mode||F.preference;if($&&typeof $==="string")return new A0($,F.tags??B,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:A.hedge})}if(B)F.tags=B;return F}static translate(A){if(A.readPreference==null)return A;let F=A.readPreference;if(typeof F==="string")A.readPreference=new A0(F);else if(F&&!(F instanceof A0)&&typeof F==="object"){let B=F.mode||F.preference;if(B&&typeof B==="string")A.readPreference=new A0(B,F.tags,{maxStalenessSeconds:F.maxStalenessSeconds})}else if(!(F instanceof A0))throw new zA.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return A}static isValid(A){return new Set([A0.PRIMARY,A0.PRIMARY_PREFERRED,A0.SECONDARY,A0.SECONDARY_PREFERRED,A0.NEAREST,null]).has(A)}isValid(A){return A0.isValid(typeof A==="string"?A:this.mode)}secondaryOk(){return new Set([A0.PRIMARY_PREFERRED,A0.SECONDARY,A0.SECONDARY_PREFERRED,A0.NEAREST]).has(this.mode)}equals(A){return A.mode===this.mode}toJSON(){let A={mode:this.mode};if(Array.isArray(this.tags))A.tags=this.tags;if(this.maxStalenessSeconds)A.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)A.hedge=this.hedge;return A}}Yk.ReadPreference=A0;A0.PRIMARY=Yk.ReadPreferenceMode.primary;A0.PRIMARY_PREFERRED=Yk.ReadPreferenceMode.primaryPreferred;A0.SECONDARY=Yk.ReadPreferenceMode.secondary;A0.SECONDARY_PREFERRED=Yk.ReadPreferenceMode.secondaryPreferred;A0.NEAREST=Yk.ReadPreferenceMode.nearest;A0.primary=new A0(Yk.ReadPreferenceMode.primary);A0.primaryPreferred=new A0(Yk.ReadPreferenceMode.primaryPreferred);A0.secondary=new A0(Yk.ReadPreferenceMode.secondary);A0.secondaryPreferred=new A0(Yk.ReadPreferenceMode.secondaryPreferred);A0.nearest=new A0(Yk.ReadPreferenceMode.nearest)});var L9=C((Gk)=>{Object.defineProperty(Gk,"__esModule",{value:!0});Gk.ServerType=Gk.TopologyType=Gk.STATE_CONNECTED=Gk.STATE_CONNECTING=Gk.STATE_CLOSED=Gk.STATE_CLOSING=void 0;Gk._advanceClusterTime=ZQ1;Gk.STATE_CLOSING="closing";Gk.STATE_CLOSED="closed";Gk.STATE_CONNECTING="connecting";Gk.STATE_CONNECTED="connected";Gk.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Gk.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function ZQ1(A,F){if(A.clusterTime==null)A.clusterTime=F;else if(F.clusterTime.greaterThan(A.clusterTime.clusterTime))A.clusterTime=F}});var Hk=C((zk)=>{Object.defineProperty(zk,"__esModule",{value:!0});zk.OnDemandDocument=void 0;var a1=C0(),wZ={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class UY{constructor(A,F=0,B=!1,$){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=A,this.offset=F,this.isArray=B,this.elements=$??a1.parseToElementsToArray(this.bson,F)}isElementName(A,F){let B=F[wZ.nameLength],$=F[wZ.nameOffset];if(A.length!==B)return!1;let Z=$+B;for(let D=$,X=0;X<A.length&&D<Z;X++,D++)if(this.bson[D]!==A.charCodeAt(X))return!1;return!0}getElement(A){let F=this.cache[A];if(F===!1)return null;if(F!=null)return F;if(typeof A==="number")if(this.isArray)if(A<this.elements.length){let $={element:this.elements[A],value:void 0};return this.cache[A]=$,this.indexFound[A]=!0,$}else return null;else return null;for(let B=0;B<this.elements.length;B++){let $=this.elements[B];if(!(B in this.indexFound)&&this.isElementName(A,$)){let Z={element:$,value:void 0};return this.cache[A]=Z,this.indexFound[B]=!0,Z}}return this.cache[A]=!1,null}toJSValue(A,F){let B=A[wZ.type],$=A[wZ.offset],Z=A[wZ.length];if(F!==B)return null;switch(F){case a1.BSONType.null:case a1.BSONType.undefined:return null;case a1.BSONType.double:return a1.getFloat64LE(this.bson,$);case a1.BSONType.int:return a1.getInt32LE(this.bson,$);case a1.BSONType.long:return a1.getBigInt64LE(this.bson,$);case a1.BSONType.bool:return Boolean(this.bson[$]);case a1.BSONType.objectId:return new a1.ObjectId(this.bson.subarray($,$+12));case a1.BSONType.timestamp:return new a1.Timestamp(a1.getBigInt64LE(this.bson,$));case a1.BSONType.string:return a1.toUTF8(this.bson,$+4,$+Z-1,!1);case a1.BSONType.binData:{let D=a1.getInt32LE(this.bson,$),X=this.bson[$+4];if(X===2){let J=a1.getInt32LE(this.bson,$+1+4);if(J<0)throw new a1.BSONError("Negative binary type element size found for subtype 0x02");if(J>D-4)throw new a1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(J<D-4)throw new a1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new a1.Binary(this.bson.subarray($+1+4+4,$+1+4+4+J),2)}return new a1.Binary(this.bson.subarray($+1+4,$+1+4+D),X)}case a1.BSONType.date:return new Date(Number(a1.getBigInt64LE(this.bson,$)));case a1.BSONType.object:return new UY(this.bson,$);case a1.BSONType.array:return new UY(this.bson,$,!0);default:throw new a1.BSONError(`Unsupported BSON type: ${F}`)}}size(){return this.elements.length}has(A){let F=this.cache[A];if(F===!1)return!1;if(F!=null)return!0;return this.getElement(A)!=null}get(A,F,B){let $=this.getElement(A);if($==null)if(B===!0)throw new a1.BSONError(`BSON element "${A}" is missing`);else return null;if($.value==null){let Z=this.toJSValue($.element,F);if(Z==null)if(B===!0)throw new a1.BSONError(`BSON element "${A}" is missing`);else return null;$.value=Z}return $.value}getNumber(A,F){let B=this.get(A,a1.BSONType.bool),$=B==null?null:B?1:0,Z=this.get(A,a1.BSONType.long),D=Z==null?null:Number(Z),X=$??D??this.get(A,a1.BSONType.int)??this.get(A,a1.BSONType.double);if(F===!0&&X==null)throw new a1.BSONError(`BSON element "${A}" is missing`);return X}toObject(A){return a1.deserialize(this.bson,{...A,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let A=a1.getInt32LE(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+A)}}zk.OnDemandDocument=UY});var v7=C((Lk)=>{Object.defineProperty(Lk,"__esModule",{value:!0});Lk.ClientBulkWriteCursorResponse=Lk.ExplainedCursorResponse=Lk.CursorResponse=Lk.MongoDBResponse=void 0;Lk.isErrorResponse=Ck;var D0=C0(),qA=X1(),Uk=K1(),QQ1=Hk(),CY={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function Ck(A,F){for(let B=0;B<F.length;B++){let $=F[B];if($[CY.nameLength]===2){let Z=$[CY.nameOffset];if(A[Z]===111&&A[Z+1]===107){let D=$[CY.offset],X=$[CY.length];for(let J=D;J<D+X;J++)if(A[J]!==0)return!1;return!0}}}return!0}class UA extends QQ1.OnDemandDocument{get(A,F,B){try{return super.get(A,F,B)}catch($){throw new qA.MongoUnexpectedServerResponseError($.message,{cause:$})}}static is(A){return A instanceof UA}static make(A){let F=D0.parseToElementsToArray(A,0);return Ck(A,F)?new UA(A,0,!1,F):new this(A,0,!1,F)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===qA.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",D0.BSONType.object)?.getNumber("code")===qA.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let B=this.get("writeErrors",D0.BSONType.array);if(B?.size()){for(let $=0;$<B.size();$++)if(B.get($,D0.BSONType.object)?.getNumber("code")===qA.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",D0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",D0.BSONType.object)?.get("atClusterTime",D0.BSONType.timestamp)??this.get("atClusterTime",D0.BSONType.timestamp)}get operationTime(){return this.get("operationTime",D0.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",D0.BSONType.string)}get errmsg(){return this.get("errmsg",D0.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let A=this.get("$clusterTime",D0.BSONType.object);if(A==null)return this.clusterTime=null,null;let F=A.get("clusterTime",D0.BSONType.timestamp,!0),B=A.get("signature",D0.BSONType.object)?.toObject();this.clusterTime={clusterTime:F,signature:B}}return this.clusterTime??null}toObject(A){let F={...D0.pluckBSONSerializeOptions(A??{}),validation:D0.parseUtf8ValidationOption(A)};return super.toObject(F)}}Lk.MongoDBResponse=UA;UA.empty=new UA(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));class HA extends UA{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new HA(D0.serialize({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(A){return A instanceof HA||A===HA.emptyGetMore}get cursor(){return this.get("cursor",D0.BSONType.object,!0)}get id(){try{return D0.Long.fromBigInt(this.cursor.get("id",D0.BSONType.long,!0))}catch(A){throw new qA.MongoUnexpectedServerResponseError(A.message,{cause:A})}}get ns(){let A=this.cursor.get("ns",D0.BSONType.string);if(A!=null)return Uk.ns(A);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let A=this.encryptedResponse?.get("cursor",D0.BSONType.object);if(A?.has("firstBatch"))this._encryptedBatch=A.get("firstBatch",D0.BSONType.array,!0);else if(A?.has("nextBatch"))this._encryptedBatch=A.get("nextBatch",D0.BSONType.array,!0);else throw new qA.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let A=this.cursor;if(A.has("firstBatch"))this._batch=A.get("firstBatch",D0.BSONType.array,!0);else if(A.has("nextBatch"))this._batch=A.get("nextBatch",D0.BSONType.array,!0);else throw new qA.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",D0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(A){if(this.iterated>=this.batchSize)return null;let F=this.batch.get(this.iterated,D0.BSONType.object,!0)??null,B=this.encryptedBatch?.get(this.iterated,D0.BSONType.object,!0)??null;if(this.iterated+=1,A?.raw)return F.toBytes();else{let $=F.toObject(A);if(B)Uk.decorateDecryptionResult($,B.toObject(A),!0);return $}}clear(){this.iterated=this.batchSize}}Lk.CursorResponse=HA;class Kk extends HA{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return D0.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(A){if(this._length===0)return null;return this._length-=1,this.toObject(A)}}Lk.ExplainedCursorResponse=Kk;class Ek extends HA{get insertedCount(){return this.get("nInserted",D0.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",D0.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",D0.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",D0.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",D0.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",D0.BSONType.object,!1)}}Lk.ClientBulkWriteCursorResponse=Ek});var a6=C((Nk)=>{Object.defineProperty(Nk,"__esModule",{value:!0});Nk.WriteConcern=Nk.WRITE_CONCERN_KEYS=void 0;Nk.throwIfWriteConcernError=KQ1;var Vk=v7(),CQ1=X1();Nk.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class VZ{constructor(A,F,B,$){if(A!=null)if(!Number.isNaN(Number(A)))this.w=Number(A);else this.w=A;if(F!=null)this.wtimeoutMS=this.wtimeout=F;if(B!=null)this.journal=this.j=B;if($!=null)this.journal=this.j=$?!0:!1}static apply(A,F){let B={};if(F.w!=null)B.w=F.w;if(F.wtimeoutMS!=null)B.wtimeout=F.wtimeoutMS;if(F.journal!=null)B.j=F.j;return A.writeConcern=B,A}static fromOptions(A,F){if(A==null)return;F=F??{};let B;if(typeof A==="string"||typeof A==="number")B={w:A};else if(A instanceof VZ)B=A;else B=A.writeConcern;let Z={...F instanceof VZ?F:F.writeConcern,...B},{w:D=void 0,wtimeout:X=void 0,j:J=void 0,fsync:Y=void 0,journal:W=void 0,wtimeoutMS:G=void 0}=Z;if(D!=null||X!=null||G!=null||J!=null||W!=null||Y!=null)return new VZ(D,X??G,J??W,Y);return}}Nk.WriteConcern=VZ;function KQ1(A){if(typeof A==="object"&&A!=null){let F=Vk.MongoDBResponse.is(A)&&A.has("writeConcernError")?A.toObject():!Vk.MongoDBResponse.is(A)&&("writeConcernError"in A)?A:null;if(F!=null)throw new CQ1.MongoWriteConcernError(F)}}});var K1=C((gk)=>{Object.defineProperty(gk,"__esModule",{value:!0});gk.kDispose=gk.randomBytes=gk.COSMOS_DB_MSG=gk.DOCUMENT_DB_MSG=gk.COSMOS_DB_CHECK=gk.DOCUMENT_DB_CHECK=gk.MONGODB_WARNING_CODE=gk.DEFAULT_PK_FACTORY=gk.HostAddress=gk.BufferPool=gk.List=gk.MongoDBCollectionNamespace=gk.MongoDBNamespace=gk.ByteUtils=void 0;gk.isUint8Array=TQ1;gk.hostMatchesWildcards=OQ1;gk.normalizeHintField=SQ1;gk.isObject=AU;gk.mergeOptions=_Q1;gk.filterOptions=xQ1;gk.applyRetryableWrites=bQ1;gk.isPromiseLike=fQ1;gk.decorateWithCollation=gQ1;gk.decorateWithReadConcern=uQ1;gk.getTopology=Tk;gk.ns=yQ1;gk.makeCounter=vQ1;gk.uuidV4=hQ1;gk.maxWireVersion=dQ1;gk.arrayStrictEqual=mQ1;gk.errorStrictEqual=cQ1;gk.makeStateMachine=lQ1;gk.now=Ok;gk.calculateDurationInMs=pQ1;gk.hasAtomicOperators=Sk;gk.resolveTimeoutOptions=iQ1;gk.resolveOptions=nQ1;gk.isSuperset=kk;gk.isHello=sQ1;gk.setDifference=aQ1;gk.isRecord=rQ1;gk.emitWarning=xk;gk.emitWarningOnce=oQ1;gk.enumToString=eQ1;gk.supportsRetryableWrites=Az1;gk.shuffle=Fz1;gk.commandSupportsReadConcern=Bz1;gk.compareObjectId=$z1;gk.parseInteger=bk;gk.parseUnsignedInteger=Zz1;gk.checkParentDomainMatch=Dz1;gk.get=Xz1;gk.request=Jz1;gk.isHostMatch=Yz1;gk.promiseWithResolvers=ZU;gk.squashError=Wz1;gk.once=Gz1;gk.maybeAddIdToDocuments=Qz1;gk.fileIsAccessible=zz1;gk.csotMin=qz1;gk.noop=Hz1;gk.decorateDecryptionResult=fk;gk.addAbortListener=DU;gk.abortable=Uz1;var jk=A1("crypto"),wQ1=A1("fs"),Ik=A1("http"),eH=A1("timers"),VQ1=A1("url"),NQ1=A1("url"),MQ1=A1("util"),FU=C0(),RQ1=QA(),KY=l2(),t6=X1(),PQ1=i9(),jQ1=E6(),IQ1=L9(),Rk=a6();gk.ByteUtils={toLocalBufferType(A){return Buffer.isBuffer(A)?A:Buffer.from(A.buffer,A.byteOffset,A.byteLength)},equals(A,F){return gk.ByteUtils.toLocalBufferType(A).equals(F)},compare(A,F){return gk.ByteUtils.toLocalBufferType(A).compare(F)},toBase64(A){return gk.ByteUtils.toLocalBufferType(A).toString("base64")}};function TQ1(A){return A!=null&&typeof A==="object"&&Symbol.toStringTag in A&&A[Symbol.toStringTag]==="Uint8Array"}function OQ1(A,F){for(let B of F)if(A===B||B.startsWith("*.")&&A?.endsWith(B.substring(2,B.length))||B.startsWith("*/")&&A?.endsWith(B.substring(2,B.length)))return!0;return!1}function SQ1(A){let F=void 0;if(typeof A==="string")F=A;else if(Array.isArray(A))F={},A.forEach((B)=>{F[B]=1});else if(A!=null&&typeof A==="object"){F={};for(let B in A)F[B]=A[B]}return F}var kQ1=(A)=>Object.prototype.toString.call(A);function AU(A){return kQ1(A)==="[object Object]"}function _Q1(A,F){return{...A,...F}}function xQ1(A,F){let B={};for(let $ in A)if(F.includes($))B[$]=A[$];return B}function bQ1(A,F){if(F&&F.s.options?.retryWrites)A.retryWrites=!0;return A}function fQ1(A){return A!=null&&typeof A==="object"&&"then"in A&&typeof A.then==="function"}function gQ1(A,F,B){let $=Tk(F).capabilities;if(B.collation&&typeof B.collation==="object")if($&&$.commandsTakeCollation)A.collation=B.collation;else throw new t6.MongoCompatibilityError("Current topology does not support collation")}function uQ1(A,F,B){if(B&&B.session&&B.session.inTransaction())return;let $=Object.assign({},A.readConcern||{});if(F.s.readConcern)Object.assign($,F.s.readConcern);if(Object.keys($).length>0)Object.assign(A,{readConcern:$})}function Tk(A){if("topology"in A&&A.topology)return A.topology;else if("client"in A&&A.client.topology)return A.client.topology;throw new t6.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function yQ1(A){return RZ.fromString(A)}class RZ{constructor(A,F){this.db=A,this.collection=F===""?void 0:F}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(A){return new BU(this.db,A)}static fromString(A){if(typeof A!=="string"||A==="")throw new t6.MongoRuntimeError(`Cannot parse namespace from "${A}"`);let[F,...B]=A.split("."),$=B.join(".");return new RZ(F,$===""?void 0:$)}}gk.MongoDBNamespace=RZ;class BU extends RZ{constructor(A,F){super(A,F);this.collection=F}static fromString(A){return super.fromString(A)}}gk.MongoDBCollectionNamespace=BU;function*vQ1(A=0){let F=A;while(!0){let B=F;F+=1,yield B}}function hQ1(){let A=jk.randomBytes(16);return A[6]=A[6]&15|64,A[8]=A[8]&63|128,A}function dQ1(A){if(A){if(A.loadBalanced||A.serverApi?.version)return RQ1.MAX_SUPPORTED_WIRE_VERSION;if(A.hello)return A.hello.maxWireVersion;if("lastHello"in A&&typeof A.lastHello==="function"){let F=A.lastHello();if(F)return F.maxWireVersion}if(A.description&&"maxWireVersion"in A.description&&A.description.maxWireVersion!=null)return A.description.maxWireVersion}return 0}function mQ1(A,F){if(!Array.isArray(A)||!Array.isArray(F))return!1;return A.length===F.length&&A.every((B,$)=>B===F[$])}function cQ1(A,F){if(A===F)return!0;if(!A||!F)return A===F;if(A==null&&F!=null||A!=null&&F==null)return!1;if(A.constructor.name!==F.constructor.name)return!1;if(A.message!==F.message)return!1;return!0}function lQ1(A){return function F(B,$){let Z=A[B.s.state];if(Z&&Z.indexOf($)<0)throw new t6.MongoRuntimeError(`illegal state transition from [${B.s.state}] => [${$}], allowed: [${Z}]`);B.emit("stateChanged",B.s.state,$),B.s.state=$}}function Ok(){let A=process.hrtime();return Math.floor(A[0]*1000+A[1]/1e6)}function pQ1(A){if(typeof A!=="number")return-1;let F=Ok()-A;return F<0?0:F}function Sk(A,F){if(Array.isArray(A)){for(let $ of A)if(Sk($))return!0;return!1}let B=Object.keys(A);if(F?.ignoreUndefined){let $=!0;for(let Z of B)if(A[Z]!==void 0){$=!1;break}if($)throw new t6.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return B.length>0&&B[0][0]==="$"}function iQ1(A,F){let{socketTimeoutMS:B,serverSelectionTimeoutMS:$,waitQueueTimeoutMS:Z,timeoutMS:D}=A.s.options;return{socketTimeoutMS:B,serverSelectionTimeoutMS:$,waitQueueTimeoutMS:Z,timeoutMS:D,...F}}function nQ1(A,F){let B=Object.assign({},F,FU.resolveBSONOptions(F,A)),$=F?.timeoutMS??A?.timeoutMS,Z=F?.session;if(!Z?.inTransaction()){let J=PQ1.ReadConcern.fromOptions(F)??A?.readConcern;if(J)B.readConcern=J;let Y=Rk.WriteConcern.fromOptions(F)??A?.writeConcern;if(Y){if($!=null)Y=Rk.WriteConcern.fromOptions({writeConcern:{...Y,wtimeout:void 0,wtimeoutMS:void 0}});B.writeConcern=Y}}B.timeoutMS=$;let D=jQ1.ReadPreference.fromOptions(F)??A?.readPreference;if(D)B.readPreference=D;if(Z?.explicit&&Z?.timeoutContext!=null&&F?.timeoutMS!=null)throw new t6.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return B}function kk(A,F){A=Array.isArray(A)?new Set(A):A,F=Array.isArray(F)?new Set(F):F;for(let B of F)if(!A.has(B))return!1;return!0}function sQ1(A){return A[KY.LEGACY_HELLO_COMMAND]||A.hello?!0:!1}function aQ1(A,F){let B=new Set(A);for(let $ of F)B.delete($);return B}var tQ1=(A,F)=>Object.prototype.hasOwnProperty.call(A,F);function rQ1(A,F=void 0){if(!AU(A))return!1;let B=A.constructor;if(B&&B.prototype){if(!AU(B.prototype))return!1;if(!tQ1(B.prototype,"isPrototypeOf"))return!1}if(F){let $=Object.keys(A);return kk($,F)}return!0}class $U{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let A of this.nodes())yield A.value}*nodes(){let A=this.head.next;while(A!==this.head){let{next:F}=A;yield A,A=F}}push(A){this.count+=1;let F={next:this.head,prev:this.head.prev,value:A};this.head.prev.next=F,this.head.prev=F}pushMany(A){for(let F of A)this.push(F)}unshift(A){this.count+=1;let F={next:this.head.next,prev:this.head,value:A};this.head.next.prev=F,this.head.next=F}remove(A){if(A===this.head||this.length===0)return null;this.count-=1;let{prev:F,next:B}=A;return F.next=B,B.prev=F,A.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(A){for(let F of this.nodes())if(A(F.value))this.remove(F)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}gk.List=$U;class _k{constructor(){this.buffers=new $U,this.totalByteLength=0}get length(){return this.totalByteLength}append(A){this.buffers.push(A),this.totalByteLength+=A.length}getInt32(){if(this.totalByteLength<4)return null;let A=this.buffers.first();if(A!=null&&A.byteLength>=4)return A.readInt32LE(0);let F=this.read(4),B=F.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(F),B}read(A){if(typeof A!=="number"||A<0)throw new t6.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(A>this.totalByteLength)return Buffer.alloc(0);let F=Buffer.allocUnsafe(A);for(let B=0;B<A;){let $=this.buffers.shift();if($==null)break;let Z=A-B,D=Math.min(Z,$.byteLength),X=$.subarray(0,D);if(F.set(X,B),B+=D,this.totalByteLength-=D,D<$.byteLength)this.buffers.unshift($.subarray(D))}return F}}gk.BufferPool=_k;class MZ{constructor(A){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let F=A.split(" ").join("%20");if(F.endsWith(".sock")){this.socketPath=decodeURIComponent(F);return}let B=`iLoveJS://${F}`,$;try{$=new NQ1.URL(B)}catch(J){let Y=new t6.MongoRuntimeError(`Unable to parse ${F} with URL`);throw Y.cause=J,Y}let{hostname:Z,port:D}=$,X=decodeURIComponent(Z).toLowerCase();if(X.startsWith("[")&&X.endsWith("]"))this.isIPv6=!0,X=X.substring(1,Z.length-1);if(this.host=X.toLowerCase(),typeof D==="number")this.port=D;else if(typeof D==="string"&&D!=="")this.port=Number.parseInt(D,10);else this.port=27017;if(this.port===0)throw new t6.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(A){return new MZ(A)}static fromHostPort(A,F){if(A.includes(":"))A=`[${A}]`;return MZ.fromString(`${A}:${F}`)}static fromSrvRecord({name:A,port:F}){return MZ.fromHostPort(A,F)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let A=this.host??"",F=this.port??0;return{host:A,port:F}}}gk.HostAddress=MZ;gk.DEFAULT_PK_FACTORY={createPk(){return new FU.ObjectId}};gk.MONGODB_WARNING_CODE="MONGODB DRIVER";function xk(A){return process.emitWarning(A,{code:gk.MONGODB_WARNING_CODE})}var Pk=new Set;function oQ1(A){if(!Pk.has(A))return Pk.add(A),xk(A)}function eQ1(A){return Object.values(A).join(", ")}function Az1(A){if(!A)return!1;if(A.loadBalanced)return!0;if(A.description.logicalSessionTimeoutMinutes!=null){if(A.description.type!==IQ1.ServerType.Standalone)return!0}return!1}function Fz1(A,F=0){let B=Array.from(A);if(F>B.length)throw new t6.MongoRuntimeError("Limit must be less than the number of items");let $=B.length,Z=F%B.length===0?1:B.length-F;while($>Z){let D=Math.floor(Math.random()*$);$-=1;let X=B[$];B[$]=B[D],B[D]=X}return F%B.length===0?B:B.slice(Z)}function Bz1(A){if(A.aggregate||A.count||A.distinct||A.find||A.geoNear)return!0;return!1}function $z1(A,F){if(A==null&&F==null)return 0;if(A==null)return-1;if(F==null)return 1;return gk.ByteUtils.compare(A.id,F.id)}function bk(A){if(typeof A==="number")return Math.trunc(A);let F=Number.parseInt(String(A),10);return Number.isNaN(F)?null:F}function Zz1(A){let F=bk(A);return F!=null&&F>=0?F:null}function Dz1(A,F){let B=A.endsWith(".")?A.slice(0,A.length-1):A,$=F.endsWith(".")?F.slice(0,F.length-1):F,Z=/^.*?\./,D=$.split(".").length<3,X=`.${B.replace(Z,"")}`,J=D?$:`.${$.replace(Z,"")}`;if(!J.startsWith("."))J="."+J;if(D&&B.split(".").length<=$.split(".").length)throw new t6.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!X.endsWith(J))throw new t6.MongoAPIError("Server record does not share hostname with parent URI")}function Xz1(A,F={}){return new Promise((B,$)=>{let Z,D=Ik.get(A,F,(X)=>{X.setEncoding("utf8");let J="";X.on("data",(Y)=>J+=Y),X.on("end",()=>{eH.clearTimeout(Z),B({status:X.statusCode,body:J})})}).on("error",(X)=>{eH.clearTimeout(Z),$(X)}).end();Z=eH.setTimeout(()=>{D.destroy(new t6.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Jz1(A,F={}){return await new Promise((B,$)=>{let Z={method:"GET",timeout:1e4,json:!0,...VQ1.parse(A),...F},D=Ik.request(Z,(X)=>{X.setEncoding("utf8");let J="";X.on("data",(Y)=>{J+=Y}),X.once("end",()=>{if(F.json===!1){B(J);return}try{let Y=JSON.parse(J);B(Y)}catch{$(new t6.MongoRuntimeError(`Invalid JSON response: "${J}"`))}})});D.once("timeout",()=>D.destroy(new t6.MongoNetworkTimeoutError(`Network request to ${A} timed out after ${F.timeout} ms`))),D.once("error",(X)=>$(X)),D.end()})}gk.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;gk.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;gk.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";gk.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Yz1(A,F){return F&&A.test(F.toLowerCase())?!0:!1}function ZU(){let A,F;return{promise:new Promise(function $(Z,D){A=Z,F=D}),resolve:A,reject:F}}function Wz1(A){return}gk.randomBytes=MQ1.promisify(jk.randomBytes);async function Gz1(A,F,B){B?.signal?.throwIfAborted();let{promise:$,resolve:Z,reject:D}=ZU(),X=(W)=>Z(W),J=(W)=>D(W),Y=DU(B?.signal,function(){D(this.reason)});A.once(F,X).once("error",J);try{return await $}finally{A.off(F,X),A.off("error",J),Y?.[gk.kDispose]()}}function Qz1(A,F,B){if((typeof B.forceServerObjectId==="boolean"?B.forceServerObjectId:A.s.db.options?.forceServerObjectId)===!0)return F;let Z=(D)=>{if(D._id==null)D._id=A.s.pkFactory.createPk();return D};return Array.isArray(F)?F.map(Z):Z(F)}async function zz1(A,F){try{return await wQ1.promises.access(A,F),!0}catch{return!1}}function qz1(A,F){if(A===0)return F;if(F===0)return A;return Math.min(A,F)}function Hz1(){return}function fk(A,F,B=!0){if(B){if(Buffer.isBuffer(F))F=FU.deserialize(F);if(Buffer.isBuffer(A))throw new t6.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!A||typeof A!=="object")return;for(let $ of Object.keys(A)){let Z=F[$];if(Z&&Z._bsontype==="Binary"&&Z.sub_type===6){if(!A[KY.kDecoratedKeys])Object.defineProperty(A,KY.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});A[KY.kDecoratedKeys].push($);continue}fk(A[$],Z,!1)}}gk.kDispose=Symbol.dispose??Symbol("dispose");function DU(A,F){if(A==null)return;return A.addEventListener("abort",F,{once:!0}),{[gk.kDispose]:()=>A.removeEventListener("abort",F)}}async function Uz1(A,{signal:F}){if(F==null)return await A;let{promise:B,reject:$}=ZU(),Z=F.aborted?$(F.reason):DU(F,function(){$(this.reason)});try{return await Promise.race([A,B])}finally{Z?.[gk.kDispose]()}}});var Z5=C((ck)=>{Object.defineProperty(ck,"__esModule",{value:!0});ck.MongoLogger=ck.MongoLoggableComponent=ck.SEVERITY_LEVEL_MAP=ck.DEFAULT_MAX_DOCUMENT_LENGTH=ck.SeverityLevel=void 0;ck.parseSeverityFromString=YU;ck.createStdioLogger=CA;ck.stringifyWithMaxLen=$5;ck.defaultLogTransform=dk;var yk=A1("util"),vk=C0(),A2=l2(),KA=K1();ck.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});ck.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class hk extends Map{constructor(A){let F=[];for(let[B,$]of A)F.push([$,B]);F.push(...A);super(F)}getNumericSeverityLevel(A){return this.get(A)}getSeverityLevelName(A){return this.get(A)}}ck.SEVERITY_LEVEL_MAP=new hk([[ck.SeverityLevel.OFF,-1/0],[ck.SeverityLevel.EMERGENCY,0],[ck.SeverityLevel.ALERT,1],[ck.SeverityLevel.CRITICAL,2],[ck.SeverityLevel.ERROR,3],[ck.SeverityLevel.WARNING,4],[ck.SeverityLevel.NOTICE,5],[ck.SeverityLevel.INFORMATIONAL,6],[ck.SeverityLevel.DEBUG,7],[ck.SeverityLevel.TRACE,8]]);ck.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function YU(A){let F=Object.values(ck.SeverityLevel),B=A?.toLowerCase();if(B!=null&&F.includes(B))return B;return null}function CA(A){return{write:yk.promisify((F,B)=>{let $=yk.inspect(F,{compact:!0,breakLength:1/0});A.write(`${$}
`,"utf-8",B);return})}}function Mq1({MONGODB_LOG_PATH:A},{mongodbLogPath:F}){if(typeof F==="string"&&/^stderr$/i.test(F))return{mongodbLogPath:CA(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof F==="string"&&/^stdout$/i.test(F))return{mongodbLogPath:CA(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof F==="object"&&typeof F?.write==="function")return{mongodbLogPath:F,mongodbLogPathIsStdErr:!1};if(A&&/^stderr$/i.test(A))return{mongodbLogPath:CA(process.stderr),mongodbLogPathIsStdErr:!0};if(A&&/^stdout$/i.test(A))return{mongodbLogPath:CA(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:CA(process.stderr),mongodbLogPathIsStdErr:!0}}function aF(A,F,B){return YU(A)??YU(F)??B}function Rq1(A,F){let B=ck.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A),$=ck.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F);return B<$?-1:B>$?1:0}function $5(A,F,B={}){let $="",Z=0,D=function X(J,Y){if(Z>=F)return;if(J==="")return Z+=1,Y;if(Z+=J.length+4,Y==null)return Y;switch(typeof Y){case"string":Z+=Y.length+2;break;case"number":case"bigint":Z+=String(Y).length;break;case"boolean":Z+=Y?4:5;break;case"object":if(KA.isUint8Array(Y))Z+=22+Y.byteLength+Y.byteLength*0.33+18|0;else if("_bsontype"in Y){let W=Y;switch(W._bsontype){case"Int32":Z+=String(W.value).length;break;case"Double":Z+=(W.value|0)===W.value?String(W.value).length+2:String(W.value).length;break;case"Long":Z+=W.toString().length;break;case"ObjectId":Z+=35;break;case"MaxKey":case"MinKey":Z+=13;break;case"Binary":Z+=22+Y.position+Y.position*0.33+18|0;break;case"Timestamp":Z+=19+String(W.t).length+5+String(W.i).length+2;break;case"Code":if(W.scope==null)Z+=W.code.length+10+2;else Z+=W.code.length+10+11;break;case"BSONRegExp":Z+=34+W.pattern.length+13+W.options.length+3;break}}}return Y};if(typeof A==="string")$=A;else if(typeof A==="function")$=A.name;else try{if(F!==0)$=vk.EJSON.stringify(A,D,0,B);else $=vk.EJSON.stringify(A,B)}catch(X){$=`Extended JSON serialization failed with: ${X.message}`}if(F!==0&&$.length>F&&$.charCodeAt(F-1)!==$.codePointAt(F-1)){if(F--,F===0)return""}return F!==0&&$.length>F?`${$.slice(0,F)}...`:$}function Pq1(A){let F=A;return F.toLog!==void 0&&typeof F.toLog==="function"}function EY(A,F,B=ck.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:$,operation:Z,topologyDescription:D,message:X}=F;return A.selector=$5($,B),A.operation=Z,A.topologyDescription=$5(D,B),A.message=X,A}function XU(A,F){A.commandName=F.commandName,A.requestId=F.requestId,A.driverConnectionId=F.connectionId;let{host:B,port:$}=KA.HostAddress.fromString(F.address).toHostPort();if(A.serverHost=B,A.serverPort=$,F?.serviceId)A.serviceId=F.serviceId.toHexString();return A.databaseName=F.databaseName,A.serverConnectionId=F.serverConnectionId,A}function w9(A,F){let{host:B,port:$}=KA.HostAddress.fromString(F.address).toHostPort();return A.serverHost=B,A.serverPort=$,A}function B5(A,F){return A.topologyId=F.topologyId,A}function JU(A,F){let{awaited:B,connectionId:$}=F;A.awaited=B,A.driverConnectionId=F.connectionId;let{host:Z,port:D}=KA.HostAddress.fromString($).toHostPort();return A.serverHost=Z,A.serverPort=D,A}function dk(A,F=ck.DEFAULT_MAX_DOCUMENT_LENGTH){let B=Object.create(null);switch(A.name){case A2.SERVER_SELECTION_STARTED:return B=EY(B,A,F),B;case A2.SERVER_SELECTION_FAILED:return B=EY(B,A,F),B.failure=A.failure?.message,B;case A2.SERVER_SELECTION_SUCCEEDED:return B=EY(B,A,F),B.serverHost=A.serverHost,B.serverPort=A.serverPort,B;case A2.WAITING_FOR_SUITABLE_SERVER:return B=EY(B,A,F),B.remainingTimeMS=A.remainingTimeMS,B;case A2.COMMAND_STARTED:return B=XU(B,A),B.message="Command started",B.command=$5(A.command,F,{relaxed:!0}),B.databaseName=A.databaseName,B;case A2.COMMAND_SUCCEEDED:return B=XU(B,A),B.message="Command succeeded",B.durationMS=A.duration,B.reply=$5(A.reply,F,{relaxed:!0}),B;case A2.COMMAND_FAILED:return B=XU(B,A),B.message="Command failed",B.durationMS=A.duration,B.failure=A.failure?.message??"(redacted)",B;case A2.CONNECTION_POOL_CREATED:if(B=w9(B,A),B.message="Connection pool created",A.options){let{maxIdleTimeMS:$,minPoolSize:Z,maxPoolSize:D,maxConnecting:X,waitQueueTimeoutMS:J}=A.options;B={...B,maxIdleTimeMS:$,minPoolSize:Z,maxPoolSize:D,maxConnecting:X,waitQueueTimeoutMS:J}}return B;case A2.CONNECTION_POOL_READY:return B=w9(B,A),B.message="Connection pool ready",B;case A2.CONNECTION_POOL_CLEARED:if(B=w9(B,A),B.message="Connection pool cleared",A.serviceId?._bsontype==="ObjectId")B.serviceId=A.serviceId?.toHexString();return B;case A2.CONNECTION_POOL_CLOSED:return B=w9(B,A),B.message="Connection pool closed",B;case A2.CONNECTION_CREATED:return B=w9(B,A),B.message="Connection created",B.driverConnectionId=A.connectionId,B;case A2.CONNECTION_READY:return B=w9(B,A),B.message="Connection ready",B.driverConnectionId=A.connectionId,B.durationMS=A.durationMS,B;case A2.CONNECTION_CLOSED:switch(B=w9(B,A),B.message="Connection closed",B.driverConnectionId=A.connectionId,A.reason){case"stale":B.reason="Connection became stale because the pool was cleared";break;case"idle":B.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(B.reason="An error occurred while using the connection",A.error)B.error=A.error;break;case"poolClosed":B.reason="Connection pool was closed";break;default:B.reason=`Unknown close reason: ${A.reason}`}return B;case A2.CONNECTION_CHECK_OUT_STARTED:return B=w9(B,A),B.message="Connection checkout started",B;case A2.CONNECTION_CHECK_OUT_FAILED:switch(B=w9(B,A),B.message="Connection checkout failed",A.reason){case"poolClosed":B.reason="Connection pool was closed";break;case"timeout":B.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(B.reason="An error occurred while trying to establish a new connection",A.error)B.error=A.error;break;default:B.reason=`Unknown close reason: ${A.reason}`}return B.durationMS=A.durationMS,B;case A2.CONNECTION_CHECKED_OUT:return B=w9(B,A),B.message="Connection checked out",B.driverConnectionId=A.connectionId,B.durationMS=A.durationMS,B;case A2.CONNECTION_CHECKED_IN:return B=w9(B,A),B.message="Connection checked in",B.driverConnectionId=A.connectionId,B;case A2.SERVER_OPENING:return B=B5(B,A),B=w9(B,A),B.message="Starting server monitoring",B;case A2.SERVER_CLOSED:return B=B5(B,A),B=w9(B,A),B.message="Stopped server monitoring",B;case A2.SERVER_HEARTBEAT_STARTED:return B=B5(B,A),B=JU(B,A),B.message="Server heartbeat started",B;case A2.SERVER_HEARTBEAT_SUCCEEDED:return B=B5(B,A),B=JU(B,A),B.message="Server heartbeat succeeded",B.durationMS=A.duration,B.serverConnectionId=A.serverConnectionId,B.reply=$5(A.reply,F,{relaxed:!0}),B;case A2.SERVER_HEARTBEAT_FAILED:return B=B5(B,A),B=JU(B,A),B.message="Server heartbeat failed",B.durationMS=A.duration,B.failure=A.failure?.message,B;case A2.TOPOLOGY_OPENING:return B=B5(B,A),B.message="Starting topology monitoring",B;case A2.TOPOLOGY_CLOSED:return B=B5(B,A),B.message="Stopped topology monitoring",B;case A2.TOPOLOGY_DESCRIPTION_CHANGED:return B=B5(B,A),B.message="Topology description changed",B.previousDescription=B.reply=$5(A.previousDescription,F),B.newDescription=B.reply=$5(A.newDescription,F),B;default:for(let[$,Z]of Object.entries(A))if(Z!=null)B[$]=Z}return B}class mk{constructor(A){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=A.componentSeverities,this.maxDocumentLength=A.maxDocumentLength,this.logDestination=A.logDestination,this.logDestinationIsStdErr=A.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let A=Object();for(let F of Object.values(ck.MongoLoggableComponent)){A[F]={};for(let B of Object.values(ck.SeverityLevel))A[F][B]=Rq1(B,this.componentSeverities[F])<=0}return A}turnOffSeverities(){for(let A of Object.values(ck.MongoLoggableComponent)){this.componentSeverities[A]=ck.SeverityLevel.OFF;for(let F of Object.values(ck.SeverityLevel))this.severities[A][F]=!1}}logWriteFailureHandler(A){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=CA(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(ck.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:A.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(A,F){if(F===ck.SeverityLevel.OFF)return!1;return this.severities[A][F]}log(A,F,B){if(!this.willLog(F,A))return;let $={t:new Date,c:F,s:A};if(typeof B==="string")$.message=B;else if(typeof B==="object")if(Pq1(B))$={...$,...B.toLog()};else $={...$,...dk(B,this.maxDocumentLength)};if(KA.isPromiseLike(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write($)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let Z=this.logDestination.write($);if(KA.isPromiseLike(Z))this.pendingLog=Z.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(Z){this.logWriteFailureHandler(Z)}}static resolveOptions(A,F){let B=Mq1(A,F),$={...A,...F,mongodbLogPath:B.mongodbLogPath,mongodbLogPathIsStdErr:B.mongodbLogPathIsStdErr},Z=aF($.mongodbLogComponentSeverities?.default,$.MONGODB_LOG_ALL,ck.SeverityLevel.OFF);return{componentSeverities:{command:aF($.mongodbLogComponentSeverities?.command,$.MONGODB_LOG_COMMAND,Z),topology:aF($.mongodbLogComponentSeverities?.topology,$.MONGODB_LOG_TOPOLOGY,Z),serverSelection:aF($.mongodbLogComponentSeverities?.serverSelection,$.MONGODB_LOG_SERVER_SELECTION,Z),connection:aF($.mongodbLogComponentSeverities?.connection,$.MONGODB_LOG_CONNECTION,Z),client:aF($.mongodbLogComponentSeverities?.client,$.MONGODB_LOG_CLIENT,Z),default:Z},maxDocumentLength:$.mongodbLogMaxDocumentLength??KA.parseUnsignedInteger($.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:$.mongodbLogPath,logDestinationIsStdErr:$.mongodbLogPathIsStdErr}}}ck.MongoLogger=mk});var V9=C((ik)=>{Object.defineProperty(ik,"__esModule",{value:!0});ik.CancellationToken=ik.TypedEventEmitter=void 0;var Sq1=A1("events"),kq1=Z5(),_q1=K1();class QU extends Sq1.EventEmitter{emitAndLog(A,...F){if(this.emit(A,...F),this.component)this.mongoLogger?.debug(this.component,F[0])}emitAndLogHeartbeat(A,F,B,...$){if(this.emit(A,...$),this.component){let Z={topologyId:F,serverConnectionId:B??null,...$[0]};this.mongoLogger?.debug(this.component,Z)}}emitAndLogCommand(A,F,B,$,...Z){if(A)this.emit(F,...Z);if($){let D={databaseName:B,...Z[0]};this.mongoLogger?.debug(kq1.MongoLoggableComponent.COMMAND,D)}}}ik.TypedEventEmitter=QU;class pk extends QU{constructor(...A){super(...A);this.on("error",_q1.noop)}}ik.CancellationToken=pk});var IZ=C((tk)=>{Object.defineProperty(tk,"__esModule",{value:!0});tk.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;tk.writableServerSelector=fq1;tk.sameServerSelector=gq1;tk.secondaryWritableServerSelector=uq1;tk.readPreferenceServerSelector=zU;var NY=X1(),jZ=E6(),N9=L9(),bq1=1e4,sk=90;tk.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function fq1(){return function A(F,B){return wY(F,B.filter(($)=>$.isWritable))}}function gq1(A){return function F(B,$){if(!A)return[];return $.filter((Z)=>{return Z.address===A.address&&Z.type!==N9.ServerType.Unknown})}}function uq1(A,F){if(!F||!A||A&&A<tk.MIN_SECONDARY_WRITE_WIRE_VERSION)return zU(jZ.ReadPreference.primary);return zU(F)}function yq1(A,F,B){if(A.maxStalenessSeconds==null||A.maxStalenessSeconds<0)return B;let $=A.maxStalenessSeconds,Z=(F.heartbeatFrequencyMS+bq1)/1000;if($<Z)throw new NY.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${Z} seconds`);if($<sk)throw new NY.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${sk} seconds`);if(F.type===N9.TopologyType.ReplicaSetWithPrimary){let D=Array.from(F.servers.values()).filter(VY)[0];return B.reduce((X,J)=>{let W=(J.lastUpdateTime-J.lastWriteDate-(D.lastUpdateTime-D.lastWriteDate)+F.heartbeatFrequencyMS)/1000,G=A.maxStalenessSeconds??0;if(W<=G)X.push(J);return X},[])}if(F.type===N9.TopologyType.ReplicaSetNoPrimary){if(B.length===0)return B;let D=B.reduce((X,J)=>J.lastWriteDate>X.lastWriteDate?J:X);return B.reduce((X,J)=>{let W=(D.lastWriteDate-J.lastWriteDate+F.heartbeatFrequencyMS)/1000,G=A.maxStalenessSeconds??0;if(W<=G)X.push(J);return X},[])}return B}function vq1(A,F){let B=Object.keys(A),$=Object.keys(F);for(let Z=0;Z<B.length;++Z){let D=B[Z];if($.indexOf(D)===-1||F[D]!==A[D])return!1}return!0}function hq1(A,F){if(A.tags==null||Array.isArray(A.tags)&&A.tags.length===0)return F;for(let B=0;B<A.tags.length;++B){let $=A.tags[B],Z=F.reduce((D,X)=>{if(vq1($,X.tags))D.push(X);return D},[]);if(Z.length)return Z}return[]}function wY(A,F){let B=F.reduce((Z,D)=>Math.min(D.roundTripTime,Z),1/0),$=B+A.localThresholdMS;return F.reduce((Z,D)=>{if(D.roundTripTime<=$&&D.roundTripTime>=B)Z.push(D);return Z},[])}function VY(A){return A.type===N9.ServerType.RSPrimary}function dq1(A){return A.type===N9.ServerType.RSSecondary}function mq1(A){return A.type===N9.ServerType.RSSecondary||A.type===N9.ServerType.RSPrimary}function ak(A){return A.type!==N9.ServerType.Unknown}function cq1(A){return A.type===N9.ServerType.LoadBalancer}function zU(A){if(!A.isValid())throw new NY.MongoInvalidArgumentError("Invalid read preference specified");return function F(B,$,Z=[]){let D=B.commonWireVersion;if(D&&A.minWireVersion&&A.minWireVersion>D)throw new NY.MongoCompatibilityError(`Minimum wire version '${A.minWireVersion}' required, but found '${D}'`);if(B.type===N9.TopologyType.LoadBalanced)return $.filter(cq1);if(B.type===N9.TopologyType.Unknown)return[];if(B.type===N9.TopologyType.Single)return wY(B,$.filter(ak));if(B.type===N9.TopologyType.Sharded){let W=$.filter((Q)=>{return!Z.includes(Q)}),G=W.length>0?W:Z;return wY(B,G.filter(ak))}let X=A.mode;if(X===jZ.ReadPreference.PRIMARY)return $.filter(VY);if(X===jZ.ReadPreference.PRIMARY_PREFERRED){let W=$.filter(VY);if(W.length)return W}let J=X===jZ.ReadPreference.NEAREST?mq1:dq1,Y=wY(B,hq1(A,yq1(A,B,$.filter(J))));if(X===jZ.ReadPreference.SECONDARY_PREFERRED&&Y.length===0)return $.filter(VY);return Y}}});var r6=C((ok)=>{Object.defineProperty(ok,"__esModule",{value:!0});ok.LegacyTimeoutContext=ok.CSOTTimeoutContext=ok.TimeoutContext=ok.Timeout=ok.TimeoutError=void 0;var rk=A1("timers"),EA=X1(),HU=K1();class MY extends Error{get name(){return"TimeoutError"}constructor(A,F){super(A,F);this.duration=F.duration}static is(A){return A!=null&&typeof A==="object"&&"name"in A&&A.name==="TimeoutError"}}ok.TimeoutError=MY;class M9 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(A=()=>null,F){let B=F?.duration??0,$=!!F?.unref,Z=F?.rejection;if(B<0)throw new EA.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let D;super((X,J)=>{D=J,A(HU.noop,J)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=B,this.start=Math.trunc(performance.now()),Z==null&&this.duration>0){if(this.id=rk.setTimeout(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,D(new MY(`Expired after ${B}ms`,{duration:B}))},this.duration),typeof this.id.unref==="function"&&$)this.id.unref()}else if(Z!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,D(Z)}clear(){rk.clearTimeout(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,HU.squashError),new MY("Timed out",{duration:this.duration})}static expires(A,F){return new M9(void 0,{duration:A,unref:F})}static reject(A){return new M9(void 0,{duration:0,unref:!0,rejection:A})}}ok.Timeout=M9;function sq1(A){return A!=null&&typeof A==="object"&&"serverSelectionTimeoutMS"in A&&typeof A.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in A&&typeof A.waitQueueTimeoutMS==="number"}function aq1(A){return A!=null&&typeof A==="object"&&"serverSelectionTimeoutMS"in A&&typeof A.serverSelectionTimeoutMS==="number"&&"timeoutMS"in A&&typeof A.timeoutMS==="number"}class RY{static create(A){if(A.session?.timeoutContext!=null)return A.session?.timeoutContext;if(aq1(A))return new TZ(A);else if(sq1(A))return new PY(A);else throw new EA.MongoRuntimeError("Unrecognized options")}}ok.TimeoutContext=RY;class TZ extends RY{constructor(A){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=A.timeoutMS,this.serverSelectionTimeoutMS=A.serverSelectionTimeoutMS,this.socketTimeoutMS=A.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let A=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-A}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:A,serverSelectionTimeoutMS:F}=this;if(A<=0)return M9.reject(new EA.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(F!==0&&HU.csotMin(A,F)===F)this._serverSelectionTimeout=M9.expires(F);else if(A>0&&Number.isFinite(A))this._serverSelectionTimeout=M9.expires(A);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new EA.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:A}=this;if(!Number.isFinite(A))return null;if(A>0)return M9.expires(A);return M9.reject(new EA.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:A}=this;if(!Number.isFinite(A))return null;if(A>0)return M9.expires(A);return M9.reject(new EA.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(A){let{remainingTimeMS:F}=this;if(F<=0)throw new EA.MongoOperationTimeoutError(A??`Expired after ${this.timeoutMS}ms`);return F}clone(){let A=new TZ({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return A.start=this.start,A}refreshed(){return new TZ(this)}addMaxTimeMSToCommand(A,F){if(F.omitMaxTimeMS)return;let B=this.remainingTimeMS-this.minRoundTripTime;if(B>0&&Number.isFinite(B))A.maxTimeMS=B}getSocketTimeoutMS(){return 0}}ok.CSOTTimeoutContext=TZ;class PY extends RY{constructor(A){super();this.options=A,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return M9.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return M9.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new PY(this.options)}addMaxTimeMSToCommand(A,F){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}ok.LegacyTimeoutContext=PY});var P0=C((F_)=>{Object.defineProperty(F_,"__esModule",{value:!0});F_.AbstractOperation=F_.Aspect=void 0;F_.defineAspects=FH1;var AH1=C0(),UU=E6();F_.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING")};class A_{constructor(A={}){this.readPreference=this.hasAspect(F_.Aspect.WRITE_OPERATION)?UU.ReadPreference.primary:UU.ReadPreference.fromOptions(A)??UU.ReadPreference.primary,this.bsonOptions=AH1.resolveBSONOptions(A),this._session=A.session!=null?A.session:void 0,this.options=A,this.bypassPinningCheck=!!A.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(A){let F=this.constructor;if(F.aspects==null)return!1;return F.aspects.has(A)}get session(){return this._session}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(F_.Aspect.RETRYABLE)&&this.hasAspect(F_.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(F_.Aspect.RETRYABLE)&&this.hasAspect(F_.Aspect.WRITE_OPERATION)}}F_.AbstractOperation=A_;function FH1(A,F){if(!Array.isArray(F)&&!(F instanceof Set))F=[F];return F=new Set(F),Object.defineProperty(A,"aspects",{value:F,writable:!1}),F}});var e6=C((X_)=>{Object.defineProperty(X_,"__esModule",{value:!0});X_.executeOperation=DH1;var o6=X1(),$_=E6(),Z_=IZ(),$H1=r6(),CU=K1(),$3=P0(),ZH1=o6.MONGODB_ERROR_CODES.IllegalOperation,D_="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function DH1(A,F,B){if(!(F instanceof $3.AbstractOperation))throw new o6.MongoRuntimeError("This method requires a valid operation instance");let $=A.topology==null?await CU.abortable(XH1(A),F.options):A.topology,Z=F.session,D;if(Z==null)D=Symbol(),Z=A.startSession({owner:D,explicit:!1});else if(Z.hasEnded)throw new o6.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(Z.snapshotEnabled&&!$.capabilities.supportsSnapshotReads)throw new o6.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(Z.client!==A)throw new o6.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");let X=F.readPreference??$_.ReadPreference.primary,J=!!Z?.inTransaction(),Y=F.hasAspect($3.Aspect.READ_OPERATION);if(J&&!X.equals($_.ReadPreference.primary)&&(Y||F.commandName==="runCommand"))throw new o6.MongoTransactionError(`Read preference in a transaction must be primary, not: ${X.mode}`);if(Z?.isPinned&&Z.transaction.isCommitted&&!F.bypassPinningCheck)Z.unpin();B??=$H1.TimeoutContext.create({session:Z,serverSelectionTimeoutMS:A.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:A.s.options.waitQueueTimeoutMS,timeoutMS:F.options.timeoutMS});try{return await JH1(F,{topology:$,timeoutContext:B,session:Z,readPreference:X})}finally{if(Z?.owner!=null&&Z.owner===D)await Z.endSession()}}async function XH1(A){if(A.topology==null){if(A.s.hasBeenClosed)throw new o6.MongoNotConnectedError("Client must be connected before running operations");A.s.options.__skipPingOnConnect=!0;try{if(await A.connect(),A.topology==null)throw new o6.MongoRuntimeError("client.connect did not create a topology but also did not throw");return A.topology}finally{delete A.s.options.__skipPingOnConnect}}return A.topology}async function JH1(A,{topology:F,timeoutContext:B,session:$,readPreference:Z}){let D;if(A.hasAspect($3.Aspect.MUST_SELECT_SAME_SERVER))D=Z_.sameServerSelector(A.server?.description);else if(A.trySecondaryWrite)D=Z_.secondaryWritableServerSelector(F.commonWireVersion,Z);else D=Z;let X=await F.selectServer(D,{session:$,operationName:A.commandName,timeoutContext:B,signal:A.options.signal}),J=A.hasAspect($3.Aspect.READ_OPERATION),Y=A.hasAspect($3.Aspect.WRITE_OPERATION),W=$?.inTransaction()??!1,G=F.s.options.retryReads&&!W&&A.canRetryRead,Q=F.s.options.retryWrites&&!W&&CU.supportsRetryableWrites(X)&&A.canRetryWrite,q=A.hasAspect($3.Aspect.RETRYABLE)&&$!=null&&(J&&G||Y&&Q);if(Y&&Q&&$!=null)A.options.willRetryWrite=!0,$.incrementTransactionNumber();let z=q?B.csotEnabled()?1/0:2:1,H,U;for(let K=0;K<z;K++){if(H){if(Y&&H.code===ZH1)throw new o6.MongoServerError({message:D_,errmsg:D_,originalError:H});if(A.hasAspect($3.Aspect.COMMAND_BATCHING)&&!A.canRetryWrite)throw H;if(Y&&!o6.isRetryableWriteError(H))throw H;if(J&&!o6.isRetryableReadError(H))throw H;if(H instanceof o6.MongoNetworkError&&A.hasAspect($3.Aspect.CURSOR_CREATING)&&$!=null&&$.isPinned&&!$.inTransaction())$.unpin({force:!0,forceClear:!0});if(X=await F.selectServer(D,{session:$,operationName:A.commandName,previousServer:U,signal:A.options.signal}),Y&&!CU.supportsRetryableWrites(X))throw new o6.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}try{if(K>0&&A.hasAspect($3.Aspect.COMMAND_BATCHING))A.resetBatch();return await A.execute(X,$,B)}catch(E){if(!(E instanceof o6.MongoError))throw E;if(H!=null&&E.hasErrorLabel(o6.MongoErrorLabel.NoWritesPerformed))throw H;U=X.description,H=E,B.clear()}}throw H??new o6.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var LU=C((J_)=>{Object.defineProperty(J_,"__esModule",{value:!0});J_.GetMoreOperation=void 0;var WH1=v7(),KU=X1(),GH1=K1(),jY=P0();class EU extends jY.AbstractOperation{constructor(A,F,B,$){super($);this.options=$,this.ns=A,this.cursorId=F,this.server=B}get commandName(){return"getMore"}async execute(A,F,B){if(A!==this.server)throw new KU.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new KU.MongoRuntimeError("Unable to iterate cursor with no id");let $=this.ns.collection;if($==null)throw new KU.MongoRuntimeError("A collection name must be determined before getMore");let Z={getMore:this.cursorId,collection:$};if(typeof this.options.batchSize==="number")Z.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")Z.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&GH1.maxWireVersion(A)>=9)Z.comment=this.options.comment;let D={returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:B,...this.options};return await A.command(this.ns,Z,D,WH1.CursorResponse)}}J_.GetMoreOperation=EU;jY.defineAspects(EU,[jY.Aspect.READ_OPERATION,jY.Aspect.MUST_SELECT_SAME_SERVER])});var z_=C((G_)=>{Object.defineProperty(G_,"__esModule",{value:!0});G_.KillCursorsOperation=void 0;var W_=X1(),QH1=K1(),wU=P0();class VU extends wU.AbstractOperation{constructor(A,F,B,$){super($);this.ns=F,this.cursorId=A,this.server=B}get commandName(){return"killCursors"}async execute(A,F,B){if(A!==this.server)throw new W_.MongoRuntimeError("Killcursor must run on the same server operation began on");let $=this.ns.collection;if($==null)throw new W_.MongoRuntimeError("A collection name must be determined before killCursors");let Z={killCursors:$,cursors:[this.cursorId]};try{await A.command(this.ns,Z,{session:F,timeoutContext:B})}catch(D){QH1.squashError(D)}}}G_.KillCursorsOperation=VU;wU.defineAspects(VU,[wU.Aspect.MUST_SELECT_SAME_SERVER])});var NU=C((U_)=>{Object.defineProperty(U_,"__esModule",{value:!0});U_.OrderedBulkOperation=void 0;var zH1=C0(),q_=X1(),IY=rF();class H_ extends IY.BulkOperationBase{constructor(A,F){super(A,F,!0)}addToOperationsList(A,F){let B=zH1.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new q_.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new IY.Batch(A,this.s.currentIndex);let $=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+$+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==A)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new IY.Batch(A,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(A===IY.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:F._id});if(Array.isArray(F))throw new q_.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(F),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=$+B,this.s.currentIndex+=1,this}}U_.OrderedBulkOperation=H_});var MU=C((L_)=>{Object.defineProperty(L_,"__esModule",{value:!0});L_.UnorderedBulkOperation=void 0;var qH1=C0(),K_=X1(),Z3=rF();class E_ extends Z3.BulkOperationBase{constructor(A,F){super(A,F,!1)}handleWriteError(A){if(this.s.batches.length)return;return super.handleWriteError(A)}addToOperationsList(A,F){let B=qH1.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new K_.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,A===Z3.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(A===Z3.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(A===Z3.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let $=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new Z3.Batch(A,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+$+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==A)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Z3.Batch(A,this.s.currentIndex);if(Array.isArray(F))throw new K_.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(F),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,A===Z3.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:F._id});else if(A===Z3.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(A===Z3.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=$+B,this}}L_.UnorderedBulkOperation=E_});var PU=C((M_)=>{Object.defineProperty(M_,"__esModule",{value:!0});M_.AggregateOperation=M_.DB_AGGREGATE_COLLECTION=void 0;var V_=v7(),N_=X1(),HH1=K1(),UH1=a6(),CH1=_2(),OZ=P0();M_.DB_AGGREGATE_COLLECTION=1;var KH1=8;class RU extends CH1.CommandOperation{constructor(A,F,B){super(void 0,{...B,dbName:A.db});if(this.options={...B},this.target=A.collection||M_.DB_AGGREGATE_COLLECTION,this.pipeline=F,this.hasWriteStage=!1,typeof B?.out==="string")this.pipeline=this.pipeline.concat({$out:B.out}),this.hasWriteStage=!0;else if(F.length>0){let $=F[F.length-1];if($.$out||$.$merge)this.hasWriteStage=!0}if(this.hasWriteStage)this.trySecondaryWrite=!0;else delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new N_.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(B?.cursor!=null&&typeof B.cursor!=="object")throw new N_.MongoInvalidArgumentError("Cursor options must be an object")}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(A){this.pipeline.push(A)}async execute(A,F,B){let $=this.options,Z=HH1.maxWireVersion(A),D={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&Z<KH1)this.readConcern=void 0;if(this.hasWriteStage&&this.writeConcern)UH1.WriteConcern.apply(D,this.writeConcern);if($.bypassDocumentValidation===!0)D.bypassDocumentValidation=$.bypassDocumentValidation;if(typeof $.allowDiskUse==="boolean")D.allowDiskUse=$.allowDiskUse;if($.hint)D.hint=$.hint;if($.let)D.let=$.let;if($.comment!==void 0)D.comment=$.comment;if(D.cursor=$.cursor||{},$.batchSize&&!this.hasWriteStage)D.cursor.batchSize=$.batchSize;return await super.executeCommand(A,F,D,B,this.explain?V_.ExplainedCursorResponse:V_.CursorResponse)}}M_.AggregateOperation=RU;OZ.defineAspects(RU,[OZ.Aspect.READ_OPERATION,OZ.Aspect.RETRYABLE,OZ.Aspect.EXPLAINABLE,OZ.Aspect.CURSOR_CREATING])});var SZ=C((O_)=>{Object.defineProperty(O_,"__esModule",{value:!0});O_.AggregationCursor=void 0;var jU=X1(),IU=LA(),j_=PU(),I_=e6(),EH1=K1(),T_=A4();class TU extends IU.ExplainableCursor{constructor(A,F,B=[],$={}){super(A,F,$);this.pipeline=B,this.aggregateOptions=$;let Z=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===T_.CursorTimeoutMode.ITERATION&&(Z?.$merge!=null||Z?.$out!=null))throw new jU.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let A=EH1.mergeOptions({},this.aggregateOptions);return delete A.session,new TU(this.client,this.namespace,this.pipeline,{...A})}map(A){return super.map(A)}async _initialize(A){let F={...this.aggregateOptions,...this.cursorOptions,session:A,signal:this.signal};if(F.explain)try{IU.validateExplainTimeoutOptions(F,IU.Explain.fromOptions(F))}catch{throw new jU.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let B=new j_.AggregateOperation(this.namespace,this.pipeline,F),$=await I_.executeOperation(this.client,B,this.timeoutContext);return{server:B.server,session:A,response:$}}async explain(A,F){let{explain:B,timeout:$}=this.resolveExplainTimeoutOptions(A,F);return(await I_.executeOperation(this.client,new j_.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...$,explain:B??!0}))).shift(this.deserializationOptions)}addStage(A){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===T_.CursorTimeoutMode.ITERATION&&(A.$out!=null||A.$merge!=null))throw new jU.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(A),this}group(A){return this.addStage({$group:A})}limit(A){return this.addStage({$limit:A})}match(A){return this.addStage({$match:A})}out(A){return this.addStage({$out:A})}project(A){return this.addStage({$project:A})}lookup(A){return this.addStage({$lookup:A})}redact(A){return this.addStage({$redact:A})}skip(A){return this.addStage({$skip:A})}sort(A){return this.addStage({$sort:A})}unwind(A){return this.addStage({$unwind:A})}geoNear(A){return this.addStage({$geoNear:A})}}O_.AggregationCursor=TU});var kU=C((k_)=>{Object.defineProperty(k_,"__esModule",{value:!0});k_.CountOperation=void 0;var LH1=_2(),OU=P0();class SU extends LH1.CommandOperation{constructor(A,F,B){super({s:{namespace:A}},B);this.options=B,this.collectionName=A.collection,this.query=F}get commandName(){return"count"}async execute(A,F,B){let $=this.options,Z={count:this.collectionName,query:this.query};if(typeof $.limit==="number")Z.limit=$.limit;if(typeof $.skip==="number")Z.skip=$.skip;if($.hint!=null)Z.hint=$.hint;if(typeof $.maxTimeMS==="number")Z.maxTimeMS=$.maxTimeMS;let D=await super.executeCommand(A,F,Z,B);return D?D.n:0}}k_.CountOperation=SU;OU.defineAspects(SU,[OU.Aspect.READ_OPERATION,OU.Aspect.RETRYABLE])});var eF=C((b_)=>{Object.defineProperty(b_,"__esModule",{value:!0});b_.formatSort=SH1;var x_=X1();function oF(A=1){let F=`${A}`.toLowerCase();if(wH1(A))return A;switch(F){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new x_.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(A)}`)}}function wH1(A){return typeof A==="object"&&A!=null&&"$meta"in A&&typeof A.$meta==="string"}function VH1(A){if(Array.isArray(A)&&A.length===2)try{return oF(A[1]),!0}catch{return!1}return!1}function NH1(A){return Array.isArray(A)&&Array.isArray(A[0])}function MH1(A){return A instanceof Map&&A.size>0}function RH1(A){return Array.isArray(A)}function PH1(A){return new Map([[`${A[0]}`,oF([A[1]])]])}function jH1(A){let F=A.map(([B,$])=>[`${B}`,oF($)]);return new Map(F)}function IH1(A){let F=A.map((B)=>[`${B}`,1]);return new Map(F)}function TH1(A){let F=Object.entries(A).map(([B,$])=>[`${B}`,oF($)]);return new Map(F)}function OH1(A){let F=Array.from(A).map(([B,$])=>[`${B}`,oF($)]);return new Map(F)}function SH1(A,F){if(A==null)return;if(typeof A==="string")return new Map([[A,oF(F)]]);if(typeof A!=="object")throw new x_.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(A)} Sort must be a valid object`);if(!RH1(A)){if(MH1(A))return OH1(A);if(Object.keys(A).length)return TH1(A);return}if(!A.length)return;if(NH1(A))return jH1(A);if(VH1(A))return PH1(A);return IH1(A)}});var v_=C((u_)=>{Object.defineProperty(u_,"__esModule",{value:!0});u_.FindOperation=void 0;var f_=v7(),_H1=X1(),g_=LA(),xH1=i9(),bH1=eF(),fH1=K1(),gH1=_2(),kZ=P0();class _U extends gH1.CommandOperation{constructor(A,F={},B={}){super(void 0,B);if(this.options={...B},delete this.options.writeConcern,this.ns=A,typeof F!=="object"||Array.isArray(F))throw new _H1.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=F!=null&&F._bsontype==="ObjectId"?{_id:F}:F}get commandName(){return"find"}async execute(A,F,B){this.server=A;let $=this.options,Z=uH1(this.ns,this.filter,$);if(this.explain)g_.validateExplainTimeoutOptions(this.options,this.explain),Z=g_.decorateWithExplain(Z,this.explain);return await A.command(this.ns,Z,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:F,timeoutContext:B},this.explain?f_.ExplainedCursorResponse:f_.CursorResponse)}}u_.FindOperation=_U;function uH1(A,F,B){let $={find:A.collection,filter:F};if(B.sort)$.sort=bH1.formatSort(B.sort);if(B.projection){let D=B.projection;if(D&&Array.isArray(D))D=D.length?D.reduce((X,J)=>{return X[J]=1,X},{}):{_id:1};$.projection=D}if(B.hint)$.hint=fH1.normalizeHintField(B.hint);if(typeof B.skip==="number")$.skip=B.skip;if(typeof B.limit==="number")if(B.limit<0)$.limit=-B.limit,$.singleBatch=!0;else $.limit=B.limit;if(typeof B.batchSize==="number")if(B.batchSize<0){if(B.limit&&B.limit!==0&&Math.abs(B.batchSize)<Math.abs(B.limit))$.limit=-B.batchSize;$.singleBatch=!0}else $.batchSize=B.batchSize;if(typeof B.singleBatch==="boolean")$.singleBatch=B.singleBatch;if(B.comment!==void 0)$.comment=B.comment;if(typeof B.maxTimeMS==="number")$.maxTimeMS=B.maxTimeMS;let Z=xH1.ReadConcern.fromOptions(B);if(Z)$.readConcern=Z.toJSON();if(B.max)$.max=B.max;if(B.min)$.min=B.min;if(typeof B.returnKey==="boolean")$.returnKey=B.returnKey;if(typeof B.showRecordId==="boolean")$.showRecordId=B.showRecordId;if(typeof B.tailable==="boolean")$.tailable=B.tailable;if(typeof B.oplogReplay==="boolean")$.oplogReplay=B.oplogReplay;if(typeof B.timeout==="boolean")$.noCursorTimeout=!B.timeout;else if(typeof B.noCursorTimeout==="boolean")$.noCursorTimeout=B.noCursorTimeout;if(typeof B.awaitData==="boolean")$.awaitData=B.awaitData;if(typeof B.allowPartialResults==="boolean")$.allowPartialResults=B.allowPartialResults;if(B.collation)$.collation=B.collation;if(typeof B.allowDiskUse==="boolean")$.allowDiskUse=B.allowDiskUse;if(B.let)$.let=B.let;return $}kZ.defineAspects(_U,[kZ.Aspect.READ_OPERATION,kZ.Aspect.RETRYABLE,kZ.Aspect.EXPLAINABLE,kZ.Aspect.CURSOR_CREATING])});var yU=C((d_)=>{Object.defineProperty(d_,"__esModule",{value:!0});d_.FindCursor=d_.FLAGS=void 0;var yH1=v7(),n9=X1(),xU=LA(),vH1=kU(),bU=e6(),h_=v_(),fU=eF(),gU=K1();d_.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class uU extends xU.ExplainableCursor{constructor(A,F,B={},$={}){super(A,F,$);if(this.numReturned=0,this.cursorFilter=B,this.findOptions=$,$.sort!=null)this.findOptions.sort=fU.formatSort($.sort)}clone(){let A=gU.mergeOptions({},this.findOptions);return delete A.session,new uU(this.client,this.namespace,this.cursorFilter,{...A})}map(A){return super.map(A)}async _initialize(A){let F={...this.findOptions,...this.cursorOptions,session:A,signal:this.signal};if(F.explain)try{xU.validateExplainTimeoutOptions(F,xU.Explain.fromOptions(F))}catch{throw new n9.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let B=new h_.FindOperation(this.namespace,this.cursorFilter,F),$=await bU.executeOperation(this.client,B,this.timeoutContext);return this.numReturned=$.batchSize,{server:B.server,session:A,response:$}}async getMore(A){let F=this.numReturned;if(F){let $=this.findOptions.limit;if(A=$&&$>0&&F+A>$?$-F:A,A<=0){try{await this.close()}catch(Z){gU.squashError(Z)}return yH1.CursorResponse.emptyGetMore}}let B=await super.getMore(A);return this.numReturned=this.numReturned+B.batchSize,B}async count(A){if(gU.emitWarningOnce("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof A==="boolean")throw new n9.MongoInvalidArgumentError("Invalid first parameter to count");return await bU.executeOperation(this.client,new vH1.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...A}))}async explain(A,F){let{explain:B,timeout:$}=this.resolveExplainTimeoutOptions(A,F);return(await bU.executeOperation(this.client,new h_.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...$,explain:B??!0}))).shift(this.deserializationOptions)}filter(A){return this.throwIfInitialized(),this.cursorFilter=A,this}hint(A){return this.throwIfInitialized(),this.findOptions.hint=A,this}min(A){return this.throwIfInitialized(),this.findOptions.min=A,this}max(A){return this.throwIfInitialized(),this.findOptions.max=A,this}returnKey(A){return this.throwIfInitialized(),this.findOptions.returnKey=A,this}showRecordId(A){return this.throwIfInitialized(),this.findOptions.showRecordId=A,this}addQueryModifier(A,F){if(this.throwIfInitialized(),A[0]!=="$")throw new n9.MongoInvalidArgumentError(`${A} is not a valid query modifier`);switch(A.substr(1)){case"comment":this.findOptions.comment=F;break;case"explain":this.findOptions.explain=F;break;case"hint":this.findOptions.hint=F;break;case"max":this.findOptions.max=F;break;case"maxTimeMS":this.findOptions.maxTimeMS=F;break;case"min":this.findOptions.min=F;break;case"orderby":this.findOptions.sort=fU.formatSort(F);break;case"query":this.cursorFilter=F;break;case"returnKey":this.findOptions.returnKey=F;break;case"showDiskLoc":this.findOptions.showRecordId=F;break;default:throw new n9.MongoInvalidArgumentError(`Invalid query modifier: ${A}`)}return this}comment(A){return this.throwIfInitialized(),this.findOptions.comment=A,this}maxAwaitTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new n9.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=A,this}maxTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new n9.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=A,this}project(A){return this.throwIfInitialized(),this.findOptions.projection=A,this}sort(A,F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new n9.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=fU.formatSort(A,F),this}allowDiskUse(A=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new n9.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!A)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(A){return this.throwIfInitialized(),this.findOptions.collation=A,this}limit(A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new n9.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof A!=="number")throw new n9.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=A,this}skip(A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new n9.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof A!=="number")throw new n9.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=A,this}}d_.FindCursor=uU});var xZ=C((c_)=>{Object.defineProperty(c_,"__esModule",{value:!0});c_.ListIndexesOperation=c_.DropIndexOperation=c_.CreateIndexesOperation=void 0;var dH1=v7(),mH1=X1(),vU=K1(),hU=_2(),D5=P0(),cH1=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function lH1(A){return typeof A==="number"||A==="2d"||A==="2dsphere"||A==="text"||A==="geoHaystack"}function pH1(A){return Array.isArray(A)&&A.length===2&&lH1(A[1])}function iH1(A){let F=new Map,B=!Array.isArray(A)||pH1(A)?[A]:A;for(let $ of B)if(typeof $==="string")F.set($,1);else if(Array.isArray($))F.set($[0],$[1]??1);else if($ instanceof Map)for(let[Z,D]of $)F.set(Z,D);else if(vU.isObject($))for(let[Z,D]of Object.entries($))F.set(Z,D);return F}function nH1(A){let F=Object.entries(A).filter(([B])=>cH1.has(B));return Object.fromEntries(F.map(([B,$])=>B==="version"?["v",$]:[B,$]))}class _Z extends hU.CommandOperation{constructor(A,F,B,$){super(A,$);this.options=$??{},this.collectionName=F,this.indexes=B.map((Z)=>{let D=Z.key instanceof Map?Z.key:new Map(Object.entries(Z.key)),X=Z.name??Array.from(D).flat().join("_");return{...nH1(Z),name:X,key:D}})}static fromIndexDescriptionArray(A,F,B,$){return new _Z(A,F,B,$)}static fromIndexSpecification(A,F,B,$={}){let Z=iH1(B),D={...$,key:Z};return new _Z(A,F,[D],$)}get commandName(){return"createIndexes"}async execute(A,F,B){let $=this.options,Z=this.indexes,D=vU.maxWireVersion(A),X={createIndexes:this.collectionName,indexes:Z};if($.commitQuorum!=null){if(D<9)throw new mH1.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");X.commitQuorum=$.commitQuorum}return this.options.collation=void 0,await super.executeCommand(A,F,X,B),Z.map((Y)=>Y.name||"")}}c_.CreateIndexesOperation=_Z;class dU extends hU.CommandOperation{constructor(A,F,B){super(A,B);this.options=B??{},this.collection=A,this.indexName=F}get commandName(){return"dropIndexes"}async execute(A,F,B){let $={dropIndexes:this.collection.collectionName,index:this.indexName};return await super.executeCommand(A,F,$,B)}}c_.DropIndexOperation=dU;class mU extends hU.CommandOperation{constructor(A,F){super(A,F);this.options={...F},delete this.options.writeConcern,this.collectionNamespace=A.s.namespace}get commandName(){return"listIndexes"}async execute(A,F,B){let $=vU.maxWireVersion(A),Z=this.options.batchSize?{batchSize:this.options.batchSize}:{},D={listIndexes:this.collectionNamespace.collection,cursor:Z};if($>=9&&this.options.comment!==void 0)D.comment=this.options.comment;return await super.executeCommand(A,F,D,B,dH1.CursorResponse)}}c_.ListIndexesOperation=mU;D5.defineAspects(mU,[D5.Aspect.READ_OPERATION,D5.Aspect.RETRYABLE,D5.Aspect.CURSOR_CREATING]);D5.defineAspects(_Z,[D5.Aspect.WRITE_OPERATION]);D5.defineAspects(dU,[D5.Aspect.WRITE_OPERATION])});var lU=C((p_)=>{Object.defineProperty(p_,"__esModule",{value:!0});p_.ListIndexesCursor=void 0;var tH1=e6(),rH1=xZ(),oH1=A4();class cU extends oH1.AbstractCursor{constructor(A,F){super(A.client,A.s.namespace,F);this.parent=A,this.options=F}clone(){return new cU(this.parent,{...this.options,...this.cursorOptions})}async _initialize(A){let F=new rH1.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:A}),B=await tH1.executeOperation(this.parent.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}}p_.ListIndexesCursor=cU});var t_=C((s_)=>{Object.defineProperty(s_,"__esModule",{value:!0});s_.ListSearchIndexesCursor=void 0;var eH1=SZ();class n_ extends eH1.AggregationCursor{constructor({fullNamespace:A,client:F},B,$={}){let Z=B==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:B}}];super(F,A,Z,$)}}s_.ListSearchIndexesCursor=n_});var nU=C((r_)=>{Object.defineProperty(r_,"__esModule",{value:!0});r_.BulkWriteOperation=void 0;var pU=P0();class iU extends pU.AbstractOperation{constructor(A,F,B){super(B);this.options=B,this.collection=A,this.operations=F}get commandName(){return"bulkWrite"}async execute(A,F,B){let $=this.collection,Z=this.operations,D={...this.options,...this.bsonOptions,readPreference:this.readPreference,timeoutContext:B},X=D.ordered===!1?$.initializeUnorderedBulkOp(D):$.initializeOrderedBulkOp(D);for(let J=0;J<Z.length;J++)X.raw(Z[J]);return await X.execute({...D,session:F})}}r_.BulkWriteOperation=iU;pU.defineAspects(iU,[pU.Aspect.WRITE_OPERATION])});var Bx=C((Ax)=>{Object.defineProperty(Ax,"__esModule",{value:!0});Ax.DistinctOperation=void 0;var e_=K1(),AU1=_2(),TY=P0();class sU extends AU1.CommandOperation{constructor(A,F,B,$){super(A,$);this.options=$??{},this.collection=A,this.key=F,this.query=B}get commandName(){return"distinct"}async execute(A,F,B){let $=this.collection,Z=this.key,D=this.query,X=this.options,J={distinct:$.collectionName,key:Z,query:D};if(typeof X.maxTimeMS==="number")J.maxTimeMS=X.maxTimeMS;if(typeof X.comment!=="undefined")J.comment=X.comment;if(X.hint!=null)J.hint=X.hint;e_.decorateWithReadConcern(J,$,X),e_.decorateWithCollation(J,$,X);let Y=await super.executeCommand(A,F,J,B);return this.explain?Y:Y.values}}Ax.DistinctOperation=sU;TY.defineAspects(sU,[TY.Aspect.READ_OPERATION,TY.Aspect.RETRYABLE,TY.Aspect.EXPLAINABLE])});var tU=C((Dx)=>{Object.defineProperty(Dx,"__esModule",{value:!0});Dx.DropDatabaseOperation=Dx.DropCollectionOperation=void 0;var $x=X1(),Zx=_2(),OY=P0();class SY extends Zx.CommandOperation{constructor(A,F,B={}){super(A,B);this.db=A,this.options=B,this.name=F}get commandName(){return"drop"}async execute(A,F,B){let $=this.db,Z=this.options,D=this.name,X=$.client.s.options.autoEncryption?.encryptedFieldsMap,J=Z.encryptedFields??X?.[`${$.databaseName}.${D}`];if(!J&&X)J=(await $.listCollections({name:D},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields;if(J){let Y=J.escCollection||`enxcol_.${D}.esc`,W=J.ecocCollection||`enxcol_.${D}.ecoc`;for(let G of[Y,W]){let Q=new SY($,G);try{await Q.executeWithoutEncryptedFieldsCheck(A,F,B)}catch(q){if(!(q instanceof $x.MongoServerError)||q.code!==$x.MONGODB_ERROR_CODES.NamespaceNotFound)throw q}}}return await this.executeWithoutEncryptedFieldsCheck(A,F,B)}async executeWithoutEncryptedFieldsCheck(A,F,B){return await super.executeCommand(A,F,{drop:this.name},B),!0}}Dx.DropCollectionOperation=SY;class aU extends Zx.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"dropDatabase"}async execute(A,F,B){return await super.executeCommand(A,F,{dropDatabase:1},B),!0}}Dx.DropDatabaseOperation=aU;OY.defineAspects(SY,[OY.Aspect.WRITE_OPERATION]);OY.defineAspects(aU,[OY.Aspect.WRITE_OPERATION])});var Wx=C((Jx)=>{Object.defineProperty(Jx,"__esModule",{value:!0});Jx.EstimatedDocumentCountOperation=void 0;var BU1=_2(),kY=P0();class rU extends BU1.CommandOperation{constructor(A,F={}){super(A,F);this.options=F,this.collectionName=A.collectionName}get commandName(){return"count"}async execute(A,F,B){let $={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")$.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)$.comment=this.options.comment;return(await super.executeCommand(A,F,$,B))?.n||0}}Jx.EstimatedDocumentCountOperation=rU;kY.defineAspects(rU,[kY.Aspect.READ_OPERATION,kY.Aspect.RETRYABLE,kY.Aspect.CURSOR_CREATING])});var oU=C((Hx)=>{Object.defineProperty(Hx,"__esModule",{value:!0});Hx.FindOneAndUpdateOperation=Hx.FindOneAndReplaceOperation=Hx.FindOneAndDeleteOperation=Hx.FindAndModifyOperation=Hx.ReturnDocument=void 0;var X5=X1(),$U1=E6(),ZU1=eF(),xY=K1(),DU1=_2(),_Y=P0();Hx.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function Gx(A,F){if(A.new=F.returnDocument===Hx.ReturnDocument.AFTER,A.upsert=F.upsert===!0,F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;return A}class AB extends DU1.CommandOperation{constructor(A,F,B){super(A,B);this.options=B??{},this.cmdBase={remove:!1,new:!1,upsert:!1},B.includeResultMetadata??=!1;let $=ZU1.formatSort(B.sort);if($)this.cmdBase.sort=$;if(B.projection)this.cmdBase.fields=B.projection;if(B.maxTimeMS)this.cmdBase.maxTimeMS=B.maxTimeMS;if(B.writeConcern)this.cmdBase.writeConcern=B.writeConcern;if(B.let)this.cmdBase.let=B.let;if(B.comment!==void 0)this.cmdBase.comment=B.comment;this.readPreference=$U1.ReadPreference.primary,this.collection=A,this.query=F}get commandName(){return"findAndModify"}async execute(A,F,B){let $=this.collection,Z=this.query,D={...this.options,...this.bsonOptions},X={findAndModify:$.collectionName,query:Z,...this.cmdBase};if(xY.decorateWithCollation(X,$,D),D.hint){if(this.writeConcern?.w===0||xY.maxWireVersion(A)<8)throw new X5.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");X.hint=D.hint}let J=await super.executeCommand(A,F,X,B);return D.includeResultMetadata?J:J.value??null}}Hx.FindAndModifyOperation=AB;class Qx extends AB{constructor(A,F,B){if(F==null||typeof F!=="object")throw new X5.MongoInvalidArgumentError('Argument "filter" must be an object');super(A,F,B);this.cmdBase.remove=!0}}Hx.FindOneAndDeleteOperation=Qx;class zx extends AB{constructor(A,F,B,$){if(F==null||typeof F!=="object")throw new X5.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new X5.MongoInvalidArgumentError('Argument "replacement" must be an object');if(xY.hasAtomicOperators(B))throw new X5.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(A,F,$);this.cmdBase.update=B,Gx(this.cmdBase,$)}}Hx.FindOneAndReplaceOperation=zx;class qx extends AB{constructor(A,F,B,$){if(F==null||typeof F!=="object")throw new X5.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new X5.MongoInvalidArgumentError('Argument "update" must be an object');if(!xY.hasAtomicOperators(B,$))throw new X5.MongoInvalidArgumentError("Update document requires atomic operators");super(A,F,$);if(this.cmdBase.update=B,Gx(this.cmdBase,$),$.arrayFilters)this.cmdBase.arrayFilters=$.arrayFilters}}Hx.FindOneAndUpdateOperation=qx;_Y.defineAspects(AB,[_Y.Aspect.WRITE_OPERATION,_Y.Aspect.RETRYABLE,_Y.Aspect.EXPLAINABLE])});var FC=C((Kx)=>{Object.defineProperty(Kx,"__esModule",{value:!0});Kx.InsertManyOperation=Kx.InsertOneOperation=Kx.InsertOperation=void 0;var bY=X1(),WU1=K1(),GU1=a6(),QU1=nU(),zU1=_2(),D3=P0();class fY extends zU1.CommandOperation{constructor(A,F,B){super(void 0,B);this.options={...B,checkKeys:B.checkKeys??!1},this.ns=A,this.documents=F}get commandName(){return"insert"}async execute(A,F,B){let $=this.options??{},Z=typeof $.ordered==="boolean"?$.ordered:!0,D={insert:this.ns.collection,documents:this.documents,ordered:Z};if(typeof $.bypassDocumentValidation==="boolean")D.bypassDocumentValidation=$.bypassDocumentValidation;if($.comment!==void 0)D.comment=$.comment;return await super.executeCommand(A,F,D,B)}}Kx.InsertOperation=fY;class eU extends fY{constructor(A,F,B){super(A.s.namespace,WU1.maybeAddIdToDocuments(A,[F],B),B)}async execute(A,F,B){let $=await super.execute(A,F,B);if($.code)throw new bY.MongoServerError($);if($.writeErrors)throw new bY.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}Kx.InsertOneOperation=eU;class AC extends D3.AbstractOperation{constructor(A,F,B){super(B);if(!Array.isArray(F))throw new bY.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=B,this.collection=A,this.docs=F}get commandName(){return"insert"}async execute(A,F,B){let $=this.collection,Z={...this.options,...this.bsonOptions,readPreference:this.readPreference},D=GU1.WriteConcern.fromOptions(Z),X=new QU1.BulkWriteOperation($,this.docs.map((J)=>({insertOne:{document:J}})),Z);try{let J=await X.execute(A,F,B);return{acknowledged:D?.w!==0,insertedCount:J.insertedCount,insertedIds:J.insertedIds}}catch(J){if(J&&J.message==="Operation must be an object with an operation key")throw new bY.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw J}}}Kx.InsertManyOperation=AC;D3.defineAspects(fY,[D3.Aspect.RETRYABLE,D3.Aspect.WRITE_OPERATION]);D3.defineAspects(eU,[D3.Aspect.RETRYABLE,D3.Aspect.WRITE_OPERATION]);D3.defineAspects(AC,[D3.Aspect.WRITE_OPERATION])});var Nx=C((wx)=>{Object.defineProperty(wx,"__esModule",{value:!0});wx.IsCappedOperation=void 0;var UU1=X1(),CU1=P0();class Lx extends CU1.AbstractOperation{constructor(A,F){super(F);this.options=F,this.collection=A}get commandName(){return"listCollections"}async execute(A,F){let B=this.collection,[$]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:F}).toArray();if($==null||$.options==null)throw new UU1.MongoAPIError(`collection ${B.namespace} not found`);return!!$.options?.capped}}wx.IsCappedOperation=Lx});var jx=C((Rx)=>{Object.defineProperty(Rx,"__esModule",{value:!0});Rx.OptionsOperation=void 0;var KU1=X1(),EU1=P0();class Mx extends EU1.AbstractOperation{constructor(A,F){super(F);this.options=F,this.collection=A}get commandName(){return"listCollections"}async execute(A,F){let B=this.collection,[$]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:F}).toArray();if($==null||$.options==null)throw new KU1.MongoAPIError(`collection ${B.namespace} not found`);return $.options}}Rx.OptionsOperation=Mx});var $C=C((Tx)=>{Object.defineProperty(Tx,"__esModule",{value:!0});Tx.RenameOperation=void 0;var LU1=wA(),wU1=K1(),VU1=_2(),Ix=P0();class BC extends VU1.CommandOperation{constructor(A,F,B){super(A,B);this.collection=A,this.newName=F,this.options=B,this.ns=new wU1.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}async execute(A,F,B){let $=this.collection.namespace,Z=this.collection.s.namespace.withCollection(this.newName).toString(),D=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1,X={renameCollection:$,to:Z,dropTarget:D};return await super.executeCommand(A,F,X,B),new LU1.Collection(this.collection.s.db,this.newName,this.collection.s.options)}}Tx.RenameOperation=BC;Ix.defineAspects(BC,[Ix.Aspect.WRITE_OPERATION])});var xx=C((kx)=>{Object.defineProperty(kx,"__esModule",{value:!0});kx.CreateSearchIndexesOperation=void 0;var NU1=P0();class Sx extends NU1.AbstractOperation{constructor(A,F){super();this.collection=A,this.descriptions=F}get commandName(){return"createSearchIndexes"}async execute(A,F,B){let $=this.collection.fullNamespace,Z={createSearchIndexes:$.collection,indexes:this.descriptions};return((await A.command($,Z,{session:F,timeoutContext:B}))?.indexesCreated??[]).map(({name:J})=>J)}}kx.CreateSearchIndexesOperation=Sx});var yx=C((gx)=>{Object.defineProperty(gx,"__esModule",{value:!0});gx.DropSearchIndexOperation=void 0;var bx=X1(),MU1=P0();class fx extends MU1.AbstractOperation{constructor(A,F){super();this.collection=A,this.name=F}get commandName(){return"dropSearchIndex"}async execute(A,F,B){let $=this.collection.fullNamespace,Z={dropSearchIndex:$.collection};if(typeof this.name==="string")Z.name=this.name;try{await A.command($,Z,{session:F,timeoutContext:B})}catch(D){if(!(D instanceof bx.MongoServerError&&D.code===bx.MONGODB_ERROR_CODES.NamespaceNotFound))throw D}}}gx.DropSearchIndexOperation=fx});var mx=C((hx)=>{Object.defineProperty(hx,"__esModule",{value:!0});hx.UpdateSearchIndexOperation=void 0;var RU1=P0();class vx extends RU1.AbstractOperation{constructor(A,F,B){super();this.collection=A,this.name=F,this.definition=B}get commandName(){return"updateSearchIndex"}async execute(A,F,B){let $=this.collection.fullNamespace,Z={updateSearchIndex:$.collection,name:this.name,definition:this.definition};await A.command($,Z,{session:F,timeoutContext:B});return}}hx.UpdateSearchIndexOperation=vx});var YC=C((cx)=>{Object.defineProperty(cx,"__esModule",{value:!0});cx.ReplaceOneOperation=cx.UpdateManyOperation=cx.UpdateOneOperation=cx.UpdateOperation=void 0;cx.makeUpdateStatement=gY;var s9=X1(),PU1=eF(),ZC=K1(),jU1=_2(),I6=P0();class FB extends jU1.CommandOperation{constructor(A,F,B){super(void 0,B);this.options=B,this.ns=A,this.statements=F}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((A)=>A.multi==null||A.multi===!1)}async execute(A,F,B){let $=this.options??{},Z=typeof $.ordered==="boolean"?$.ordered:!0,D={update:this.ns.collection,updates:this.statements,ordered:Z};if(typeof $.bypassDocumentValidation==="boolean")D.bypassDocumentValidation=$.bypassDocumentValidation;if($.let)D.let=$.let;if($.comment!==void 0)D.comment=$.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((Y)=>Y.hint))throw new s9.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(A,F,D,B)}}cx.UpdateOperation=FB;class DC extends FB{constructor(A,F,B,$){super(A.s.namespace,[gY(F,B,{...$,multi:!1})],$);if(!ZC.hasAtomicOperators(B,$))throw new s9.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(A,F,B){let $=await super.execute(A,F,B);if(this.explain!=null)return $;if($.code)throw new s9.MongoServerError($);if($.writeErrors)throw new s9.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:$.nModified??$.n,upsertedId:Array.isArray($.upserted)&&$.upserted.length>0?$.upserted[0]._id:null,upsertedCount:Array.isArray($.upserted)&&$.upserted.length?$.upserted.length:0,matchedCount:Array.isArray($.upserted)&&$.upserted.length>0?0:$.n}}}cx.UpdateOneOperation=DC;class XC extends FB{constructor(A,F,B,$){super(A.s.namespace,[gY(F,B,{...$,multi:!0})],$);if(!ZC.hasAtomicOperators(B,$))throw new s9.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(A,F,B){let $=await super.execute(A,F,B);if(this.explain!=null)return $;if($.code)throw new s9.MongoServerError($);if($.writeErrors)throw new s9.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:$.nModified??$.n,upsertedId:Array.isArray($.upserted)&&$.upserted.length>0?$.upserted[0]._id:null,upsertedCount:Array.isArray($.upserted)&&$.upserted.length?$.upserted.length:0,matchedCount:Array.isArray($.upserted)&&$.upserted.length>0?0:$.n}}}cx.UpdateManyOperation=XC;class JC extends FB{constructor(A,F,B,$){super(A.s.namespace,[gY(F,B,{...$,multi:!1})],$);if(ZC.hasAtomicOperators(B))throw new s9.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(A,F,B){let $=await super.execute(A,F,B);if(this.explain!=null)return $;if($.code)throw new s9.MongoServerError($);if($.writeErrors)throw new s9.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:$.nModified??$.n,upsertedId:Array.isArray($.upserted)&&$.upserted.length>0?$.upserted[0]._id:null,upsertedCount:Array.isArray($.upserted)&&$.upserted.length?$.upserted.length:0,matchedCount:Array.isArray($.upserted)&&$.upserted.length>0?0:$.n}}}cx.ReplaceOneOperation=JC;function gY(A,F,B){if(A==null||typeof A!=="object")throw new s9.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(F==null||typeof F!=="object")throw new s9.MongoInvalidArgumentError("Document must be a valid JavaScript object");let $={q:A,u:F};if(typeof B.upsert==="boolean")$.upsert=B.upsert;if(B.multi)$.multi=B.multi;if(B.hint)$.hint=B.hint;if(B.arrayFilters)$.arrayFilters=B.arrayFilters;if(B.collation)$.collation=B.collation;if(!B.multi&&B.sort!=null)$.sort=PU1.formatSort(B.sort);return $}I6.defineAspects(FB,[I6.Aspect.RETRYABLE,I6.Aspect.WRITE_OPERATION,I6.Aspect.SKIP_COLLATION]);I6.defineAspects(DC,[I6.Aspect.RETRYABLE,I6.Aspect.WRITE_OPERATION,I6.Aspect.EXPLAINABLE,I6.Aspect.SKIP_COLLATION]);I6.defineAspects(XC,[I6.Aspect.WRITE_OPERATION,I6.Aspect.EXPLAINABLE,I6.Aspect.SKIP_COLLATION]);I6.defineAspects(JC,[I6.Aspect.RETRYABLE,I6.Aspect.WRITE_OPERATION,I6.Aspect.SKIP_COLLATION])});var wA=C((sx)=>{Object.defineProperty(sx,"__esModule",{value:!0});sx.Collection=void 0;var kU1=C0(),_U1=NU(),xU1=MU(),bU1=VA(),fU1=SZ(),gU1=yU(),uU1=lU(),yU1=t_(),WC=X1(),vU1=nU(),hU1=kU(),px=qC(),dU1=Bx(),mU1=tU(),cU1=Wx(),Q2=e6(),GC=oU(),uY=xZ(),ix=FC(),lU1=Nx(),pU1=jx(),iU1=$C(),nU1=xx(),sU1=yx(),aU1=mx(),QC=YC(),tU1=i9(),zC=E6(),O0=K1(),rU1=a6();class nx{constructor(A,F,B){this.s={db:A,options:B,namespace:new O0.MongoDBCollectionNamespace(A.databaseName,F),pkFactory:A.options?.pkFactory??O0.DEFAULT_PK_FACTORY,readPreference:zC.ReadPreference.fromOptions(B),bsonOptions:kU1.resolveBSONOptions(B,A),readConcern:tU1.ReadConcern.fromOptions(B),writeConcern:rU1.WriteConcern.fromOptions(B)},this.client=A.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.s.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.s.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.s.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(A){this.s.collectionHint=O0.normalizeHintField(A)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(A,F){return await Q2.executeOperation(this.client,new ix.InsertOneOperation(this,A,O0.resolveOptions(this,F)))}async insertMany(A,F){return await Q2.executeOperation(this.client,new ix.InsertManyOperation(this,A,O0.resolveOptions(this,F??{ordered:!0})))}async bulkWrite(A,F){if(!Array.isArray(A))throw new WC.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return await Q2.executeOperation(this.client,new vU1.BulkWriteOperation(this,A,O0.resolveOptions(this,F??{ordered:!0})))}async updateOne(A,F,B){return await Q2.executeOperation(this.client,new QC.UpdateOneOperation(this,A,F,O0.resolveOptions(this,B)))}async replaceOne(A,F,B){return await Q2.executeOperation(this.client,new QC.ReplaceOneOperation(this,A,F,O0.resolveOptions(this,B)))}async updateMany(A,F,B){return await Q2.executeOperation(this.client,new QC.UpdateManyOperation(this,A,F,O0.resolveOptions(this,B)))}async deleteOne(A={},F={}){return await Q2.executeOperation(this.client,new px.DeleteOneOperation(this,A,O0.resolveOptions(this,F)))}async deleteMany(A={},F={}){return await Q2.executeOperation(this.client,new px.DeleteManyOperation(this,A,O0.resolveOptions(this,F)))}async rename(A,F){return await Q2.executeOperation(this.client,new iU1.RenameOperation(this,A,O0.resolveOptions(void 0,{...F,readPreference:zC.ReadPreference.PRIMARY})))}async drop(A){return await Q2.executeOperation(this.client,new mU1.DropCollectionOperation(this.s.db,this.collectionName,A))}async findOne(A={},F={}){let B=this.find(A,F).limit(-1).batchSize(1),$=await B.next();return await B.close(),$}find(A={},F={}){return new gU1.FindCursor(this.client,this.s.namespace,A,O0.resolveOptions(this,F))}async options(A){return await Q2.executeOperation(this.client,new pU1.OptionsOperation(this,O0.resolveOptions(this,A)))}async isCapped(A){return await Q2.executeOperation(this.client,new lU1.IsCappedOperation(this,O0.resolveOptions(this,A)))}async createIndex(A,F){return(await Q2.executeOperation(this.client,uY.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,A,O0.resolveOptions(this,F))))[0]}async createIndexes(A,F){return await Q2.executeOperation(this.client,uY.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,A,O0.resolveOptions(this,{...F,maxTimeMS:void 0})))}async dropIndex(A,F){return await Q2.executeOperation(this.client,new uY.DropIndexOperation(this,A,{...O0.resolveOptions(this,F),readPreference:zC.ReadPreference.primary}))}async dropIndexes(A){try{return await Q2.executeOperation(this.client,new uY.DropIndexOperation(this,"*",O0.resolveOptions(this,A))),!0}catch(F){if(F instanceof WC.MongoOperationTimeoutError)throw F;return!1}}listIndexes(A){return new uU1.ListIndexesCursor(this,O0.resolveOptions(this,A))}async indexExists(A,F){let B=Array.isArray(A)?A:[A],$=new Set(await this.listIndexes(F).map(({name:Z})=>Z).toArray());return B.every((Z)=>$.has(Z))}async indexInformation(A){return await this.indexes({...A,full:A?.full??!1})}async estimatedDocumentCount(A){return await Q2.executeOperation(this.client,new cU1.EstimatedDocumentCountOperation(this,O0.resolveOptions(this,A)))}async countDocuments(A={},F={}){let B=[];if(B.push({$match:A}),typeof F.skip==="number")B.push({$skip:F.skip});if(typeof F.limit==="number")B.push({$limit:F.limit});B.push({$group:{_id:1,n:{$sum:1}}});let $=this.aggregate(B,F),Z=await $.next();return await $.close(),Z?.n??0}async distinct(A,F={},B={}){return await Q2.executeOperation(this.client,new dU1.DistinctOperation(this,A,F,O0.resolveOptions(this,B)))}async indexes(A){let F=await this.listIndexes(A).toArray();if(A?.full??!0)return F;return Object.fromEntries(F.map(({name:Z,key:D})=>[Z,Object.entries(D)]))}async findOneAndDelete(A,F){return await Q2.executeOperation(this.client,new GC.FindOneAndDeleteOperation(this,A,O0.resolveOptions(this,F)))}async findOneAndReplace(A,F,B){return await Q2.executeOperation(this.client,new GC.FindOneAndReplaceOperation(this,A,F,O0.resolveOptions(this,B)))}async findOneAndUpdate(A,F,B){return await Q2.executeOperation(this.client,new GC.FindOneAndUpdateOperation(this,A,F,O0.resolveOptions(this,B)))}aggregate(A=[],F){if(!Array.isArray(A))throw new WC.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new fU1.AggregationCursor(this.client,this.s.namespace,A,O0.resolveOptions(this,F))}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new bU1.ChangeStream(this,A,O0.resolveOptions(this,F))}initializeUnorderedBulkOp(A){return new xU1.UnorderedBulkOperation(this,O0.resolveOptions(this,A))}initializeOrderedBulkOp(A){return new _U1.OrderedBulkOperation(this,O0.resolveOptions(this,A))}async count(A={},F={}){return await Q2.executeOperation(this.client,new hU1.CountOperation(this.fullNamespace,A,O0.resolveOptions(this,F)))}listSearchIndexes(A,F){F=typeof A==="object"?A:F==null?{}:F;let B=A==null?null:typeof A==="object"?null:A;return new yU1.ListSearchIndexesCursor(this,B,F)}async createSearchIndex(A){let[F]=await this.createSearchIndexes([A]);return F}async createSearchIndexes(A){return await Q2.executeOperation(this.client,new nU1.CreateSearchIndexesOperation(this,A))}async dropSearchIndex(A){return await Q2.executeOperation(this.client,new sU1.DropSearchIndexOperation(this,A))}async updateSearchIndex(A,F){return await Q2.executeOperation(this.client,new aU1.UpdateSearchIndexOperation(this,A,F))}}sx.Collection=nx});var KC=C((rx)=>{Object.defineProperty(rx,"__esModule",{value:!0});rx.ChangeStreamCursor=void 0;var HC=VA(),tx=l2(),oU1=PU(),eU1=e6(),UC=K1(),AC1=A4();class CC extends AC1.AbstractCursor{constructor(A,F,B=[],$={}){super(A,F,{...$,tailable:!0,awaitData:!0});if(this.pipeline=B,this.changeStreamCursorOptions=$,this._resumeToken=null,this.startAtOperationTime=$.startAtOperationTime??null,$.startAfter)this.resumeToken=$.startAfter;else if($.resumeAfter)this.resumeToken=$.resumeAfter}set resumeToken(A){this._resumeToken=A,this.emit(HC.ChangeStream.RESUME_TOKEN_CHANGED,A)}get resumeToken(){return this._resumeToken}get resumeOptions(){let A={...this.changeStreamCursorOptions};for(let F of["resumeAfter","startAfter","startAtOperationTime"])delete A[F];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)A.startAfter=this.resumeToken;else A.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null&&UC.maxWireVersion(this.server)>=7)A.startAtOperationTime=this.startAtOperationTime;return A}cacheResumeToken(A){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=A;this.hasReceived=!0}_processBatch(A){let{postBatchResumeToken:F}=A;if(F){if(this.postBatchResumeToken=F,A.batchSize===0)this.resumeToken=F}}clone(){return new CC(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(A){let F=new oU1.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:A}),B=await eU1.executeOperation(A.client,F,this.timeoutContext),$=F.server;if(this.maxWireVersion=UC.maxWireVersion($),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&this.maxWireVersion>=7)this.startAtOperationTime=B.operationTime;return this._processBatch(B),this.emit(tx.INIT,B),this.emit(tx.RESPONSE),{server:$,session:A,response:B}}async getMore(A){let F=await super.getMore(A);return this.maxWireVersion=UC.maxWireVersion(this.server),this._processBatch(F),this.emit(HC.ChangeStream.MORE,F),this.emit(HC.ChangeStream.RESPONSE),F}}rx.ChangeStreamCursor=CC});var Bb=C((Ab)=>{Object.defineProperty(Ab,"__esModule",{value:!0});Ab.ListDatabasesOperation=void 0;var ex=K1(),FC1=_2(),EC=P0();class LC extends FC1.CommandOperation{constructor(A,F){super(A,F);this.options=F??{},this.ns=new ex.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}async execute(A,F,B){let $={listDatabases:1};if(typeof this.options.nameOnly==="boolean")$.nameOnly=this.options.nameOnly;if(this.options.filter)$.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")$.authorizedDatabases=this.options.authorizedDatabases;if(ex.maxWireVersion(A)>=9&&this.options.comment!==void 0)$.comment=this.options.comment;return await super.executeCommand(A,F,$,B)}}Ab.ListDatabasesOperation=LC;EC.defineAspects(LC,[EC.Aspect.READ_OPERATION,EC.Aspect.RETRYABLE])});var VC=C((Zb)=>{Object.defineProperty(Zb,"__esModule",{value:!0});Zb.RemoveUserOperation=void 0;var BC1=_2(),$b=P0();class wC extends BC1.CommandOperation{constructor(A,F,B){super(A,B);this.options=B,this.username=F}get commandName(){return"dropUser"}async execute(A,F,B){return await super.executeCommand(A,F,{dropUser:this.username},B),!0}}Zb.RemoveUserOperation=wC;$b.defineAspects(wC,[$b.Aspect.WRITE_OPERATION])});var BB=C((Wb)=>{Object.defineProperty(Wb,"__esModule",{value:!0});Wb.RunAdminCommandOperation=Wb.RunCommandOperation=void 0;var $C1=K1(),Xb=P0();class Jb extends Xb.AbstractOperation{constructor(A,F,B){super(B);this.command=F,this.options=B,this.ns=A.s.namespace.withCollection("$cmd")}get commandName(){return"runCommand"}async execute(A,F,B){return this.server=A,await A.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:F,timeoutContext:B},this.options.responseType)}}Wb.RunCommandOperation=Jb;class Yb extends Xb.AbstractOperation{constructor(A,F){super(F);this.command=A,this.options=F,this.ns=new $C1.MongoDBNamespace("admin","$cmd")}get commandName(){return"runCommand"}async execute(A,F,B){return this.server=A,await A.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:F,timeoutContext:B})}}Wb.RunAdminCommandOperation=Yb});var Hb=C((zb)=>{Object.defineProperty(zb,"__esModule",{value:!0});zb.ValidateCollectionOperation=void 0;var NC=X1(),DC1=_2();class Qb extends DC1.CommandOperation{constructor(A,F,B){let $={validate:F},Z=Object.keys(B);for(let D=0;D<Z.length;D++)if(Object.prototype.hasOwnProperty.call(B,Z[D])&&Z[D]!=="session")$[Z[D]]=B[Z[D]];super(A.s.db,B);this.options=B,this.command=$,this.collectionName=F}get commandName(){return"validate"}async execute(A,F,B){let $=this.collectionName,Z=await super.executeCommand(A,F,this.command,B);if(Z.result!=null&&typeof Z.result!=="string")throw new NC.MongoUnexpectedServerResponseError("Error with validation data");if(Z.result!=null&&Z.result.match(/exception|corrupt/)!=null)throw new NC.MongoUnexpectedServerResponseError(`Invalid collection ${$}`);if(Z.valid!=null&&!Z.valid)throw new NC.MongoUnexpectedServerResponseError(`Invalid collection ${$}`);return Z}}zb.ValidateCollectionOperation=Qb});var MC=C((Cb)=>{Object.defineProperty(Cb,"__esModule",{value:!0});Cb.Admin=void 0;var XC1=C0(),yY=e6(),JC1=Bb(),YC1=VC(),WC1=BB(),GC1=Hb();class Ub{constructor(A){this.s={db:A}}async command(A,F){return await yY.executeOperation(this.s.db.client,new WC1.RunAdminCommandOperation(A,{...XC1.resolveBSONOptions(F),session:F?.session,readPreference:F?.readPreference,timeoutMS:F?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(A){return await this.command({buildinfo:1},A)}async serverInfo(A){return await this.command({buildinfo:1},A)}async serverStatus(A){return await this.command({serverStatus:1},A)}async ping(A){return await this.command({ping:1},A)}async removeUser(A,F){return await yY.executeOperation(this.s.db.client,new YC1.RemoveUserOperation(this.s.db,A,{dbName:"admin",...F}))}async validateCollection(A,F={}){return await yY.executeOperation(this.s.db.client,new GC1.ValidateCollectionOperation(this,A,F))}async listDatabases(A){return await yY.executeOperation(this.s.db.client,new JC1.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...A}))}async replSetGetStatus(A){return await this.command({replSetGetStatus:1},A)}}Cb.Admin=Ub});var wb=C((Eb)=>{Object.defineProperty(Eb,"__esModule",{value:!0});Eb.ListCollectionsOperation=void 0;var QC1=v7(),zC1=K1(),qC1=_2(),vY=P0();class RC extends qC1.CommandOperation{constructor(A,F,B){super(A,B);if(this.options={...B},delete this.options.writeConcern,this.db=A,this.filter=F,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize}get commandName(){return"listCollections"}async execute(A,F,B){return await super.executeCommand(A,F,this.generateCommand(zC1.maxWireVersion(A)),B,QC1.CursorResponse)}generateCommand(A){let F={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(A>=9&&this.options.comment!==void 0)F.comment=this.options.comment;return F}}Eb.ListCollectionsOperation=RC;vY.defineAspects(RC,[vY.Aspect.READ_OPERATION,vY.Aspect.RETRYABLE,vY.Aspect.CURSOR_CREATING])});var jC=C((Vb)=>{Object.defineProperty(Vb,"__esModule",{value:!0});Vb.ListCollectionsCursor=void 0;var HC1=e6(),UC1=wb(),CC1=A4();class PC extends CC1.AbstractCursor{constructor(A,F,B){super(A.client,A.s.namespace,B);this.parent=A,this.filter=F,this.options=B}clone(){return new PC(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(A){let F=new UC1.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:A,signal:this.signal}),B=await HC1.executeOperation(this.parent.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}}Vb.ListCollectionsCursor=PC});var Ib=C((Pb)=>{Object.defineProperty(Pb,"__esModule",{value:!0});Pb.RunCommandCursor=void 0;var KC1=v7(),$B=X1(),Mb=e6(),EC1=LU(),LC1=BB(),wC1=K1(),VC1=A4();class Rb extends VC1.AbstractCursor{setComment(A){return this.getMoreOptions.comment=A,this}setMaxTimeMS(A){return this.getMoreOptions.maxAwaitTimeMS=A,this}setBatchSize(A){return this.getMoreOptions.batchSize=A,this}clone(){throw new $B.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(A){throw new $B.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(A,F){throw new $B.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(A){throw new $B.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(A){throw new $B.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(A,F,B={}){super(A.client,wC1.ns(A.namespace),B);this.getMoreOptions={},this.db=A,this.command=Object.freeze({...F})}async _initialize(A){let F=new LC1.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:A,readPreference:this.cursorOptions.readPreference,responseType:KC1.CursorResponse}),B=await Mb.executeOperation(this.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}async getMore(A){if(!this.session)throw new $B.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F=new EC1.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await Mb.executeOperation(this.client,F,this.timeoutContext)}}Pb.RunCommandCursor=Rb});var kb=C((Ob)=>{Object.defineProperty(Ob,"__esModule",{value:!0});Ob.CollectionsOperation=void 0;var NC1=wA(),MC1=P0();class Tb extends MC1.AbstractOperation{constructor(A,F){super(F);this.options=F,this.db=A}get commandName(){return"listCollections"}async execute(A,F){let B=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:F}).toArray(),$=[];for(let{name:Z}of B)if(!Z.includes("$"))$.push(new NC1.Collection(this.db,Z,this.db.s.options));return $}}Ob.CollectionsOperation=Tb});var gb=C((bb)=>{Object.defineProperty(bb,"__esModule",{value:!0});bb.CreateCollectionOperation=void 0;var _b=QA(),RC1=wA(),PC1=X1(),jC1=_2(),IC1=xZ(),xb=P0(),TC1=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),OC1="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class hY extends jC1.CommandOperation{constructor(A,F,B={}){super(A,B);this.options=B,this.db=A,this.name=F}get commandName(){return"create"}async execute(A,F,B){let $=this.db,Z=this.name,D=this.options,X=D.encryptedFields??$.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${$.databaseName}.${Z}`];if(X){if(!A.loadBalanced&&A.description.maxWireVersion<_b.MIN_SUPPORTED_QE_WIRE_VERSION)throw new PC1.MongoCompatibilityError(`${OC1} The minimum server version required is ${_b.MIN_SUPPORTED_QE_SERVER_VERSION}`);let Y=X.escCollection??`enxcol_.${Z}.esc`,W=X.ecocCollection??`enxcol_.${Z}.ecoc`;for(let G of[Y,W])await new hY($,G,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(A,F,B);if(!D.encryptedFields)this.options={...this.options,encryptedFields:X}}let J=await this.executeWithoutEncryptedFieldsCheck(A,F,B);if(X)await IC1.CreateIndexesOperation.fromIndexSpecification($,Z,{__safeContent__:1},{}).execute(A,F,B);return J}async executeWithoutEncryptedFieldsCheck(A,F,B){let $=this.db,Z=this.name,D=this.options,X={create:Z};for(let J in D)if(D[J]!=null&&typeof D[J]!=="function"&&!TC1.has(J))X[J]=D[J];return await super.executeCommand(A,F,X,B),new RC1.Collection($,Z,D)}}bb.CreateCollectionOperation=hY;xb.defineAspects(hY,[xb.Aspect.WRITE_OPERATION])});var db=C((vb)=>{Object.defineProperty(vb,"__esModule",{value:!0});vb.ProfilingLevelOperation=void 0;var ub=X1(),SC1=_2();class yb extends SC1.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"profile"}async execute(A,F,B){let $=await super.executeCommand(A,F,{profile:-1},B);if($.ok===1){let Z=$.was;if(Z===0)return"off";if(Z===1)return"slow_only";if(Z===2)return"all";throw new ub.MongoUnexpectedServerResponseError(`Illegal profiling level value ${Z}`)}else throw new ub.MongoUnexpectedServerResponseError("Error with profile command")}}vb.ProfilingLevelOperation=yb});var IC=C((cb)=>{Object.defineProperty(cb,"__esModule",{value:!0});cb.SetProfilingLevelOperation=cb.ProfilingLevel=void 0;var kC1=X1(),_C1=K1(),xC1=_2(),bC1=new Set(["off","slow_only","all"]);cb.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class mb extends xC1.CommandOperation{constructor(A,F,B){super(A,B);switch(this.options=B,F){case cb.ProfilingLevel.off:this.profile=0;break;case cb.ProfilingLevel.slowOnly:this.profile=1;break;case cb.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=F}get commandName(){return"profile"}async execute(A,F,B){let $=this.level;if(!bC1.has($))throw new kC1.MongoInvalidArgumentError(`Profiling level must be one of "${_C1.enumToString(cb.ProfilingLevel)}"`);return await super.executeCommand(A,F,{profile:this.profile},B),$}}cb.SetProfilingLevelOperation=mb});var sb=C((ib)=>{Object.defineProperty(ib,"__esModule",{value:!0});ib.DbStatsOperation=void 0;var fC1=_2(),pb=P0();class TC extends fC1.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"dbStats"}async execute(A,F,B){let $={dbStats:!0};if(this.options.scale!=null)$.scale=this.options.scale;return await super.executeCommand(A,F,$,B)}}ib.DbStatsOperation=TC;pb.defineAspects(TC,[pb.Aspect.READ_OPERATION])});var dY=C((eb)=>{Object.defineProperty(eb,"__esModule",{value:!0});eb.Db=void 0;var gC1=MC(),ab=C0(),uC1=VA(),yC1=wA(),ZB=l2(),vC1=SZ(),hC1=jC(),dC1=Ib(),tb=X1(),mC1=kb(),cC1=gb(),rb=tU(),h7=e6(),lC1=xZ(),pC1=db(),iC1=VC(),nC1=$C(),sC1=BB(),aC1=IC(),tC1=sb(),rC1=i9(),ob=E6(),L6=K1(),oC1=a6(),eC1=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class J5{constructor(A,F,B){if(B=B??{},B=L6.filterOptions(B,eC1),typeof F==="string"&&F.includes("."))throw new tb.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:B,readPreference:ob.ReadPreference.fromOptions(B),bsonOptions:ab.resolveBSONOptions(B,A),pkFactory:B?.pkFactory??L6.DEFAULT_PK_FACTORY,readConcern:rC1.ReadConcern.fromOptions(B),writeConcern:oC1.WriteConcern.fromOptions(B),namespace:new L6.MongoDBNamespace(F)},this.client=A}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(A,F){return await h7.executeOperation(this.client,new cC1.CreateCollectionOperation(this,A,L6.resolveOptions(this,F)))}async command(A,F){return await h7.executeOperation(this.client,new sC1.RunCommandOperation(this,A,L6.resolveOptions(void 0,{...ab.resolveBSONOptions(F),timeoutMS:F?.timeoutMS??this.timeoutMS,session:F?.session,readPreference:F?.readPreference,signal:F?.signal})))}aggregate(A=[],F){return new vC1.AggregationCursor(this.client,this.s.namespace,A,L6.resolveOptions(this,F))}admin(){return new gC1.Admin(this)}collection(A,F={}){if(typeof F==="function")throw new tb.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new yC1.Collection(this,A,L6.resolveOptions(this,F))}async stats(A){return await h7.executeOperation(this.client,new tC1.DbStatsOperation(this,L6.resolveOptions(this,A)))}listCollections(A={},F={}){return new hC1.ListCollectionsCursor(this,A,L6.resolveOptions(this,F))}async renameCollection(A,F,B){return await h7.executeOperation(this.client,new nC1.RenameOperation(this.collection(A),F,L6.resolveOptions(void 0,{...B,new_collection:!0,readPreference:ob.ReadPreference.primary})))}async dropCollection(A,F){return await h7.executeOperation(this.client,new rb.DropCollectionOperation(this,A,L6.resolveOptions(this,F)))}async dropDatabase(A){return await h7.executeOperation(this.client,new rb.DropDatabaseOperation(this,L6.resolveOptions(this,A)))}async collections(A){return await h7.executeOperation(this.client,new mC1.CollectionsOperation(this,L6.resolveOptions(this,A)))}async createIndex(A,F,B){return(await h7.executeOperation(this.client,lC1.CreateIndexesOperation.fromIndexSpecification(this,A,F,B)))[0]}async removeUser(A,F){return await h7.executeOperation(this.client,new iC1.RemoveUserOperation(this,A,L6.resolveOptions(this,F)))}async setProfilingLevel(A,F){return await h7.executeOperation(this.client,new aC1.SetProfilingLevelOperation(this,A,L6.resolveOptions(this,F)))}async profilingLevel(A){return await h7.executeOperation(this.client,new pC1.ProfilingLevelOperation(this,L6.resolveOptions(this,A)))}async indexInformation(A,F){return await this.collection(A).indexInformation(L6.resolveOptions(this,F))}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new uC1.ChangeStream(this,A,L6.resolveOptions(this,F))}runCursorCommand(A,F){return new dC1.RunCommandCursor(this,A,F)}}eb.Db=J5;J5.SYSTEM_NAMESPACE_COLLECTION=ZB.SYSTEM_NAMESPACE_COLLECTION;J5.SYSTEM_INDEX_COLLECTION=ZB.SYSTEM_INDEX_COLLECTION;J5.SYSTEM_PROFILE_COLLECTION=ZB.SYSTEM_PROFILE_COLLECTION;J5.SYSTEM_USER_COLLECTION=ZB.SYSTEM_USER_COLLECTION;J5.SYSTEM_COMMAND_COLLECTION=ZB.SYSTEM_COMMAND_COLLECTION;J5.SYSTEM_JS_COLLECTION=ZB.SYSTEM_JS_COLLECTION});var VA=C((Ff)=>{Object.defineProperty(Ff,"__esModule",{value:!0});Ff.ChangeStream=void 0;var AK1=wA(),d7=l2(),FK1=A4(),BK1=KC(),$K1=dY(),w6=X1(),ZK1=Y5(),DK1=V9(),XK1=DB(),JK1=r6(),H8=K1(),YK1=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],NA={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},WK1=[d7.RESUME_TOKEN_CHANGED,d7.END,d7.CLOSE],GK1="A change stream document has been received that lacks a resume token (_id).",mY="ChangeStream is closed";class F4 extends DK1.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(A,F=[],B={}){super();this.pipeline=F,this.options={...B};let $;if(delete this.options.writeConcern,A instanceof AK1.Collection)this.type=NA.COLLECTION,$=A.s.db.client.options.serverSelectionTimeoutMS;else if(A instanceof $K1.Db)this.type=NA.DATABASE,$=A.client.options.serverSelectionTimeoutMS;else if(A instanceof ZK1.MongoClient)this.type=NA.CLUSTER,$=A.options.serverSelectionTimeoutMS;else throw new w6.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=A,this.namespace=A.s.namespace,!this.options.readPreference&&A.readPreference)this.options.readPreference=A.readPreference;if(this.cursor=this._createChangeStreamCursor(B),this.isClosed=!1,this.mode=!1,this.on("newListener",(Z)=>{if(Z==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(Z)=>{if(Z==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new JK1.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:$})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof w6.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){H8.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let A=await this.cursor.next();return this._processChange(A??null)}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof w6.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){H8.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.tryNext()??null}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof w6.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){H8.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(A){H8.squashError(A)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let A=this.cursor;try{await A.close()}finally{this._endStream()}}stream(A){if(this.closed)throw new w6.MongoChangeStreamError(mY);return this.streamOptions=A,this.cursor.stream(A)}_setIsEmitter(){if(this.mode==="iterator")throw new w6.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new w6.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(A){let F=H8.filterOptions(A,YK1);if(this.type===NA.CLUSTER)F.allChangesForCluster=!0;let B=[{$changeStream:F},...this.pipeline],$=this.type===NA.CLUSTER?this.parent:this.type===NA.DATABASE?this.parent.client:this.type===NA.COLLECTION?this.parent.client:null;if($==null)throw new w6.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let Z=new BK1.ChangeStreamCursor($,this.namespace,B,{...A,timeoutContext:this.timeoutContext?new FK1.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let D of WK1)Z.on(D,(X)=>this.emit(D,X));if(this.listenerCount(F4.CHANGE)>0)this._streamEvents(Z);return Z}_closeEmitterModeWithError(A){this.emit(F4.ERROR,A),this.close().then(void 0,H8.squashError)}_streamEvents(A){this._setIsEmitter();let F=this.cursorStream??A.stream();this.cursorStream=F,F.on("data",(B)=>{try{let $=this._processChange(B);this.emit(F4.CHANGE,$)}catch($){this.emit(F4.ERROR,$)}this.timeoutContext?.refresh()}),F.on("error",(B)=>this._processErrorStreamMode(B,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(A){if(this.isClosed)throw new w6.MongoAPIError(mY);if(A==null)throw new w6.MongoRuntimeError(mY);if(A&&!A._id)throw new w6.MongoChangeStreamError(GK1);return this.cursor.cacheResumeToken(A._id),this.options.startAtOperationTime=void 0,A}_processErrorStreamMode(A,F){if(this.isClosed)return;if(F&&(w6.isResumableError(A,this.cursor.maxWireVersion)||A instanceof w6.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(A),(B)=>{return H8.squashError(B),this._resume(A)}).then(()=>{if(A instanceof w6.MongoOperationTimeoutError)this.emit(F4.ERROR,A)},()=>this._closeEmitterModeWithError(A));else this._closeEmitterModeWithError(A)}async _processErrorIteratorMode(A,F){if(this.isClosed)throw new w6.MongoAPIError(mY);if(F&&(w6.isResumableError(A,this.cursor.maxWireVersion)||A instanceof w6.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(B){H8.squashError(B)}if(await this._resume(A),A instanceof w6.MongoOperationTimeoutError)throw A}else{try{await this.close()}catch(B){H8.squashError(B)}throw A}}async _resume(A){this.timeoutContext?.refresh();let F=H8.getTopology(this.parent);try{await F.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),A}}}Ff.ChangeStream=F4;F4.RESPONSE=d7.RESPONSE;F4.MORE=d7.MORE;F4.INIT=d7.INIT;F4.CLOSE=d7.CLOSE;F4.CHANGE=d7.CHANGE;F4.END=d7.END;F4.ERROR=d7.ERROR;F4.RESUME_TOKEN_CHANGED=d7.RESUME_TOKEN_CHANGED;XK1.configureResourceManagement(F4.prototype)});var m7=C(($f)=>{Object.defineProperty($f,"__esModule",{value:!0});$f.aws4=void 0;$f.getKerberos=QK1;$f.getZstdLibrary=zK1;$f.getAwsCredentialProvider=qK1;$f.getGcpMetadata=HK1;$f.getSnappy=UK1;$f.getSocks=CK1;$f.getMongoDBClientEncryption=EK1;var W5=X1();function fZ(A){return new Proxy(A?{kModuleError:A}:{},{get:(B,$)=>{if($==="kModuleError")return A;throw A},set:()=>{throw A}})}function QK1(){let A;try{A=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(F){A=fZ(new W5.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:F,dependencyName:"kerberos"}))}return A}function zK1(){let A;try{A=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(F){A=fZ(new W5.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:F,dependencyName:"zstd"}))}return A}function qK1(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(A){return fZ(new W5.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:A,dependencyName:"@aws-sdk/credential-providers"}))}}function HK1(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(A){return fZ(new W5.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:A,dependencyName:"gcp-metadata"}))}}function UK1(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(A){return{kModuleError:new W5.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:A,dependencyName:"snappy"})}}}function CK1(){try{return (()=>{throw new Error("Cannot require module "+"socks");})()}catch(A){return{kModuleError:new W5.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:A,dependencyName:"socks"})}}}$f.aws4=KK1();function KK1(){let A;try{A=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(F){A=fZ(new W5.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:F,dependencyName:"aws4"}))}return A}function EK1(){let A=null;try{A=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(F){return{kModuleError:new W5.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:F,dependencyName:"mongodb-client-encryption"})}}return A}});var G5=C((Jf)=>{Object.defineProperty(Jf,"__esModule",{value:!0});Jf.AuthProvider=Jf.AuthContext=void 0;var jK1=X1();class Df{constructor(A,F,B){this.reauthenticating=!1,this.connection=A,this.credentials=F,this.options=B}}Jf.AuthContext=Df;class Xf{async prepare(A,F){return A}async reauth(A){if(A.reauthenticating)throw new jK1.MongoRuntimeError("Reauthentication already in progress.");try{A.reauthenticating=!0,await this.auth(A)}finally{A.reauthenticating=!1}}}Jf.AuthProvider=Xf});var lY=C((qf)=>{Object.defineProperty(qf,"__esModule",{value:!0});qf.GSSAPI=qf.GSSAPICanonicalizationValue=void 0;qf.performGSSAPICanonicalizeHostName=zf;qf.resolveCname=kC;var SC=A1("dns"),TK1=m7(),Wf=X1(),OK1=K1(),SK1=G5();qf.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function OC(A,F){return await A.command(OK1.ns("$external.$cmd"),F)}var gZ;class Gf extends SK1.AuthProvider{async auth(A){let{connection:F,credentials:B}=A;if(B==null)throw new Wf.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:$}=B,Z=await kK1(A),D=await Z.step(""),X=await OC(F,_K1(D)),J=await Qf(Z,10,X.payload),Y=await OC(F,xK1(J,X.conversationId)),W=await bK1(Z,$,Y.payload);await OC(F,{saslContinue:1,conversationId:Y.conversationId,payload:W})}}qf.GSSAPI=Gf;async function kK1(A){let{hostAddress:F}=A.options,{credentials:B}=A;if(!F||typeof F.host!=="string"||!B)throw new Wf.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(fK1(),"kModuleError"in gZ)throw gZ.kModuleError;let{initializeClient:$}=gZ,{username:Z,password:D}=B,X=B.mechanismProperties,J=X.SERVICE_NAME??"mongodb",Y=await zf(F.host,X),W={};if(D!=null)Object.assign(W,{user:Z,password:D});let G=X.SERVICE_HOST??Y,Q=`${J}${process.platform==="win32"?"/":"@"}${G}`;if("SERVICE_REALM"in X)Q=`${Q}@${X.SERVICE_REALM}`;return await $(Q,W)}function _K1(A){return{saslStart:1,mechanism:"GSSAPI",payload:A,autoAuthorize:1}}function xK1(A,F){return{saslContinue:1,conversationId:F,payload:A}}async function Qf(A,F,B){try{return await A.step(B)||""}catch($){if(F===0)throw $;return await Qf(A,F-1,B)}}async function bK1(A,F,B){let $=await A.unwrap(B);return await A.wrap($||"",{user:F})}async function zf(A,F){let B=F.CANONICALIZE_HOST_NAME;if(!B||B===qf.GSSAPICanonicalizationValue.none)return A;if(B===qf.GSSAPICanonicalizationValue.on||B===qf.GSSAPICanonicalizationValue.forwardAndReverse){let{address:$}=await SC.promises.lookup(A);try{let Z=await SC.promises.resolvePtr($);return Z.length>0?Z[0]:A}catch{return await kC(A)}}else return await kC(A)}async function kC(A){try{let F=await SC.promises.resolveCname(A);return F.length>0?F[0]:A}catch{return A}}function fK1(){if(!gZ)gZ=TK1.getKerberos()}});var U8=C((Uf)=>{Object.defineProperty(Uf,"__esModule",{value:!0});Uf.AUTH_MECHS_AUTH_SRC_EXTERNAL=Uf.AuthMechanism=void 0;Uf.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});Uf.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([Uf.AuthMechanism.MONGODB_GSSAPI,Uf.AuthMechanism.MONGODB_AWS,Uf.AuthMechanism.MONGODB_OIDC,Uf.AuthMechanism.MONGODB_X509])});var iY=C((Lf)=>{Object.defineProperty(Lf,"__esModule",{value:!0});Lf.MongoCredentials=Lf.DEFAULT_ALLOWED_HOSTS=void 0;var a9=X1(),yK1=lY(),w4=U8();function vK1(A){if(A){if(Array.isArray(A.saslSupportedMechs))return A.saslSupportedMechs.includes(w4.AuthMechanism.MONGODB_SCRAM_SHA256)?w4.AuthMechanism.MONGODB_SCRAM_SHA256:w4.AuthMechanism.MONGODB_SCRAM_SHA1}return w4.AuthMechanism.MONGODB_SCRAM_SHA256}var Kf=["test","azure","gcp","k8s"],Ef="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";Lf.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var hK1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class pY{constructor(A){if(this.username=A.username??"",this.password=A.password,this.source=A.source,!this.source&&A.db)this.source=A.db;if(this.mechanism=A.mechanism||w4.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=A.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===w4.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:Lf.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(A){return this.mechanism===A.mechanism&&this.username===A.username&&this.password===A.password&&this.source===A.source}resolveAuthMechanism(A){if(this.mechanism.match(/DEFAULT/i))return new pY({username:this.username,password:this.password,source:this.source,mechanism:vK1(A),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===w4.AuthMechanism.MONGODB_GSSAPI||this.mechanism===w4.AuthMechanism.MONGODB_PLAIN||this.mechanism===w4.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===w4.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new a9.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===w4.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new a9.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new a9.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new a9.MongoInvalidArgumentError(hK1);if(this.mechanismProperties.ENVIRONMENT&&!Kf.includes(this.mechanismProperties.ENVIRONMENT))throw new a9.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${Kf.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new a9.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let F=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(F))throw new a9.MongoInvalidArgumentError(Ef);for(let B of F)if(typeof B!=="string")throw new a9.MongoInvalidArgumentError(Ef)}}if(w4.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new a9.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===w4.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new a9.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===w4.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new a9.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let A=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(yK1.GSSAPICanonicalizationValue).includes(A))throw new a9.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${A}`)}static merge(A,F){return new pY({username:F.username??A?.username??"",password:F.password??A?.password??"",mechanism:F.mechanism??A?.mechanism??w4.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:F.mechanismProperties??A?.mechanismProperties??{},source:F.source??F.db??A?.source??"admin"})}}Lf.MongoCredentials=pY});var Nf=C((xZ0,dK1)=>{dK1.exports={name:"mongodb",version:"6.18.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.9",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.632.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.5","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.1","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.31.1","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.25.1","eslint-config-prettier":"^10.1.2","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.2.3","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.1.4",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^10.8.2","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.4.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.5.3",semver:"^7.7.0",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.32.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}},__npminstall_done:!0,_from:"mongodb@6.18.0",_resolved:"https://registry.npmmirror.com/mongodb/-/mongodb-6.18.0.tgz"}});var sY=C((jf)=>{Object.defineProperty(jf,"__esModule",{value:!0});jf.LimitedSizeDocument=void 0;jf.makeClientMetadata=cK1;jf.addContainerMetadata=pK1;jf.getFAASEnv=Pf;var yZ=A1("os"),vZ=A1("process"),XB=C0(),_C=X1(),mK1=K1(),Mf=Nf().version;class nY{constructor(A){this.document=new Map,this.documentSize=5,this.maxSize=A}ifItFitsItSits(A,F){let B=XB.BSON.serialize(new Map().set(A,F)).byteLength-5;if(B+this.documentSize>this.maxSize)return!1;return this.documentSize+=B,this.document.set(A,F),!0}toObject(){return XB.BSON.deserialize(XB.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}jf.LimitedSizeDocument=nY;function cK1(A){let F=new nY(512),{appName:B=""}=A;if(B.length>0){let G=Buffer.byteLength(B,"utf8")<=128?A.appName:Buffer.from(B,"utf8").subarray(0,128).toString("utf8");F.ifItFitsItSits("application",{name:G})}let{name:$="",version:Z="",platform:D=""}=A.driverInfo,X={name:$.length>0?`nodejs|${$}`:"nodejs",version:Z.length>0?`${Mf}|${Z}`:Mf};if(A.additionalDriverInfo==null)throw new _C.MongoRuntimeError("Client options `additionalDriverInfo` must always default to an empty array");for(let{name:G="",version:Q=""}of A.additionalDriverInfo){if(G.length>0)X.name=`${X.name}|${G}`;if(Q.length>0)X.version=`${X.version}|${Q}`}if(!F.ifItFitsItSits("driver",X))throw new _C.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let J=iK1();if(D.length>0)J=`${J}|${D}`;for(let{platform:G=""}of A.additionalDriverInfo)if(G.length>0)J=`${J}|${G}`;if(!F.ifItFitsItSits("platform",J))throw new _C.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let Y=new Map().set("name",vZ.platform).set("architecture",vZ.arch).set("version",yZ.release()).set("type",yZ.type());if(!F.ifItFitsItSits("os",Y))for(let G of Y.keys()){if(Y.delete(G),Y.size===0)break;if(F.ifItFitsItSits("os",Y))break}let W=Pf();if(W!=null){if(!F.ifItFitsItSits("env",W))for(let G of W.keys()){if(W.delete(G),W.size===0)break;if(F.ifItFitsItSits("env",W))break}}return F.toObject()}var Rf;async function lK1(){let A={};Rf??=mK1.fileIsAccessible("/.dockerenv");let F=await Rf,{KUBERNETES_SERVICE_HOST:B=""}=vZ.env,$=B.length>0?!0:!1;if(F)A.runtime="docker";if($)A.orchestrator="kubernetes";return A}async function pK1(A){let F=await lK1();if(Object.keys(F).length===0)return A;let B=new nY(512),$={...A?.env,container:F};for(let[Z,D]of Object.entries(A))if(Z!=="env")B.ifItFitsItSits(Z,D);else if(!B.ifItFitsItSits("env",$))B.ifItFitsItSits("env",D);if(!("env"in A))B.ifItFitsItSits("env",$);return B.toObject()}function Pf(){let{AWS_EXECUTION_ENV:A="",AWS_LAMBDA_RUNTIME_API:F="",FUNCTIONS_WORKER_RUNTIME:B="",K_SERVICE:$="",FUNCTION_NAME:Z="",VERCEL:D="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:X="",AWS_REGION:J="",FUNCTION_MEMORY_MB:Y="",FUNCTION_REGION:W="",FUNCTION_TIMEOUT_SEC:G="",VERCEL_REGION:Q=""}=vZ.env,q=A.startsWith("AWS_Lambda_")||F.length>0,z=B.length>0,H=$.length>0||Z.length>0,U=D.length>0,K=new Map;if(U&&!(z||H)){if(Q.length>0)K.set("region",Q);return K.set("name","vercel"),K}if(q&&!(z||H||U)){if(J.length>0)K.set("region",J);if(X.length>0&&Number.isInteger(+X))K.set("memory_mb",new XB.Int32(X));return K.set("name","aws.lambda"),K}if(z&&!(H||q||U))return K.set("name","azure.func"),K;if(H&&!(z||q||U)){if(W.length>0)K.set("region",W);if(Y.length>0&&Number.isInteger(+Y))K.set("memory_mb",new XB.Int32(Y));if(G.length>0&&Number.isInteger(+G))K.set("timeout_sec",new XB.Int32(G));return K.set("name","gcp.func"),K}return null}function iK1(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${yZ.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${yZ.endianness()}`;return`Node.js ${vZ.version}, ${yZ.endianness()}`}});var tY=C((kf)=>{function u0(A,F,B){if(B.globals)A=B.globals[A.name];return new A(`${B.context?B.context:"Value"} ${F}.`)}function WB(A,F){if(typeof A==="bigint")throw u0(TypeError,"is a BigInt which cannot be converted to a number",F);if(!F.globals)return Number(A);return F.globals.Number(A)}function Of(A){if(A>0&&A%1===0.5&&(A&1)===0||A<0&&A%1===-0.5&&(A&1)===1)return hZ(Math.floor(A));return hZ(Math.round(A))}function aY(A){return hZ(Math.trunc(A))}function Tf(A){return A<0?-1:1}function tK1(A,F){let B=A%F;if(Tf(F)!==Tf(B))return B+F;return B}function hZ(A){return A===0?0:A}function GB(A,{unsigned:F}){let B,$;if(F)B=0,$=2**A-1;else B=-(2**(A-1)),$=2**(A-1)-1;let Z=2**A,D=2**(A-1);return(X,J={})=>{let Y=WB(X,J);if(Y=hZ(Y),J.enforceRange){if(!Number.isFinite(Y))throw u0(TypeError,"is not a finite number",J);if(Y=aY(Y),Y<B||Y>$)throw u0(TypeError,`is outside the accepted range of ${B} to ${$}, inclusive`,J);return Y}if(!Number.isNaN(Y)&&J.clamp)return Y=Math.min(Math.max(Y,B),$),Y=Of(Y),Y;if(!Number.isFinite(Y)||Y===0)return 0;if(Y=aY(Y),Y>=B&&Y<=$)return Y;if(Y=tK1(Y,Z),!F&&Y>=D)return Y-Z;return Y}}function Sf(A,{unsigned:F}){let B=Number.MAX_SAFE_INTEGER,$=F?0:Number.MIN_SAFE_INTEGER,Z=F?BigInt.asUintN:BigInt.asIntN;return(D,X={})=>{let J=WB(D,X);if(J=hZ(J),X.enforceRange){if(!Number.isFinite(J))throw u0(TypeError,"is not a finite number",X);if(J=aY(J),J<$||J>B)throw u0(TypeError,`is outside the accepted range of ${$} to ${B}, inclusive`,X);return J}if(!Number.isNaN(J)&&X.clamp)return J=Math.min(Math.max(J,$),B),J=Of(J),J;if(!Number.isFinite(J)||J===0)return 0;let Y=BigInt(aY(J));return Y=Z(A,Y),Number(Y)}}kf.any=(A)=>{return A};kf.undefined=()=>{return};kf.boolean=(A)=>{return Boolean(A)};kf.byte=GB(8,{unsigned:!1});kf.octet=GB(8,{unsigned:!0});kf.short=GB(16,{unsigned:!1});kf["unsigned short"]=GB(16,{unsigned:!0});kf.long=GB(32,{unsigned:!1});kf["unsigned long"]=GB(32,{unsigned:!0});kf["long long"]=Sf(64,{unsigned:!1});kf["unsigned long long"]=Sf(64,{unsigned:!0});kf.double=(A,F={})=>{let B=WB(A,F);if(!Number.isFinite(B))throw u0(TypeError,"is not a finite floating-point value",F);return B};kf["unrestricted double"]=(A,F={})=>{return WB(A,F)};kf.float=(A,F={})=>{let B=WB(A,F);if(!Number.isFinite(B))throw u0(TypeError,"is not a finite floating-point value",F);if(Object.is(B,-0))return B;let $=Math.fround(B);if(!Number.isFinite($))throw u0(TypeError,"is outside the range of a single-precision floating-point value",F);return $};kf["unrestricted float"]=(A,F={})=>{let B=WB(A,F);if(isNaN(B))return B;if(Object.is(B,-0))return B;return Math.fround(B)};kf.DOMString=(A,F={})=>{if(F.treatNullAsEmptyString&&A===null)return"";if(typeof A==="symbol")throw u0(TypeError,"is a symbol, which cannot be converted to a string",F);return(F.globals?F.globals.String:String)(A)};kf.ByteString=(A,F={})=>{let B=kf.DOMString(A,F),$;for(let Z=0;($=B.codePointAt(Z))!==void 0;++Z)if($>255)throw u0(TypeError,"is not a valid ByteString",F);return B};kf.USVString=(A,F={})=>{let B=kf.DOMString(A,F),$=B.length,Z=[];for(let D=0;D<$;++D){let X=B.charCodeAt(D);if(X<55296||X>57343)Z.push(String.fromCodePoint(X));else if(56320<=X&&X<=57343)Z.push(String.fromCodePoint(65533));else if(D===$-1)Z.push(String.fromCodePoint(65533));else{let J=B.charCodeAt(D+1);if(56320<=J&&J<=57343){let Y=X&1023,W=J&1023;Z.push(String.fromCodePoint(65536+1024*Y+W)),++D}else Z.push(String.fromCodePoint(65533))}}return Z.join("")};kf.object=(A,F={})=>{if(A===null||typeof A!=="object"&&typeof A!=="function")throw u0(TypeError,"is not an object",F);return A};var rK1=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,oK1=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function xC(A){try{return rK1.call(A),!0}catch{return!1}}function JB(A){try{return oK1.call(A),!0}catch{return!1}}function YB(A){try{return new Uint8Array(A),!1}catch{return!0}}kf.ArrayBuffer=(A,F={})=>{if(!xC(A)){if(F.allowShared&&!JB(A))throw u0(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",F);throw u0(TypeError,"is not an ArrayBuffer",F)}if(YB(A))throw u0(TypeError,"is a detached ArrayBuffer",F);return A};var eK1=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;kf.DataView=(A,F={})=>{try{eK1.call(A)}catch(B){throw u0(TypeError,"is not a DataView",F)}if(!F.allowShared&&JB(A.buffer))throw u0(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",F);if(YB(A.buffer))throw u0(TypeError,"is backed by a detached ArrayBuffer",F);return A};var AE1=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((A)=>{let{name:F}=A,B=/^[AEIOU]/u.test(F)?"an":"a";kf[F]=($,Z={})=>{if(!ArrayBuffer.isView($)||AE1.call($)!==F)throw u0(TypeError,`is not ${B} ${F} object`,Z);if(!Z.allowShared&&JB($.buffer))throw u0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",Z);if(YB($.buffer))throw u0(TypeError,"is a view on a detached ArrayBuffer",Z);return $}});kf.ArrayBufferView=(A,F={})=>{if(!ArrayBuffer.isView(A))throw u0(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",F);if(!F.allowShared&&JB(A.buffer))throw u0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(YB(A.buffer))throw u0(TypeError,"is a view on a detached ArrayBuffer",F);return A};kf.BufferSource=(A,F={})=>{if(ArrayBuffer.isView(A)){if(!F.allowShared&&JB(A.buffer))throw u0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(YB(A.buffer))throw u0(TypeError,"is a view on a detached ArrayBuffer",F);return A}if(!F.allowShared&&!xC(A))throw u0(TypeError,"is not an ArrayBuffer or a view on one",F);if(F.allowShared&&!JB(A)&&!xC(A))throw u0(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",F);if(YB(A))throw u0(TypeError,"is a detached ArrayBuffer",F);return A};kf.DOMTimeStamp=kf["unsigned long long"]});var oY=C((vf,hf)=>{function ME1(A){return typeof A==="object"&&A!==null||typeof A==="function"}var xf=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function RE1(A,F){for(let B of Reflect.ownKeys(F)){let $=Reflect.getOwnPropertyDescriptor(F,B);if($&&!Reflect.defineProperty(A,B,$))throw new TypeError(`Cannot redefine property: ${String(B)}`)}}function PE1(A,F){let B=gf(A);return Object.defineProperties(Object.create(B["%Object.prototype%"]),Object.getOwnPropertyDescriptors(F))}var bf=Symbol("wrapper"),ff=Symbol("impl"),QB=Symbol("SameObject caches"),rY=Symbol.for("[webidl2js] constructor registry"),jE1=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function gf(A){if(xf(A,rY))return A[rY];let F=Object.create(null);F["%Object.prototype%"]=A.Object.prototype,F["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new A.Array()[Symbol.iterator]()));try{F["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(A.eval("(async function* () {})").prototype))}catch{F["%AsyncIteratorPrototype%"]=jE1}return A[rY]=F,F}function IE1(A,F,B){if(!A[QB])A[QB]=Object.create(null);if(F in A[QB])return A[QB][F];return A[QB][F]=B(),A[QB][F]}function uf(A){return A?A[bf]:null}function yf(A){return A?A[ff]:null}function TE1(A){let F=uf(A);return F?F:A}function OE1(A){let F=yf(A);return F?F:A}var SE1=Symbol("internal");function kE1(A){if(typeof A!=="string")return!1;let F=A>>>0;if(F===4294967295)return!1;let B=`${F}`;if(A!==B)return!1;return!0}var _E1=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function xE1(A){try{return _E1.call(A),!0}catch(F){return!1}}function bE1([A,F],B){let $;switch(B){case"key":$=A;break;case"value":$=F;break;case"key+value":$=[A,F];break}return{value:$,done:!1}}var fE1=Symbol("supports property index"),gE1=Symbol("supported property indices"),uE1=Symbol("supports property name"),yE1=Symbol("supported property names"),vE1=Symbol("indexed property get"),hE1=Symbol("indexed property set new"),dE1=Symbol("indexed property set existing"),mE1=Symbol("named property get"),cE1=Symbol("named property set new"),lE1=Symbol("named property set existing"),pE1=Symbol("named property delete"),iE1=Symbol("async iterator get the next iteration result"),nE1=Symbol("async iterator return steps"),sE1=Symbol("async iterator initialization steps"),aE1=Symbol("async iterator end of iteration");hf.exports=vf={isObject:ME1,hasOwn:xf,define:RE1,newObjectInRealm:PE1,wrapperSymbol:bf,implSymbol:ff,getSameObject:IE1,ctorRegistrySymbol:rY,initCtorRegistry:gf,wrapperForImpl:uf,implForWrapper:yf,tryWrapperForImpl:TE1,tryImplForWrapper:OE1,iterInternalSymbol:SE1,isArrayBuffer:xE1,isArrayIndexPropName:kE1,supportsPropertyIndex:fE1,supportedPropertyIndices:gE1,supportsPropertyName:uE1,supportedPropertyNames:yE1,indexedGet:vE1,indexedSetNew:hE1,indexedSetExisting:dE1,namedGet:mE1,namedSetNew:cE1,namedSetExisting:lE1,namedDelete:pE1,asyncIteratorNext:iE1,asyncIteratorReturn:nE1,asyncIteratorInit:sE1,asyncIteratorEOI:aE1,iteratorResult:bE1}});var af=C((gZ0,sf)=>{var tE1=/^xn--/,rE1=/[^\0-\x7F]/,oE1=/[\x2E\u3002\uFF0E\uFF61]/g,eE1={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C8=Math.floor,fC=String.fromCharCode;function Q5(A){throw new RangeError(eE1[A])}function AL1(A,F){let B=[],$=A.length;while($--)B[$]=F(A[$]);return B}function mf(A,F){let B=A.split("@"),$="";if(B.length>1)$=B[0]+"@",A=B[1];A=A.replace(oE1,".");let Z=A.split("."),D=AL1(Z,F).join(".");return $+D}function cf(A){let F=[],B=0,$=A.length;while(B<$){let Z=A.charCodeAt(B++);if(Z>=55296&&Z<=56319&&B<$){let D=A.charCodeAt(B++);if((D&64512)==56320)F.push(((Z&1023)<<10)+(D&1023)+65536);else F.push(Z),B--}else F.push(Z)}return F}var FL1=(A)=>String.fromCodePoint(...A),BL1=function(A){if(A>=48&&A<58)return 26+(A-48);if(A>=65&&A<91)return A-65;if(A>=97&&A<123)return A-97;return 36},df=function(A,F){return A+22+75*(A<26)-((F!=0)<<5)},lf=function(A,F,B){let $=0;A=B?C8(A/700):A>>1,A+=C8(A/F);for(;A>455;$+=36)A=C8(A/35);return C8($+36*A/(A+38))},pf=function(A){let F=[],B=A.length,$=0,Z=128,D=72,X=A.lastIndexOf("-");if(X<0)X=0;for(let J=0;J<X;++J){if(A.charCodeAt(J)>=128)Q5("not-basic");F.push(A.charCodeAt(J))}for(let J=X>0?X+1:0;J<B;){let Y=$;for(let G=1,Q=36;;Q+=36){if(J>=B)Q5("invalid-input");let q=BL1(A.charCodeAt(J++));if(q>=36)Q5("invalid-input");if(q>C8((2147483647-$)/G))Q5("overflow");$+=q*G;let z=Q<=D?1:Q>=D+26?26:Q-D;if(q<z)break;let H=36-z;if(G>C8(2147483647/H))Q5("overflow");G*=H}let W=F.length+1;if(D=lf($-Y,W,Y==0),C8($/W)>2147483647-Z)Q5("overflow");Z+=C8($/W),$%=W,F.splice($++,0,Z)}return String.fromCodePoint(...F)},nf=function(A){let F=[];A=cf(A);let B=A.length,$=128,Z=0,D=72;for(let Y of A)if(Y<128)F.push(fC(Y));let X=F.length,J=X;if(X)F.push("-");while(J<B){let Y=2147483647;for(let G of A)if(G>=$&&G<Y)Y=G;let W=J+1;if(Y-$>C8((2147483647-Z)/W))Q5("overflow");Z+=(Y-$)*W,$=Y;for(let G of A){if(G<$&&++Z>2147483647)Q5("overflow");if(G===$){let Q=Z;for(let q=36;;q+=36){let z=q<=D?1:q>=D+26?26:q-D;if(Q<z)break;let H=Q-z,U=36-z;F.push(fC(df(z+H%U,0))),Q=C8(H/U)}F.push(fC(df(Q,0))),D=lf(Z,W,J===X),Z=0,++J}}++Z,++$}return F.join("")},$L1=function(A){return mf(A,function(F){return tE1.test(F)?pf(F.slice(4).toLowerCase()):F})},ZL1=function(A){return mf(A,function(F){return rE1.test(F)?"xn--"+nf(F):F})},DL1={version:"2.3.1",ucs2:{decode:cf,encode:FL1},decode:pf,encode:nf,toASCII:ZL1,toUnicode:$L1};sf.exports=DL1});var rf=C((uZ0,tf)=>{var XL1=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,JL1=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,YL1=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,WL1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,GL1=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,QL1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,zL1=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,qL1=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,HL1=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,UL1=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,CL1=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,KL1=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;tf.exports={combiningMarks:XL1,combiningClassVirama:JL1,validZWNJ:YL1,bidiDomain:WL1,bidiS1LTR:GL1,bidiS1RTL:QL1,bidiS2:zL1,bidiS3:qL1,bidiS4EN:HL1,bidiS4AN:UL1,bidiS5:CL1,bidiS6:KL1}});var of=C((yZ0,EL1)=>{EL1.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," "],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," "],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," "],[181,1,""],[182,2],[183,2],[184,1," "],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"14"],[189,1,"12"],[190,1,"34"],[191,2],[192,1,""],[193,1,""],[194,1,""],[195,1,""],[196,1,""],[197,1,""],[198,1,""],[199,1,""],[200,1,""],[201,1,""],[202,1,""],[203,1,""],[204,1,""],[205,1,""],[206,1,""],[207,1,""],[208,1,""],[209,1,""],[210,1,""],[211,1,""],[212,1,""],[213,1,""],[214,1,""],[215,2],[216,1,""],[217,1,""],[218,1,""],[219,1,""],[220,1,""],[221,1,""],[222,1,""],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,""],[257,2],[258,1,""],[259,2],[260,1,""],[261,2],[262,1,""],[263,2],[264,1,""],[265,2],[266,1,""],[267,2],[268,1,""],[269,2],[270,1,""],[271,2],[272,1,""],[273,2],[274,1,""],[275,2],[276,1,""],[277,2],[278,1,""],[279,2],[280,1,""],[281,2],[282,1,""],[283,2],[284,1,""],[285,2],[286,1,""],[287,2],[288,1,""],[289,2],[290,1,""],[291,2],[292,1,""],[293,2],[294,1,""],[295,2],[296,1,""],[297,2],[298,1,""],[299,2],[300,1,""],[301,2],[302,1,""],[303,2],[304,1,"i"],[305,2],[[306,307],1,"ij"],[308,1,""],[309,2],[310,1,""],[[311,312],2],[313,1,""],[314,2],[315,1,""],[316,2],[317,1,""],[318,2],[[319,320],1,"l"],[321,1,""],[322,2],[323,1,""],[324,2],[325,1,""],[326,2],[327,1,""],[328,2],[329,1,"n"],[330,1,""],[331,2],[332,1,""],[333,2],[334,1,""],[335,2],[336,1,""],[337,2],[338,1,""],[339,2],[340,1,""],[341,2],[342,1,""],[343,2],[344,1,""],[345,2],[346,1,""],[347,2],[348,1,""],[349,2],[350,1,""],[351,2],[352,1,""],[353,2],[354,1,""],[355,2],[356,1,""],[357,2],[358,1,""],[359,2],[360,1,""],[361,2],[362,1,""],[363,2],[364,1,""],[365,2],[366,1,""],[367,2],[368,1,""],[369,2],[370,1,""],[371,2],[372,1,""],[373,2],[374,1,""],[375,2],[376,1,""],[377,1,""],[378,2],[379,1,""],[380,2],[381,1,""],[382,2],[383,1,"s"],[384,2],[385,1,""],[386,1,""],[387,2],[388,1,""],[389,2],[390,1,""],[391,1,""],[392,2],[393,1,""],[394,1,""],[395,1,""],[[396,397],2],[398,1,""],[399,1,""],[400,1,""],[401,1,""],[402,2],[403,1,""],[404,1,""],[405,2],[406,1,""],[407,1,""],[408,1,""],[[409,411],2],[412,1,""],[413,1,""],[414,2],[415,1,""],[416,1,""],[417,2],[418,1,""],[419,2],[420,1,""],[421,2],[422,1,""],[423,1,""],[424,2],[425,1,""],[[426,427],2],[428,1,""],[429,2],[430,1,""],[431,1,""],[432,2],[433,1,""],[434,1,""],[435,1,""],[436,2],[437,1,""],[438,2],[439,1,""],[440,1,""],[[441,443],2],[444,1,""],[[445,451],2],[[452,454],1,"d"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,""],[462,2],[463,1,""],[464,2],[465,1,""],[466,2],[467,1,""],[468,2],[469,1,""],[470,2],[471,1,""],[472,2],[473,1,""],[474,2],[475,1,""],[[476,477],2],[478,1,""],[479,2],[480,1,""],[481,2],[482,1,""],[483,2],[484,1,""],[485,2],[486,1,""],[487,2],[488,1,""],[489,2],[490,1,""],[491,2],[492,1,""],[493,2],[494,1,""],[[495,496],2],[[497,499],1,"dz"],[500,1,""],[501,2],[502,1,""],[503,1,""],[504,1,""],[505,2],[506,1,""],[507,2],[508,1,""],[509,2],[510,1,""],[511,2],[512,1,""],[513,2],[514,1,""],[515,2],[516,1,""],[517,2],[518,1,""],[519,2],[520,1,""],[521,2],[522,1,""],[523,2],[524,1,""],[525,2],[526,1,""],[527,2],[528,1,""],[529,2],[530,1,""],[531,2],[532,1,""],[533,2],[534,1,""],[535,2],[536,1,""],[537,2],[538,1,""],[539,2],[540,1,""],[541,2],[542,1,""],[543,2],[544,1,""],[545,2],[546,1,""],[547,2],[548,1,""],[549,2],[550,1,""],[551,2],[552,1,""],[553,2],[554,1,""],[555,2],[556,1,""],[557,2],[558,1,""],[559,2],[560,1,""],[561,2],[562,1,""],[563,2],[[564,566],2],[[567,569],2],[570,1,""],[571,1,""],[572,2],[573,1,""],[574,1,""],[[575,576],2],[577,1,""],[578,2],[579,1,""],[580,1,""],[581,1,""],[582,1,""],[583,2],[584,1,""],[585,2],[586,1,""],[587,2],[588,1,""],[589,2],[590,1,""],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,""],[690,1,"j"],[691,1,"r"],[692,1,""],[693,1,""],[694,1,""],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," "],[729,1," "],[730,1," "],[731,1," "],[732,1," "],[733,1," "],[734,2],[735,2],[736,1,""],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,""],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,""],[833,1,""],[834,2],[835,1,""],[836,1,""],[837,1,""],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,""],[881,2],[882,1,""],[883,2],[884,1,""],[885,2],[886,1,""],[887,2],[[888,889],3],[890,1," "],[[891,893],2],[894,1,";"],[895,1,""],[[896,899],3],[900,1," "],[901,1," "],[902,1,""],[903,1,""],[904,1,""],[905,1,""],[906,1,""],[907,3],[908,1,""],[909,3],[910,1,""],[911,1,""],[912,2],[913,1,""],[914,1,""],[915,1,""],[916,1,""],[917,1,""],[918,1,""],[919,1,""],[920,1,""],[921,1,""],[922,1,""],[923,1,""],[924,1,""],[925,1,""],[926,1,""],[927,1,""],[928,1,""],[929,1,""],[930,3],[931,1,""],[932,1,""],[933,1,""],[934,1,""],[935,1,""],[936,1,""],[937,1,""],[938,1,""],[939,1,""],[[940,961],2],[962,6,""],[[963,974],2],[975,1,""],[976,1,""],[977,1,""],[978,1,""],[979,1,""],[980,1,""],[981,1,""],[982,1,""],[983,2],[984,1,""],[985,2],[986,1,""],[987,2],[988,1,""],[989,2],[990,1,""],[991,2],[992,1,""],[993,2],[994,1,""],[995,2],[996,1,""],[997,2],[998,1,""],[999,2],[1000,1,""],[1001,2],[1002,1,""],[1003,2],[1004,1,""],[1005,2],[1006,1,""],[1007,2],[1008,1,""],[1009,1,""],[1010,1,""],[1011,2],[1012,1,""],[1013,1,""],[1014,2],[1015,1,""],[1016,2],[1017,1,""],[1018,1,""],[1019,2],[1020,2],[1021,1,""],[1022,1,""],[1023,1,""],[1024,1,""],[1025,1,""],[1026,1,""],[1027,1,""],[1028,1,""],[1029,1,""],[1030,1,""],[1031,1,""],[1032,1,""],[1033,1,""],[1034,1,""],[1035,1,""],[1036,1,""],[1037,1,""],[1038,1,""],[1039,1,""],[1040,1,""],[1041,1,""],[1042,1,""],[1043,1,""],[1044,1,""],[1045,1,""],[1046,1,""],[1047,1,""],[1048,1,""],[1049,1,""],[1050,1,""],[1051,1,""],[1052,1,""],[1053,1,""],[1054,1,""],[1055,1,""],[1056,1,""],[1057,1,""],[1058,1,""],[1059,1,""],[1060,1,""],[1061,1,""],[1062,1,""],[1063,1,""],[1064,1,""],[1065,1,""],[1066,1,""],[1067,1,""],[1068,1,""],[1069,1,""],[1070,1,""],[1071,1,""],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,""],[1121,2],[1122,1,""],[1123,2],[1124,1,""],[1125,2],[1126,1,""],[1127,2],[1128,1,""],[1129,2],[1130,1,""],[1131,2],[1132,1,""],[1133,2],[1134,1,""],[1135,2],[1136,1,""],[1137,2],[1138,1,""],[1139,2],[1140,1,""],[1141,2],[1142,1,""],[1143,2],[1144,1,""],[1145,2],[1146,1,""],[1147,2],[1148,1,""],[1149,2],[1150,1,""],[1151,2],[1152,1,""],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,""],[1163,2],[1164,1,""],[1165,2],[1166,1,""],[1167,2],[1168,1,""],[1169,2],[1170,1,""],[1171,2],[1172,1,""],[1173,2],[1174,1,""],[1175,2],[1176,1,""],[1177,2],[1178,1,""],[1179,2],[1180,1,""],[1181,2],[1182,1,""],[1183,2],[1184,1,""],[1185,2],[1186,1,""],[1187,2],[1188,1,""],[1189,2],[1190,1,""],[1191,2],[1192,1,""],[1193,2],[1194,1,""],[1195,2],[1196,1,""],[1197,2],[1198,1,""],[1199,2],[1200,1,""],[1201,2],[1202,1,""],[1203,2],[1204,1,""],[1205,2],[1206,1,""],[1207,2],[1208,1,""],[1209,2],[1210,1,""],[1211,2],[1212,1,""],[1213,2],[1214,1,""],[1215,2],[1216,1,""],[1217,1,""],[1218,2],[1219,1,""],[1220,2],[1221,1,""],[1222,2],[1223,1,""],[1224,2],[1225,1,""],[1226,2],[1227,1,""],[1228,2],[1229,1,""],[1230,2],[1231,2],[1232,1,""],[1233,2],[1234,1,""],[1235,2],[1236,1,""],[1237,2],[1238,1,""],[1239,2],[1240,1,""],[1241,2],[1242,1,""],[1243,2],[1244,1,""],[1245,2],[1246,1,""],[1247,2],[1248,1,""],[1249,2],[1250,1,""],[1251,2],[1252,1,""],[1253,2],[1254,1,""],[1255,2],[1256,1,""],[1257,2],[1258,1,""],[1259,2],[1260,1,""],[1261,2],[1262,1,""],[1263,2],[1264,1,""],[1265,2],[1266,1,""],[1267,2],[1268,1,""],[1269,2],[1270,1,""],[1271,2],[1272,1,""],[1273,2],[1274,1,""],[1275,2],[1276,1,""],[1277,2],[1278,1,""],[1279,2],[1280,1,""],[1281,2],[1282,1,""],[1283,2],[1284,1,""],[1285,2],[1286,1,""],[1287,2],[1288,1,""],[1289,2],[1290,1,""],[1291,2],[1292,1,""],[1293,2],[1294,1,""],[1295,2],[1296,1,""],[1297,2],[1298,1,""],[1299,2],[1300,1,""],[1301,2],[1302,1,""],[1303,2],[1304,1,""],[1305,2],[1306,1,""],[1307,2],[1308,1,""],[1309,2],[1310,1,""],[1311,2],[1312,1,""],[1313,2],[1314,1,""],[1315,2],[1316,1,""],[1317,2],[1318,1,""],[1319,2],[1320,1,""],[1321,2],[1322,1,""],[1323,2],[1324,1,""],[1325,2],[1326,1,""],[1327,2],[1328,3],[1329,1,""],[1330,1,""],[1331,1,""],[1332,1,""],[1333,1,""],[1334,1,""],[1335,1,""],[1336,1,""],[1337,1,""],[1338,1,""],[1339,1,""],[1340,1,""],[1341,1,""],[1342,1,""],[1343,1,""],[1344,1,""],[1345,1,""],[1346,1,""],[1347,1,""],[1348,1,""],[1349,1,""],[1350,1,""],[1351,1,""],[1352,1,""],[1353,1,""],[1354,1,""],[1355,1,""],[1356,1,""],[1357,1,""],[1358,1,""],[1359,1,""],[1360,1,""],[1361,1,""],[1362,1,""],[1363,1,""],[1364,1,""],[1365,1,""],[1366,1,""],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,""],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,""],[1654,1,""],[1655,1,""],[1656,1,""],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,""],[2393,1,""],[2394,1,""],[2395,1,""],[2396,1,""],[2397,1,""],[2398,1,""],[2399,1,""],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,""],[2525,1,""],[2526,3],[2527,1,""],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,""],[2612,3],[2613,2],[2614,1,""],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,""],[2650,1,""],[2651,1,""],[2652,2],[2653,3],[2654,1,""],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,""],[2909,1,""],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,""],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,""],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,""],[3805,1,""],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,""],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,""],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,""],[[3918,3921],2],[3922,1,""],[[3923,3926],2],[3927,1,""],[[3928,3931],2],[3932,1,""],[[3933,3944],2],[3945,1,""],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,""],[3956,2],[3957,1,""],[3958,1,""],[3959,1,""],[3960,1,""],[3961,1,""],[[3962,3968],2],[3969,1,""],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,""],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,""],[[3998,4001],2],[4002,1,""],[[4003,4006],2],[4007,1,""],[[4008,4011],2],[4012,1,""],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,""],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,""],[4257,1,""],[4258,1,""],[4259,1,""],[4260,1,""],[4261,1,""],[4262,1,""],[4263,1,""],[4264,1,""],[4265,1,""],[4266,1,""],[4267,1,""],[4268,1,""],[4269,1,""],[4270,1,""],[4271,1,""],[4272,1,""],[4273,1,""],[4274,1,""],[4275,1,""],[4276,1,""],[4277,1,""],[4278,1,""],[4279,1,""],[4280,1,""],[4281,1,""],[4282,1,""],[4283,1,""],[4284,1,""],[4285,1,""],[4286,1,""],[4287,1,""],[4288,1,""],[4289,1,""],[4290,1,""],[4291,1,""],[4292,1,""],[4293,1,""],[4294,3],[4295,1,""],[[4296,4300],3],[4301,1,""],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,""],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,""],[5113,1,""],[5114,1,""],[5115,1,""],[5116,1,""],[5117,1,""],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,""],[7297,1,""],[7298,1,""],[7299,1,""],[[7300,7301],1,""],[7302,1,""],[7303,1,""],[7304,1,""],[7305,1,""],[7306,2],[[7307,7311],3],[7312,1,""],[7313,1,""],[7314,1,""],[7315,1,""],[7316,1,""],[7317,1,""],[7318,1,""],[7319,1,""],[7320,1,""],[7321,1,""],[7322,1,""],[7323,1,""],[7324,1,""],[7325,1,""],[7326,1,""],[7327,1,""],[7328,1,""],[7329,1,""],[7330,1,""],[7331,1,""],[7332,1,""],[7333,1,""],[7334,1,""],[7335,1,""],[7336,1,""],[7337,1,""],[7338,1,""],[7339,1,""],[7340,1,""],[7341,1,""],[7342,1,""],[7343,1,""],[7344,1,""],[7345,1,""],[7346,1,""],[7347,1,""],[7348,1,""],[7349,1,""],[7350,1,""],[7351,1,""],[7352,1,""],[7353,1,""],[7354,1,""],[[7355,7356],3],[7357,1,""],[7358,1,""],[7359,1,""],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,""],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,""],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,""],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,""],[7493,1,""],[7494,1,""],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,""],[7499,1,""],[7500,1,""],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,""],[7506,1,"o"],[7507,1,""],[7508,1,""],[7509,1,""],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,""],[7514,1,""],[7515,1,"v"],[7516,1,""],[7517,1,""],[7518,1,""],[7519,1,""],[7520,1,""],[7521,1,""],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,""],[7527,1,""],[7528,1,""],[7529,1,""],[7530,1,""],[7531,2],[[7532,7543],2],[7544,1,""],[[7545,7578],2],[7579,1,""],[7580,1,"c"],[7581,1,""],[7582,1,""],[7583,1,""],[7584,1,"f"],[7585,1,""],[7586,1,""],[7587,1,""],[7588,1,""],[7589,1,""],[7590,1,""],[7591,1,""],[7592,1,""],[7593,1,""],[7594,1,""],[7595,1,""],[7596,1,""],[7597,1,""],[7598,1,""],[7599,1,""],[7600,1,""],[7601,1,""],[7602,1,""],[7603,1,""],[7604,1,""],[7605,1,""],[7606,1,""],[7607,1,""],[7608,1,""],[7609,1,""],[7610,1,""],[7611,1,"z"],[7612,1,""],[7613,1,""],[7614,1,""],[7615,1,""],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,""],[7681,2],[7682,1,""],[7683,2],[7684,1,""],[7685,2],[7686,1,""],[7687,2],[7688,1,""],[7689,2],[7690,1,""],[7691,2],[7692,1,""],[7693,2],[7694,1,""],[7695,2],[7696,1,""],[7697,2],[7698,1,""],[7699,2],[7700,1,""],[7701,2],[7702,1,""],[7703,2],[7704,1,""],[7705,2],[7706,1,""],[7707,2],[7708,1,""],[7709,2],[7710,1,""],[7711,2],[7712,1,""],[7713,2],[7714,1,""],[7715,2],[7716,1,""],[7717,2],[7718,1,""],[7719,2],[7720,1,""],[7721,2],[7722,1,""],[7723,2],[7724,1,""],[7725,2],[7726,1,""],[7727,2],[7728,1,""],[7729,2],[7730,1,""],[7731,2],[7732,1,""],[7733,2],[7734,1,""],[7735,2],[7736,1,""],[7737,2],[7738,1,""],[7739,2],[7740,1,""],[7741,2],[7742,1,""],[7743,2],[7744,1,""],[7745,2],[7746,1,""],[7747,2],[7748,1,""],[7749,2],[7750,1,""],[7751,2],[7752,1,""],[7753,2],[7754,1,""],[7755,2],[7756,1,""],[7757,2],[7758,1,""],[7759,2],[7760,1,""],[7761,2],[7762,1,""],[7763,2],[7764,1,""],[7765,2],[7766,1,""],[7767,2],[7768,1,""],[7769,2],[7770,1,""],[7771,2],[7772,1,""],[7773,2],[7774,1,""],[7775,2],[7776,1,""],[7777,2],[7778,1,""],[7779,2],[7780,1,""],[7781,2],[7782,1,""],[7783,2],[7784,1,""],[7785,2],[7786,1,""],[7787,2],[7788,1,""],[7789,2],[7790,1,""],[7791,2],[7792,1,""],[7793,2],[7794,1,""],[7795,2],[7796,1,""],[7797,2],[7798,1,""],[7799,2],[7800,1,""],[7801,2],[7802,1,""],[7803,2],[7804,1,""],[7805,2],[7806,1,""],[7807,2],[7808,1,""],[7809,2],[7810,1,""],[7811,2],[7812,1,""],[7813,2],[7814,1,""],[7815,2],[7816,1,""],[7817,2],[7818,1,""],[7819,2],[7820,1,""],[7821,2],[7822,1,""],[7823,2],[7824,1,""],[7825,2],[7826,1,""],[7827,2],[7828,1,""],[[7829,7833],2],[7834,1,"a"],[7835,1,""],[[7836,7837],2],[7838,1,""],[7839,2],[7840,1,""],[7841,2],[7842,1,""],[7843,2],[7844,1,""],[7845,2],[7846,1,""],[7847,2],[7848,1,""],[7849,2],[7850,1,""],[7851,2],[7852,1,""],[7853,2],[7854,1,""],[7855,2],[7856,1,""],[7857,2],[7858,1,""],[7859,2],[7860,1,""],[7861,2],[7862,1,""],[7863,2],[7864,1,""],[7865,2],[7866,1,""],[7867,2],[7868,1,""],[7869,2],[7870,1,""],[7871,2],[7872,1,""],[7873,2],[7874,1,""],[7875,2],[7876,1,""],[7877,2],[7878,1,""],[7879,2],[7880,1,""],[7881,2],[7882,1,""],[7883,2],[7884,1,""],[7885,2],[7886,1,""],[7887,2],[7888,1,""],[7889,2],[7890,1,""],[7891,2],[7892,1,""],[7893,2],[7894,1,""],[7895,2],[7896,1,""],[7897,2],[7898,1,""],[7899,2],[7900,1,""],[7901,2],[7902,1,""],[7903,2],[7904,1,""],[7905,2],[7906,1,""],[7907,2],[7908,1,""],[7909,2],[7910,1,""],[7911,2],[7912,1,""],[7913,2],[7914,1,""],[7915,2],[7916,1,""],[7917,2],[7918,1,""],[7919,2],[7920,1,""],[7921,2],[7922,1,""],[7923,2],[7924,1,""],[7925,2],[7926,1,""],[7927,2],[7928,1,""],[7929,2],[7930,1,""],[7931,2],[7932,1,""],[7933,2],[7934,1,""],[7935,2],[[7936,7943],2],[7944,1,""],[7945,1,""],[7946,1,""],[7947,1,""],[7948,1,""],[7949,1,""],[7950,1,""],[7951,1,""],[[7952,7957],2],[[7958,7959],3],[7960,1,""],[7961,1,""],[7962,1,""],[7963,1,""],[7964,1,""],[7965,1,""],[[7966,7967],3],[[7968,7975],2],[7976,1,""],[7977,1,""],[7978,1,""],[7979,1,""],[7980,1,""],[7981,1,""],[7982,1,""],[7983,1,""],[[7984,7991],2],[7992,1,""],[7993,1,""],[7994,1,""],[7995,1,""],[7996,1,""],[7997,1,""],[7998,1,""],[7999,1,""],[[8000,8005],2],[[8006,8007],3],[8008,1,""],[8009,1,""],[8010,1,""],[8011,1,""],[8012,1,""],[8013,1,""],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,""],[8026,3],[8027,1,""],[8028,3],[8029,1,""],[8030,3],[8031,1,""],[[8032,8039],2],[8040,1,""],[8041,1,""],[8042,1,""],[8043,1,""],[8044,1,""],[8045,1,""],[8046,1,""],[8047,1,""],[8048,2],[8049,1,""],[8050,2],[8051,1,""],[8052,2],[8053,1,""],[8054,2],[8055,1,""],[8056,2],[8057,1,""],[8058,2],[8059,1,""],[8060,2],[8061,1,""],[[8062,8063],3],[8064,1,""],[8065,1,""],[8066,1,""],[8067,1,""],[8068,1,""],[8069,1,""],[8070,1,""],[8071,1,""],[8072,1,""],[8073,1,""],[8074,1,""],[8075,1,""],[8076,1,""],[8077,1,""],[8078,1,""],[8079,1,""],[8080,1,""],[8081,1,""],[8082,1,""],[8083,1,""],[8084,1,""],[8085,1,""],[8086,1,""],[8087,1,""],[8088,1,""],[8089,1,""],[8090,1,""],[8091,1,""],[8092,1,""],[8093,1,""],[8094,1,""],[8095,1,""],[8096,1,""],[8097,1,""],[8098,1,""],[8099,1,""],[8100,1,""],[8101,1,""],[8102,1,""],[8103,1,""],[8104,1,""],[8105,1,""],[8106,1,""],[8107,1,""],[8108,1,""],[8109,1,""],[8110,1,""],[8111,1,""],[[8112,8113],2],[8114,1,""],[8115,1,""],[8116,1,""],[8117,3],[8118,2],[8119,1,""],[8120,1,""],[8121,1,""],[8122,1,""],[8123,1,""],[8124,1,""],[8125,1," "],[8126,1,""],[8127,1," "],[8128,1," "],[8129,1," "],[8130,1,""],[8131,1,""],[8132,1,""],[8133,3],[8134,2],[8135,1,""],[8136,1,""],[8137,1,""],[8138,1,""],[8139,1,""],[8140,1,""],[8141,1," "],[8142,1," "],[8143,1," "],[[8144,8146],2],[8147,1,""],[[8148,8149],3],[[8150,8151],2],[8152,1,""],[8153,1,""],[8154,1,""],[8155,1,""],[8156,3],[8157,1," "],[8158,1," "],[8159,1," "],[[8160,8162],2],[8163,1,""],[[8164,8167],2],[8168,1,""],[8169,1,""],[8170,1,""],[8171,1,""],[8172,1,""],[8173,1," "],[8174,1," "],[8175,1,"`"],[[8176,8177],3],[8178,1,""],[8179,1,""],[8180,1,""],[8181,3],[8182,2],[8183,1,""],[8184,1,""],[8185,1,""],[8186,1,""],[8187,1,""],[8188,1,""],[8189,1," "],[8190,1," "],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,""],[[8210,8214],2],[8215,1," "],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,""],[8244,1,""],[8245,2],[8246,1,""],[8247,1,""],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," "],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,""],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,""],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,""],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,""],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,""],[8456,2],[8457,1,"f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,""],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,""],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,""],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,""],[8499,1,"m"],[8500,1,"o"],[8501,1,""],[8502,1,""],[8503,1,""],[8504,1,""],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,""],[[8509,8510],1,""],[8511,1,""],[8512,1,""],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"17"],[8529,1,"19"],[8530,1,"110"],[8531,1,"13"],[8532,1,"23"],[8533,1,"15"],[8534,1,"25"],[8535,1,"35"],[8536,1,"45"],[8537,1,"16"],[8538,1,"56"],[8539,1,"18"],[8540,1,"38"],[8541,1,"58"],[8542,1,"78"],[8543,1,"1"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,""],[8580,2],[[8581,8584],2],[8585,1,"03"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,""],[8749,1,""],[8750,2],[8751,1,""],[8752,1,""],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,""],[9002,1,""],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,""],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,""],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,""],[11265,1,""],[11266,1,""],[11267,1,""],[11268,1,""],[11269,1,""],[11270,1,""],[11271,1,""],[11272,1,""],[11273,1,""],[11274,1,""],[11275,1,""],[11276,1,""],[11277,1,""],[11278,1,""],[11279,1,""],[11280,1,""],[11281,1,""],[11282,1,""],[11283,1,""],[11284,1,""],[11285,1,""],[11286,1,""],[11287,1,""],[11288,1,""],[11289,1,""],[11290,1,""],[11291,1,""],[11292,1,""],[11293,1,""],[11294,1,""],[11295,1,""],[11296,1,""],[11297,1,""],[11298,1,""],[11299,1,""],[11300,1,""],[11301,1,""],[11302,1,""],[11303,1,""],[11304,1,""],[11305,1,""],[11306,1,""],[11307,1,""],[11308,1,""],[11309,1,""],[11310,1,""],[11311,1,""],[[11312,11358],2],[11359,2],[11360,1,""],[11361,2],[11362,1,""],[11363,1,""],[11364,1,""],[[11365,11366],2],[11367,1,""],[11368,2],[11369,1,""],[11370,2],[11371,1,""],[11372,2],[11373,1,""],[11374,1,""],[11375,1,""],[11376,1,""],[11377,2],[11378,1,""],[11379,2],[11380,2],[11381,1,""],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,""],[11391,1,""],[11392,1,""],[11393,2],[11394,1,""],[11395,2],[11396,1,""],[11397,2],[11398,1,""],[11399,2],[11400,1,""],[11401,2],[11402,1,""],[11403,2],[11404,1,""],[11405,2],[11406,1,""],[11407,2],[11408,1,""],[11409,2],[11410,1,""],[11411,2],[11412,1,""],[11413,2],[11414,1,""],[11415,2],[11416,1,""],[11417,2],[11418,1,""],[11419,2],[11420,1,""],[11421,2],[11422,1,""],[11423,2],[11424,1,""],[11425,2],[11426,1,""],[11427,2],[11428,1,""],[11429,2],[11430,1,""],[11431,2],[11432,1,""],[11433,2],[11434,1,""],[11435,2],[11436,1,""],[11437,2],[11438,1,""],[11439,2],[11440,1,""],[11441,2],[11442,1,""],[11443,2],[11444,1,""],[11445,2],[11446,1,""],[11447,2],[11448,1,""],[11449,2],[11450,1,""],[11451,2],[11452,1,""],[11453,2],[11454,1,""],[11455,2],[11456,1,""],[11457,2],[11458,1,""],[11459,2],[11460,1,""],[11461,2],[11462,1,""],[11463,2],[11464,1,""],[11465,2],[11466,1,""],[11467,2],[11468,1,""],[11469,2],[11470,1,""],[11471,2],[11472,1,""],[11473,2],[11474,1,""],[11475,2],[11476,1,""],[11477,2],[11478,1,""],[11479,2],[11480,1,""],[11481,2],[11482,1,""],[11483,2],[11484,1,""],[11485,2],[11486,1,""],[11487,2],[11488,1,""],[11489,2],[11490,1,""],[[11491,11492],2],[[11493,11498],2],[11499,1,""],[11500,2],[11501,1,""],[[11502,11505],2],[11506,1,""],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,""],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,""],[[11936,12018],2],[12019,1,""],[[12020,12031],3],[12032,1,""],[12033,1,""],[12034,1,""],[12035,1,""],[12036,1,""],[12037,1,""],[12038,1,""],[12039,1,""],[12040,1,""],[12041,1,""],[12042,1,""],[12043,1,""],[12044,1,""],[12045,1,""],[12046,1,""],[12047,1,""],[12048,1,""],[12049,1,""],[12050,1,""],[12051,1,""],[12052,1,""],[12053,1,""],[12054,1,""],[12055,1,""],[12056,1,""],[12057,1,""],[12058,1,""],[12059,1,""],[12060,1,""],[12061,1,""],[12062,1,""],[12063,1,""],[12064,1,""],[12065,1,""],[12066,1,""],[12067,1,""],[12068,1,""],[12069,1,""],[12070,1,""],[12071,1,""],[12072,1,""],[12073,1,""],[12074,1,""],[12075,1,""],[12076,1,""],[12077,1,""],[12078,1,""],[12079,1,""],[12080,1,""],[12081,1,""],[12082,1,""],[12083,1,""],[12084,1,""],[12085,1,""],[12086,1,""],[12087,1,""],[12088,1,""],[12089,1,""],[12090,1,""],[12091,1,""],[12092,1,""],[12093,1,""],[12094,1,""],[12095,1,""],[12096,1,""],[12097,1,""],[12098,1,""],[12099,1,""],[12100,1,""],[12101,1,""],[12102,1,""],[12103,1,""],[12104,1,""],[12105,1,""],[12106,1,""],[12107,1,""],[12108,1,""],[12109,1,""],[12110,1,""],[12111,1,""],[12112,1,""],[12113,1,""],[12114,1,""],[12115,1,""],[12116,1,""],[12117,1,""],[12118,1,""],[12119,1,""],[12120,1,""],[12121,1,""],[12122,1,""],[12123,1,""],[12124,1,""],[12125,1,""],[12126,1,""],[12127,1,""],[12128,1,""],[12129,1,""],[12130,1,""],[12131,1,""],[12132,1,""],[12133,1,""],[12134,1,""],[12135,1,""],[12136,1,""],[12137,1,""],[12138,1,""],[12139,1,""],[12140,1,""],[12141,1,""],[12142,1,""],[12143,1,""],[12144,1,""],[12145,1,""],[12146,1,""],[12147,1,""],[12148,1,""],[12149,1,""],[12150,1,""],[12151,1,""],[12152,1,""],[12153,1,""],[12154,1,""],[12155,1,""],[12156,1,""],[12157,1,""],[12158,1,""],[12159,1,""],[12160,1,""],[12161,1,""],[12162,1,""],[12163,1,""],[12164,1,""],[12165,1,""],[12166,1,""],[12167,1,""],[12168,1,""],[12169,1,""],[12170,1,""],[12171,1,""],[12172,1,""],[12173,1,""],[12174,1,""],[12175,1,""],[12176,1,""],[12177,1,""],[12178,1,""],[12179,1,""],[12180,1,""],[12181,1,""],[12182,1,""],[12183,1,""],[12184,1,""],[12185,1,""],[12186,1,""],[12187,1,""],[12188,1,""],[12189,1,""],[12190,1,""],[12191,1,""],[12192,1,""],[12193,1,""],[12194,1,""],[12195,1,""],[12196,1,""],[12197,1,""],[12198,1,""],[12199,1,""],[12200,1,""],[12201,1,""],[12202,1,""],[12203,1,""],[12204,1,""],[12205,1,""],[12206,1,""],[12207,1,""],[12208,1,""],[12209,1,""],[12210,1,""],[12211,1,""],[12212,1,""],[12213,1,""],[12214,1,""],[12215,1,""],[12216,1,""],[12217,1,""],[12218,1,""],[12219,1,""],[12220,1,""],[12221,1,""],[12222,1,""],[12223,1,""],[12224,1,""],[12225,1,""],[12226,1,""],[12227,1,""],[12228,1,""],[12229,1,""],[12230,1,""],[12231,1,""],[12232,1,""],[12233,1,""],[12234,1,""],[12235,1,""],[12236,1,""],[12237,1,""],[12238,1,""],[12239,1,""],[12240,1,""],[12241,1,""],[12242,1,""],[12243,1,""],[12244,1,""],[12245,1,""],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,""],[12343,2],[12344,1,""],[12345,1,""],[12346,1,""],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," "],[12444,1," "],[[12445,12446],2],[12447,1,""],[12448,2],[[12449,12542],2],[12543,1,""],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,""],[12594,1,""],[12595,1,""],[12596,1,""],[12597,1,""],[12598,1,""],[12599,1,""],[12600,1,""],[12601,1,""],[12602,1,""],[12603,1,""],[12604,1,""],[12605,1,""],[12606,1,""],[12607,1,""],[12608,1,""],[12609,1,""],[12610,1,""],[12611,1,""],[12612,1,""],[12613,1,""],[12614,1,""],[12615,1,""],[12616,1,""],[12617,1,""],[12618,1,""],[12619,1,""],[12620,1,""],[12621,1,""],[12622,1,""],[12623,1,""],[12624,1,""],[12625,1,""],[12626,1,""],[12627,1,""],[12628,1,""],[12629,1,""],[12630,1,""],[12631,1,""],[12632,1,""],[12633,1,""],[12634,1,""],[12635,1,""],[12636,1,""],[12637,1,""],[12638,1,""],[12639,1,""],[12640,1,""],[12641,1,""],[12642,1,""],[12643,1,""],[12644,7],[12645,1,""],[12646,1,""],[12647,1,""],[12648,1,""],[12649,1,""],[12650,1,""],[12651,1,""],[12652,1,""],[12653,1,""],[12654,1,""],[12655,1,""],[12656,1,""],[12657,1,""],[12658,1,""],[12659,1,""],[12660,1,""],[12661,1,""],[12662,1,""],[12663,1,""],[12664,1,""],[12665,1,""],[12666,1,""],[12667,1,""],[12668,1,""],[12669,1,""],[12670,1,""],[12671,1,""],[12672,1,""],[12673,1,""],[12674,1,""],[12675,1,""],[12676,1,""],[12677,1,""],[12678,1,""],[12679,1,""],[12680,1,""],[12681,1,""],[12682,1,""],[12683,1,""],[12684,1,""],[12685,1,""],[12686,1,""],[12687,3],[[12688,12689],2],[12690,1,""],[12691,1,""],[12692,1,""],[12693,1,""],[12694,1,""],[12695,1,""],[12696,1,""],[12697,1,""],[12698,1,""],[12699,1,""],[12700,1,""],[12701,1,""],[12702,1,""],[12703,1,""],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"()"],[12801,1,"()"],[12802,1,"()"],[12803,1,"()"],[12804,1,"()"],[12805,1,"()"],[12806,1,"()"],[12807,1,"()"],[12808,1,"()"],[12809,1,"()"],[12810,1,"()"],[12811,1,"()"],[12812,1,"()"],[12813,1,"()"],[12814,1,"()"],[12815,1,"()"],[12816,1,"()"],[12817,1,"()"],[12818,1,"()"],[12819,1,"()"],[12820,1,"()"],[12821,1,"()"],[12822,1,"()"],[12823,1,"()"],[12824,1,"()"],[12825,1,"()"],[12826,1,"()"],[12827,1,"()"],[12828,1,"()"],[12829,1,"()"],[12830,1,"()"],[12831,3],[12832,1,"()"],[12833,1,"()"],[12834,1,"()"],[12835,1,"()"],[12836,1,"()"],[12837,1,"()"],[12838,1,"()"],[12839,1,"()"],[12840,1,"()"],[12841,1,"()"],[12842,1,"()"],[12843,1,"()"],[12844,1,"()"],[12845,1,"()"],[12846,1,"()"],[12847,1,"()"],[12848,1,"()"],[12849,1,"()"],[12850,1,"()"],[12851,1,"()"],[12852,1,"()"],[12853,1,"()"],[12854,1,"()"],[12855,1,"()"],[12856,1,"()"],[12857,1,"()"],[12858,1,"()"],[12859,1,"()"],[12860,1,"()"],[12861,1,"()"],[12862,1,"()"],[12863,1,"()"],[12864,1,"()"],[12865,1,"()"],[12866,1,"()"],[12867,1,"()"],[12868,1,""],[12869,1,""],[12870,1,""],[12871,1,""],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,""],[12897,1,""],[12898,1,""],[12899,1,""],[12900,1,""],[12901,1,""],[12902,1,""],[12903,1,""],[12904,1,""],[12905,1,""],[12906,1,""],[12907,1,""],[12908,1,""],[12909,1,""],[12910,1,""],[12911,1,""],[12912,1,""],[12913,1,""],[12914,1,""],[12915,1,""],[12916,1,""],[12917,1,""],[12918,1,""],[12919,1,""],[12920,1,""],[12921,1,""],[12922,1,""],[12923,1,""],[12924,1,""],[12925,1,""],[12926,1,""],[12927,2],[12928,1,""],[12929,1,""],[12930,1,""],[12931,1,""],[12932,1,""],[12933,1,""],[12934,1,""],[12935,1,""],[12936,1,""],[12937,1,""],[12938,1,""],[12939,1,""],[12940,1,""],[12941,1,""],[12942,1,""],[12943,1,""],[12944,1,""],[12945,1,""],[12946,1,""],[12947,1,""],[12948,1,""],[12949,1,""],[12950,1,""],[12951,1,""],[12952,1,""],[12953,1,""],[12954,1,""],[12955,1,""],[12956,1,""],[12957,1,""],[12958,1,""],[12959,1,""],[12960,1,""],[12961,1,""],[12962,1,""],[12963,1,""],[12964,1,""],[12965,1,""],[12966,1,""],[12967,1,""],[12968,1,""],[12969,1,""],[12970,1,""],[12971,1,""],[12972,1,""],[12973,1,""],[12974,1,""],[12975,1,""],[12976,1,""],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1"],[12993,1,"2"],[12994,1,"3"],[12995,1,"4"],[12996,1,"5"],[12997,1,"6"],[12998,1,"7"],[12999,1,"8"],[13000,1,"9"],[13001,1,"10"],[13002,1,"11"],[13003,1,"12"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,""],[13009,1,""],[13010,1,""],[13011,1,""],[13012,1,""],[13013,1,""],[13014,1,""],[13015,1,""],[13016,1,""],[13017,1,""],[13018,1,""],[13019,1,""],[13020,1,""],[13021,1,""],[13022,1,""],[13023,1,""],[13024,1,""],[13025,1,""],[13026,1,""],[13027,1,""],[13028,1,""],[13029,1,""],[13030,1,""],[13031,1,""],[13032,1,""],[13033,1,""],[13034,1,""],[13035,1,""],[13036,1,""],[13037,1,""],[13038,1,""],[13039,1,""],[13040,1,""],[13041,1,""],[13042,1,""],[13043,1,""],[13044,1,""],[13045,1,""],[13046,1,""],[13047,1,""],[13048,1,""],[13049,1,""],[13050,1,""],[13051,1,""],[13052,1,""],[13053,1,""],[13054,1,""],[13055,1,""],[13056,1,""],[13057,1,""],[13058,1,""],[13059,1,""],[13060,1,""],[13061,1,""],[13062,1,""],[13063,1,""],[13064,1,""],[13065,1,""],[13066,1,""],[13067,1,""],[13068,1,""],[13069,1,""],[13070,1,""],[13071,1,""],[13072,1,""],[13073,1,""],[13074,1,""],[13075,1,""],[13076,1,""],[13077,1,""],[13078,1,""],[13079,1,""],[13080,1,""],[13081,1,""],[13082,1,""],[13083,1,""],[13084,1,""],[13085,1,""],[13086,1,""],[13087,1,""],[13088,1,""],[13089,1,""],[13090,1,""],[13091,1,""],[13092,1,""],[13093,1,""],[13094,1,""],[13095,1,""],[13096,1,""],[13097,1,""],[13098,1,""],[13099,1,""],[13100,1,""],[13101,1,""],[13102,1,""],[13103,1,""],[13104,1,""],[13105,1,""],[13106,1,""],[13107,1,""],[13108,1,""],[13109,1,""],[13110,1,""],[13111,1,""],[13112,1,""],[13113,1,""],[13114,1,""],[13115,1,""],[13116,1,""],[13117,1,""],[13118,1,""],[13119,1,""],[13120,1,""],[13121,1,""],[13122,1,""],[13123,1,""],[13124,1,""],[13125,1,""],[13126,1,""],[13127,1,""],[13128,1,""],[13129,1,""],[13130,1,""],[13131,1,""],[13132,1,""],[13133,1,""],[13134,1,""],[13135,1,""],[13136,1,""],[13137,1,""],[13138,1,""],[13139,1,""],[13140,1,""],[13141,1,""],[13142,1,""],[13143,1,""],[13144,1,"0"],[13145,1,"1"],[13146,1,"2"],[13147,1,"3"],[13148,1,"4"],[13149,1,"5"],[13150,1,"6"],[13151,1,"7"],[13152,1,"8"],[13153,1,"9"],[13154,1,"10"],[13155,1,"11"],[13156,1,"12"],[13157,1,"13"],[13158,1,"14"],[13159,1,"15"],[13160,1,"16"],[13161,1,"17"],[13162,1,"18"],[13163,1,"19"],[13164,1,"20"],[13165,1,"21"],[13166,1,"22"],[13167,1,"23"],[13168,1,"24"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,""],[13180,1,""],[13181,1,""],[13182,1,""],[13183,1,""],[13184,1,"pa"],[13185,1,"na"],[13186,1,"a"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"f"],[13197,1,"g"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"l"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"m"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"ms"],[13224,1,"ms2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rads"],[13231,1,"rads2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"s"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"v"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"w"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k"],[13249,1,"m"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"ckg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"vm"],[13279,1,"am"],[13280,1,"1"],[13281,1,"2"],[13282,1,"3"],[13283,1,"4"],[13284,1,"5"],[13285,1,"6"],[13286,1,"7"],[13287,1,"8"],[13288,1,"9"],[13289,1,"10"],[13290,1,"11"],[13291,1,"12"],[13292,1,"13"],[13293,1,"14"],[13294,1,"15"],[13295,1,"16"],[13296,1,"17"],[13297,1,"18"],[13298,1,"19"],[13299,1,"20"],[13300,1,"21"],[13301,1,"22"],[13302,1,"23"],[13303,1,"24"],[13304,1,"25"],[13305,1,"26"],[13306,1,"27"],[13307,1,"28"],[13308,1,"29"],[13309,1,"30"],[13310,1,"31"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,""],[42561,2],[42562,1,""],[42563,2],[42564,1,""],[42565,2],[42566,1,""],[42567,2],[42568,1,""],[42569,2],[42570,1,""],[42571,2],[42572,1,""],[42573,2],[42574,1,""],[42575,2],[42576,1,""],[42577,2],[42578,1,""],[42579,2],[42580,1,""],[42581,2],[42582,1,""],[42583,2],[42584,1,""],[42585,2],[42586,1,""],[42587,2],[42588,1,""],[42589,2],[42590,1,""],[42591,2],[42592,1,""],[42593,2],[42594,1,""],[42595,2],[42596,1,""],[42597,2],[42598,1,""],[42599,2],[42600,1,""],[42601,2],[42602,1,""],[42603,2],[42604,1,""],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,""],[42625,2],[42626,1,""],[42627,2],[42628,1,""],[42629,2],[42630,1,""],[42631,2],[42632,1,""],[42633,2],[42634,1,""],[42635,2],[42636,1,""],[42637,2],[42638,1,""],[42639,2],[42640,1,""],[42641,2],[42642,1,""],[42643,2],[42644,1,""],[42645,2],[42646,1,""],[42647,2],[42648,1,""],[42649,2],[42650,1,""],[42651,2],[42652,1,""],[42653,1,""],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,""],[42787,2],[42788,1,""],[42789,2],[42790,1,""],[42791,2],[42792,1,""],[42793,2],[42794,1,""],[42795,2],[42796,1,""],[42797,2],[42798,1,""],[[42799,42801],2],[42802,1,""],[42803,2],[42804,1,""],[42805,2],[42806,1,""],[42807,2],[42808,1,""],[42809,2],[42810,1,""],[42811,2],[42812,1,""],[42813,2],[42814,1,""],[42815,2],[42816,1,""],[42817,2],[42818,1,""],[42819,2],[42820,1,""],[42821,2],[42822,1,""],[42823,2],[42824,1,""],[42825,2],[42826,1,""],[42827,2],[42828,1,""],[42829,2],[42830,1,""],[42831,2],[42832,1,""],[42833,2],[42834,1,""],[42835,2],[42836,1,""],[42837,2],[42838,1,""],[42839,2],[42840,1,""],[42841,2],[42842,1,""],[42843,2],[42844,1,""],[42845,2],[42846,1,""],[42847,2],[42848,1,""],[42849,2],[42850,1,""],[42851,2],[42852,1,""],[42853,2],[42854,1,""],[42855,2],[42856,1,""],[42857,2],[42858,1,""],[42859,2],[42860,1,""],[42861,2],[42862,1,""],[42863,2],[42864,1,""],[[42865,42872],2],[42873,1,""],[42874,2],[42875,1,""],[42876,2],[42877,1,""],[42878,1,""],[42879,2],[42880,1,""],[42881,2],[42882,1,""],[42883,2],[42884,1,""],[42885,2],[42886,1,""],[[42887,42888],2],[[42889,42890],2],[42891,1,""],[42892,2],[42893,1,""],[42894,2],[42895,2],[42896,1,""],[42897,2],[42898,1,""],[42899,2],[[42900,42901],2],[42902,1,""],[42903,2],[42904,1,""],[42905,2],[42906,1,""],[42907,2],[42908,1,""],[42909,2],[42910,1,""],[42911,2],[42912,1,""],[42913,2],[42914,1,""],[42915,2],[42916,1,""],[42917,2],[42918,1,""],[42919,2],[42920,1,""],[42921,2],[42922,1,""],[42923,1,""],[42924,1,""],[42925,1,""],[42926,1,""],[42927,2],[42928,1,""],[42929,1,""],[42930,1,""],[42931,1,""],[42932,1,""],[42933,2],[42934,1,""],[42935,2],[42936,1,""],[42937,2],[42938,1,""],[42939,2],[42940,1,""],[42941,2],[42942,1,""],[42943,2],[42944,1,""],[42945,2],[42946,1,""],[42947,2],[42948,1,""],[42949,1,""],[42950,1,""],[42951,1,""],[42952,2],[42953,1,""],[42954,2],[42955,1,""],[42956,1,""],[42957,2],[[42958,42959],3],[42960,1,""],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,""],[42967,2],[42968,1,""],[42969,2],[42970,1,""],[42971,2],[42972,1,""],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,""],[42998,2],[42999,2],[43000,1,""],[43001,1,""],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,""],[43869,1,""],[43870,1,""],[43871,1,""],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,""],[[43882,43883],2],[[43884,43887],3],[43888,1,""],[43889,1,""],[43890,1,""],[43891,1,""],[43892,1,""],[43893,1,""],[43894,1,""],[43895,1,""],[43896,1,""],[43897,1,""],[43898,1,""],[43899,1,""],[43900,1,""],[43901,1,""],[43902,1,""],[43903,1,""],[43904,1,""],[43905,1,""],[43906,1,""],[43907,1,""],[43908,1,""],[43909,1,""],[43910,1,""],[43911,1,""],[43912,1,""],[43913,1,""],[43914,1,""],[43915,1,""],[43916,1,""],[43917,1,""],[43918,1,""],[43919,1,""],[43920,1,""],[43921,1,""],[43922,1,""],[43923,1,""],[43924,1,""],[43925,1,""],[43926,1,""],[43927,1,""],[43928,1,""],[43929,1,""],[43930,1,""],[43931,1,""],[43932,1,""],[43933,1,""],[43934,1,""],[43935,1,""],[43936,1,""],[43937,1,""],[43938,1,""],[43939,1,""],[43940,1,""],[43941,1,""],[43942,1,""],[43943,1,""],[43944,1,""],[43945,1,""],[43946,1,""],[43947,1,""],[43948,1,""],[43949,1,""],[43950,1,""],[43951,1,""],[43952,1,""],[43953,1,""],[43954,1,""],[43955,1,""],[43956,1,""],[43957,1,""],[43958,1,""],[43959,1,""],[43960,1,""],[43961,1,""],[43962,1,""],[43963,1,""],[43964,1,""],[43965,1,""],[43966,1,""],[43967,1,""],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,""],[63745,1,""],[63746,1,""],[63747,1,""],[63748,1,""],[63749,1,""],[63750,1,""],[[63751,63752],1,""],[63753,1,""],[63754,1,""],[63755,1,""],[63756,1,""],[63757,1,""],[63758,1,""],[63759,1,""],[63760,1,""],[63761,1,""],[63762,1,""],[63763,1,""],[63764,1,""],[63765,1,""],[63766,1,""],[63767,1,""],[63768,1,""],[63769,1,""],[63770,1,""],[63771,1,""],[63772,1,""],[63773,1,""],[63774,1,""],[63775,1,""],[63776,1,""],[63777,1,""],[63778,1,""],[63779,1,""],[63780,1,""],[63781,1,""],[63782,1,""],[63783,1,""],[63784,1,""],[63785,1,""],[63786,1,""],[63787,1,""],[63788,1,""],[63789,1,""],[63790,1,""],[63791,1,""],[63792,1,""],[63793,1,""],[63794,1,""],[63795,1,""],[63796,1,""],[63797,1,""],[63798,1,""],[63799,1,""],[63800,1,""],[63801,1,""],[63802,1,""],[63803,1,""],[63804,1,""],[63805,1,""],[63806,1,""],[63807,1,""],[63808,1,""],[63809,1,""],[63810,1,""],[63811,1,""],[63812,1,""],[63813,1,""],[63814,1,""],[63815,1,""],[63816,1,""],[63817,1,""],[63818,1,""],[63819,1,""],[63820,1,""],[63821,1,""],[63822,1,""],[63823,1,""],[63824,1,""],[63825,1,""],[63826,1,""],[63827,1,""],[63828,1,""],[63829,1,""],[63830,1,""],[63831,1,""],[63832,1,""],[63833,1,""],[63834,1,""],[63835,1,""],[63836,1,""],[63837,1,""],[63838,1,""],[63839,1,""],[63840,1,""],[63841,1,""],[63842,1,""],[63843,1,""],[63844,1,""],[63845,1,""],[63846,1,""],[63847,1,""],[63848,1,""],[63849,1,""],[63850,1,""],[63851,1,""],[63852,1,""],[63853,1,""],[63854,1,""],[63855,1,""],[63856,1,""],[63857,1,""],[63858,1,""],[63859,1,""],[63860,1,""],[63861,1,""],[63862,1,""],[63863,1,""],[63864,1,""],[63865,1,""],[63866,1,""],[63867,1,""],[63868,1,""],[63869,1,""],[63870,1,""],[63871,1,""],[63872,1,""],[63873,1,""],[63874,1,""],[63875,1,""],[63876,1,""],[63877,1,""],[63878,1,""],[63879,1,""],[63880,1,""],[63881,1,""],[63882,1,""],[63883,1,""],[63884,1,""],[63885,1,""],[63886,1,""],[63887,1,""],[63888,1,""],[63889,1,""],[63890,1,""],[63891,1,""],[63892,1,""],[63893,1,""],[63894,1,""],[63895,1,""],[63896,1,""],[63897,1,""],[63898,1,""],[63899,1,""],[63900,1,""],[63901,1,""],[63902,1,""],[63903,1,""],[63904,1,""],[63905,1,""],[63906,1,""],[63907,1,""],[63908,1,""],[63909,1,""],[63910,1,""],[63911,1,""],[63912,1,""],[63913,1,""],[63914,1,""],[63915,1,""],[63916,1,""],[63917,1,""],[63918,1,""],[63919,1,""],[63920,1,""],[63921,1,""],[63922,1,""],[63923,1,""],[63924,1,""],[63925,1,""],[63926,1,""],[63927,1,""],[63928,1,""],[63929,1,""],[63930,1,""],[63931,1,""],[63932,1,""],[63933,1,""],[63934,1,""],[63935,1,""],[63936,1,""],[63937,1,""],[63938,1,""],[63939,1,""],[63940,1,""],[63941,1,""],[63942,1,""],[63943,1,""],[63944,1,""],[63945,1,""],[63946,1,""],[63947,1,""],[63948,1,""],[63949,1,""],[63950,1,""],[63951,1,""],[63952,1,""],[63953,1,""],[63954,1,""],[63955,1,""],[63956,1,""],[63957,1,""],[63958,1,""],[63959,1,""],[63960,1,""],[63961,1,""],[63962,1,""],[63963,1,""],[63964,1,""],[63965,1,""],[63966,1,""],[63967,1,""],[63968,1,""],[63969,1,""],[63970,1,""],[63971,1,""],[63972,1,""],[63973,1,""],[63974,1,""],[63975,1,""],[63976,1,""],[63977,1,""],[63978,1,""],[63979,1,""],[63980,1,""],[63981,1,""],[63982,1,""],[63983,1,""],[63984,1,""],[63985,1,""],[63986,1,""],[63987,1,""],[63988,1,""],[63989,1,""],[63990,1,""],[63991,1,""],[63992,1,""],[63993,1,""],[63994,1,""],[63995,1,""],[63996,1,""],[63997,1,""],[63998,1,""],[63999,1,""],[64000,1,""],[64001,1,""],[64002,1,""],[64003,1,""],[64004,1,""],[64005,1,""],[64006,1,""],[64007,1,""],[64008,1,""],[64009,1,""],[64010,1,""],[64011,1,""],[64012,1,""],[64013,1,""],[[64014,64015],2],[64016,1,""],[64017,2],[64018,1,""],[[64019,64020],2],[64021,1,""],[64022,1,""],[64023,1,""],[64024,1,""],[64025,1,""],[64026,1,""],[64027,1,""],[64028,1,""],[64029,1,""],[64030,1,""],[64031,2],[64032,1,""],[64033,2],[64034,1,""],[[64035,64036],2],[64037,1,""],[64038,1,""],[[64039,64041],2],[64042,1,""],[64043,1,""],[64044,1,""],[64045,1,""],[64046,1,""],[64047,1,""],[64048,1,""],[64049,1,""],[64050,1,""],[64051,1,""],[64052,1,""],[64053,1,""],[64054,1,""],[64055,1,""],[64056,1,""],[64057,1,""],[64058,1,""],[64059,1,""],[64060,1,""],[64061,1,""],[64062,1,""],[64063,1,""],[64064,1,""],[64065,1,""],[64066,1,""],[64067,1,""],[64068,1,""],[64069,1,""],[64070,1,""],[64071,1,""],[64072,1,""],[64073,1,""],[64074,1,""],[64075,1,""],[64076,1,""],[64077,1,""],[64078,1,""],[64079,1,""],[64080,1,""],[64081,1,""],[64082,1,""],[64083,1,""],[64084,1,""],[64085,1,""],[64086,1,""],[64087,1,""],[64088,1,""],[64089,1,""],[64090,1,""],[64091,1,""],[64092,1,""],[[64093,64094],1,""],[64095,1,""],[64096,1,""],[64097,1,""],[64098,1,""],[64099,1,""],[64100,1,""],[64101,1,""],[64102,1,""],[64103,1,""],[64104,1,""],[64105,1,""],[64106,1,""],[64107,1,""],[64108,1,""],[64109,1,""],[[64110,64111],3],[64112,1,""],[64113,1,""],[64114,1,""],[64115,1,""],[64116,1,""],[64117,1,""],[64118,1,""],[64119,1,""],[64120,1,""],[64121,1,""],[64122,1,""],[64123,1,""],[64124,1,""],[64125,1,""],[64126,1,""],[64127,1,""],[64128,1,""],[64129,1,""],[64130,1,""],[64131,1,""],[64132,1,""],[64133,1,""],[64134,1,""],[64135,1,""],[64136,1,""],[64137,1,""],[64138,1,""],[64139,1,""],[64140,1,""],[64141,1,""],[64142,1,""],[64143,1,""],[64144,1,""],[64145,1,""],[64146,1,""],[64147,1,""],[64148,1,""],[64149,1,""],[64150,1,""],[64151,1,""],[64152,1,""],[64153,1,""],[64154,1,""],[64155,1,""],[64156,1,""],[64157,1,""],[64158,1,""],[64159,1,""],[64160,1,""],[64161,1,""],[64162,1,""],[64163,1,""],[64164,1,""],[64165,1,""],[64166,1,""],[64167,1,""],[64168,1,""],[64169,1,""],[64170,1,""],[64171,1,""],[64172,1,""],[64173,1,""],[64174,1,""],[64175,1,""],[64176,1,""],[64177,1,""],[64178,1,""],[64179,1,""],[64180,1,""],[64181,1,""],[64182,1,""],[64183,1,""],[64184,1,""],[64185,1,""],[64186,1,""],[64187,1,""],[64188,1,""],[64189,1,""],[64190,1,""],[64191,1,""],[64192,1,""],[64193,1,""],[64194,1,""],[64195,1,""],[64196,1,""],[64197,1,""],[64198,1,""],[64199,1,""],[64200,1,""],[64201,1,""],[64202,1,""],[64203,1,""],[64204,1,""],[64205,1,""],[64206,1,""],[64207,1,""],[64208,1,""],[64209,1,""],[64210,1,""],[64211,1,""],[64212,1,""],[64213,1,""],[64214,1,""],[64215,1,""],[64216,1,""],[64217,1,""],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,""],[64276,1,""],[64277,1,""],[64278,1,""],[64279,1,""],[[64280,64284],3],[64285,1,""],[64286,2],[64287,1,""],[64288,1,""],[64289,1,""],[64290,1,""],[64291,1,""],[64292,1,""],[64293,1,""],[64294,1,""],[64295,1,""],[64296,1,""],[64297,1,"+"],[64298,1,""],[64299,1,""],[64300,1,""],[64301,1,""],[64302,1,""],[64303,1,""],[64304,1,""],[64305,1,""],[64306,1,""],[64307,1,""],[64308,1,""],[64309,1,""],[64310,1,""],[64311,3],[64312,1,""],[64313,1,""],[64314,1,""],[64315,1,""],[64316,1,""],[64317,3],[64318,1,""],[64319,3],[64320,1,""],[64321,1,""],[64322,3],[64323,1,""],[64324,1,""],[64325,3],[64326,1,""],[64327,1,""],[64328,1,""],[64329,1,""],[64330,1,""],[64331,1,""],[64332,1,""],[64333,1,""],[64334,1,""],[64335,1,""],[[64336,64337],1,""],[[64338,64341],1,""],[[64342,64345],1,""],[[64346,64349],1,""],[[64350,64353],1,""],[[64354,64357],1,""],[[64358,64361],1,""],[[64362,64365],1,""],[[64366,64369],1,""],[[64370,64373],1,""],[[64374,64377],1,""],[[64378,64381],1,""],[[64382,64385],1,""],[[64386,64387],1,""],[[64388,64389],1,""],[[64390,64391],1,""],[[64392,64393],1,""],[[64394,64395],1,""],[[64396,64397],1,""],[[64398,64401],1,""],[[64402,64405],1,""],[[64406,64409],1,""],[[64410,64413],1,""],[[64414,64415],1,""],[[64416,64419],1,""],[[64420,64421],1,""],[[64422,64425],1,""],[[64426,64429],1,""],[[64430,64431],1,""],[[64432,64433],1,""],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,""],[[64471,64472],1,""],[[64473,64474],1,""],[[64475,64476],1,""],[64477,1,""],[[64478,64479],1,""],[[64480,64481],1,""],[[64482,64483],1,""],[[64484,64487],1,""],[[64488,64489],1,""],[[64490,64491],1,""],[[64492,64493],1,""],[[64494,64495],1,""],[[64496,64497],1,""],[[64498,64499],1,""],[[64500,64501],1,""],[[64502,64504],1,""],[[64505,64507],1,""],[[64508,64511],1,""],[64512,1,""],[64513,1,""],[64514,1,""],[64515,1,""],[64516,1,""],[64517,1,""],[64518,1,""],[64519,1,""],[64520,1,""],[64521,1,""],[64522,1,""],[64523,1,""],[64524,1,""],[64525,1,""],[64526,1,""],[64527,1,""],[64528,1,""],[64529,1,""],[64530,1,""],[64531,1,""],[64532,1,""],[64533,1,""],[64534,1,""],[64535,1,""],[64536,1,""],[64537,1,""],[64538,1,""],[64539,1,""],[64540,1,""],[64541,1,""],[64542,1,""],[64543,1,""],[64544,1,""],[64545,1,""],[64546,1,""],[64547,1,""],[64548,1,""],[64549,1,""],[64550,1,""],[64551,1,""],[64552,1,""],[64553,1,""],[64554,1,""],[64555,1,""],[64556,1,""],[64557,1,""],[64558,1,""],[64559,1,""],[64560,1,""],[64561,1,""],[64562,1,""],[64563,1,""],[64564,1,""],[64565,1,""],[64566,1,""],[64567,1,""],[64568,1,""],[64569,1,""],[64570,1,""],[64571,1,""],[64572,1,""],[64573,1,""],[64574,1,""],[64575,1,""],[64576,1,""],[64577,1,""],[64578,1,""],[64579,1,""],[64580,1,""],[64581,1,""],[64582,1,""],[64583,1,""],[64584,1,""],[64585,1,""],[64586,1,""],[64587,1,""],[64588,1,""],[64589,1,""],[64590,1,""],[64591,1,""],[64592,1,""],[64593,1,""],[64594,1,""],[64595,1,""],[64596,1,""],[64597,1,""],[64598,1,""],[64599,1,""],[64600,1,""],[64601,1,""],[64602,1,""],[64603,1,""],[64604,1,""],[64605,1,""],[64606,1," "],[64607,1," "],[64608,1," "],[64609,1," "],[64610,1," "],[64611,1," "],[64612,1,""],[64613,1,""],[64614,1,""],[64615,1,""],[64616,1,""],[64617,1,""],[64618,1,""],[64619,1,""],[64620,1,""],[64621,1,""],[64622,1,""],[64623,1,""],[64624,1,""],[64625,1,""],[64626,1,""],[64627,1,""],[64628,1,""],[64629,1,""],[64630,1,""],[64631,1,""],[64632,1,""],[64633,1,""],[64634,1,""],[64635,1,""],[64636,1,""],[64637,1,""],[64638,1,""],[64639,1,""],[64640,1,""],[64641,1,""],[64642,1,""],[64643,1,""],[64644,1,""],[64645,1,""],[64646,1,""],[64647,1,""],[64648,1,""],[64649,1,""],[64650,1,""],[64651,1,""],[64652,1,""],[64653,1,""],[64654,1,""],[64655,1,""],[64656,1,""],[64657,1,""],[64658,1,""],[64659,1,""],[64660,1,""],[64661,1,""],[64662,1,""],[64663,1,""],[64664,1,""],[64665,1,""],[64666,1,""],[64667,1,""],[64668,1,""],[64669,1,""],[64670,1,""],[64671,1,""],[64672,1,""],[64673,1,""],[64674,1,""],[64675,1,""],[64676,1,""],[64677,1,""],[64678,1,""],[64679,1,""],[64680,1,""],[64681,1,""],[64682,1,""],[64683,1,""],[64684,1,""],[64685,1,""],[64686,1,""],[64687,1,""],[64688,1,""],[64689,1,""],[64690,1,""],[64691,1,""],[64692,1,""],[64693,1,""],[64694,1,""],[64695,1,""],[64696,1,""],[64697,1,""],[64698,1,""],[64699,1,""],[64700,1,""],[64701,1,""],[64702,1,""],[64703,1,""],[64704,1,""],[64705,1,""],[64706,1,""],[64707,1,""],[64708,1,""],[64709,1,""],[64710,1,""],[64711,1,""],[64712,1,""],[64713,1,""],[64714,1,""],[64715,1,""],[64716,1,""],[64717,1,""],[64718,1,""],[64719,1,""],[64720,1,""],[64721,1,""],[64722,1,""],[64723,1,""],[64724,1,""],[64725,1,""],[64726,1,""],[64727,1,""],[64728,1,""],[64729,1,""],[64730,1,""],[64731,1,""],[64732,1,""],[64733,1,""],[64734,1,""],[64735,1,""],[64736,1,""],[64737,1,""],[64738,1,""],[64739,1,""],[64740,1,""],[64741,1,""],[64742,1,""],[64743,1,""],[64744,1,""],[64745,1,""],[64746,1,""],[64747,1,""],[64748,1,""],[64749,1,""],[64750,1,""],[64751,1,""],[64752,1,""],[64753,1,""],[64754,1,""],[64755,1,""],[64756,1,""],[64757,1,""],[64758,1,""],[64759,1,""],[64760,1,""],[64761,1,""],[64762,1,""],[64763,1,""],[64764,1,""],[64765,1,""],[64766,1,""],[64767,1,""],[64768,1,""],[64769,1,""],[64770,1,""],[64771,1,""],[64772,1,""],[64773,1,""],[64774,1,""],[64775,1,""],[64776,1,""],[64777,1,""],[64778,1,""],[64779,1,""],[64780,1,""],[64781,1,""],[64782,1,""],[64783,1,""],[64784,1,""],[64785,1,""],[64786,1,""],[64787,1,""],[64788,1,""],[64789,1,""],[64790,1,""],[64791,1,""],[64792,1,""],[64793,1,""],[64794,1,""],[64795,1,""],[64796,1,""],[64797,1,""],[64798,1,""],[64799,1,""],[64800,1,""],[64801,1,""],[64802,1,""],[64803,1,""],[64804,1,""],[64805,1,""],[64806,1,""],[64807,1,""],[64808,1,""],[64809,1,""],[64810,1,""],[64811,1,""],[64812,1,""],[64813,1,""],[64814,1,""],[64815,1,""],[64816,1,""],[64817,1,""],[64818,1,""],[64819,1,""],[64820,1,""],[64821,1,""],[64822,1,""],[64823,1,""],[64824,1,""],[64825,1,""],[64826,1,""],[64827,1,""],[[64828,64829],1,""],[[64830,64831],2],[[64832,64847],2],[64848,1,""],[[64849,64850],1,""],[64851,1,""],[64852,1,""],[64853,1,""],[64854,1,""],[64855,1,""],[[64856,64857],1,""],[64858,1,""],[64859,1,""],[64860,1,""],[64861,1,""],[64862,1,""],[[64863,64864],1,""],[64865,1,""],[[64866,64867],1,""],[[64868,64869],1,""],[64870,1,""],[[64871,64872],1,""],[64873,1,""],[[64874,64875],1,""],[[64876,64877],1,""],[64878,1,""],[[64879,64880],1,""],[[64881,64882],1,""],[64883,1,""],[64884,1,""],[64885,1,""],[[64886,64887],1,""],[64888,1,""],[64889,1,""],[64890,1,""],[64891,1,""],[[64892,64893],1,""],[64894,1,""],[64895,1,""],[64896,1,""],[64897,1,""],[64898,1,""],[[64899,64900],1,""],[[64901,64902],1,""],[[64903,64904],1,""],[64905,1,""],[64906,1,""],[64907,1,""],[64908,1,""],[64909,1,""],[64910,1,""],[64911,1,""],[[64912,64913],3],[64914,1,""],[64915,1,""],[64916,1,""],[64917,1,""],[64918,1,""],[[64919,64920],1,""],[64921,1,""],[64922,1,""],[64923,1,""],[[64924,64925],1,""],[64926,1,""],[64927,1,""],[64928,1,""],[64929,1,""],[64930,1,""],[64931,1,""],[64932,1,""],[64933,1,""],[64934,1,""],[64935,1,""],[64936,1,""],[64937,1,""],[64938,1,""],[64939,1,""],[64940,1,""],[64941,1,""],[64942,1,""],[64943,1,""],[64944,1,""],[64945,1,""],[64946,1,""],[64947,1,""],[64948,1,""],[64949,1,""],[64950,1,""],[64951,1,""],[64952,1,""],[64953,1,""],[64954,1,""],[64955,1,""],[64956,1,""],[64957,1,""],[64958,1,""],[64959,1,""],[64960,1,""],[64961,1,""],[64962,1,""],[64963,1,""],[64964,1,""],[64965,1,""],[64966,1,""],[64967,1,""],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,""],[65009,1,""],[65010,1,""],[65011,1,""],[65012,1,""],[65013,1,""],[65014,1,""],[65015,1,""],[65016,1,""],[65017,1,""],[65018,1,"   "],[65019,1," "],[65020,1,""],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,""],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,""],[65048,1,""],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,""],[65074,1,""],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,""],[65082,1,""],[65083,1,""],[65084,1,""],[65085,1,""],[65086,1,""],[65087,1,""],[65088,1,""],[65089,1,""],[65090,1,""],[65091,1,""],[65092,1,""],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," "],[[65101,65103],1,"_"],[65104,1,","],[65105,1,""],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,""],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,""],[65118,1,""],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," "],[65137,1,""],[65138,1," "],[65139,2],[65140,1," "],[65141,3],[65142,1," "],[65143,1,""],[65144,1," "],[65145,1,""],[65146,1," "],[65147,1,""],[65148,1," "],[65149,1,""],[65150,1," "],[65151,1,""],[65152,1,""],[[65153,65154],1,""],[[65155,65156],1,""],[[65157,65158],1,""],[[65159,65160],1,""],[[65161,65164],1,""],[[65165,65166],1,""],[[65167,65170],1,""],[[65171,65172],1,""],[[65173,65176],1,""],[[65177,65180],1,""],[[65181,65184],1,""],[[65185,65188],1,""],[[65189,65192],1,""],[[65193,65194],1,""],[[65195,65196],1,""],[[65197,65198],1,""],[[65199,65200],1,""],[[65201,65204],1,""],[[65205,65208],1,""],[[65209,65212],1,""],[[65213,65216],1,""],[[65217,65220],1,""],[[65221,65224],1,""],[[65225,65228],1,""],[[65229,65232],1,""],[[65233,65236],1,""],[[65237,65240],1,""],[[65241,65244],1,""],[[65245,65248],1,""],[[65249,65252],1,""],[[65253,65256],1,""],[[65257,65260],1,""],[[65261,65262],1,""],[[65263,65264],1,""],[[65265,65268],1,""],[[65269,65270],1,""],[[65271,65272],1,""],[[65273,65274],1,""],[[65275,65276],1,""],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,""],[65376,1,""],[65377,1,"."],[65378,1,""],[65379,1,""],[65380,1,""],[65381,1,""],[65382,1,""],[65383,1,""],[65384,1,""],[65385,1,""],[65386,1,""],[65387,1,""],[65388,1,""],[65389,1,""],[65390,1,""],[65391,1,""],[65392,1,""],[65393,1,""],[65394,1,""],[65395,1,""],[65396,1,""],[65397,1,""],[65398,1,""],[65399,1,""],[65400,1,""],[65401,1,""],[65402,1,""],[65403,1,""],[65404,1,""],[65405,1,""],[65406,1,""],[65407,1,""],[65408,1,""],[65409,1,""],[65410,1,""],[65411,1,""],[65412,1,""],[65413,1,""],[65414,1,""],[65415,1,""],[65416,1,""],[65417,1,""],[65418,1,""],[65419,1,""],[65420,1,""],[65421,1,""],[65422,1,""],[65423,1,""],[65424,1,""],[65425,1,""],[65426,1,""],[65427,1,""],[65428,1,""],[65429,1,""],[65430,1,""],[65431,1,""],[65432,1,""],[65433,1,""],[65434,1,""],[65435,1,""],[65436,1,""],[65437,1,""],[65438,1,""],[65439,1,""],[65440,7],[65441,1,""],[65442,1,""],[65443,1,""],[65444,1,""],[65445,1,""],[65446,1,""],[65447,1,""],[65448,1,""],[65449,1,""],[65450,1,""],[65451,1,""],[65452,1,""],[65453,1,""],[65454,1,""],[65455,1,""],[65456,1,""],[65457,1,""],[65458,1,""],[65459,1,""],[65460,1,""],[65461,1,""],[65462,1,""],[65463,1,""],[65464,1,""],[65465,1,""],[65466,1,""],[65467,1,""],[65468,1,""],[65469,1,""],[65470,1,""],[[65471,65473],3],[65474,1,""],[65475,1,""],[65476,1,""],[65477,1,""],[65478,1,""],[65479,1,""],[[65480,65481],3],[65482,1,""],[65483,1,""],[65484,1,""],[65485,1,""],[65486,1,""],[65487,1,""],[[65488,65489],3],[65490,1,""],[65491,1,""],[65492,1,""],[65493,1,""],[65494,1,""],[65495,1,""],[[65496,65497],3],[65498,1,""],[65499,1,""],[65500,1,""],[[65501,65503],3],[65504,1,""],[65505,1,""],[65506,1,""],[65507,1," "],[65508,1,""],[65509,1,""],[65510,1,""],[65511,3],[65512,1,""],[65513,1,""],[65514,1,""],[65515,1,""],[65516,1,""],[65517,1,""],[65518,1,""],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,""],[66561,1,""],[66562,1,""],[66563,1,""],[66564,1,""],[66565,1,""],[66566,1,""],[66567,1,""],[66568,1,""],[66569,1,""],[66570,1,""],[66571,1,""],[66572,1,""],[66573,1,""],[66574,1,""],[66575,1,""],[66576,1,""],[66577,1,""],[66578,1,""],[66579,1,""],[66580,1,""],[66581,1,""],[66582,1,""],[66583,1,""],[66584,1,""],[66585,1,""],[66586,1,""],[66587,1,""],[66588,1,""],[66589,1,""],[66590,1,""],[66591,1,""],[66592,1,""],[66593,1,""],[66594,1,""],[66595,1,""],[66596,1,""],[66597,1,""],[66598,1,""],[66599,1,""],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,""],[66737,1,""],[66738,1,""],[66739,1,""],[66740,1,""],[66741,1,""],[66742,1,""],[66743,1,""],[66744,1,""],[66745,1,""],[66746,1,""],[66747,1,""],[66748,1,""],[66749,1,""],[66750,1,""],[66751,1,""],[66752,1,""],[66753,1,""],[66754,1,""],[66755,1,""],[66756,1,""],[66757,1,""],[66758,1,""],[66759,1,""],[66760,1,""],[66761,1,""],[66762,1,""],[66763,1,""],[66764,1,""],[66765,1,""],[66766,1,""],[66767,1,""],[66768,1,""],[66769,1,""],[66770,1,""],[66771,1,""],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,""],[66929,1,""],[66930,1,""],[66931,1,""],[66932,1,""],[66933,1,""],[66934,1,""],[66935,1,""],[66936,1,""],[66937,1,""],[66938,1,""],[66939,3],[66940,1,""],[66941,1,""],[66942,1,""],[66943,1,""],[66944,1,""],[66945,1,""],[66946,1,""],[66947,1,""],[66948,1,""],[66949,1,""],[66950,1,""],[66951,1,""],[66952,1,""],[66953,1,""],[66954,1,""],[66955,3],[66956,1,""],[66957,1,""],[66958,1,""],[66959,1,""],[66960,1,""],[66961,1,""],[66962,1,""],[66963,3],[66964,1,""],[66965,1,""],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,""],[67458,1,""],[67459,1,""],[67460,1,""],[67461,1,""],[67462,3],[67463,1,""],[67464,1,""],[67465,1,""],[67466,1,""],[67467,1,""],[67468,1,""],[67469,1,""],[67470,1,""],[67471,1,""],[67472,1,""],[67473,1,""],[67474,1,""],[67475,1,""],[67476,1,""],[67477,1,""],[67478,1,""],[67479,1,""],[67480,1,""],[67481,1,""],[67482,1,""],[67483,1,""],[67484,1,""],[67485,1,""],[67486,1,""],[67487,1,""],[67488,1,""],[67489,1,""],[67490,1,""],[67491,1,""],[67492,1,""],[67493,1,"q"],[67494,1,""],[67495,1,""],[67496,1,""],[67497,1,""],[67498,1,""],[67499,1,""],[67500,1,""],[67501,1,""],[67502,1,""],[67503,1,""],[67504,1,""],[67505,3],[67506,1,""],[67507,1,""],[67508,1,""],[67509,1,""],[67510,1,""],[67511,1,""],[67512,1,""],[67513,1,""],[67514,1,""],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,""],[68737,1,""],[68738,1,""],[68739,1,""],[68740,1,""],[68741,1,""],[68742,1,""],[68743,1,""],[68744,1,""],[68745,1,""],[68746,1,""],[68747,1,""],[68748,1,""],[68749,1,""],[68750,1,""],[68751,1,""],[68752,1,""],[68753,1,""],[68754,1,""],[68755,1,""],[68756,1,""],[68757,1,""],[68758,1,""],[68759,1,""],[68760,1,""],[68761,1,""],[68762,1,""],[68763,1,""],[68764,1,""],[68765,1,""],[68766,1,""],[68767,1,""],[68768,1,""],[68769,1,""],[68770,1,""],[68771,1,""],[68772,1,""],[68773,1,""],[68774,1,""],[68775,1,""],[68776,1,""],[68777,1,""],[68778,1,""],[68779,1,""],[68780,1,""],[68781,1,""],[68782,1,""],[68783,1,""],[68784,1,""],[68785,1,""],[68786,1,""],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,""],[68945,1,""],[68946,1,""],[68947,1,""],[68948,1,""],[68949,1,""],[68950,1,""],[68951,1,""],[68952,1,""],[68953,1,""],[68954,1,""],[68955,1,""],[68956,1,""],[68957,1,""],[68958,1,""],[68959,1,""],[68960,1,""],[68961,1,""],[68962,1,""],[68963,1,""],[68964,1,""],[68965,1,""],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,""],[71841,1,""],[71842,1,""],[71843,1,""],[71844,1,""],[71845,1,""],[71846,1,""],[71847,1,""],[71848,1,""],[71849,1,""],[71850,1,""],[71851,1,""],[71852,1,""],[71853,1,""],[71854,1,""],[71855,1,""],[71856,1,""],[71857,1,""],[71858,1,""],[71859,1,""],[71860,1,""],[71861,1,""],[71862,1,""],[71863,1,""],[71864,1,""],[71865,1,""],[71866,1,""],[71867,1,""],[71868,1,""],[71869,1,""],[71870,1,""],[71871,1,""],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,""],[93761,1,""],[93762,1,""],[93763,1,""],[93764,1,""],[93765,1,""],[93766,1,""],[93767,1,""],[93768,1,""],[93769,1,""],[93770,1,""],[93771,1,""],[93772,1,""],[93773,1,""],[93774,1,""],[93775,1,""],[93776,1,""],[93777,1,""],[93778,1,""],[93779,1,""],[93780,1,""],[93781,1,""],[93782,1,""],[93783,1,""],[93784,1,""],[93785,1,""],[93786,1,""],[93787,1,""],[93788,1,""],[93789,1,""],[93790,1,""],[93791,1,""],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,""],[119135,1,""],[119136,1,""],[119137,1,""],[119138,1,""],[119139,1,""],[119140,1,""],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,""],[119228,1,""],[119229,1,""],[119230,1,""],[119231,1,""],[119232,1,""],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,""],[120485,1,""],[[120486,120487],3],[120488,1,""],[120489,1,""],[120490,1,""],[120491,1,""],[120492,1,""],[120493,1,""],[120494,1,""],[120495,1,""],[120496,1,""],[120497,1,""],[120498,1,""],[120499,1,""],[120500,1,""],[120501,1,""],[120502,1,""],[120503,1,""],[120504,1,""],[120505,1,""],[120506,1,""],[120507,1,""],[120508,1,""],[120509,1,""],[120510,1,""],[120511,1,""],[120512,1,""],[120513,1,""],[120514,1,""],[120515,1,""],[120516,1,""],[120517,1,""],[120518,1,""],[120519,1,""],[120520,1,""],[120521,1,""],[120522,1,""],[120523,1,""],[120524,1,""],[120525,1,""],[120526,1,""],[120527,1,""],[120528,1,""],[120529,1,""],[120530,1,""],[[120531,120532],1,""],[120533,1,""],[120534,1,""],[120535,1,""],[120536,1,""],[120537,1,""],[120538,1,""],[120539,1,""],[120540,1,""],[120541,1,""],[120542,1,""],[120543,1,""],[120544,1,""],[120545,1,""],[120546,1,""],[120547,1,""],[120548,1,""],[120549,1,""],[120550,1,""],[120551,1,""],[120552,1,""],[120553,1,""],[120554,1,""],[120555,1,""],[120556,1,""],[120557,1,""],[120558,1,""],[120559,1,""],[120560,1,""],[120561,1,""],[120562,1,""],[120563,1,""],[120564,1,""],[120565,1,""],[120566,1,""],[120567,1,""],[120568,1,""],[120569,1,""],[120570,1,""],[120571,1,""],[120572,1,""],[120573,1,""],[120574,1,""],[120575,1,""],[120576,1,""],[120577,1,""],[120578,1,""],[120579,1,""],[120580,1,""],[120581,1,""],[120582,1,""],[120583,1,""],[120584,1,""],[120585,1,""],[120586,1,""],[120587,1,""],[120588,1,""],[[120589,120590],1,""],[120591,1,""],[120592,1,""],[120593,1,""],[120594,1,""],[120595,1,""],[120596,1,""],[120597,1,""],[120598,1,""],[120599,1,""],[120600,1,""],[120601,1,""],[120602,1,""],[120603,1,""],[120604,1,""],[120605,1,""],[120606,1,""],[120607,1,""],[120608,1,""],[120609,1,""],[120610,1,""],[120611,1,""],[120612,1,""],[120613,1,""],[120614,1,""],[120615,1,""],[120616,1,""],[120617,1,""],[120618,1,""],[120619,1,""],[120620,1,""],[120621,1,""],[120622,1,""],[120623,1,""],[120624,1,""],[120625,1,""],[120626,1,""],[120627,1,""],[120628,1,""],[120629,1,""],[120630,1,""],[120631,1,""],[120632,1,""],[120633,1,""],[120634,1,""],[120635,1,""],[120636,1,""],[120637,1,""],[120638,1,""],[120639,1,""],[120640,1,""],[120641,1,""],[120642,1,""],[120643,1,""],[120644,1,""],[120645,1,""],[120646,1,""],[[120647,120648],1,""],[120649,1,""],[120650,1,""],[120651,1,""],[120652,1,""],[120653,1,""],[120654,1,""],[120655,1,""],[120656,1,""],[120657,1,""],[120658,1,""],[120659,1,""],[120660,1,""],[120661,1,""],[120662,1,""],[120663,1,""],[120664,1,""],[120665,1,""],[120666,1,""],[120667,1,""],[120668,1,""],[120669,1,""],[120670,1,""],[120671,1,""],[120672,1,""],[120673,1,""],[120674,1,""],[120675,1,""],[120676,1,""],[120677,1,""],[120678,1,""],[120679,1,""],[120680,1,""],[120681,1,""],[120682,1,""],[120683,1,""],[120684,1,""],[120685,1,""],[120686,1,""],[120687,1,""],[120688,1,""],[120689,1,""],[120690,1,""],[120691,1,""],[120692,1,""],[120693,1,""],[120694,1,""],[120695,1,""],[120696,1,""],[120697,1,""],[120698,1,""],[120699,1,""],[120700,1,""],[120701,1,""],[120702,1,""],[120703,1,""],[120704,1,""],[[120705,120706],1,""],[120707,1,""],[120708,1,""],[120709,1,""],[120710,1,""],[120711,1,""],[120712,1,""],[120713,1,""],[120714,1,""],[120715,1,""],[120716,1,""],[120717,1,""],[120718,1,""],[120719,1,""],[120720,1,""],[120721,1,""],[120722,1,""],[120723,1,""],[120724,1,""],[120725,1,""],[120726,1,""],[120727,1,""],[120728,1,""],[120729,1,""],[120730,1,""],[120731,1,""],[120732,1,""],[120733,1,""],[120734,1,""],[120735,1,""],[120736,1,""],[120737,1,""],[120738,1,""],[120739,1,""],[120740,1,""],[120741,1,""],[120742,1,""],[120743,1,""],[120744,1,""],[120745,1,""],[120746,1,""],[120747,1,""],[120748,1,""],[120749,1,""],[120750,1,""],[120751,1,""],[120752,1,""],[120753,1,""],[120754,1,""],[120755,1,""],[120756,1,""],[120757,1,""],[120758,1,""],[120759,1,""],[120760,1,""],[120761,1,""],[120762,1,""],[[120763,120764],1,""],[120765,1,""],[120766,1,""],[120767,1,""],[120768,1,""],[120769,1,""],[120770,1,""],[120771,1,""],[120772,1,""],[120773,1,""],[120774,1,""],[120775,1,""],[120776,1,""],[120777,1,""],[[120778,120779],1,""],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,""],[122929,1,""],[122930,1,""],[122931,1,""],[122932,1,""],[122933,1,""],[122934,1,""],[122935,1,""],[122936,1,""],[122937,1,""],[122938,1,""],[122939,1,""],[122940,1,""],[122941,1,""],[122942,1,""],[122943,1,""],[122944,1,""],[122945,1,""],[122946,1,""],[122947,1,""],[122948,1,""],[122949,1,""],[122950,1,""],[122951,1,""],[122952,1,""],[122953,1,""],[122954,1,""],[122955,1,""],[122956,1,""],[122957,1,""],[122958,1,""],[122959,1,""],[122960,1,""],[122961,1,""],[122962,1,""],[122963,1,""],[122964,1,""],[122965,1,""],[122966,1,""],[122967,1,""],[122968,1,""],[122969,1,""],[122970,1,""],[122971,1,""],[122972,1,""],[122973,1,""],[122974,1,""],[122975,1,""],[122976,1,""],[122977,1,""],[122978,1,""],[122979,1,""],[122980,1,""],[122981,1,""],[122982,1,""],[122983,1,""],[122984,1,""],[122985,1,""],[122986,1,""],[122987,1,""],[122988,1,""],[122989,1,""],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,""],[125185,1,""],[125186,1,""],[125187,1,""],[125188,1,""],[125189,1,""],[125190,1,""],[125191,1,""],[125192,1,""],[125193,1,""],[125194,1,""],[125195,1,""],[125196,1,""],[125197,1,""],[125198,1,""],[125199,1,""],[125200,1,""],[125201,1,""],[125202,1,""],[125203,1,""],[125204,1,""],[125205,1,""],[125206,1,""],[125207,1,""],[125208,1,""],[125209,1,""],[125210,1,""],[125211,1,""],[125212,1,""],[125213,1,""],[125214,1,""],[125215,1,""],[125216,1,""],[125217,1,""],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,""],[126465,1,""],[126466,1,""],[126467,1,""],[126468,3],[126469,1,""],[126470,1,""],[126471,1,""],[126472,1,""],[126473,1,""],[126474,1,""],[126475,1,""],[126476,1,""],[126477,1,""],[126478,1,""],[126479,1,""],[126480,1,""],[126481,1,""],[126482,1,""],[126483,1,""],[126484,1,""],[126485,1,""],[126486,1,""],[126487,1,""],[126488,1,""],[126489,1,""],[126490,1,""],[126491,1,""],[126492,1,""],[126493,1,""],[126494,1,""],[126495,1,""],[126496,3],[126497,1,""],[126498,1,""],[126499,3],[126500,1,""],[[126501,126502],3],[126503,1,""],[126504,3],[126505,1,""],[126506,1,""],[126507,1,""],[126508,1,""],[126509,1,""],[126510,1,""],[126511,1,""],[126512,1,""],[126513,1,""],[126514,1,""],[126515,3],[126516,1,""],[126517,1,""],[126518,1,""],[126519,1,""],[126520,3],[126521,1,""],[126522,3],[126523,1,""],[[126524,126529],3],[126530,1,""],[[126531,126534],3],[126535,1,""],[126536,3],[126537,1,""],[126538,3],[126539,1,""],[126540,3],[126541,1,""],[126542,1,""],[126543,1,""],[126544,3],[126545,1,""],[126546,1,""],[126547,3],[126548,1,""],[[126549,126550],3],[126551,1,""],[126552,3],[126553,1,""],[126554,3],[126555,1,""],[126556,3],[126557,1,""],[126558,3],[126559,1,""],[126560,3],[126561,1,""],[126562,1,""],[126563,3],[126564,1,""],[[126565,126566],3],[126567,1,""],[126568,1,""],[126569,1,""],[126570,1,""],[126571,3],[126572,1,""],[126573,1,""],[126574,1,""],[126575,1,""],[126576,1,""],[126577,1,""],[126578,1,""],[126579,3],[126580,1,""],[126581,1,""],[126582,1,""],[126583,1,""],[126584,3],[126585,1,""],[126586,1,""],[126587,1,""],[126588,1,""],[126589,3],[126590,1,""],[126591,3],[126592,1,""],[126593,1,""],[126594,1,""],[126595,1,""],[126596,1,""],[126597,1,""],[126598,1,""],[126599,1,""],[126600,1,""],[126601,1,""],[126602,3],[126603,1,""],[126604,1,""],[126605,1,""],[126606,1,""],[126607,1,""],[126608,1,""],[126609,1,""],[126610,1,""],[126611,1,""],[126612,1,""],[126613,1,""],[126614,1,""],[126615,1,""],[126616,1,""],[126617,1,""],[126618,1,""],[126619,1,""],[[126620,126624],3],[126625,1,""],[126626,1,""],[126627,1,""],[126628,3],[126629,1,""],[126630,1,""],[126631,1,""],[126632,1,""],[126633,1,""],[126634,3],[126635,1,""],[126636,1,""],[126637,1,""],[126638,1,""],[126639,1,""],[126640,1,""],[126641,1,""],[126642,1,""],[126643,1,""],[126644,1,""],[126645,1,""],[126646,1,""],[126647,1,""],[126648,1,""],[126649,1,""],[126650,1,""],[126651,1,""],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"s"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,""],[127489,1,""],[127490,1,""],[[127491,127503],3],[127504,1,""],[127505,1,""],[127506,1,""],[127507,1,""],[127508,1,""],[127509,1,""],[127510,1,""],[127511,1,""],[127512,1,""],[127513,1,""],[127514,1,""],[127515,1,""],[127516,1,""],[127517,1,""],[127518,1,""],[127519,1,""],[127520,1,""],[127521,1,""],[127522,1,""],[127523,1,""],[127524,1,""],[127525,1,""],[127526,1,""],[127527,1,""],[127528,1,""],[127529,1,""],[127530,1,""],[127531,1,""],[127532,1,""],[127533,1,""],[127534,1,""],[127535,1,""],[127536,1,""],[127537,1,""],[127538,1,""],[127539,1,""],[127540,1,""],[127541,1,""],[127542,1,""],[127543,1,""],[127544,1,""],[127545,1,""],[127546,1,""],[127547,1,""],[[127548,127551],3],[127552,1,""],[127553,1,""],[127554,1,""],[127555,1,""],[127556,1,""],[127557,1,""],[127558,1,""],[127559,1,""],[127560,1,""],[[127561,127567],3],[127568,1,""],[127569,1,""],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,""],[194561,1,""],[194562,1,""],[194563,1,""],[194564,1,""],[194565,1,""],[194566,1,""],[194567,1,""],[194568,1,""],[194569,1,""],[194570,1,""],[194571,1,""],[194572,1,""],[194573,1,""],[194574,1,""],[194575,1,""],[194576,1,""],[194577,1,""],[194578,1,""],[194579,1,""],[194580,1,""],[194581,1,""],[194582,1,""],[194583,1,""],[194584,1,""],[194585,1,""],[194586,1,""],[194587,1,""],[194588,1,""],[194589,1,""],[194590,1,""],[194591,1,""],[194592,1,""],[194593,1,""],[194594,1,""],[194595,1,""],[194596,1,""],[194597,1,""],[194598,1,""],[194599,1,""],[194600,1,""],[194601,1,""],[194602,1,""],[194603,1,""],[194604,1,""],[194605,1,""],[194606,1,""],[194607,1,""],[194608,1,""],[[194609,194611],1,""],[194612,1,""],[194613,1,""],[194614,1,""],[194615,1,""],[194616,1,""],[194617,1,""],[194618,1,""],[194619,1,""],[194620,1,""],[194621,1,""],[194622,1,""],[194623,1,""],[194624,1,""],[194625,1,""],[194626,1,""],[194627,1,""],[194628,1,""],[[194629,194630],1,""],[194631,1,""],[194632,1,""],[194633,1,""],[194634,1,""],[194635,1,""],[194636,1,""],[194637,1,""],[194638,1,""],[194639,1,""],[194640,1,""],[194641,1,""],[194642,1,""],[194643,1,""],[194644,1,""],[194645,1,""],[194646,1,""],[194647,1,""],[194648,1,""],[194649,1,""],[194650,1,""],[194651,1,""],[194652,1,""],[194653,1,""],[194654,1,""],[194655,1,""],[194656,1,""],[194657,1,""],[194658,1,""],[194659,1,""],[194660,1,""],[194661,1,""],[194662,1,""],[194663,1,""],[194664,1,""],[194665,1,""],[[194666,194667],1,""],[194668,1,""],[194669,1,""],[194670,1,""],[194671,1,""],[194672,1,""],[194673,1,""],[194674,1,""],[194675,1,""],[194676,1,""],[194677,1,""],[194678,1,""],[194679,1,""],[194680,1,""],[194681,1,""],[194682,1,""],[194683,1,""],[194684,1,""],[194685,1,""],[194686,1,""],[194687,1,""],[194688,1,""],[194689,1,""],[194690,1,""],[194691,1,""],[194692,1,""],[194693,1,""],[194694,1,""],[194695,1,""],[194696,1,""],[194697,1,""],[194698,1,""],[194699,1,""],[194700,1,""],[194701,1,""],[194702,1,""],[194703,1,""],[194704,1,""],[[194705,194706],1,""],[194707,1,""],[[194708,194709],1,""],[194710,1,""],[194711,1,""],[194712,1,""],[194713,1,""],[194714,1,""],[194715,1,""],[194716,1,""],[194717,1,""],[194718,1,""],[194719,1,""],[194720,1,""],[194721,1,""],[194722,1,""],[194723,1,""],[194724,1,""],[194725,1,""],[194726,1,""],[194727,1,""],[194728,1,""],[194729,1,""],[194730,1,""],[194731,1,""],[194732,1,""],[194733,1,""],[194734,1,""],[194735,1,""],[194736,1,""],[194737,1,""],[194738,1,""],[194739,1,""],[194740,1,""],[194741,1,""],[194742,1,""],[194743,1,""],[194744,1,""],[194745,1,""],[194746,1,""],[194747,1,""],[194748,1,""],[194749,1,""],[194750,1,""],[194751,1,""],[194752,1,""],[194753,1,""],[194754,1,""],[194755,1,""],[194756,1,""],[194757,1,""],[194758,1,""],[194759,1,""],[194760,1,""],[194761,1,""],[194762,1,""],[194763,1,""],[194764,1,""],[194765,1,""],[194766,1,""],[194767,1,""],[194768,1,""],[194769,1,""],[194770,1,""],[194771,1,""],[194772,1,""],[194773,1,""],[194774,1,""],[194775,1,""],[194776,1,""],[194777,1,""],[194778,1,""],[194779,1,""],[194780,1,""],[194781,1,""],[194782,1,""],[194783,1,""],[194784,1,""],[194785,1,""],[194786,1,""],[194787,1,""],[194788,1,""],[194789,1,""],[194790,1,""],[194791,1,""],[194792,1,""],[194793,1,""],[194794,1,""],[194795,1,""],[194796,1,""],[194797,1,""],[194798,1,""],[194799,1,""],[194800,1,""],[194801,1,""],[194802,1,""],[194803,1,""],[194804,1,""],[194805,1,""],[194806,1,""],[194807,1,""],[194808,1,""],[194809,1,""],[194810,1,""],[194811,1,""],[194812,1,""],[194813,1,""],[194814,1,""],[194815,1,""],[194816,1,""],[194817,1,""],[194818,1,""],[194819,1,""],[194820,1,""],[194821,1,""],[194822,1,""],[194823,1,""],[194824,1,""],[194825,1,""],[194826,1,""],[194827,1,""],[194828,1,""],[194829,1,""],[194830,1,""],[194831,1,""],[194832,1,""],[194833,1,""],[194834,1,""],[194835,1,""],[194836,1,""],[194837,1,""],[194838,1,""],[194839,1,""],[194840,1,""],[194841,1,""],[194842,1,""],[194843,1,""],[194844,1,""],[194845,1,""],[194846,1,""],[194847,1,""],[194848,1,""],[194849,1,""],[194850,1,""],[194851,1,""],[194852,1,""],[194853,1,""],[194854,1,""],[194855,1,""],[194856,1,""],[194857,1,""],[194858,1,""],[194859,1,""],[[194860,194861],1,""],[194862,1,""],[194863,1,""],[194864,1,""],[194865,1,""],[194866,1,""],[194867,1,""],[194868,1,""],[194869,1,""],[194870,1,""],[194871,1,""],[194872,1,""],[194873,1,""],[194874,1,""],[194875,1,""],[194876,1,""],[194877,1,""],[194878,1,""],[194879,1,""],[194880,1,""],[194881,1,""],[194882,1,""],[194883,1,""],[194884,1,""],[194885,1,""],[[194886,194887],1,""],[194888,1,""],[194889,1,""],[194890,1,""],[194891,1,""],[194892,1,""],[194893,1,""],[194894,1,""],[194895,1,""],[194896,1,""],[194897,1,""],[194898,1,""],[194899,1,""],[194900,1,""],[194901,1,""],[194902,1,""],[194903,1,""],[194904,1,""],[194905,1,""],[194906,1,""],[194907,1,""],[194908,1,""],[[194909,194910],1,""],[194911,1,""],[194912,1,""],[194913,1,""],[194914,1,""],[194915,1,""],[194916,1,""],[194917,1,""],[194918,1,""],[194919,1,""],[194920,1,""],[194921,1,""],[194922,1,""],[194923,1,""],[194924,1,""],[194925,1,""],[194926,1,""],[194927,1,""],[194928,1,""],[194929,1,""],[194930,1,""],[194931,1,""],[194932,1,""],[194933,1,""],[194934,1,""],[194935,1,""],[194936,1,""],[194937,1,""],[194938,1,""],[194939,1,""],[194940,1,""],[194941,1,""],[194942,1,""],[194943,1,""],[194944,1,""],[194945,1,""],[194946,1,""],[194947,1,""],[194948,1,""],[194949,1,""],[194950,1,""],[194951,1,""],[194952,1,""],[194953,1,""],[194954,1,""],[194955,1,""],[194956,1,""],[194957,1,""],[194958,1,""],[194959,1,""],[194960,1,""],[194961,1,""],[194962,1,""],[194963,1,""],[194964,1,""],[194965,1,""],[194966,1,""],[194967,1,""],[194968,1,""],[194969,1,""],[194970,1,""],[194971,1,""],[194972,1,""],[194973,1,""],[194974,1,""],[194975,1,""],[194976,1,""],[194977,1,""],[194978,1,""],[194979,1,""],[194980,1,""],[194981,1,""],[194982,1,""],[194983,1,""],[194984,1,""],[194985,1,""],[194986,1,""],[194987,1,""],[194988,1,""],[194989,1,""],[194990,1,""],[194991,1,""],[194992,1,""],[194993,1,""],[194994,1,""],[194995,1,""],[194996,1,""],[194997,1,""],[194998,1,""],[194999,1,""],[195000,1,""],[195001,1,""],[195002,1,""],[195003,1,""],[195004,1,""],[195005,1,""],[195006,1,""],[195007,1,""],[195008,1,""],[195009,1,""],[195010,1,""],[195011,1,""],[195012,1,""],[195013,1,""],[195014,1,""],[195015,1,""],[195016,1,""],[195017,1,""],[195018,1,""],[195019,1,""],[195020,1,""],[195021,1,""],[195022,1,""],[195023,1,""],[195024,1,""],[195025,1,""],[195026,1,""],[195027,1,""],[195028,1,""],[195029,1,""],[195030,1,""],[195031,1,""],[195032,1,""],[195033,1,""],[195034,1,""],[195035,1,""],[195036,1,""],[195037,1,""],[195038,1,""],[195039,1,""],[195040,1,""],[195041,1,""],[195042,1,""],[195043,1,""],[195044,1,""],[195045,1,""],[195046,1,""],[195047,1,""],[195048,1,""],[195049,1,""],[195050,1,""],[195051,1,""],[195052,1,""],[195053,1,""],[195054,1,""],[195055,1,""],[195056,1,""],[195057,1,""],[195058,1,""],[195059,1,""],[195060,1,""],[195061,1,""],[195062,1,""],[195063,1,""],[195064,1,""],[195065,1,""],[195066,1,""],[195067,1,""],[195068,1,""],[195069,1,""],[[195070,195071],1,""],[195072,1,""],[195073,1,""],[195074,1,""],[195075,1,""],[195076,1,""],[195077,1,""],[195078,1,""],[195079,1,""],[195080,1,""],[195081,1,""],[195082,1,""],[195083,1,""],[195084,1,""],[195085,1,""],[195086,1,""],[195087,1,""],[195088,1,""],[195089,1,""],[195090,1,""],[195091,1,""],[195092,1,""],[195093,1,""],[195094,1,""],[195095,1,""],[195096,1,""],[195097,1,""],[195098,1,""],[195099,1,""],[195100,1,""],[195101,1,""],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var Ag=C((LL1,ef)=>{LL1.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var Dg=C((vZ0,Zg)=>{var uC=af(),t9=rf(),Fg=of(),{STATUS_MAPPING:z5}=Ag();function gC(A){return/[^\x00-\x7F]/u.test(A)}function Bg(A){let F=0,B=Fg.length-1;while(F<=B){let $=Math.floor((F+B)/2),Z=Fg[$],D=Array.isArray(Z[0])?Z[0][0]:Z[0],X=Array.isArray(Z[0])?Z[0][1]:Z[0];if(D<=A&&X>=A)return Z.slice(1);else if(D>A)B=$-1;else F=$+1}return null}function VL1(A,{transitionalProcessing:F}){let B="";for(let $ of A){let[Z,D]=Bg($.codePointAt(0));switch(Z){case z5.disallowed:B+=$;break;case z5.ignored:break;case z5.mapped:if(F&&$==="")B+="ss";else B+=D;break;case z5.deviation:if(F)B+=D;else B+=$;break;case z5.valid:B+=$;break}}return B}function NL1(A,{checkHyphens:F,checkBidi:B,checkJoiners:$,transitionalProcessing:Z,useSTD3ASCIIRules:D,isBidi:X}){if(A.length===0)return!0;if(A.normalize("NFC")!==A)return!1;let J=Array.from(A);if(F){if(J[2]==="-"&&J[3]==="-"||(A.startsWith("-")||A.endsWith("-")))return!1}if(!F){if(A.startsWith("xn--"))return!1}if(A.includes("."))return!1;if(t9.combiningMarks.test(J[0]))return!1;for(let Y of J){let W=Y.codePointAt(0),[G]=Bg(W);if(Z){if(G!==z5.valid)return!1}else if(G!==z5.valid&&G!==z5.deviation)return!1;if(D&&W<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test(Y))return!1}}if($){let Y=0;for(let[W,G]of J.entries())if(G===""||G===""){if(W>0){if(t9.combiningClassVirama.test(J[W-1]))continue;if(G===""){let Q=J.indexOf("",W+1),q=Q<0?J.slice(Y):J.slice(Y,Q);if(t9.validZWNJ.test(q.join(""))){Y=W+1;continue}}}return!1}}if(B&&X){let Y;if(t9.bidiS1LTR.test(J[0]))Y=!1;else if(t9.bidiS1RTL.test(J[0]))Y=!0;else return!1;if(Y){if(!t9.bidiS2.test(A)||!t9.bidiS3.test(A)||t9.bidiS4EN.test(A)&&t9.bidiS4AN.test(A))return!1}else if(!t9.bidiS5.test(A)||!t9.bidiS6.test(A))return!1}return!0}function ML1(A){let F=A.map((B)=>{if(B.startsWith("xn--"))try{return uC.decode(B.substring(4))}catch{return""}return B}).join(".");return t9.bidiDomain.test(F)}function $g(A,F){let B=VL1(A,F);B=B.normalize("NFC");let $=B.split("."),Z=ML1($),D=!1;for(let[X,J]of $.entries()){let Y=J,W=F.transitionalProcessing;if(Y.startsWith("xn--")){if(gC(Y)){D=!0;continue}try{Y=uC.decode(Y.substring(4))}catch{if(!F.ignoreInvalidPunycode){D=!0;continue}}if($[X]=Y,Y===""||!gC(Y))D=!0;W=!1}if(D)continue;if(!NL1(Y,{...F,transitionalProcessing:W,isBidi:Z}))D=!0}return{string:$.join("."),error:D}}function RL1(A,{checkHyphens:F=!1,checkBidi:B=!1,checkJoiners:$=!1,useSTD3ASCIIRules:Z=!1,verifyDNSLength:D=!1,transitionalProcessing:X=!1,ignoreInvalidPunycode:J=!1}={}){let Y=$g(A,{checkHyphens:F,checkBidi:B,checkJoiners:$,useSTD3ASCIIRules:Z,transitionalProcessing:X,ignoreInvalidPunycode:J}),W=Y.string.split(".");if(W=W.map((G)=>{if(gC(G))try{return`xn--${uC.encode(G)}`}catch{Y.error=!0}return G}),D){let G=W.join(".").length;if(G>253||G===0)Y.error=!0;for(let Q=0;Q<W.length;++Q)if(W[Q].length>63||W[Q].length===0){Y.error=!0;break}}if(Y.error)return null;return W.join(".")}function PL1(A,{checkHyphens:F=!1,checkBidi:B=!1,checkJoiners:$=!1,useSTD3ASCIIRules:Z=!1,transitionalProcessing:D=!1,ignoreInvalidPunycode:X=!1}={}){let J=$g(A,{checkHyphens:F,checkBidi:B,checkJoiners:$,useSTD3ASCIIRules:Z,transitionalProcessing:D,ignoreInvalidPunycode:X});return{domain:J.string,error:J.error}}Zg.exports={toASCII:RL1,toUnicode:PL1}});var vC=C((hZ0,Jg)=>{function yC(A){return A>=48&&A<=57}function Xg(A){return A>=65&&A<=90||A>=97&&A<=122}function jL1(A){return Xg(A)||yC(A)}function IL1(A){return yC(A)||A>=65&&A<=70||A>=97&&A<=102}Jg.exports={isASCIIDigit:yC,isASCIIAlpha:Xg,isASCIIAlphanumeric:jL1,isASCIIHex:IL1}});var eY=C((dZ0,Yg)=>{var TL1=new TextEncoder,OL1=new TextDecoder("utf-8",{ignoreBOM:!0});function SL1(A){return TL1.encode(A)}function kL1(A){return OL1.decode(A)}Yg.exports={utf8Encode:SL1,utf8DecodeWithoutBOM:kL1}});var AW=C((mZ0,Ug)=>{var{isASCIIHex:Wg}=vC(),{utf8Encode:Gg}=eY();function Q0(A){return A.codePointAt(0)}function _L1(A){let F=A.toString(16).toUpperCase();if(F.length===1)F=`0${F}`;return`%${F}`}function Qg(A){let F=new Uint8Array(A.byteLength),B=0;for(let $=0;$<A.byteLength;++$){let Z=A[$];if(Z!==37)F[B++]=Z;else if(Z===37&&(!Wg(A[$+1])||!Wg(A[$+2])))F[B++]=Z;else{let D=parseInt(String.fromCodePoint(A[$+1],A[$+2]),16);F[B++]=D,$+=2}}return F.slice(0,B)}function xL1(A){let F=Gg(A);return Qg(F)}function hC(A){return A<=31||A>126}var bL1=new Set([Q0(" "),Q0('"'),Q0("<"),Q0(">"),Q0("`")]);function fL1(A){return hC(A)||bL1.has(A)}var gL1=new Set([Q0(" "),Q0('"'),Q0("#"),Q0("<"),Q0(">")]);function dC(A){return hC(A)||gL1.has(A)}function uL1(A){return dC(A)||A===Q0("'")}var yL1=new Set([Q0("?"),Q0("`"),Q0("{"),Q0("}"),Q0("^")]);function zg(A){return dC(A)||yL1.has(A)}var vL1=new Set([Q0("/"),Q0(":"),Q0(";"),Q0("="),Q0("@"),Q0("["),Q0("\\"),Q0("]"),Q0("|")]);function qg(A){return zg(A)||vL1.has(A)}var hL1=new Set([Q0("$"),Q0("%"),Q0("&"),Q0("+"),Q0(",")]);function dL1(A){return qg(A)||hL1.has(A)}var mL1=new Set([Q0("!"),Q0("'"),Q0("("),Q0(")"),Q0("~")]);function cL1(A){return dL1(A)||mL1.has(A)}function Hg(A,F){let B=Gg(A),$="";for(let Z of B)if(!F(Z))$+=String.fromCharCode(Z);else $+=_L1(Z);return $}function lL1(A,F){return Hg(String.fromCodePoint(A),F)}function pL1(A,F,B=!1){let $="";for(let Z of A)if(B&&Z===" ")$+="+";else $+=Hg(Z,F);return $}Ug.exports={isC0ControlPercentEncode:hC,isFragmentPercentEncode:fL1,isQueryPercentEncode:dC,isSpecialQueryPercentEncode:uL1,isPathPercentEncode:zg,isUserinfoPercentEncode:qg,isURLEncodedPercentEncode:cL1,percentDecodeString:xL1,percentDecodeBytes:Qg,utf8PercentEncodeString:pL1,utf8PercentEncodeCodePoint:lL1}});var nC=C((Ew1,V4)=>{var iL1=Dg(),O6=vC(),{utf8DecodeWithoutBOM:nL1}=eY(),{percentDecodeString:sL1,utf8PercentEncodeCodePoint:BW,utf8PercentEncodeString:$W,isC0ControlPercentEncode:wg,isFragmentPercentEncode:aL1,isQueryPercentEncode:tL1,isSpecialQueryPercentEncode:rL1,isPathPercentEncode:oL1,isUserinfoPercentEncode:lC}=AW();function Z1(A){return A.codePointAt(0)}var Vg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},h1=Symbol("failure");function Cg(A){return[...A].length}function Kg(A,F){let B=A[F];return isNaN(B)?void 0:String.fromCodePoint(B)}function Eg(A){return A==="."||A.toLowerCase()==="%2e"}function eL1(A){return A=A.toLowerCase(),A===".."||A==="%2e."||A===".%2e"||A==="%2e%2e"}function Aw1(A,F){return O6.isASCIIAlpha(A)&&(F===Z1(":")||F===Z1("|"))}function Ng(A){return A.length===2&&O6.isASCIIAlpha(A.codePointAt(0))&&(A[1]===":"||A[1]==="|")}function Fw1(A){return A.length===2&&O6.isASCIIAlpha(A.codePointAt(0))&&A[1]===":"}function Mg(A){return A.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Bw1(A){return Mg(A)||A.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function FW(A){return Vg[A]!==void 0}function T6(A){return FW(A.scheme)}function mC(A){return!FW(A.scheme)}function Rg(A){return Vg[A]}function Pg(A){if(A==="")return h1;let F=10;if(A.length>=2&&A.charAt(0)==="0"&&A.charAt(1).toLowerCase()==="x")A=A.substring(2),F=16;else if(A.length>=2&&A.charAt(0)==="0")A=A.substring(1),F=8;if(A==="")return 0;let B=/[^0-7]/u;if(F===10)B=/[^0-9]/u;if(F===16)B=/[^0-9A-Fa-f]/u;if(B.test(A))return h1;return parseInt(A,F)}function $w1(A){let F=A.split(".");if(F[F.length-1]===""){if(F.length>1)F.pop()}if(F.length>4)return h1;let B=[];for(let D of F){let X=Pg(D);if(X===h1)return h1;B.push(X)}for(let D=0;D<B.length-1;++D)if(B[D]>255)return h1;if(B[B.length-1]>=256**(5-B.length))return h1;let $=B.pop(),Z=0;for(let D of B)$+=D*256**(3-Z),++Z;return $}function Zw1(A){let F="",B=A;for(let $=1;$<=4;++$){if(F=String(B%256)+F,$!==4)F=`.${F}`;B=Math.floor(B/256)}return F}function Dw1(A){let F=[0,0,0,0,0,0,0,0],B=0,$=null,Z=0;if(A=Array.from(A,(D)=>D.codePointAt(0)),A[Z]===Z1(":")){if(A[Z+1]!==Z1(":"))return h1;Z+=2,++B,$=B}while(Z<A.length){if(B===8)return h1;if(A[Z]===Z1(":")){if($!==null)return h1;++Z,++B,$=B;continue}let D=0,X=0;while(X<4&&O6.isASCIIHex(A[Z]))D=D*16+parseInt(Kg(A,Z),16),++Z,++X;if(A[Z]===Z1(".")){if(X===0)return h1;if(Z-=X,B>6)return h1;let J=0;while(A[Z]!==void 0){let Y=null;if(J>0)if(A[Z]===Z1(".")&&J<4)++Z;else return h1;if(!O6.isASCIIDigit(A[Z]))return h1;while(O6.isASCIIDigit(A[Z])){let W=parseInt(Kg(A,Z));if(Y===null)Y=W;else if(Y===0)return h1;else Y=Y*10+W;if(Y>255)return h1;++Z}if(F[B]=F[B]*256+Y,++J,J===2||J===4)++B}if(J!==4)return h1;break}else if(A[Z]===Z1(":")){if(++Z,A[Z]===void 0)return h1}else if(A[Z]!==void 0)return h1;F[B]=D,++B}if($!==null){let D=B-$;B=7;while(B!==0&&D>0){let X=F[$+D-1];F[$+D-1]=F[B],F[B]=X,--B,--D}}else if($===null&&B!==8)return h1;return F}function Xw1(A){let F="",B=Ww1(A),$=!1;for(let Z=0;Z<=7;++Z){if($&&A[Z]===0)continue;else if($)$=!1;if(B===Z){F+=Z===0?"::":":",$=!0;continue}if(F+=A[Z].toString(16),Z!==7)F+=":"}return F}function cC(A,F=!1){if(A[0]==="["){if(A[A.length-1]!=="]")return h1;return Dw1(A.substring(1,A.length-1))}if(F)return Yw1(A);let B=nL1(sL1(A)),$=Gw1(B);if($===h1)return h1;if(Jw1($))return $w1($);return $}function Jw1(A){let F=A.split(".");if(F[F.length-1]===""){if(F.length===1)return!1;F.pop()}let B=F[F.length-1];if(Pg(B)!==h1)return!0;if(/^[0-9]+$/u.test(B))return!0;return!1}function Yw1(A){if(Mg(A))return h1;return $W(A,wg)}function Ww1(A){let F=null,B=1,$=null,Z=0;for(let D=0;D<A.length;++D)if(A[D]!==0){if(Z>B)F=$,B=Z;$=null,Z=0}else{if($===null)$=D;++Z}if(Z>B)return $;return F}function pC(A){if(typeof A==="number")return Zw1(A);if(A instanceof Array)return`[${Xw1(A)}]`;return A}function Gw1(A,F=!1){let B=iL1.toASCII(A,{checkHyphens:F,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:F,transitionalProcessing:!1,verifyDNSLength:F,ignoreInvalidPunycode:!1});if(B===null)return h1;if(!F){if(B==="")return h1;if(Bw1(B))return h1}return B}function Qw1(A){let F=0,B=A.length;for(;F<B;++F)if(A.charCodeAt(F)>32)break;for(;B>F;--B)if(A.charCodeAt(B-1)>32)break;return A.substring(F,B)}function zw1(A){return A.replace(/\u0009|\u000A|\u000D/ug,"")}function jg(A){let{path:F}=A;if(F.length===0)return;if(A.scheme==="file"&&F.length===1&&Hw1(F[0]))return;F.pop()}function Ig(A){return A.username!==""||A.password!==""}function qw1(A){return A.host===null||A.host===""||A.scheme==="file"}function dZ(A){return typeof A.path==="string"}function Hw1(A){return/^[A-Za-z]:$/u.test(A)}function x2(A,F,B,$,Z){if(this.pointer=0,this.input=A,this.base=F||null,this.encodingOverride=B||"utf-8",this.stateOverride=Z,this.url=$,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let X=Qw1(this.input);if(X!==this.input)this.parseError=!0;this.input=X}let D=zw1(this.input);if(D!==this.input)this.parseError=!0;this.input=D,this.state=Z||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(X)=>X.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let X=this.input[this.pointer],J=isNaN(X)?void 0:String.fromCodePoint(X),Y=this[`parse ${this.state}`](X,J);if(!Y)break;else if(Y===h1){this.failure=!0;break}}}x2.prototype["parse scheme start"]=function A(F,B){if(O6.isASCIIAlpha(F))this.buffer+=B.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,h1;return!0};x2.prototype["parse scheme"]=function A(F,B){if(O6.isASCIIAlphanumeric(F)||F===Z1("+")||F===Z1("-")||F===Z1("."))this.buffer+=B.toLowerCase();else if(F===Z1(":")){if(this.stateOverride){if(T6(this.url)&&!FW(this.buffer))return!1;if(!T6(this.url)&&FW(this.buffer))return!1;if((Ig(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===Rg(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==Z1("/")||this.input[this.pointer+2]!==Z1("/"))this.parseError=!0;this.state="file"}else if(T6(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(T6(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===Z1("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,h1;return!0};x2.prototype["parse no scheme"]=function A(F){if(this.base===null||dZ(this.base)&&F!==Z1("#"))return h1;else if(dZ(this.base)&&F===Z1("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};x2.prototype["parse special relative or authority"]=function A(F){if(F===Z1("/")&&this.input[this.pointer+1]===Z1("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};x2.prototype["parse path or authority"]=function A(F){if(F===Z1("/"))this.state="authority";else this.state="path",--this.pointer;return!0};x2.prototype["parse relative"]=function A(F){if(this.url.scheme=this.base.scheme,F===Z1("/"))this.state="relative slash";else if(T6(this.url)&&F===Z1("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===Z1("?"))this.url.query="",this.state="query";else if(F===Z1("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};x2.prototype["parse relative slash"]=function A(F){if(T6(this.url)&&(F===Z1("/")||F===Z1("\\"))){if(F===Z1("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(F===Z1("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};x2.prototype["parse special authority slashes"]=function A(F){if(F===Z1("/")&&this.input[this.pointer+1]===Z1("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};x2.prototype["parse special authority ignore slashes"]=function A(F){if(F!==Z1("/")&&F!==Z1("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};x2.prototype["parse authority"]=function A(F,B){if(F===Z1("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let $=Cg(this.buffer);for(let Z=0;Z<$;++Z){let D=this.buffer.codePointAt(Z);if(D===Z1(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let X=BW(D,lC);if(this.passwordTokenSeenFlag)this.url.password+=X;else this.url.username+=X}this.buffer=""}else if(isNaN(F)||F===Z1("/")||F===Z1("?")||F===Z1("#")||T6(this.url)&&F===Z1("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,h1;this.pointer-=Cg(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=B;return!0};x2.prototype["parse hostname"]=x2.prototype["parse host"]=function A(F,B){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(F===Z1(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,h1;if(this.stateOverride==="hostname")return!1;let $=cC(this.buffer,mC(this.url));if($===h1)return h1;this.url.host=$,this.buffer="",this.state="port"}else if(isNaN(F)||F===Z1("/")||F===Z1("?")||F===Z1("#")||T6(this.url)&&F===Z1("\\")){if(--this.pointer,T6(this.url)&&this.buffer==="")return this.parseError=!0,h1;else if(this.stateOverride&&this.buffer===""&&(Ig(this.url)||this.url.port!==null))return this.parseError=!0,!1;let $=cC(this.buffer,mC(this.url));if($===h1)return h1;if(this.url.host=$,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(F===Z1("["))this.arrFlag=!0;else if(F===Z1("]"))this.arrFlag=!1;this.buffer+=B}return!0};x2.prototype["parse port"]=function A(F,B){if(O6.isASCIIDigit(F))this.buffer+=B;else if(isNaN(F)||F===Z1("/")||F===Z1("?")||F===Z1("#")||T6(this.url)&&F===Z1("\\")||this.stateOverride){if(this.buffer!==""){let $=parseInt(this.buffer);if($>65535)return this.parseError=!0,h1;this.url.port=$===Rg(this.url.scheme)?null:$,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,h1;return!0};var Uw1=new Set([Z1("/"),Z1("\\"),Z1("?"),Z1("#")]);function Tg(A,F){let B=A.length-F;return B>=2&&Aw1(A[F],A[F+1])&&(B===2||Uw1.has(A[F+2]))}x2.prototype["parse file"]=function A(F){if(this.url.scheme="file",this.url.host="",F===Z1("/")||F===Z1("\\")){if(F===Z1("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===Z1("?"))this.url.query="",this.state="query";else if(F===Z1("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F)){if(this.url.query=null,!Tg(this.input,this.pointer))jg(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};x2.prototype["parse file slash"]=function A(F){if(F===Z1("/")||F===Z1("\\")){if(F===Z1("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!Tg(this.input,this.pointer)&&Fw1(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};x2.prototype["parse file host"]=function A(F,B){if(isNaN(F)||F===Z1("/")||F===Z1("\\")||F===Z1("?")||F===Z1("#"))if(--this.pointer,!this.stateOverride&&Ng(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let $=cC(this.buffer,mC(this.url));if($===h1)return h1;if($==="localhost")$="";if(this.url.host=$,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=B;return!0};x2.prototype["parse path start"]=function A(F){if(T6(this.url)){if(F===Z1("\\"))this.parseError=!0;if(this.state="path",F!==Z1("/")&&F!==Z1("\\"))--this.pointer}else if(!this.stateOverride&&F===Z1("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&F===Z1("#"))this.url.fragment="",this.state="fragment";else if(F!==void 0){if(this.state="path",F!==Z1("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};x2.prototype["parse path"]=function A(F){if(isNaN(F)||F===Z1("/")||T6(this.url)&&F===Z1("\\")||!this.stateOverride&&(F===Z1("?")||F===Z1("#"))){if(T6(this.url)&&F===Z1("\\"))this.parseError=!0;if(eL1(this.buffer)){if(jg(this.url),F!==Z1("/")&&!(T6(this.url)&&F===Z1("\\")))this.url.path.push("")}else if(Eg(this.buffer)&&F!==Z1("/")&&!(T6(this.url)&&F===Z1("\\")))this.url.path.push("");else if(!Eg(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&Ng(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",F===Z1("?"))this.url.query="",this.state="query";if(F===Z1("#"))this.url.fragment="",this.state="fragment"}else{if(F===Z1("%")&&(!O6.isASCIIHex(this.input[this.pointer+1])||!O6.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=BW(F,oL1)}return!0};x2.prototype["parse opaque path"]=function A(F){if(F===Z1("?"))this.url.query="",this.state="query";else if(F===Z1("#"))this.url.fragment="",this.state="fragment";else if(F===Z1(" ")){let B=this.input[this.pointer+1];if(B===Z1("?")||B===Z1("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(F)&&F!==Z1("%"))this.parseError=!0;if(F===Z1("%")&&(!O6.isASCIIHex(this.input[this.pointer+1])||!O6.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(F))this.url.path+=BW(F,wg)}return!0};x2.prototype["parse query"]=function A(F,B){if(!T6(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&F===Z1("#")||isNaN(F)){let $=T6(this.url)?rL1:tL1;if(this.url.query+=$W(this.buffer,$),this.buffer="",F===Z1("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(F)){if(F===Z1("%")&&(!O6.isASCIIHex(this.input[this.pointer+1])||!O6.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=B}return!0};x2.prototype["parse fragment"]=function A(F){if(!isNaN(F)){if(F===Z1("%")&&(!O6.isASCIIHex(this.input[this.pointer+1])||!O6.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=BW(F,aL1)}return!0};function Cw1(A,F){let B=`${A.scheme}:`;if(A.host!==null){if(B+="//",A.username!==""||A.password!==""){if(B+=A.username,A.password!=="")B+=`:${A.password}`;B+="@"}if(B+=pC(A.host),A.port!==null)B+=`:${A.port}`}if(A.host===null&&!dZ(A)&&A.path.length>1&&A.path[0]==="")B+="/.";if(B+=iC(A),A.query!==null)B+=`?${A.query}`;if(!F&&A.fragment!==null)B+=`#${A.fragment}`;return B}function Kw1(A){let F=`${A.scheme}://`;if(F+=pC(A.host),A.port!==null)F+=`:${A.port}`;return F}function iC(A){if(dZ(A))return A.path;let F="";for(let B of A.path)F+=`/${B}`;return F}Ew1.serializeURL=Cw1;Ew1.serializePath=iC;Ew1.serializeURLOrigin=function(A){switch(A.scheme){case"blob":{let F=Ew1.parseURL(iC(A));if(F===null)return"null";if(F.scheme!=="http"&&F.scheme!=="https")return"null";return Ew1.serializeURLOrigin(F)}case"ftp":case"http":case"https":case"ws":case"wss":return Kw1({scheme:A.scheme,host:A.host,port:A.port});case"file":return"null";default:return"null"}};Ew1.basicURLParse=function(A,F){if(F===void 0)F={};let B=new x2(A,F.baseURL,F.encodingOverride,F.url,F.stateOverride);if(B.failure)return null;return B.url};Ew1.setTheUsername=function(A,F){A.username=$W(F,lC)};Ew1.setThePassword=function(A,F){A.password=$W(F,lC)};Ew1.serializeHost=pC;Ew1.cannotHaveAUsernamePasswordPort=qw1;Ew1.hasAnOpaquePath=dZ;Ew1.serializeInteger=function(A){return String(A)};Ew1.parseURL=function(A,F){if(F===void 0)F={};return Ew1.basicURLParse(A,{baseURL:F.baseURL,encodingOverride:F.encodingOverride})}});var sC=C((cZ0,gg)=>{var{utf8Encode:Tw1,utf8DecodeWithoutBOM:Sg}=eY(),{percentDecodeBytes:kg,utf8PercentEncodeString:_g,isURLEncodedPercentEncode:xg}=AW();function bg(A){return A.codePointAt(0)}function Ow1(A){let F=_w1(A,bg("&")),B=[];for(let $ of F){if($.length===0)continue;let Z,D,X=$.indexOf(bg("="));if(X>=0)Z=$.slice(0,X),D=$.slice(X+1);else Z=$,D=new Uint8Array(0);Z=fg(Z,43,32),D=fg(D,43,32);let J=Sg(kg(Z)),Y=Sg(kg(D));B.push([J,Y])}return B}function Sw1(A){return Ow1(Tw1(A))}function kw1(A){let F="";for(let[B,$]of A.entries()){let Z=_g($[0],xg,!0),D=_g($[1],xg,!0);if(B!==0)F+="&";F+=`${Z}=${D}`}return F}function _w1(A,F){let B=[],$=0,Z=A.indexOf(F);while(Z>=0)B.push(A.slice($,Z)),$=Z+1,Z=A.indexOf(F,$);if($!==A.length)B.push(A.slice($));return B}function fg(A,F,B){let $=A.indexOf(F);while($>=0)A[$]=B,$=A.indexOf(F,$+1);return A}gg.exports={parseUrlencodedString:Sw1,serializeUrlencoded:kw1}});var yg=C((xw1)=>{var ug=tY(),ZW=oY();xw1.convert=(A,F,{context:B="The provided value"}={})=>{if(typeof F!=="function")throw new A.TypeError(B+" is not a function");function $(...Z){let D=ZW.tryWrapperForImpl(this),X;for(let J=0;J<Z.length;J++)Z[J]=ZW.tryWrapperForImpl(Z[J]);return X=Reflect.apply(F,D,Z),X=ug.any(X,{context:B,globals:A}),X}return $.construct=(...Z)=>{for(let X=0;X<Z.length;X++)Z[X]=ZW.tryWrapperForImpl(Z[X]);let D=Reflect.construct(F,Z);return D=ug.any(D,{context:B,globals:A}),D},$[ZW.wrapperSymbol]=F,$.objectReference=F,$}});var vg=C((fw1)=>{var aC=sC();fw1.implementation=class A{constructor(F,B,{doNotStripQMark:$=!1}){let Z=B[0];if(this._list=[],this._url=null,!$&&typeof Z==="string"&&Z[0]==="?")Z=Z.slice(1);if(Array.isArray(Z))for(let D of Z){if(D.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([D[0],D[1]])}else if(typeof Z==="object"&&Object.getPrototypeOf(Z)===null)for(let D of Object.keys(Z)){let X=Z[D];this._list.push([D,X])}else this._list=aC.parseUrlencodedString(Z)}_updateSteps(){if(this._url!==null){let F=aC.serializeUrlencoded(this._list);if(F==="")F=null;this._url._url.query=F}}get size(){return this._list.length}append(F,B){this._list.push([F,B]),this._updateSteps()}delete(F,B){let $=0;while($<this._list.length)if(this._list[$][0]===F&&(B===void 0||this._list[$][1]===B))this._list.splice($,1);else $++;this._updateSteps()}get(F){for(let B of this._list)if(B[0]===F)return B[1];return null}getAll(F){let B=[];for(let $ of this._list)if($[0]===F)B.push($[1]);return B}has(F,B){for(let $ of this._list)if($[0]===F&&(B===void 0||$[1]===B))return!0;return!1}set(F,B){let $=!1,Z=0;while(Z<this._list.length)if(this._list[Z][0]===F)if($)this._list.splice(Z,1);else $=!0,this._list[Z][1]=B,Z++;else Z++;if(!$)this._list.push([F,B]);this._updateSteps()}sort(){this._list.sort((F,B)=>{if(F[0]<B[0])return-1;if(F[0]>B[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return aC.serializeUrlencoded(this._list)}}});var rC=C((vw1)=>{var p4=tY(),l0=oY(),uw1=yg(),hg=l0.newObjectInRealm,p2=l0.implSymbol,dg=l0.ctorRegistrySymbol;vw1.is=(A)=>{return l0.isObject(A)&&l0.hasOwn(A,p2)&&A[p2]instanceof q5.implementation};vw1.isImpl=(A)=>{return l0.isObject(A)&&A instanceof q5.implementation};vw1.convert=(A,F,{context:B="The provided value"}={})=>{if(vw1.is(F))return l0.implForWrapper(F);throw new A.TypeError(`${B} is not of type 'URLSearchParams'.`)};vw1.createDefaultIterator=(A,F,B)=>{let Z=A[dg]["URLSearchParams Iterator"],D=Object.create(Z);return Object.defineProperty(D,l0.iterInternalSymbol,{value:{target:F,kind:B,index:0},configurable:!0}),D};function mg(A,F){let B;if(F!==void 0)B=F.prototype;if(!l0.isObject(B))B=A[dg].URLSearchParams.prototype;return Object.create(B)}vw1.create=(A,F,B)=>{let $=mg(A);return vw1.setup($,A,F,B)};vw1.createImpl=(A,F,B)=>{let $=vw1.create(A,F,B);return l0.implForWrapper($)};vw1._internalSetup=(A,F)=>{};vw1.setup=(A,F,B=[],$={})=>{if($.wrapper=A,vw1._internalSetup(A,F),Object.defineProperty(A,p2,{value:new q5.implementation(F,B,$),configurable:!0}),A[p2][l0.wrapperSymbol]=A,q5.init)q5.init(A[p2]);return A};vw1.new=(A,F)=>{let B=mg(A,F);if(vw1._internalSetup(B,A),Object.defineProperty(B,p2,{value:Object.create(q5.implementation.prototype),configurable:!0}),B[p2][l0.wrapperSymbol]=B,q5.init)q5.init(B[p2]);return B[p2]};var yw1=new Set(["Window","Worker"]);vw1.install=(A,F)=>{if(!F.some((Z)=>yw1.has(Z)))return;let B=l0.initCtorRegistry(A);class ${constructor(){let Z=[];{let D=arguments[0];if(D!==void 0)if(l0.isObject(D))if(D[Symbol.iterator]!==void 0)if(!l0.isObject(D))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let X=[],J=D;for(let Y of J){if(!l0.isObject(Y))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let W=[],G=Y;for(let Q of G)Q=p4.USVString(Q,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:A}),W.push(Q);Y=W}X.push(Y)}D=X}else if(!l0.isObject(D))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let X=Object.create(null);for(let J of Reflect.ownKeys(D)){let Y=Object.getOwnPropertyDescriptor(D,J);if(Y&&Y.enumerable){let W=J;W=p4.USVString(W,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:A});let G=D[J];G=p4.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:A}),X[W]=G}}D=X}else D=p4.USVString(D,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:A});else D="";Z.push(D)}return vw1.setup(Object.create(new.target.prototype),A,Z)}append(Z,D){let X=this!==null&&this!==void 0?this:A;if(!vw1.is(X))throw new A.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new A.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=p4.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:A}),J.push(Y)}{let Y=arguments[1];Y=p4.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:A}),J.push(Y)}return l0.tryWrapperForImpl(X[p2].append(...J))}delete(Z){let D=this!==null&&this!==void 0?this:A;if(!vw1.is(D))throw new A.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let J=arguments[0];J=p4.USVString(J,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:A}),X.push(J)}{let J=arguments[1];if(J!==void 0)J=p4.USVString(J,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:A});X.push(J)}return l0.tryWrapperForImpl(D[p2].delete(...X))}get(Z){let D=this!==null&&this!==void 0?this:A;if(!vw1.is(D))throw new A.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let J=arguments[0];J=p4.USVString(J,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:A}),X.push(J)}return D[p2].get(...X)}getAll(Z){let D=this!==null&&this!==void 0?this:A;if(!vw1.is(D))throw new A.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let J=arguments[0];J=p4.USVString(J,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:A}),X.push(J)}return l0.tryWrapperForImpl(D[p2].getAll(...X))}has(Z){let D=this!==null&&this!==void 0?this:A;if(!vw1.is(D))throw new A.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let J=arguments[0];J=p4.USVString(J,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:A}),X.push(J)}{let J=arguments[1];if(J!==void 0)J=p4.USVString(J,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:A});X.push(J)}return D[p2].has(...X)}set(Z,D){let X=this!==null&&this!==void 0?this:A;if(!vw1.is(X))throw new A.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new A.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=p4.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:A}),J.push(Y)}{let Y=arguments[1];Y=p4.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:A}),J.push(Y)}return l0.tryWrapperForImpl(X[p2].set(...J))}sort(){let Z=this!==null&&this!==void 0?this:A;if(!vw1.is(Z))throw new A.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return l0.tryWrapperForImpl(Z[p2].sort())}toString(){let Z=this!==null&&this!==void 0?this:A;if(!vw1.is(Z))throw new A.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return Z[p2].toString()}keys(){if(!vw1.is(this))throw new A.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return vw1.createDefaultIterator(A,this,"key")}values(){if(!vw1.is(this))throw new A.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return vw1.createDefaultIterator(A,this,"value")}entries(){if(!vw1.is(this))throw new A.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return vw1.createDefaultIterator(A,this,"key+value")}forEach(Z){if(!vw1.is(this))throw new A.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");Z=uw1.convert(A,Z,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let D=arguments[1],X=Array.from(this[p2]),J=0;while(J<X.length){let[Y,W]=X[J].map(l0.tryWrapperForImpl);Z.call(D,W,Y,this),X=Array.from(this[p2]),J++}}get size(){let Z=this!==null&&this!==void 0?this:A;if(!vw1.is(Z))throw new A.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return Z[p2].size}}Object.defineProperties($.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:$.prototype.entries,configurable:!0,writable:!0}}),B.URLSearchParams=$,B["URLSearchParams Iterator"]=Object.create(B["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),l0.define(B["URLSearchParams Iterator"],{next(){let Z=this&&this[l0.iterInternalSymbol];if(!Z)throw new A.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:D,kind:X,index:J}=Z,Y=Array.from(D[p2]),W=Y.length;if(J>=W)return hg(A,{value:void 0,done:!0});let G=Y[J];return Z.index=J+1,hg(A,l0.iteratorResult(G.map(l0.tryWrapperForImpl),X))}}),Object.defineProperty(A,"URLSearchParams",{configurable:!0,writable:!0,value:$})};var q5=vg()});var ig=C((iw1)=>{var y0=nC(),pg=sC(),pw1=rC();iw1.implementation=class A{constructor(F,[B,$]){let Z=null;if($!==void 0){if(Z=y0.basicURLParse($),Z===null)throw new TypeError(`Invalid base URL: ${$}`)}let D=y0.basicURLParse(B,{baseURL:Z});if(D===null)throw new TypeError(`Invalid URL: ${B}`);let X=D.query!==null?D.query:"";this._url=D,this._query=pw1.createImpl(F,[X],{doNotStripQMark:!0}),this._query._url=this}static parse(F,B,$){try{return new A(F,[B,$])}catch{return null}}static canParse(F,B){let $=null;if(B!==void 0){if($=y0.basicURLParse(B),$===null)return!1}if(y0.basicURLParse(F,{baseURL:$})===null)return!1;return!0}get href(){return y0.serializeURL(this._url)}set href(F){let B=y0.basicURLParse(F);if(B===null)throw new TypeError(`Invalid URL: ${F}`);this._url=B,this._query._list.splice(0);let{query:$}=B;if($!==null)this._query._list=pg.parseUrlencodedString($)}get origin(){return y0.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(F){y0.basicURLParse(`${F}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(F){if(y0.cannotHaveAUsernamePasswordPort(this._url))return;y0.setTheUsername(this._url,F)}get password(){return this._url.password}set password(F){if(y0.cannotHaveAUsernamePasswordPort(this._url))return;y0.setThePassword(this._url,F)}get host(){let F=this._url;if(F.host===null)return"";if(F.port===null)return y0.serializeHost(F.host);return`${y0.serializeHost(F.host)}:${y0.serializeInteger(F.port)}`}set host(F){if(y0.hasAnOpaquePath(this._url))return;y0.basicURLParse(F,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return y0.serializeHost(this._url.host)}set hostname(F){if(y0.hasAnOpaquePath(this._url))return;y0.basicURLParse(F,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return y0.serializeInteger(this._url.port)}set port(F){if(y0.cannotHaveAUsernamePasswordPort(this._url))return;if(F==="")this._url.port=null;else y0.basicURLParse(F,{url:this._url,stateOverride:"port"})}get pathname(){return y0.serializePath(this._url)}set pathname(F){if(y0.hasAnOpaquePath(this._url))return;this._url.path=[],y0.basicURLParse(F,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(F){let B=this._url;if(F===""){B.query=null,this._query._list=[];return}let $=F[0]==="?"?F.substring(1):F;B.query="",y0.basicURLParse($,{url:B,stateOverride:"query"}),this._query._list=pg.parseUrlencodedString($)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(F){if(F===""){this._url.fragment=null;return}let B=F[0]==="#"?F.substring(1):F;this._url.fragment="",y0.basicURLParse(B,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var tg=C((tw1)=>{var B4=tY(),i4=oY(),M0=i4.implSymbol,sw1=i4.ctorRegistrySymbol;tw1.is=(A)=>{return i4.isObject(A)&&i4.hasOwn(A,M0)&&A[M0]instanceof K8.implementation};tw1.isImpl=(A)=>{return i4.isObject(A)&&A instanceof K8.implementation};tw1.convert=(A,F,{context:B="The provided value"}={})=>{if(tw1.is(F))return i4.implForWrapper(F);throw new A.TypeError(`${B} is not of type 'URL'.`)};function ng(A,F){let B;if(F!==void 0)B=F.prototype;if(!i4.isObject(B))B=A[sw1].URL.prototype;return Object.create(B)}tw1.create=(A,F,B)=>{let $=ng(A);return tw1.setup($,A,F,B)};tw1.createImpl=(A,F,B)=>{let $=tw1.create(A,F,B);return i4.implForWrapper($)};tw1._internalSetup=(A,F)=>{};tw1.setup=(A,F,B=[],$={})=>{if($.wrapper=A,tw1._internalSetup(A,F),Object.defineProperty(A,M0,{value:new K8.implementation(F,B,$),configurable:!0}),A[M0][i4.wrapperSymbol]=A,K8.init)K8.init(A[M0]);return A};tw1.new=(A,F)=>{let B=ng(A,F);if(tw1._internalSetup(B,A),Object.defineProperty(B,M0,{value:Object.create(K8.implementation.prototype),configurable:!0}),B[M0][i4.wrapperSymbol]=B,K8.init)K8.init(B[M0]);return B[M0]};var aw1=new Set(["Window","Worker"]);tw1.install=(A,F)=>{if(!F.some((Z)=>aw1.has(Z)))return;let B=i4.initCtorRegistry(A);class ${constructor(Z){if(arguments.length<1)throw new A.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let D=[];{let X=arguments[0];X=B4.USVString(X,{context:"Failed to construct 'URL': parameter 1",globals:A}),D.push(X)}{let X=arguments[1];if(X!==void 0)X=B4.USVString(X,{context:"Failed to construct 'URL': parameter 2",globals:A});D.push(X)}return tw1.setup(Object.create(new.target.prototype),A,D)}toJSON(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return Z[M0].toJSON()}get href(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get href' called on an object that is not a valid instance of URL.");return Z[M0].href}set href(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set href' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:A}),D[M0].href=Z}toString(){let Z=this;if(!tw1.is(Z))throw new A.TypeError("'toString' called on an object that is not a valid instance of URL.");return Z[M0].href}get origin(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get origin' called on an object that is not a valid instance of URL.");return Z[M0].origin}get protocol(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return Z[M0].protocol}set protocol(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set protocol' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:A}),D[M0].protocol=Z}get username(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get username' called on an object that is not a valid instance of URL.");return Z[M0].username}set username(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set username' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:A}),D[M0].username=Z}get password(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get password' called on an object that is not a valid instance of URL.");return Z[M0].password}set password(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set password' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:A}),D[M0].password=Z}get host(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get host' called on an object that is not a valid instance of URL.");return Z[M0].host}set host(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set host' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:A}),D[M0].host=Z}get hostname(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return Z[M0].hostname}set hostname(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set hostname' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:A}),D[M0].hostname=Z}get port(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get port' called on an object that is not a valid instance of URL.");return Z[M0].port}set port(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set port' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:A}),D[M0].port=Z}get pathname(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return Z[M0].pathname}set pathname(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set pathname' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:A}),D[M0].pathname=Z}get search(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get search' called on an object that is not a valid instance of URL.");return Z[M0].search}set search(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set search' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:A}),D[M0].search=Z}get searchParams(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return i4.getSameObject(this,"searchParams",()=>{return i4.tryWrapperForImpl(Z[M0].searchParams)})}get hash(){let Z=this!==null&&this!==void 0?this:A;if(!tw1.is(Z))throw new A.TypeError("'get hash' called on an object that is not a valid instance of URL.");return Z[M0].hash}set hash(Z){let D=this!==null&&this!==void 0?this:A;if(!tw1.is(D))throw new A.TypeError("'set hash' called on an object that is not a valid instance of URL.");Z=B4.USVString(Z,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:A}),D[M0].hash=Z}static parse(Z){if(arguments.length<1)throw new A.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let D=[];{let X=arguments[0];X=B4.USVString(X,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:A}),D.push(X)}{let X=arguments[1];if(X!==void 0)X=B4.USVString(X,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:A});D.push(X)}return i4.tryWrapperForImpl(K8.implementation.parse(A,...D))}static canParse(Z){if(arguments.length<1)throw new A.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let D=[];{let X=arguments[0];X=B4.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:A}),D.push(X)}{let X=arguments[1];if(X!==void 0)X=B4.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:A});D.push(X)}return K8.implementation.canParse(...D)}}if(Object.defineProperties($.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties($,{parse:{enumerable:!0},canParse:{enumerable:!0}}),B.URL=$,Object.defineProperty(A,"URL",{configurable:!0,writable:!0,value:$}),F.includes("Window"))Object.defineProperty(A,"webkitURL",{configurable:!0,writable:!0,value:$})};var K8=ig()});var rg=C((ZV1)=>{var BV1=tg(),$V1=rC();ZV1.URL=BV1;ZV1.URLSearchParams=$V1});var eg=C((WV1)=>{var{URL:JV1,URLSearchParams:YV1}=rg(),c7=nC(),og=AW(),XW={Array,Object,Promise,String,TypeError};JV1.install(XW,["Window"]);YV1.install(XW,["Window"]);WV1.URL=XW.URL;WV1.URLSearchParams=XW.URLSearchParams;WV1.parseURL=c7.parseURL;WV1.basicURLParse=c7.basicURLParse;WV1.serializeURL=c7.serializeURL;WV1.serializePath=c7.serializePath;WV1.serializeHost=c7.serializeHost;WV1.serializeInteger=c7.serializeInteger;WV1.serializeURLOrigin=c7.serializeURLOrigin;WV1.setTheUsername=c7.setTheUsername;WV1.setThePassword=c7.setThePassword;WV1.cannotHaveAUsernamePasswordPort=c7.cannotHaveAUsernamePasswordPort;WV1.hasAnOpaquePath=c7.hasAnOpaquePath;WV1.percentDecodeString=og.percentDecodeString;WV1.percentDecodeBytes=og.percentDecodeBytes});var Fu=C((r9)=>{var PV1=r9&&r9.__createBinding||(Object.create?function(A,F,B,$){if($===void 0)$=B;var Z=Object.getOwnPropertyDescriptor(F,B);if(!Z||("get"in Z?!F.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return F[B]}};Object.defineProperty(A,$,Z)}:function(A,F,B,$){if($===void 0)$=B;A[$]=F[B]}),jV1=r9&&r9.__setModuleDefault||(Object.create?function(A,F){Object.defineProperty(A,"default",{enumerable:!0,value:F})}:function(A,F){A.default=F}),IV1=r9&&r9.__importStar||function(A){if(A&&A.__esModule)return A;var F={};if(A!=null){for(var B in A)if(B!=="default"&&Object.prototype.hasOwnProperty.call(A,B))PV1(F,A,B)}return jV1(F,A),F};Object.defineProperty(r9,"__esModule",{value:!0});r9.redactConnectionString=r9.redactValidConnectionString=void 0;var Au=IV1(eC());function TV1(A,F){var B,$;let Z=A.clone(),D=(B=F===null||F===void 0?void 0:F.replacementString)!==null&&B!==void 0?B:"_credentials_",X=($=F===null||F===void 0?void 0:F.redactUsernames)!==null&&$!==void 0?$:!0;if((Z.username||Z.password)&&X)Z.username=D,Z.password="";else if(Z.password)Z.password=D;if(Z.searchParams.has("authMechanismProperties")){let J=new Au.CommaAndColonSeparatedRecord(Z.searchParams.get("authMechanismProperties"));if(J.get("AWS_SESSION_TOKEN"))J.set("AWS_SESSION_TOKEN",D),Z.searchParams.set("authMechanismProperties",J.toString())}if(Z.searchParams.has("tlsCertificateKeyFilePassword"))Z.searchParams.set("tlsCertificateKeyFilePassword",D);if(Z.searchParams.has("proxyUsername")&&X)Z.searchParams.set("proxyUsername",D);if(Z.searchParams.has("proxyPassword"))Z.searchParams.set("proxyPassword",D);return Z}r9.redactValidConnectionString=TV1;function OV1(A,F){var B,$;let Z=(B=F===null||F===void 0?void 0:F.replacementString)!==null&&B!==void 0?B:"<credentials>",D=($=F===null||F===void 0?void 0:F.redactUsernames)!==null&&$!==void 0?$:!0,X;try{X=new Au.default(A)}catch(W){}if(X)return F={...F,replacementString:"___credentials___"},X.redact(F).toString().replace(/___credentials___/g,Z);let J=Z,Y=[(W)=>W.replace(D?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${J}$3`),(W)=>W.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${J}`),(W)=>W.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${J}`),(W)=>D?W.replace(/(proxyUsername=)([^&]+)/gi,`$1${J}`):W,(W)=>W.replace(/(proxyPassword=)([^&]+)/gi,`$1${J}`)];for(let W of Y)A=W(A);return A}r9.redactConnectionString=OV1});var eC=C((FK)=>{Object.defineProperty(FK,"__esModule",{value:!0});FK.CommaAndColonSeparatedRecord=FK.ConnectionString=FK.redactConnectionString=void 0;var SV1=eg(),Bu=Fu();Object.defineProperty(FK,"redactConnectionString",{enumerable:!0,get:function(){return Bu.redactConnectionString}});var mZ="__this_is_a_placeholder__";function kV1(A){return A.startsWith("mongodb://")||A.startsWith("mongodb+srv://")}var _V1=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class AK extends Map{delete(A){return super.delete(this._normalizeKey(A))}get(A){return super.get(this._normalizeKey(A))}has(A){return super.has(this._normalizeKey(A))}set(A,F){return super.set(this._normalizeKey(A),F)}_normalizeKey(A){A=`${A}`;for(let F of this.keys())if(F.toLowerCase()===A.toLowerCase()){A=F;break}return A}}function xV1(A){return class F extends A{append(B,$){return super.append(this._normalizeKey(B),$)}delete(B){return super.delete(this._normalizeKey(B))}get(B){return super.get(this._normalizeKey(B))}getAll(B){return super.getAll(this._normalizeKey(B))}has(B){return super.has(this._normalizeKey(B))}set(B,$){return super.set(this._normalizeKey(B),$)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(B){return AK.prototype._normalizeKey.call(this,B)}}}class $u extends SV1.URL{}class E8 extends Error{get name(){return"MongoParseError"}}class cZ extends $u{constructor(A,F={}){var B;let{looseValidation:$}=F;if(!$&&!kV1(A))throw new E8('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let Z=A.match(_V1);if(!Z)throw new E8(`Invalid connection string "${A}"`);let{protocol:D,username:X,password:J,hosts:Y,rest:W}=(B=Z.groups)!==null&&B!==void 0?B:{};if(!$){if(!D||!Y)throw new E8(`Protocol and host list are required in "${A}"`);try{decodeURIComponent(X!==null&&X!==void 0?X:""),decodeURIComponent(J!==null&&J!==void 0?J:"")}catch(q){throw new E8(q.message)}let Q=/[:/?#[\]@]/gi;if(X===null||X===void 0?void 0:X.match(Q))throw new E8(`Username contains unescaped characters ${X}`);if(!X||!J){let q=A.replace(`${D}://`,"");if(q.startsWith("@")||q.startsWith(":"))throw new E8("URI contained empty userinfo section")}if(J===null||J===void 0?void 0:J.match(Q))throw new E8("Password contains unescaped characters")}let G="";if(typeof X==="string")G+=X;if(typeof J==="string")G+=`:${J}`;if(G)G+="@";try{super(`${D.toLowerCase()}://${G}${mZ}${W}`)}catch(Q){if($)new cZ(A,{...F,looseValidation:!1});if(typeof Q.message==="string")Q.message=Q.message.replace(mZ,Y);throw Q}if(this._hosts=Y.split(","),!$){if(this.isSRV&&this.hosts.length!==1)throw new E8("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((Q)=>Q.includes(":")))throw new E8("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,xV1(this.searchParams.constructor).prototype)}get host(){return mZ}set host(A){throw new Error("No single host for connection string")}get hostname(){return mZ}set hostname(A){throw new Error("No single host for connection string")}get port(){return""}set port(A){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(A){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(A){this._hosts=A}toString(){return super.toString().replace(mZ,this.hosts.join(","))}clone(){return new cZ(this.toString(),{looseValidation:!0})}redact(A){return Bu.redactValidConnectionString(this,A)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:A,origin:F,protocol:B,username:$,password:Z,hosts:D,pathname:X,search:J,searchParams:Y,hash:W}=this;return{href:A,origin:F,protocol:B,username:$,password:Z,hosts:D,pathname:X,search:J,searchParams:Y,hash:W}}}FK.ConnectionString=cZ;class Zu extends AK{constructor(A){super();for(let F of(A!==null&&A!==void 0?A:"").split(",")){if(!F)continue;let B=F.indexOf(":");if(B===-1)this.set(F,"");else this.set(F.slice(0,B),F.slice(B+1))}}toString(){return[...this].map((A)=>A.join(":")).join(",")}}FK.CommaAndColonSeparatedRecord=Zu;FK.default=cZ});var pZ=C((qu)=>{Object.defineProperty(qu,"__esModule",{value:!0});qu.OpCompressedRequest=qu.OpMsgResponse=qu.OpMsgRequest=qu.DocumentSequence=qu.OpReply=qu.OpQueryRequest=void 0;var HB=C0(),lZ=X1(),BK=iZ(),zB=QA(),qB=0,gV1=2,uV1=4,yV1=8,vV1=16,hV1=32,dV1=64,mV1=128,cV1=1,lV1=2,pV1=4,iV1=8,nV1=HB.BSON.onDemand.ByteUtils.encodeUTF8Into;class ZK{constructor(A,F,B){this.moreToCome=!1;let $=`${A}.$cmd`;if(typeof A!=="string")throw new lZ.MongoRuntimeError("Database name must be a string for a query");if(F==null)throw new lZ.MongoRuntimeError("A query document must be specified for query");if($.indexOf("\x00")!==-1)throw new lZ.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=A,this.query=F,this.ns=$,this.numberToSkip=B.numberToSkip||0,this.numberToReturn=B.numberToReturn||0,this.returnFieldSelector=B.returnFieldSelector||void 0,this.requestId=B.requestId??ZK.getRequestId(),this.pre32Limit=B.pre32Limit,this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof B.secondaryOk==="boolean"?B.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=qB++}nextRequestId(){return qB+1}static getRequestId(){return++qB}toBin(){let A=[],F=null,B=0;if(this.tailable)B|=gV1;if(this.secondaryOk)B|=uV1;if(this.oplogReplay)B|=yV1;if(this.noCursorTimeout)B|=vV1;if(this.awaitData)B|=hV1;if(this.exhaust)B|=dV1;if(this.partial)B|=mV1;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let $=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);A.push($);let Z=HB.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(A.push(Z),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)F=HB.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),A.push(F);let D=$.length+Z.length+(F?F.length:0),X=4;return $[3]=D>>24&255,$[2]=D>>16&255,$[1]=D>>8&255,$[0]=D&255,$[X+3]=this.requestId>>24&255,$[X+2]=this.requestId>>16&255,$[X+1]=this.requestId>>8&255,$[X]=this.requestId&255,X=X+4,$[X+3]=0,$[X+2]=0,$[X+1]=0,$[X]=0,X=X+4,$[X+3]=zB.OP_QUERY>>24&255,$[X+2]=zB.OP_QUERY>>16&255,$[X+1]=zB.OP_QUERY>>8&255,$[X]=zB.OP_QUERY&255,X=X+4,$[X+3]=B>>24&255,$[X+2]=B>>16&255,$[X+1]=B>>8&255,$[X]=B&255,X=X+4,X=X+$.write(this.ns,X,"utf8")+1,$[X-1]=0,$[X+3]=this.numberToSkip>>24&255,$[X+2]=this.numberToSkip>>16&255,$[X+1]=this.numberToSkip>>8&255,$[X]=this.numberToSkip&255,X=X+4,$[X+3]=this.numberToReturn>>24&255,$[X+2]=this.numberToReturn>>16&255,$[X+1]=this.numberToReturn>>8&255,$[X]=this.numberToReturn&255,X=X+4,A}}qu.OpQueryRequest=ZK;class Ju{constructor(A,F,B,$){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=A,this.data=B,this.opts=$??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new HB.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&cV1)!==0,this.queryFailure=(this.responseFlags&lV1)!==0,this.shardConfigStale=(this.responseFlags&pV1)!==0,this.awaitCapable=(this.responseFlags&iV1)!==0;for(let A=0;A<this.numberReturned;A++){let F=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,B=this.data.subarray(this.index,this.index+F);this.sections.push(B),this.index=this.index+F}return this.parsed=!0,this.sections[0]}}qu.OpReply=Ju;var Yu=1,Wu=2,Gu=65536;class DK{constructor(A,F){this.field=A,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let B=Buffer.allocUnsafe(5+this.field.length+1);if(B[0]=1,nV1(B,`${this.field}\x00`,5),this.chunks.push(B),this.header=B,F)for(let $ of F)this.push($,HB.serialize($))}push(A,F){return this.serializedDocumentsLength+=F.length,this.documents.push(A),this.chunks.push(F),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}qu.DocumentSequence=DK;class JW{constructor(A,F,B){if(F==null)throw new lZ.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=A,this.command=F,this.command.$db=A,this.options=B??{},this.requestId=B.requestId?B.requestId:JW.getRequestId(),this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=B.moreToCome??F.writeConcern?.w===0,this.exhaustAllowed=typeof B.exhaustAllowed==="boolean"?B.exhaustAllowed:!1}toBin(){let A=[],F=0;if(this.checksumPresent)F|=Yu;if(this.moreToCome)F|=Wu;if(this.exhaustAllowed)F|=Gu;let B=Buffer.alloc(20);A.push(B);let $=B.length,Z=this.command;return $+=this.makeSections(A,Z),B.writeInt32LE($,0),B.writeInt32LE(this.requestId,4),B.writeInt32LE(0,8),B.writeInt32LE(zB.OP_MSG,12),B.writeUInt32LE(F,16),A}makeSections(A,F){let B=this.extractDocumentSequences(F),$=Buffer.allocUnsafe(1);$[0]=0;let Z=this.serializeBson(F);return A.push($),A.push(Z),A.push(B),$.length+Z.length+B.length}extractDocumentSequences(A){let F=[];for(let[B,$]of Object.entries(A))if($ instanceof DK)F.push($.toBin()),delete A[B];if(F.length>0)return Buffer.concat(F);return Buffer.alloc(0)}serializeBson(A){return HB.serialize(A,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return qB=qB+1&2147483647,qB}}qu.OpMsgRequest=JW;class Qu{constructor(A,F,B,$){this.index=0,this.sections=[],this.parsed=!1,this.raw=A,this.data=B,this.opts=$??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.responseFlags=B.readInt32LE(0),this.checksumPresent=(this.responseFlags&Yu)!==0,this.moreToCome=(this.responseFlags&Wu)!==0,this.exhaustAllowed=(this.responseFlags&Gu)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let A=this.data.readUInt8(this.index++);if(A===0){let F=this.data.readUInt32LE(this.index),B=this.data.subarray(this.index,this.index+F);this.sections.push(B),this.index+=F}else if(A===1)throw new lZ.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}qu.OpMsgResponse=Qu;var $K=16,Xu=9;class zu{constructor(A,F){this.command=A,this.options={zlibCompressionLevel:F.zlibCompressionLevel,agreedCompressor:F.agreedCompressor}}static canCompress(A){let F=A instanceof JW?A.command:A.query,B=Object.keys(F)[0];return!BK.uncompressibleCommands.has(B)}async toBin(){let A=Buffer.concat(this.command.toBin()),F=A.slice($K),B=A.readInt32LE(12),$=await BK.compress(this.options,F),Z=Buffer.alloc($K);Z.writeInt32LE($K+Xu+$.length,0),Z.writeInt32LE(this.command.requestId,4),Z.writeInt32LE(0,8),Z.writeInt32LE(zB.OP_COMPRESSED,12);let D=Buffer.alloc(Xu);return D.writeInt32LE(B,0),D.writeInt32LE(F.length,4),D.writeUInt8(BK.Compressor[this.options.agreedCompressor],8),[Z,D,$]}}qu.OpCompressedRequest=zu});var iZ=C((wu)=>{Object.defineProperty(wu,"__esModule",{value:!0});wu.uncompressibleCommands=wu.Compressor=void 0;wu.compress=$N1;wu.decompress=Eu;wu.compressCommand=ZN1;wu.decompressResponse=DN1;var Uu=A1("util"),YW=A1("zlib"),eV1=l2(),Cu=m7(),JK=X1(),UB=pZ(),XK=QA();wu.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});wu.uncompressibleCommands=new Set([eV1.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var AN1=3,FN1=Uu.promisify(YW.inflate.bind(YW)),BN1=Uu.promisify(YW.deflate.bind(YW)),U5,MA=null;function Ku(){if(MA==null){let A=Cu.getSnappy();if("kModuleError"in A)throw A.kModuleError;MA=A}return MA}async function $N1(A,F){let B={};switch(A.agreedCompressor){case"snappy":return MA??=Ku(),await MA.compress(F);case"zstd":{if(Lu(),"kModuleError"in U5)throw U5.kModuleError;return await U5.compress(F,AN1)}case"zlib":{if(A.zlibCompressionLevel)B.level=A.zlibCompressionLevel;return await BN1(F,B)}default:throw new JK.MongoInvalidArgumentError(`Unknown compressor ${A.agreedCompressor} failed to compress`)}}async function Eu(A,F){if(A!==wu.Compressor.snappy&&A!==wu.Compressor.zstd&&A!==wu.Compressor.zlib&&A!==wu.Compressor.none)throw new JK.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${A})`);switch(A){case wu.Compressor.snappy:return MA??=Ku(),await MA.uncompress(F,{asBuffer:!0});case wu.Compressor.zstd:{if(Lu(),"kModuleError"in U5)throw U5.kModuleError;return await U5.decompress(F)}case wu.Compressor.zlib:return await FN1(F);default:return F}}function Lu(){if(!U5)U5=Cu.getZstdLibrary()}var nZ=16;async function ZN1(A,F){let $=await(F.agreedCompressor==="none"||!UB.OpCompressedRequest.canCompress(A)?A:new UB.OpCompressedRequest(A,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0})).toBin();return Buffer.concat($)}async function DN1(A){let F={length:A.readInt32LE(0),requestId:A.readInt32LE(4),responseTo:A.readInt32LE(8),opCode:A.readInt32LE(12)};if(F.opCode!==XK.OP_COMPRESSED){let J=F.opCode===XK.OP_MSG?UB.OpMsgResponse:UB.OpReply,Y=A.subarray(nZ);return new J(A,F,Y)}let B={...F,fromCompressed:!0,opCode:A.readInt32LE(nZ),length:A.readInt32LE(nZ+4)},$=A[nZ+8],Z=A.slice(nZ+9),D=B.opCode===XK.OP_MSG?UB.OpMsgResponse:UB.OpReply,X=await Eu($,Z);if(X.length!==B.length)throw new JK.MongoDecompressionError("Message body and message header must be the same length");return new D(A,B,X)}});var WK=C((Nu)=>{Object.defineProperty(Nu,"__esModule",{value:!0});Nu.hmacSha256Hook=Nu.hmacSha512Hook=Nu.aes256CtrDecryptHook=Nu.aes256CtrEncryptHook=Nu.aes256CbcDecryptHook=Nu.aes256CbcEncryptHook=void 0;Nu.makeAES256Hook=aZ;Nu.randomHook=GN1;Nu.sha256Hook=QN1;Nu.makeHmacHook=YK;Nu.signRsaSha256Hook=zN1;var sZ=A1("crypto");function aZ(A,F){return function(B,$,Z,D){let X;try{let J=sZ[A](F,B,$);J.setAutoPadding(!1),X=J.update(Z);let Y=J.final();if(Y.length>0)X=Buffer.concat([X,Y])}catch(J){return J}return X.copy(D),X.length}}function GN1(A,F){try{sZ.randomFillSync(A,0,F)}catch(B){return B}return F}function QN1(A,F){let B;try{B=sZ.createHash("sha256").update(A).digest()}catch($){return $}return B.copy(F),B.length}function YK(A){return(F,B,$)=>{let Z;try{Z=sZ.createHmac(A,F).update(B).digest()}catch(D){return D}return Z.copy($),Z.length}}function zN1(A,F,B){let $;try{let Z=sZ.createSign("sha256WithRSAEncryption"),D=Buffer.from(`-----BEGIN PRIVATE KEY-----
${A.toString("base64")}
-----END PRIVATE KEY-----
`);$=Z.update(F).end().sign(D)}catch(Z){return Z}return $.copy(B),$.length}Nu.aes256CbcEncryptHook=aZ("createCipheriv","aes-256-cbc");Nu.aes256CbcDecryptHook=aZ("createDecipheriv","aes-256-cbc");Nu.aes256CtrEncryptHook=aZ("createCipheriv","aes-256-ctr");Nu.aes256CtrDecryptHook=aZ("createDecipheriv","aes-256-ctr");Nu.hmacSha512Hook=YK("sha512");Nu.hmacSha256Hook=YK("sha256")});var CB=C((Ou)=>{Object.defineProperty(Ou,"__esModule",{value:!0});Ou.MongoCryptKMSRequestNetworkTimeoutError=Ou.MongoCryptAzureKMSRequestError=Ou.MongoCryptCreateEncryptedCollectionError=Ou.MongoCryptCreateDataKeyError=Ou.MongoCryptInvalidArgumentError=Ou.MongoCryptError=void 0;var MN1=X1();class RA extends MN1.MongoError{constructor(A,F={}){super(A,F)}get name(){return"MongoCryptError"}}Ou.MongoCryptError=RA;class Ru extends RA{constructor(A){super(A)}get name(){return"MongoCryptInvalidArgumentError"}}Ou.MongoCryptInvalidArgumentError=Ru;class Pu extends RA{constructor(A,{cause:F}){super(`Unable to complete creating data keys: ${F.message}`,{cause:F});this.encryptedFields=A}get name(){return"MongoCryptCreateDataKeyError"}}Ou.MongoCryptCreateDataKeyError=Pu;class ju extends RA{constructor(A,{cause:F}){super(`Unable to create collection: ${F.message}`,{cause:F});this.encryptedFields=A}get name(){return"MongoCryptCreateEncryptedCollectionError"}}Ou.MongoCryptCreateEncryptedCollectionError=ju;class Iu extends RA{constructor(A,F){super(A);this.body=F}get name(){return"MongoCryptAzureKMSRequestError"}}Ou.MongoCryptAzureKMSRequestError=Iu;class Tu extends RA{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}Ou.MongoCryptKMSRequestNetworkTimeoutError=Tu});var QK=C((bu)=>{Object.defineProperty(bu,"__esModule",{value:!0});bu.LegacyAWSTemporaryCredentialProvider=bu.AWSSDKCredentialProvider=bu.AWSTemporaryCredentialProvider=void 0;var ON1=m7(),SN1=X1(),WW=K1(),kN1="http://169.254.170.2",GK="http://169.254.169.254",ku="/latest/meta-data/iam/security-credentials";class l7{static get awsSDK(){return l7._awsSDK??=ON1.getAwsCredentialProvider(),l7._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in l7.awsSDK)}}bu.AWSTemporaryCredentialProvider=l7;class _u extends l7{constructor(A){super();if(A)this._provider=A}get provider(){if("kModuleError"in l7.awsSDK)throw l7.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:A="",AWS_REGION:F=""}=process.env;A=A.toLowerCase(),F=F.toLowerCase();let B=F.length!==0&&A.length!==0,Z=A==="regional"||A==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(F);return this._provider=B&&Z?l7.awsSDK.fromNodeProviderChain({clientConfig:{region:F}}):l7.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let A=await this.provider();return{AccessKeyId:A.accessKeyId,SecretAccessKey:A.secretAccessKey,Token:A.sessionToken,Expiration:A.expiration}}catch(A){throw new SN1.MongoAWSError(A.message,{cause:A})}}}bu.AWSSDKCredentialProvider=_u;class xu extends l7{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await WW.request(`${kN1}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let A=await WW.request(`${GK}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),F=await WW.request(`${GK}/${ku}`,{json:!1,headers:{"X-aws-ec2-metadata-token":A}});return await WW.request(`${GK}/${ku}/${F}`,{headers:{"X-aws-ec2-metadata-token":A}})}}bu.LegacyAWSTemporaryCredentialProvider=xu});var uu=C((gu)=>{Object.defineProperty(gu,"__esModule",{value:!0});gu.loadAWSCredentials=fN1;var bN1=QK();async function fN1(A,F){let B=new bN1.AWSSDKCredentialProvider(F),{SecretAccessKey:$="",AccessKeyId:Z="",Token:D}=await B.getCredentials(),X={secretAccessKey:$,accessKeyId:Z};return D!=null&&(X.sessionToken=D),{...A,aws:X}}});var HK=C((du)=>{Object.defineProperty(du,"__esModule",{value:!0});du.tokenCache=du.AzureCredentialCache=du.AZURE_BASE_URL=void 0;du.addAzureParams=yu;du.prepareRequest=vu;du.fetchAzureKMSToken=hu;du.loadAzureCredentials=dN1;var uN1=X1(),yN1=K1(),KB=CB(),vN1=6000;du.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class zK{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(A){return A.expiresOnTimestamp-Date.now()<=vN1}resetCache(){this.cachedToken=null}_getToken(){return hu()}}du.AzureCredentialCache=zK;du.tokenCache=new zK;async function hN1(A){let{status:F,body:B}=A,$=(()=>{try{return JSON.parse(B)}catch{throw new KB.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(F!==200)throw new KB.MongoCryptAzureKMSRequestError("Unable to complete request.",$);if(!$.access_token)throw new KB.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!$.expires_in)throw new KB.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let Z=Number($.expires_in)*1000;if(Number.isNaN(Z))throw new KB.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:$.access_token,expiresOnTimestamp:Date.now()+Z}}function yu(A,F,B){if(A.searchParams.append("api-version","2018-02-01"),A.searchParams.append("resource",F),B)A.searchParams.append("client_id",B);return A}function vu(A){let F=new URL(A.url?.toString()??du.AZURE_BASE_URL);return yu(F,"https://vault.azure.net"),{headers:{...A.headers,"Content-Type":"application/json",Metadata:!0},url:F}}async function hu(A={}){let{headers:F,url:B}=vu(A);try{let $=await yN1.get(B,{headers:F});return await hN1($)}catch($){if($ instanceof uN1.MongoNetworkTimeoutError)throw new KB.MongoCryptAzureKMSRequestError(`[Azure KMS] ${$.message}`);throw $}}async function dN1(A){let F=await du.tokenCache.getToken();return{...A,azure:F}}});var lu=C((cu)=>{Object.defineProperty(cu,"__esModule",{value:!0});cu.loadGCPCredentials=sN1;var nN1=m7();async function sN1(A){let F=nN1.getGcpMetadata();if("kModuleError"in F)return A;let{access_token:B}=await F.instance({property:"service-accounts/default/token"});return{...A,gcp:{accessToken:B}}}});var UK=C((pu)=>{Object.defineProperty(pu,"__esModule",{value:!0});pu.isEmptyCredentials=GW;pu.refreshKMSCredentials=eN1;var tN1=uu(),rN1=HK(),oN1=lu();function GW(A,F){let B=F[A];if(B==null)return!1;return typeof B==="object"&&Object.keys(B).length===0}async function eN1(A,F){let B=A;if(GW("aws",A))B=await tN1.loadAWSCredentials(B,F?.aws);if(GW("gcp",A))B=await oN1.loadGCPCredentials(B);if(GW("azure",A))B=await rN1.loadAzureCredentials(B);return B}});var CK=C((Zy)=>{Object.defineProperty(Zy,"__esModule",{value:!0});Zy.StateMachine=void 0;var iu=A1("fs/promises"),BM1=A1("net"),$M1=A1("tls"),X3=C0(),nu=A4(),ZM1=m7(),DM1=X1(),su=r6(),C5=K1(),XM1=QW(),K5=CB(),tZ=null;function JM1(){if(tZ==null){let A=ZM1.getSocks();if("kModuleError"in A)throw A.kModuleError;tZ=A}return tZ}var PA=0,tu=1,ru=2,ou=3,eu=7,Ay=4,Fy=5,By=6,YM1=443,WM1=new Map([[PA,"MONGOCRYPT_CTX_ERROR"],[tu,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[ru,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[ou,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[eu,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[Ay,"MONGOCRYPT_CTX_NEED_KMS"],[Fy,"MONGOCRYPT_CTX_READY"],[By,"MONGOCRYPT_CTX_DONE"]]),GM1=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function au(A){if(process.env.MONGODB_CRYPT_DEBUG)console.error(A)}var QM1;class $y{constructor(A,F=X3.pluckBSONSerializeOptions(A)){this.options=A,this.bsonOptions=F}async execute(A,F,B){let{_keyVaultNamespace:$,_keyVaultClient:Z,_metaDataClient:D,_mongocryptdClient:X,_mongocryptdManager:J}=A,Y=null,W=()=>F.status,G=()=>F.state;while(G()!==By&&G()!==PA)switch(B.signal?.throwIfAborted(),au(`[context#${F.id}] ${WM1.get(G())||G()}`),G()){case tu:{let Q=X3.deserialize(F.nextMongoOperation());if(!D)throw new K5.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let q=this.fetchCollectionInfo(D,F.ns,Q,B);for await(let z of q)if(F.addMongoOperationResponse(X3.serialize(z)),G()===PA)break;if(G()===PA)break;F.finishMongoOperation();break}case ru:{let Q=F.nextMongoOperation();if(G()===PA)break;if(!X)throw new K5.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let q=J?await J.withRespawn(this.markCommand.bind(this,X,F.ns,Q,B)):await this.markCommand(X,F.ns,Q,B);F.addMongoOperationResponse(q),F.finishMongoOperation();break}case ou:{let Q=F.nextMongoOperation(),q=await this.fetchKeys(Z,$,Q,B);if(q.length===0)Y=QM1??=X3.serialize({v:[]});for(let z of q)F.addMongoOperationResponse(X3.serialize(z));F.finishMongoOperation();break}case eu:{let Q=await A.askForKMSCredentials();F.provideKMSProviders(X3.serialize(Q));break}case Ay:{await Promise.all(this.requests(F,B)),F.finishKMSRequests();break}case Fy:{let Q=F.finalize();if(G()===PA){let q=W().message||"Finalization error";throw new K5.MongoCryptError(q)}Y=Q;break}default:throw new K5.MongoCryptError(`Unknown state: ${G()}`)}if(G()===PA||Y==null){let Q=W().message;if(!Q)au("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new K5.MongoCryptError(Q??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return Y}async kmsRequest(A,F){let B=A.endpoint.split(":"),$=B[1]!=null?Number.parseInt(B[1],10):YM1,Z={host:B[0],servername:B[0],port:$,...XM1.autoSelectSocketOptions(this.options.socketOptions||{})},D=A.message,X=new C5.BufferPool,J,Y;function W(){for(let H of[Y,J])if(H)H.destroy()}function G(H){return new K5.MongoCryptError("KMS request failed",{cause:H})}function Q(){return new K5.MongoCryptError("KMS request closed")}let q=this.options.tlsOptions;if(q){let H=A.kmsProvider,U=q[H];if(U){let K=this.validateTlsOptions(H,U);if(K)throw K;try{await this.setTlsOptions(U,Z)}catch(E){throw G(E)}}}let z;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){J=new BM1.Socket;let{promise:E,reject:L,resolve:V}=C5.promiseWithResolvers();J.once("error",(O)=>L(G(O))).once("close",()=>L(Q())).once("connect",()=>V());let M={...Z,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};J.connect(M),await E;try{tZ??=JM1(),Z.socket=(await tZ.SocksClient.createConnection({existing_socket:J,command:"connect",destination:{host:Z.host,port:Z.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(O){throw G(O)}}Y=$M1.connect(Z,()=>{Y.write(D)});let{promise:H,reject:U,resolve:K}=C5.promiseWithResolvers();z=C5.addAbortListener(F?.signal,function(){W(),U(this.reason)}),Y.once("error",(E)=>U(G(E))).once("close",()=>U(Q())).on("data",(E)=>{X.append(E);while(A.bytesNeeded>0&&X.length){let L=Math.min(A.bytesNeeded,X.length);A.addResponse(X.read(L))}if(A.bytesNeeded<=0)K()}),await(F?.timeoutContext?.csotEnabled()?Promise.all([H,su.Timeout.expires(F.timeoutContext?.remainingTimeMS)]):H)}catch(H){if(H instanceof su.TimeoutError)throw new DM1.MongoOperationTimeoutError("KMS request timed out");throw H}finally{W(),z?.[C5.kDispose]()}}*requests(A,F){for(let B=A.nextKMSRequest();B!=null;B=A.nextKMSRequest())yield this.kmsRequest(B,F)}validateTlsOptions(A,F){let B=Object.keys(F);for(let $ of GM1)if(B.includes($))return new K5.MongoCryptError(`Insecure TLS options prohibited for ${A}: ${$}`)}async setTlsOptions(A,F){if(A.tlsCertificateKeyFile){let B=await iu.readFile(A.tlsCertificateKeyFile);F.cert=F.key=B}if(A.tlsCAFile)F.ca=await iu.readFile(A.tlsCAFile);if(A.tlsCertificateKeyFilePassword)F.passphrase=A.tlsCertificateKeyFilePassword}fetchCollectionInfo(A,F,B,$){let{db:Z}=C5.MongoDBCollectionNamespace.fromString(F);return A.db(Z).listCollections(B,{promoteLongs:!1,promoteValues:!1,timeoutContext:$?.timeoutContext&&new nu.CursorTimeoutContext($?.timeoutContext,Symbol()),signal:$?.signal,nameOnly:!1})}async markCommand(A,F,B,$){let{db:Z}=C5.MongoDBCollectionNamespace.fromString(F),D={promoteLongs:!1,promoteValues:!1},X=X3.deserialize(B,D),J={timeoutMS:void 0,signal:void 0};if($?.timeoutContext?.csotEnabled())J.timeoutMS=$.timeoutContext.remainingTimeMS;if($?.signal)J.signal=$.signal;let Y=await A.db(Z).command(X,{...D,...J});return X3.serialize(Y,this.bsonOptions)}fetchKeys(A,F,B,$){let{db:Z,collection:D}=C5.MongoDBCollectionNamespace.fromString(F),X={timeoutContext:void 0,signal:void 0};if($?.timeoutContext!=null)X.timeoutContext=new nu.CursorTimeoutContext($.timeoutContext,Symbol());if($?.signal!=null)X.signal=$.signal;return A.db(Z).collection(D,{readConcern:{level:"majority"}}).find(X3.deserialize(B),X).toArray()}}Zy.StateMachine=$y});var QW=C((Jy)=>{Object.defineProperty(Jy,"__esModule",{value:!0});Jy.ClientEncryption=void 0;Jy.autoSelectSocketOptions=oZ;var n4=C0(),zM1=m7(),rZ=r6(),s4=K1(),qM1=WK(),E5=CB(),Xy=UK(),zW=CK();class qW{static getMongoCrypt(){let A=zM1.getMongoDBClientEncryption();if("kModuleError"in A)throw A.kModuleError;return A.MongoCrypt}constructor(A,F){this._client=A,this._proxyOptions=F.proxyOptions??{},this._tlsOptions=F.tlsOptions??{},this._kmsProviders=F.kmsProviders||{};let{timeoutMS:B}=s4.resolveTimeoutOptions(A,F);if(this._timeoutMS=B,this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!Xy.isEmptyCredentials("aws",this._kmsProviders))throw new E5.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(F.keyVaultNamespace==null)throw new E5.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let $={...F,cryptoCallbacks:qM1,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?n4.serialize(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=F.keyVaultNamespace,this._keyVaultClient=F.keyVaultClient||A;let Z=qW.getMongoCrypt();this._mongoCrypt=new Z($)}async createDataKey(A,F={}){if(F.keyAltNames&&!Array.isArray(F.keyAltNames))throw new E5.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof F.keyAltNames}.`);let B=void 0;if(F.keyAltNames&&F.keyAltNames.length>0)B=F.keyAltNames.map((q,z)=>{if(typeof q!=="string")throw new E5.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${z} was of type ${typeof q}`);return n4.serialize({keyAltName:q})});let $=void 0;if(F.keyMaterial)$=n4.serialize({keyMaterial:F.keyMaterial});let Z=n4.serialize({provider:A,...F.masterKey}),D=this._mongoCrypt.makeDataKeyContext(Z,{keyAltNames:B,keyMaterial:$}),X=new zW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:oZ(this._client.s.options)}),J=F?.timeoutContext??rZ.TimeoutContext.create(s4.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),Y=n4.deserialize(await X.execute(this,D,{timeoutContext:J})),{db:W,collection:G}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:Q}=await this._keyVaultClient.db(W).collection(G).insertOne(Y,{writeConcern:{w:"majority"},timeoutMS:J?.csotEnabled()?J?.getRemainingTimeMSOrThrow():void 0});return Q}async rewrapManyDataKey(A,F){let B=void 0;if(F){let q=Object.assign({provider:F.provider},F.masterKey);B=n4.serialize(q)}let $=n4.serialize(A),Z=this._mongoCrypt.makeRewrapManyDataKeyContext($,B),D=new zW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:oZ(this._client.s.options)}),X=rZ.TimeoutContext.create(s4.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),{v:J}=n4.deserialize(await D.execute(this,Z,{timeoutContext:X}));if(J.length===0)return{};let{db:Y,collection:W}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),G=J.map((q)=>({updateOne:{filter:{_id:q._id},update:{$set:{masterKey:q.masterKey,keyMaterial:q.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(Y).collection(W).bulkWrite(G,{writeConcern:{w:"majority"},timeoutMS:X.csotEnabled()?X?.remainingTimeMS:void 0})}}async deleteKey(A){let{db:F,collection:B}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).deleteOne({_id:A},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:A,collection:F}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(A).collection(F).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(A){let{db:F,collection:B}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).findOne({_id:A},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(A){let{db:F,collection:B}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).findOne({keyAltNames:A},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(A,F){let{db:B,collection:$}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(B).collection($).findOneAndUpdate({_id:A},{$addToSet:{keyAltNames:F}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(A,F){let{db:B,collection:$}=s4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),Z=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[F]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",F]}}}]}}}];return await this._keyVaultClient.db(B).collection($).findOneAndUpdate({_id:A},Z,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(A,F,B){let{provider:$,masterKey:Z,createCollectionOptions:{encryptedFields:{...D},...X}}=B,J=this._timeoutMS!=null?rZ.TimeoutContext.create(s4.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(D.fields)){let Y=D.fields.map(async(Q)=>Q==null||typeof Q!=="object"||Q.keyId!=null?Q:{...Q,keyId:await this.createDataKey($,{masterKey:Z,timeoutContext:J?.csotEnabled()?J?.clone():void 0})}),W=await Promise.allSettled(Y);D.fields=W.map((Q,q)=>Q.status==="fulfilled"?Q.value:D.fields[q]);let G=W.find((Q)=>Q.status==="rejected");if(G!=null)throw new E5.MongoCryptCreateDataKeyError(D,{cause:G.reason})}try{return{collection:await A.createCollection(F,{...X,encryptedFields:D,timeoutMS:J?.csotEnabled()?J?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:D}}catch(Y){throw new E5.MongoCryptCreateEncryptedCollectionError(D,{cause:Y})}}async encrypt(A,F){return await this._encrypt(A,!1,F)}async encryptExpression(A,F){return await this._encrypt(A,!0,F)}async decrypt(A){let F=n4.serialize({v:A}),B=this._mongoCrypt.makeExplicitDecryptionContext(F),$=new zW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:oZ(this._client.s.options)}),Z=this._timeoutMS!=null?rZ.TimeoutContext.create(s4.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:D}=n4.deserialize(await $.execute(this,B,{timeoutContext:Z}));return D}async askForKMSCredentials(){return await Xy.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return qW.getMongoCrypt().libmongocryptVersion}async _encrypt(A,F,B){let{algorithm:$,keyId:Z,keyAltName:D,contentionFactor:X,queryType:J,rangeOptions:Y}=B,W={expressionMode:F,algorithm:$};if(Z)W.keyId=Z.buffer;if(D){if(Z)throw new E5.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof D!=="string")throw new E5.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof D}`);W.keyAltName=n4.serialize({keyAltName:D})}if(typeof X==="number"||typeof X==="bigint")W.contentionFactor=X;if(typeof J==="string")W.queryType=J;if(typeof Y==="object")W.rangeOptions=n4.serialize(Y);let G=n4.serialize({v:A}),Q=new zW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:oZ(this._client.s.options)}),q=this._mongoCrypt.makeExplicitEncryptionContext(G,W),z=this._timeoutMS!=null?rZ.TimeoutContext.create(s4.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:H}=n4.deserialize(await Q.execute(this,q,{timeoutContext:z}));return H}}Jy.ClientEncryption=qW;function oZ(A){let F={autoSelectFamily:!0};if("autoSelectFamily"in A)F.autoSelectFamily=A.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in A)F.autoSelectFamilyAttemptTimeout=A.autoSelectFamilyAttemptTimeout;return F}});var Qy=C((Wy)=>{Object.defineProperty(Wy,"__esModule",{value:!0});Wy.MongocryptdManager=void 0;var UM1=X1();class HW{constructor(A={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof A.mongocryptdURI==="string"&&A.mongocryptdURI.length>0?A.mongocryptdURI:HW.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!A.mongocryptdBypassSpawn,Object.hasOwn(A,"mongocryptdSpawnPath")&&A.mongocryptdSpawnPath)this.spawnPath=A.mongocryptdSpawnPath;if(Object.hasOwn(A,"mongocryptdSpawnArgs")&&Array.isArray(A.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(A.mongocryptdSpawnArgs);if(this.spawnArgs.filter((F)=>typeof F==="string").every((F)=>F.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let A=this.spawnPath||"mongocryptd",{spawn:F}=A1("child_process");this._child=F(A,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(A){try{return await A()}catch(B){if(!(B instanceof UM1.MongoNetworkTimeoutError&&!this.bypassSpawn))throw B}return await this.spawn(),await A()}}Wy.MongocryptdManager=HW;HW.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var LK=C((Ky)=>{var Cy;Object.defineProperty(Ky,"__esModule",{value:!0});Ky.AutoEncrypter=Ky.AutoEncryptionLoggerLevel=void 0;var zy=A1("net"),eZ=C0(),CM1=l2(),KM1=m7(),KK=X1(),EM1=Y5(),LM1=K1(),EK=QW(),wM1=WK(),qy=CB(),VM1=Qy(),Hy=UK(),Uy=CK();Ky.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class UW{static getMongoCrypt(){let A=KM1.getMongoDBClientEncryption();if("kModuleError"in A)throw A.kModuleError;return A.MongoCrypt}constructor(A,F){if(this[Cy]=!1,this._client=A,this._bypassEncryption=F.bypassAutoEncryption===!0,this._keyVaultNamespace=F.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=F.keyVaultClient||A,this._metaDataClient=F.metadataClient||A,this._proxyOptions=F.proxyOptions||{},this._tlsOptions=F.tlsOptions||{},this._kmsProviders=F.kmsProviders||{},this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!Hy.isEmptyCredentials("aws",this._kmsProviders))throw new qy.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let B={enableMultipleCollinfo:!0,cryptoCallbacks:wM1};if(F.schemaMap)B.schemaMap=Buffer.isBuffer(F.schemaMap)?F.schemaMap:eZ.serialize(F.schemaMap);if(F.encryptedFieldsMap)B.encryptedFieldsMap=Buffer.isBuffer(F.encryptedFieldsMap)?F.encryptedFieldsMap:eZ.serialize(F.encryptedFieldsMap);if(B.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?eZ.serialize(this._kmsProviders):this._kmsProviders,F.options?.logger)B.logger=F.options.logger;if(F.extraOptions&&F.extraOptions.cryptSharedLibPath)B.cryptSharedLibPath=F.extraOptions.cryptSharedLibPath;if(F.bypassQueryAnalysis)B.bypassQueryAnalysis=F.bypassQueryAnalysis;if(F.keyExpirationMS!=null)B.keyExpirationMS=F.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!F.bypassQueryAnalysis,F.extraOptions&&F.extraOptions.cryptSharedLibSearchPaths)B.cryptSharedLibSearchPaths=F.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)B.cryptSharedLibSearchPaths=["$SYSTEM"];let $=UW.getMongoCrypt();if(this._mongocrypt=new $(B),this._contextCounter=0,F.extraOptions&&F.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new qy.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new VM1.MongocryptdManager(F.extraOptions);let Z={serverSelectionTimeoutMS:1e4};if((F.extraOptions==null||typeof F.extraOptions.mongocryptdURI!=="string")&&!zy.getDefaultAutoSelectFamily)Z.family=4;if(zy.getDefaultAutoSelectFamily)Object.assign(Z,EK.autoSelectSocketOptions(this._client.s?.options??{}));this._mongocryptdClient=new EM1.MongoClient(this._mongocryptdManager.uri,Z)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new KK.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new KK.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(A){throw new KK.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:A})}}async close(){await this._mongocryptdClient?.close()}async encrypt(A,F,B={}){if(B.signal?.throwIfAborted(),this._bypassEncryption)return F;let $=Buffer.isBuffer(F)?F:eZ.serialize(F,B),Z=this._mongocrypt.makeEncryptionContext(LM1.MongoDBCollectionNamespace.fromString(A).db,$);Z.id=this._contextCounter++,Z.ns=A,Z.document=F;let D=new Uy.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:EK.autoSelectSocketOptions(this._client.s.options)});return eZ.deserialize(await D.execute(this,Z,B),{promoteValues:!1,promoteLongs:!1})}async decrypt(A,F={}){F.signal?.throwIfAborted();let B=this._mongocrypt.makeDecryptionContext(A);return B.id=this._contextCounter++,await new Uy.StateMachine({...F,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:EK.autoSelectSocketOptions(this._client.s.options)}).execute(this,B,F)}async askForKMSCredentials(){return await Hy.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return UW.getMongoCrypt().libmongocryptVersion}}Ky.AutoEncrypter=UW;Cy=CM1.kDecorateResult});var My=C((Vy)=>{Object.defineProperty(Vy,"__esModule",{value:!0});Vy.Encrypter=void 0;var MM1=LK(),RM1=l2(),PM1=m7(),Ly=X1(),jM1=Y5();class wy{constructor(A,F,B){if(typeof B.autoEncryption!=="object")throw new Ly.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!B.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,B.maxPoolSize===0&&B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=A;else if(B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=this.getInternalClient(A,F,B);if(this.bypassAutoEncryption)B.autoEncryption.metadataClient=void 0;else if(B.maxPoolSize===0)B.autoEncryption.metadataClient=A;else B.autoEncryption.metadataClient=this.getInternalClient(A,F,B);if(B.proxyHost)B.autoEncryption.proxyOptions={proxyHost:B.proxyHost,proxyPort:B.proxyPort,proxyUsername:B.proxyUsername,proxyPassword:B.proxyPassword};this.autoEncrypter=new MM1.AutoEncrypter(A,B.autoEncryption)}getInternalClient(A,F,B){let $=this.internalClient;if($==null){let Z={};for(let D of[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(D))continue;Reflect.set(Z,D,Reflect.get(B,D))}Z.minPoolSize=0,$=new jM1.MongoClient(F,Z),this.internalClient=$;for(let D of RM1.MONGO_CLIENT_EVENTS)for(let X of A.listeners(D))$.on(D,X);A.on("newListener",(D,X)=>{$?.on(D,X)}),this.needsConnecting=!0}return $}async connectInternalClient(){let A=this.internalClient;if(this.needsConnecting&&A!=null)this.needsConnecting=!1,await A.connect()}async close(A){let F;try{await this.autoEncrypter.close()}catch($){F=$}let B=this.internalClient;if(B!=null&&A!==B)return await B.close();if(F!=null)throw F}static checkForMongoCrypt(){let A=PM1.getMongoDBClientEncryption();if("kModuleError"in A)throw new Ly.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:A.kModuleError,dependencyName:"mongodb-client-encryption"})}}Vy.Encrypter=wy});var wK=C((Ry)=>{Object.defineProperty(Ry,"__esModule",{value:!0});Ry.ConnectionPoolMetrics=void 0;class J3{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(A){if(A===J3.TXN)this.txnConnections+=1;else if(A===J3.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(A){if(A===J3.TXN)this.txnConnections-=1;else if(A===J3.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(A){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${A}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}Ry.ConnectionPoolMetrics=J3;J3.TXN="txn";J3.CURSOR="cursor";J3.OTHER="other"});var AD=C((Oy)=>{Object.defineProperty(Oy,"__esModule",{value:!0});Oy.ServerDescription=void 0;Oy.parseServerType=Iy;Oy.compareTopologyVersion=Ty;var EB=C0(),IM1=X1(),LB=K1(),F6=L9(),TM1=new Set([F6.ServerType.RSPrimary,F6.ServerType.Standalone,F6.ServerType.Mongos,F6.ServerType.LoadBalancer]),OM1=new Set([F6.ServerType.RSPrimary,F6.ServerType.RSSecondary,F6.ServerType.Mongos,F6.ServerType.Standalone,F6.ServerType.LoadBalancer]);class jy{constructor(A,F,B={}){if(A==null||A==="")throw new IM1.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof A==="string"?LB.HostAddress.fromString(A).toString():A.toString(),this.type=Iy(F,B),this.hosts=F?.hosts?.map(($)=>$.toLowerCase())??[],this.passives=F?.passives?.map(($)=>$.toLowerCase())??[],this.arbiters=F?.arbiters?.map(($)=>$.toLowerCase())??[],this.tags=F?.tags??{},this.minWireVersion=F?.minWireVersion??0,this.maxWireVersion=F?.maxWireVersion??0,this.roundTripTime=B?.roundTripTime??-1,this.minRoundTripTime=B?.minRoundTripTime??0,this.lastUpdateTime=LB.now(),this.lastWriteDate=F?.lastWrite?.lastWriteDate??0,this.error=B.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??F?.topologyVersion??null,this.setName=F?.setName??null,this.setVersion=F?.setVersion??null,this.electionId=F?.electionId??null,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=F?.maxMessageSizeBytes??null,this.maxWriteBatchSize=F?.maxWriteBatchSize??null,this.maxBsonObjectSize=F?.maxBsonObjectSize??null,this.primary=F?.primary??null,this.me=F?.me?.toLowerCase()??null,this.$clusterTime=F?.$clusterTime??null,this.iscryptd=Boolean(F?.iscryptd)}get hostAddress(){return LB.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===F6.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return OM1.has(this.type)}get isWritable(){return TM1.has(this.type)}get host(){let A=`:${this.port}`.length;return this.address.slice(0,-A)}get port(){let A=this.address.split(":").pop();return A?Number.parseInt(A,10):27017}equals(A){let F=this.topologyVersion===A?.topologyVersion||Ty(this.topologyVersion,A?.topologyVersion)===0,B=this.electionId!=null&&A?.electionId!=null?LB.compareObjectId(this.electionId,A.electionId)===0:this.electionId===A?.electionId;return A!=null&&A.iscryptd===this.iscryptd&&LB.errorStrictEqual(this.error,A.error)&&this.type===A.type&&this.minWireVersion===A.minWireVersion&&LB.arrayStrictEqual(this.hosts,A.hosts)&&SM1(this.tags,A.tags)&&this.setName===A.setName&&this.setVersion===A.setVersion&&B&&this.primary===A.primary&&this.logicalSessionTimeoutMinutes===A.logicalSessionTimeoutMinutes&&F}}Oy.ServerDescription=jy;function Iy(A,F){if(F?.loadBalanced)return F6.ServerType.LoadBalancer;if(!A||!A.ok)return F6.ServerType.Unknown;if(A.isreplicaset)return F6.ServerType.RSGhost;if(A.msg&&A.msg==="isdbgrid")return F6.ServerType.Mongos;if(A.setName)if(A.hidden)return F6.ServerType.RSOther;else if(A.isWritablePrimary)return F6.ServerType.RSPrimary;else if(A.secondary)return F6.ServerType.RSSecondary;else if(A.arbiterOnly)return F6.ServerType.RSArbiter;else return F6.ServerType.RSOther;return F6.ServerType.Standalone}function SM1(A,F){let B=Object.keys(A),$=Object.keys(F);return B.length===$.length&&B.every((Z)=>F[Z]===A[Z])}function Ty(A,F){if(A==null||F==null)return-1;if(!A.processId.equals(F.processId))return-1;let B=typeof A.counter==="bigint"?EB.Long.fromBigInt(A.counter):EB.Long.isLong(A.counter)?A.counter:EB.Long.fromNumber(A.counter),$=typeof F.counter==="bigint"?EB.Long.fromBigInt(F.counter):EB.Long.isLong(F.counter)?F.counter:EB.Long.fromNumber(F.counter);return B.compare($)}});var NK=C((gy)=>{Object.defineProperty(gy,"__esModule",{value:!0});gy.TopologyDescription=void 0;var xM1=C0(),KW=QA(),CW=X1(),VK=K1(),X0=L9(),L5=AD(),bM1=KW.MIN_SUPPORTED_SERVER_VERSION,fM1=KW.MAX_SUPPORTED_SERVER_VERSION,ky=KW.MIN_SUPPORTED_WIRE_VERSION,_y=KW.MAX_SUPPORTED_WIRE_VERSION,gM1=new Set([X0.ServerType.Mongos,X0.ServerType.Unknown]),xy=new Set([X0.ServerType.Mongos,X0.ServerType.Standalone]),by=new Set([X0.ServerType.RSSecondary,X0.ServerType.RSArbiter,X0.ServerType.RSOther]);class FD{constructor(A,F=null,B=null,$=null,Z=null,D=null,X=null){X=X??{},this.type=A??X0.TopologyType.Unknown,this.servers=F??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=X.heartbeatFrequencyMS??0,this.localThresholdMS=X.localThresholdMS??15,this.setName=B??null,this.maxElectionId=Z??null,this.maxSetVersion=$??null,this.commonWireVersion=D??0;for(let J of this.servers.values()){if(J.type===X0.ServerType.Unknown||J.type===X0.ServerType.LoadBalancer)continue;if(J.minWireVersion>_y)this.compatible=!1,this.compatibilityError=`Server at ${J.address} requires wire version ${J.minWireVersion}, but this version of the driver only supports up to ${_y} (MongoDB ${fM1})`;if(J.maxWireVersion<ky){this.compatible=!1,this.compatibilityError=`Server at ${J.address} reports wire version ${J.maxWireVersion}, but this version of the driver requires at least ${ky} (MongoDB ${bM1}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,J]of this.servers)if(J.isReadable){if(J.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=J.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,J.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(A,F=0){let B=A.hostnames(),$=new Set(this.servers.keys()),Z=new Set(B),D=new Set;for(let J of $)if(Z.delete(J),!B.has(J))D.add(J);if(Z.size===0&&D.size===0)return this;let X=new Map(this.servers);for(let J of D)X.delete(J);if(Z.size>0){if(F===0)for(let J of Z)X.set(J,new L5.ServerDescription(J));else if(X.size<F){let J=VK.shuffle(Z,F-X.size);for(let Y of J)X.set(Y,new L5.ServerDescription(Y))}}return new FD(this.type,X,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(A){let F=A.address,{type:B,setName:$,maxSetVersion:Z,maxElectionId:D,commonWireVersion:X}=this,J=A.type,Y=new Map(this.servers);if(A.maxWireVersion!==0)if(X==null)X=A.maxWireVersion;else X=Math.min(X,A.maxWireVersion);if(typeof A.setName==="string"&&typeof $==="string"&&A.setName!==$)if(B===X0.TopologyType.Single)A=new L5.ServerDescription(F);else Y.delete(F);if(Y.set(F,A),B===X0.TopologyType.Single)return new FD(X0.TopologyType.Single,Y,$,Z,D,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(B===X0.TopologyType.Unknown)if(J===X0.ServerType.Standalone&&this.servers.size!==1)Y.delete(F);else B=uM1(J);if(B===X0.TopologyType.Sharded){if(!gM1.has(J))Y.delete(F)}if(B===X0.TopologyType.ReplicaSetNoPrimary){if(xy.has(J))Y.delete(F);if(J===X0.ServerType.RSPrimary){let W=fy(Y,A,$,Z,D);B=W[0],$=W[1],Z=W[2],D=W[3]}else if(by.has(J)){let W=vM1(Y,A,$);B=W[0],$=W[1]}}if(B===X0.TopologyType.ReplicaSetWithPrimary)if(xy.has(J))Y.delete(F),B=jA(Y);else if(J===X0.ServerType.RSPrimary){let W=fy(Y,A,$,Z,D);B=W[0],$=W[1],Z=W[2],D=W[3]}else if(by.has(J))B=yM1(Y,A,$);else B=jA(Y);return new FD(B,Y,$,Z,D,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let A=Array.from(this.servers.values()).filter((F)=>F.error);if(A.length>0)return A[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((A)=>A.type!==X0.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((A)=>A.isDataBearing)}hasServer(A){return this.servers.has(A)}toJSON(){return xM1.EJSON.serialize(this)}}gy.TopologyDescription=FD;function uM1(A){switch(A){case X0.ServerType.Standalone:return X0.TopologyType.Single;case X0.ServerType.Mongos:return X0.TopologyType.Sharded;case X0.ServerType.RSPrimary:return X0.TopologyType.ReplicaSetWithPrimary;case X0.ServerType.RSOther:case X0.ServerType.RSSecondary:return X0.TopologyType.ReplicaSetNoPrimary;default:return X0.TopologyType.Unknown}}function fy(A,F,B=null,$=null,Z=null){let D=(Y,W,G)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${Y.setVersion}, server electionId: ${Y.electionId}, topology setVersion: ${W}, topology electionId: ${G}`};if(B=B||F.setName,B!==F.setName)return A.delete(F.address),[jA(A),B,$,Z];if(F.maxWireVersion>=17){let Y=VK.compareObjectId(Z,F.electionId),W=Y===0,G=Y===-1,Q=($??-1)<=(F.setVersion??-1);if(G||W&&Q)Z=F.electionId,$=F.setVersion;else return A.set(F.address,new L5.ServerDescription(F.address,void 0,{error:new CW.MongoStalePrimaryError(D(F,$,Z))})),[jA(A),B,$,Z]}else{let Y=F.electionId?F.electionId:null;if(F.setVersion&&Y){if($&&Z){if($>F.setVersion||VK.compareObjectId(Z,Y)>0)return A.set(F.address,new L5.ServerDescription(F.address,void 0,{error:new CW.MongoStalePrimaryError(D(F,$,Z))})),[jA(A),B,$,Z]}Z=F.electionId}if(F.setVersion!=null&&($==null||F.setVersion>$))$=F.setVersion}for(let[Y,W]of A)if(W.type===X0.ServerType.RSPrimary&&W.address!==F.address){A.set(Y,new L5.ServerDescription(W.address,void 0,{error:new CW.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}F.allHosts.forEach((Y)=>{if(!A.has(Y))A.set(Y,new L5.ServerDescription(Y))});let X=Array.from(A.keys()),J=F.allHosts;return X.filter((Y)=>J.indexOf(Y)===-1).forEach((Y)=>{A.delete(Y)}),[jA(A),B,$,Z]}function yM1(A,F,B=null){if(B==null)throw new CW.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(B!==F.setName||F.me&&F.address!==F.me)A.delete(F.address);return jA(A)}function vM1(A,F,B=null){let $=X0.TopologyType.ReplicaSetNoPrimary;if(B=B??F.setName,B!==F.setName)return A.delete(F.address),[$,B];if(F.allHosts.forEach((Z)=>{if(!A.has(Z))A.set(Z,new L5.ServerDescription(Z))}),F.me&&F.address!==F.me)A.delete(F.address);return[$,B]}function jA(A){for(let F of A.values())if(F.type===X0.ServerType.RSPrimary)return X0.TopologyType.ReplicaSetWithPrimary;return X0.TopologyType.ReplicaSetNoPrimary}});var RK=C((vy)=>{Object.defineProperty(vy,"__esModule",{value:!0});vy.getReadPreference=mM1;vy.isSharded=cM1;var hM1=X1(),MK=E6(),yy=L9(),dM1=NK();function mM1(A){let F=A?.readPreference??MK.ReadPreference.primary;if(typeof F==="string")F=MK.ReadPreference.fromString(F);if(!(F instanceof MK.ReadPreference))throw new hM1.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return F}function cM1(A){if(A==null)return!1;if(A.description&&A.description.type===yy.ServerType.Mongos)return!0;if(A.description&&A.description instanceof dM1.TopologyDescription)return Array.from(A.description.servers.values()).some((B)=>B.type===yy.ServerType.Mongos);return!1}});var PK=C((my)=>{Object.defineProperty(my,"__esModule",{value:!0});my.Transaction=my.TxnState=void 0;my.isTransactionCommand=oM1;var hy=X1(),iM1=i9(),nM1=E6(),sM1=a6();my.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var aM1={[my.TxnState.NO_TRANSACTION]:[my.TxnState.NO_TRANSACTION,my.TxnState.STARTING_TRANSACTION],[my.TxnState.STARTING_TRANSACTION]:[my.TxnState.TRANSACTION_IN_PROGRESS,my.TxnState.TRANSACTION_COMMITTED,my.TxnState.TRANSACTION_COMMITTED_EMPTY,my.TxnState.TRANSACTION_ABORTED],[my.TxnState.TRANSACTION_IN_PROGRESS]:[my.TxnState.TRANSACTION_IN_PROGRESS,my.TxnState.TRANSACTION_COMMITTED,my.TxnState.TRANSACTION_ABORTED],[my.TxnState.TRANSACTION_COMMITTED]:[my.TxnState.TRANSACTION_COMMITTED,my.TxnState.TRANSACTION_COMMITTED_EMPTY,my.TxnState.STARTING_TRANSACTION,my.TxnState.NO_TRANSACTION],[my.TxnState.TRANSACTION_ABORTED]:[my.TxnState.STARTING_TRANSACTION,my.TxnState.NO_TRANSACTION],[my.TxnState.TRANSACTION_COMMITTED_EMPTY]:[my.TxnState.TRANSACTION_COMMITTED_EMPTY,my.TxnState.NO_TRANSACTION]},tM1=new Set([my.TxnState.STARTING_TRANSACTION,my.TxnState.TRANSACTION_IN_PROGRESS]),rM1=new Set([my.TxnState.TRANSACTION_COMMITTED,my.TxnState.TRANSACTION_COMMITTED_EMPTY,my.TxnState.TRANSACTION_ABORTED]);class dy{constructor(A){A=A??{},this.state=my.TxnState.NO_TRANSACTION,this.options={};let F=sM1.WriteConcern.fromOptions(A);if(F){if(F.w===0)throw new hy.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=F}if(A.readConcern)this.options.readConcern=iM1.ReadConcern.fromOptions(A);if(A.readPreference)this.options.readPreference=nM1.ReadPreference.fromOptions(A);if(A.maxCommitTimeMS)this.options.maxTimeMS=A.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===my.TxnState.STARTING_TRANSACTION}get isActive(){return tM1.has(this.state)}get isCommitted(){return rM1.has(this.state)}transition(A){let F=aM1[this.state];if(F&&F.includes(A)){if(this.state=A,this.state===my.TxnState.NO_TRANSACTION||this.state===my.TxnState.STARTING_TRANSACTION||this.state===my.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new hy.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${A}]`)}pinServer(A){if(this.isActive)this._pinnedServer=A}unpinServer(){this._pinnedServer=void 0}}my.Transaction=dy;function oM1(A){return!!(A.commitTransaction||A.abortTransaction)}});var VB=C((sy)=>{Object.defineProperty(sy,"__esModule",{value:!0});sy.ServerSessionPool=sy.ServerSession=sy.ClientSession=void 0;sy.maybeClearPinnedConnection=wW;sy.applySession=XR1;sy.updateSessionFromResponse=JR1;var LW=C0(),VW=wK(),AR1=RK(),iy=l2(),x1=X1(),FR1=V9(),EW=e6(),jK=BB(),BR1=i9(),IK=E6(),$R1=DB(),OK=L9(),TK=r6(),v0=PK(),M4=K1(),wB=a6(),ZR1=8;class NW extends FR1.TypedEventEmitter{constructor(A,F,B,$){super();if(this.timeoutContext=null,this.on("error",M4.noop),A==null)throw new x1.MongoRuntimeError("ClientSession requires a MongoClient");if(F==null||!(F instanceof SK))throw new x1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(B=B??{},this.snapshotEnabled=B.snapshot===!0,B.causalConsistency===!0&&this.snapshotEnabled)throw new x1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=A,this.sessionPool=F,this.hasEnded=!1,this.clientOptions=$,this.timeoutMS=B.defaultTimeoutMS??A.s.options?.timeoutMS,this.explicit=!!B.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let Z=this.explicit&&B.snapshot!==!0;this.supports={causalConsistency:B.causalConsistency??Z},this.clusterTime=B.initialClusterTime,this.operationTime=void 0,this.owner=B.owner,this.defaultTransactionOptions={...B.defaultTransactionOptions},this.transaction=new v0.Transaction}get id(){return this.serverSession?.id}get serverSession(){let A=this._serverSession;if(A==null){if(this.explicit)throw new x1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new x1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");A=this.sessionPool.acquire(),this._serverSession=A}return A}get loadBalanced(){return this.client.topology?.description.type===OK.TopologyType.LoadBalanced}pin(A){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=A,A.emit(iy.PINNED,this.inTransaction()?VW.ConnectionPoolMetrics.TXN:VW.ConnectionPoolMetrics.CURSOR)}unpin(A){if(this.loadBalanced)return wW(this,A);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(A){try{if(this.inTransaction())await this.abortTransaction({...A,throwTimeout:!0})}catch(F){if(F.name==="MongoOperationTimeoutError")throw F;M4.squashError(F)}finally{if(!this.hasEnded){let F=this.serverSession;if(F!=null)this.sessionPool.release(F),this._serverSession=new RW(F);this.hasEnded=!0,this.emit("ended",this)}wW(this,{force:!0,...A})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(A){if(this.operationTime==null){this.operationTime=A;return}if(A.greaterThan(this.operationTime))this.operationTime=A}advanceClusterTime(A){if(!A||typeof A!=="object")throw new x1.MongoInvalidArgumentError("input cluster time must be an object");if(!A.clusterTime||A.clusterTime._bsontype!=="Timestamp")throw new x1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!A.signature||A.signature.hash?._bsontype!=="Binary"||typeof A.signature.keyId!=="bigint"&&typeof A.signature.keyId!=="number"&&A.signature.keyId?._bsontype!=="Long")throw new x1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');OK._advanceClusterTime(this,A)}equals(A){if(!(A instanceof NW))return!1;if(this.id==null||A.id==null)return!1;return M4.ByteUtils.equals(this.id.id.buffer,A.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(A){if(this.snapshotEnabled)throw new x1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new x1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();let F=M4.maxWireVersion(this.client.topology);if(AR1.isSharded(this.client.topology)&&F!=null&&F<ZR1)throw new x1.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new v0.Transaction({readConcern:A?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:A?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:A?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:A?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(v0.TxnState.STARTING_TRANSACTION)}async commitTransaction(A){if(this.transaction.state===v0.TxnState.NO_TRANSACTION)throw new x1.MongoTransactionError("No transaction started");if(this.transaction.state===v0.TxnState.STARTING_TRANSACTION||this.transaction.state===v0.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(v0.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===v0.TxnState.TRANSACTION_ABORTED)throw new x1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let F={commitTransaction:1},B=typeof A?.timeoutMS==="number"?A.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,$=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if($!=null)if(B==null&&this.timeoutContext==null)wB.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...$});else{let X=Object.keys($);if(X.length>2||!X.includes("wtimeoutMS")&&!X.includes("wTimeoutMS"))wB.WriteConcern.apply(F,{...$,wtimeoutMS:void 0})}if(this.transaction.state===v0.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if(B==null&&this.timeoutContext==null)wB.WriteConcern.apply(F,{wtimeoutMS:1e4,...$,w:"majority"});else wB.WriteConcern.apply(F,{w:"majority",...$,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")F.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let Z=new jK.RunAdminCommandOperation(F,{session:this,readPreference:IK.ReadPreference.primary,bypassPinningCheck:!0}),D=this.timeoutContext??(typeof B==="number"?TK.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:B}):null);try{await EW.executeOperation(this.client,Z,D),this.commitAttempted=void 0;return}catch(X){if(this.commitAttempted=!0,X instanceof x1.MongoError&&x1.isRetryableWriteError(X)){wB.WriteConcern.apply(F,{wtimeoutMS:1e4,...$,w:"majority"}),this.unpin({force:!0});try{await EW.executeOperation(this.client,new jK.RunAdminCommandOperation(F,{session:this,readPreference:IK.ReadPreference.primary,bypassPinningCheck:!0}),D);return}catch(J){if(py(J))J.addErrorLabel(x1.MongoErrorLabel.UnknownTransactionCommitResult);if(ly(J))this.unpin({error:J});throw J}}if(py(X))X.addErrorLabel(x1.MongoErrorLabel.UnknownTransactionCommitResult);if(ly(X))this.unpin({error:X});throw X}finally{this.transaction.transition(v0.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(A){if(this.transaction.state===v0.TxnState.NO_TRANSACTION)throw new x1.MongoTransactionError("No transaction started");if(this.transaction.state===v0.TxnState.STARTING_TRANSACTION){this.transaction.transition(v0.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===v0.TxnState.TRANSACTION_ABORTED)throw new x1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===v0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v0.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new x1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let F={abortTransaction:1},B=typeof A?.timeoutMS==="number"?A.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,$=B!=null?TK.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,Z=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(Z!=null&&B==null)wB.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...Z});if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let D=new jK.RunAdminCommandOperation(F,{session:this,readPreference:IK.ReadPreference.primary,bypassPinningCheck:!0});try{await EW.executeOperation(this.client,D,$),this.unpin();return}catch(X){if(this.unpin(),X.name==="MongoRuntimeError")throw X;if(A?.throwTimeout&&X.name==="MongoOperationTimeoutError")throw X;if(X instanceof x1.MongoError&&x1.isRetryableWriteError(X))try{await EW.executeOperation(this.client,D,$);return}catch(J){if(J.name==="MongoRuntimeError")throw J;if(A?.throwTimeout&&J.name==="MongoOperationTimeoutError")throw J}}finally{if(this.transaction.transition(v0.TxnState.TRANSACTION_ABORTED),this.loadBalanced)wW(this,{force:!1})}}toBSON(){throw new x1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(A,F){let $=F?.timeoutMS??this.timeoutMS??null;this.timeoutContext=$!=null?TK.TimeoutContext.create({timeoutMS:$,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let Z=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:M4.now(),D=!1,X;try{while(!D){this.startTransaction(F);try{let J=A(this);if(!M4.isPromiseLike(J))throw new x1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(X=await J,this.transaction.state===v0.TxnState.NO_TRANSACTION||this.transaction.state===v0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v0.TxnState.TRANSACTION_ABORTED)return X}catch(J){if(!(J instanceof x1.MongoError)||J instanceof x1.MongoInvalidArgumentError)throw await this.abortTransaction(),J;if(this.transaction.state===v0.TxnState.STARTING_TRANSACTION||this.transaction.state===v0.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(J.hasErrorLabel(x1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||M4.now()-Z<120000))continue;throw J}while(!D)try{await this.commitTransaction(),D=!0}catch(J){if(!MW(J)&&J.hasErrorLabel(x1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||M4.now()-Z<120000))continue;if(J.hasErrorLabel(x1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||M4.now()-Z<120000))break;throw J}}return X}finally{this.timeoutContext=null}}}sy.ClientSession=NW;$R1.configureResourceManagement(NW.prototype);var DR1=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function ly(A){if(A instanceof x1.MongoError){if(x1.isRetryableWriteError(A)||A instanceof x1.MongoWriteConcernError||MW(A)){if(ny(A))return!0}else if(A.hasErrorLabel(x1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function py(A){let F=x1.isRetryableWriteError(A);return F||=A instanceof x1.MongoWriteConcernError,F||=MW(A),F&&=ny(A),F}function ny(A){let F=A instanceof x1.MongoServerError&&A.codeName&&DR1.has(A.codeName);return MW(A)||!F&&A.code!==x1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&A.code!==x1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function wW(A,F){let B=A.pinnedConnection,$=F?.error;if(A.inTransaction()&&$&&$ instanceof x1.MongoError&&$.hasErrorLabel(x1.MongoErrorLabel.TransientTransactionError))return;let Z=A.client.topology;if(B&&Z!=null){let X=Array.from(Z.s.servers.values())[0];if(F?.error==null||F?.force){if(X.pool.checkIn(B),A.pinnedConnection=void 0,B.emit(iy.UNPINNED,A.transaction.state!==v0.TxnState.NO_TRANSACTION?VW.ConnectionPoolMetrics.TXN:VW.ConnectionPoolMetrics.CURSOR),F?.forceClear)X.pool.clear({serviceId:B.serviceId})}}}function MW(A){if(A==null||!(A instanceof x1.MongoServerError))return!1;return A.code===x1.MONGODB_ERROR_CODES.MaxTimeMSExpired||A.writeConcernError?.code===x1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class RW{constructor(A){if(A!=null){let F=Buffer.allocUnsafe(16);F.set(A.id.id.buffer),this.id={id:new LW.Binary(F,A.id.id.sub_type)},this.lastUse=A.lastUse,this.txnNumber=A.txnNumber,this.isDirty=A.isDirty;return}this.id={id:new LW.Binary(M4.uuidV4(),LW.Binary.SUBTYPE_UUID)},this.lastUse=M4.now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(A){return Math.round(M4.calculateDurationInMs(this.lastUse)%86400000%3600000/60000)>A-1}}sy.ServerSession=RW;class SK{constructor(A){if(A==null)throw new x1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=A,this.sessions=new M4.List}acquire(){let A=this.client.topology?.logicalSessionTimeoutMinutes??10,F=null;while(this.sessions.length>0){let B=this.sessions.shift();if(B!=null&&(!!this.client.topology?.loadBalanced||!B.hasTimedOut(A))){F=B;break}}if(F==null)F=new RW;return F}release(A){let F=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!F)this.sessions.unshift(A);if(!F)return;if(this.sessions.prune((B)=>B.hasTimedOut(F)),!A.hasTimedOut(F)){if(A.isDirty)return;this.sessions.unshift(A)}}}sy.ServerSessionPool=SK;function XR1(A,F,B){if(A.hasEnded)return new x1.MongoExpiredSessionError;let $=A.serverSession;if($==null)return new x1.MongoRuntimeError("Unable to acquire server session");if(B.writeConcern?.w===0){if(A&&A.explicit)return new x1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}$.lastUse=M4.now(),F.lsid=$.id;let Z=A.inTransaction()||v0.isTransactionCommand(F);if(!!B.willRetryWrite||Z)$.txnNumber+=A.txnNumberIncrement,A.txnNumberIncrement=0,F.txnNumber=LW.Long.fromNumber($.txnNumber);if(!Z){if(A.transaction.state!==v0.TxnState.NO_TRANSACTION)A.transaction.transition(v0.TxnState.NO_TRANSACTION);if(A.supports.causalConsistency&&A.operationTime&&M4.commandSupportsReadConcern(F))F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:A.operationTime});else if(A.snapshotEnabled){if(F.readConcern=F.readConcern||{level:BR1.ReadConcernLevel.snapshot},A.snapshotTime!=null)Object.assign(F.readConcern,{atClusterTime:A.snapshotTime})}return}if(F.autocommit=!1,A.transaction.state===v0.TxnState.STARTING_TRANSACTION){A.transaction.transition(v0.TxnState.TRANSACTION_IN_PROGRESS),F.startTransaction=!0;let X=A.transaction.options.readConcern||A?.clientOptions?.readConcern;if(X)F.readConcern=X;if(A.supports.causalConsistency&&A.operationTime)F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:A.operationTime})}return}function JR1(A,F){if(F.$clusterTime)OK._advanceClusterTime(A,F.$clusterTime);if(F.operationTime&&A&&A.supports.causalConsistency)A.advanceOperationTime(F.operationTime);if(F.recoveryToken&&A&&A.inTransaction())A.transaction._recoveryToken=F.recoveryToken;if(A?.snapshotEnabled&&A.snapshotTime==null){let B=F.atClusterTime;if(B)A.snapshotTime=B}}});var gK=C((Bv)=>{Object.defineProperty(Bv,"__esModule",{value:!0});Bv.SENSITIVE_COMMANDS=Bv.CommandFailedEvent=Bv.CommandSucceededEvent=Bv.CommandStartedEvent=void 0;var BD=l2(),oy=K1(),kK=pZ();class ey{constructor(A,F,B){this.name=BD.COMMAND_STARTED;let $=bK(F),Z=_K($),{address:D,connectionId:X,serviceId:J}=fK(A);if(Bv.SENSITIVE_COMMANDS.has(Z))this.commandObj={},this.commandObj[Z]=!0;this.address=D,this.connectionId=X,this.serviceId=J,this.requestId=F.requestId,this.databaseName=F.databaseName,this.commandName=Z,this.command=xK(Z,$,$),this.serverConnectionId=B}get hasServiceId(){return!!this.serviceId}}Bv.CommandStartedEvent=ey;class Av{constructor(A,F,B,$,Z){this.name=BD.COMMAND_SUCCEEDED;let D=bK(F),X=_K(D),{address:J,connectionId:Y,serviceId:W}=fK(A);this.address=J,this.connectionId=Y,this.serviceId=W,this.requestId=F.requestId,this.commandName=X,this.duration=oy.calculateDurationInMs($),this.reply=xK(X,D,UR1(B)),this.serverConnectionId=Z,this.databaseName=F.databaseName}get hasServiceId(){return!!this.serviceId}}Bv.CommandSucceededEvent=Av;class Fv{constructor(A,F,B,$,Z){this.name=BD.COMMAND_FAILED;let D=bK(F),X=_K(D),{address:J,connectionId:Y,serviceId:W}=fK(A);this.address=J,this.connectionId=Y,this.serviceId=W,this.requestId=F.requestId,this.commandName=X,this.duration=oy.calculateDurationInMs($),this.failure=xK(X,D,B),this.serverConnectionId=Z,this.databaseName=F.databaseName}get hasServiceId(){return!!this.serviceId}}Bv.CommandFailedEvent=Fv;Bv.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var qR1=new Set(["hello",BD.LEGACY_HELLO_COMMAND,BD.LEGACY_HELLO_COMMAND_CAMEL_CASE]),_K=(A)=>Object.keys(A)[0],HR1=(A)=>A.ns.split(".")[1],xK=(A,F,B)=>Bv.SENSITIVE_COMMANDS.has(A)||qR1.has(A)&&F.speculativeAuthenticate?{}:B,ty={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},ry={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function bK(A){if(A instanceof kK.OpMsgRequest){let $={...A.command};if($.ops instanceof kK.DocumentSequence)$.ops=$.ops.documents;if($.nsInfo instanceof kK.DocumentSequence)$.nsInfo=$.nsInfo.documents;return $}if(A.query?.$query){let $;if(A.ns==="admin.$cmd")$=Object.assign({},A.query.$query);else $={find:HR1(A)},Object.keys(ty).forEach((Z)=>{if(A.query[Z]!=null)$[ty[Z]]={...A.query[Z]}});return Object.keys(ry).forEach((Z)=>{let D=Z;if(A[D]!=null)$[ry[D]]=A[D]}),$}let F={},B={...A};if(A.query)F={...A.query},B.query=F;return A.query?F:B}function UR1(A){if(!A)return A;return A.result?A.result:A}function fK(A){let F;if("id"in A)F=A.id;return{address:A.address,serviceId:A.serviceId,connectionId:F}}});var Xv=C((Zv)=>{Object.defineProperty(Zv,"__esModule",{value:!0});Zv.StreamDescription=void 0;var LR1=C0(),wR1=L9(),VR1=AD(),NR1=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class $v{constructor(A,F){this.hello=null,this.address=A,this.type=wR1.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes,this.loadBalanced=!!F?.loadBalanced,this.compressors=F&&F.compressors&&Array.isArray(F.compressors)?F.compressors:[],this.serverConnectionId=null}receiveResponse(A){if(A==null)return;if(this.hello=A,this.type=VR1.parseServerType(A),"connectionId"in A)this.serverConnectionId=this.parseServerConnectionID(A.connectionId);else this.serverConnectionId=null;for(let F of NR1){if(A[F]!=null)this[F]=A[F];if("__nodejs_mock_server__"in A)this.__nodejs_mock_server__=A.__nodejs_mock_server__}if(A.compression)this.compressor=this.compressors.filter((F)=>A.compression?.includes(F))[0]}parseServerConnectionID(A){return LR1.Long.isLong(A)?A.toBigInt():BigInt(A)}}Zv.StreamDescription=$v});var Yv=C((Jv)=>{Object.defineProperty(Jv,"__esModule",{value:!0});Jv.onData=MR1;var $D=K1();function MR1(A,{timeoutContext:F,signal:B}){B?.throwIfAborted();let $=new $D.List,Z=new $D.List,D=null,X=!1,J={next(){let z=$.shift();if(z!=null)return Promise.resolve({value:z,done:!1});if(D!=null){let E=Promise.reject(D);return D=null,E}if(X)return q();let{promise:H,resolve:U,reject:K}=$D.promiseWithResolvers();return Z.push({resolve:U,reject:K}),H},return(){return q()},throw(z){return Q(z),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await q()}};A.on("data",G),A.on("error",Q);let Y=$D.addAbortListener(B,function(){Q(this.reason)}),W=F?.timeoutForSocketRead;return W?.throwIfExpired(),W?.then(void 0,Q),J;function G(z){let H=Z.shift();if(H!=null)H.resolve({value:z,done:!1});else $.push(z)}function Q(z){let H=Z.shift();if(H!=null)H.reject(z);else D=z;q()}function q(){A.off("data",G),A.off("error",Q),Y?.[$D.kDispose](),X=!0,W?.clear();let z={value:void 0,done:X};for(let H of Z)H.resolve(z);return Promise.resolve(z)}}});var IW=C((Hv)=>{Object.defineProperty(Hv,"__esModule",{value:!0});Hv.CryptoConnection=Hv.SizedMessageTransform=Hv.Connection=void 0;Hv.hasSessionSupport=xR1;var PR1=A1("stream"),zv=A1("timers"),jR1=C0(),w5=l2(),E2=X1(),Wv=Z5(),IR1=V9(),TR1=E6(),OR1=L9(),Gv=VB(),Qv=r6(),R9=K1(),uK=gK(),jW=pZ(),SR1=Xv(),kR1=iZ(),_R1=Yv(),ZD=v7(),yK=RK();function xR1(A){return A.description.logicalSessionTimeoutMinutes!=null}function bR1(A,F){if(F.proxyHost)return F.hostAddress.toString();let{remoteAddress:B,remotePort:$}=A;if(typeof B==="string"&&typeof $==="number")return R9.HostAddress.fromHostPort(B,$).toString();return R9.uuidV4().toString("hex")}class S6 extends IR1.TypedEventEmitter{constructor(A,F){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",R9.noop),this.socket=A,this.id=F.id,this.address=bR1(A,F),this.socketTimeoutMS=F.socketTimeoutMS??0,this.monitorCommands=F.monitorCommands,this.serverApi=F.serverApi,this.mongoLogger=F.mongoLogger,this.established=!1,this.description=new SR1.StreamDescription(this.address,F),this.generation=F.generation,this.lastUseTime=R9.now(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new vK({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(A){this.description.receiveResponse(A),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return R9.calculateDurationInMs(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&R9.maxWireVersion(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Wv.MongoLoggableComponent.COMMAND,Wv.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=R9.now()}onSocketError(A){this.onError(new E2.MongoNetworkError(A.message,{cause:A}))}onTransformError(A){this.onError(A)}onError(A){this.cleanup(A)}onClose(){let A=`connection ${this.id} to ${this.address} closed`;this.cleanup(new E2.MongoNetworkError(A))}onTimeout(){this.delayedTimeoutId=zv.setTimeout(()=>{let A=`connection ${this.id} to ${this.address} timed out`,F=this.hello==null;this.cleanup(new E2.MongoNetworkTimeoutError(A,{beforeHandshake:F}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(S6.PINNED),this.removeAllListeners(S6.UNPINNED);let A=`connection ${this.id} to ${this.address} closed`;this.cleanup(new E2.MongoNetworkError(A))}cleanup(A){if(this.closed)return;this.socket.destroy(),this.error=A,this.dataEvents?.throw(A).then(void 0,R9.squashError),this.closed=!0,this.emit(S6.CLOSE)}prepareCommand(A,F,B){let $={...F},Z=yK.getReadPreference(B),D=B?.session,X=this.clusterTime;if(this.serverApi){let{version:W,strict:G,deprecationErrors:Q}=this.serverApi;if($.apiVersion=W,G!=null)$.apiStrict=G;if(Q!=null)$.apiDeprecationErrors=Q}if(this.hasSessionSupport&&D){if(D.clusterTime&&X&&D.clusterTime.clusterTime.greaterThan(X.clusterTime))X=D.clusterTime;let W=Gv.applySession(D,$,B);if(W)throw W}else if(D?.explicit)throw new E2.MongoCompatibilityError("Current topology does not support sessions");if(X)$.$clusterTime=X;if(this.description.type!==OR1.ServerType.Standalone){if(!yK.isSharded(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&B.directConnection===!0&&Z?.mode==="primary")$.$readPreference=TR1.ReadPreference.primaryPreferred.toJSON();else if(yK.isSharded(this)&&!this.supportsOpMsg&&Z?.mode!=="primary")$={$query:$,$readPreference:Z.toJSON()};else if(Z?.mode!=="primary")$.$readPreference=Z.toJSON()}let J={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:Z.secondaryOk(),...B};return B.timeoutContext?.addMaxTimeMSToCommand($,B),this.supportsOpMsg?new jW.OpMsgRequest(A,$,J):new jW.OpQueryRequest(A,$,J)}async*sendWire(A,F,B){this.throwIfAborted();let $=F.socketTimeoutMS??F?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout($);try{if(await this.writeCommand(A,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:F.timeoutContext,signal:F.signal}),F.noResponse||A.moreToCome){yield ZD.MongoDBResponse.empty;return}if(this.throwIfAborted(),F.timeoutContext?.csotEnabled()&&F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new E2.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let Z of this.readMany(F)){this.socket.setTimeout(0);let D=Z.parse();yield(B??ZD.MongoDBResponse).make(D),this.throwIfAborted(),this.socket.setTimeout($)}}finally{this.socket.setTimeout(0)}}async*sendCommand(A,F,B,$){B?.signal?.throwIfAborted();let Z=this.prepareCommand(A.db,F,B),D=0;if(this.shouldEmitAndLogCommand)D=R9.now(),this.emitAndLogCommand(this.monitorCommands,S6.COMMAND_STARTED,Z.databaseName,this.established,new uK.CommandStartedEvent(this,Z,this.description.serverConnectionId));let X=B.documentsReturnedIn==null||!B.raw?B:{...B,raw:!1,fieldsAsRaw:{[B.documentsReturnedIn]:!0}},J=void 0,Y=void 0;try{this.throwIfAborted();for await(J of this.sendWire(Z,B,$)){if(Y=void 0,B.session!=null)Gv.updateSessionFromResponse(B.session,J);if(J.$clusterTime)this.clusterTime=J.$clusterTime,this.emit(S6.CLUSTER_TIME_RECEIVED,J.$clusterTime);if(J.ok===0){if(B.timeoutContext?.csotEnabled()&&J.isMaxTimeExpiredError)throw new E2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new E2.MongoServerError(Y??=J.toObject(X))});throw new E2.MongoServerError(Y??=J.toObject(X))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,S6.COMMAND_SUCCEEDED,Z.databaseName,this.established,new uK.CommandSucceededEvent(this,Z,B.noResponse?void 0:Z.moreToCome?{ok:1}:Y??=J.toObject(X),D,this.description.serverConnectionId));if($==null)yield Y??=J.toObject(X);else yield J;this.throwIfAborted()}}catch(W){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,S6.COMMAND_FAILED,Z.databaseName,this.established,new uK.CommandFailedEvent(this,Z,W,D,this.description.serverConnectionId));throw W}}async command(A,F,B={},$){this.throwIfAborted(),B.signal?.throwIfAborted();for await(let Z of this.sendCommand(A,F,B,$)){if(B.timeoutContext?.csotEnabled()){if(ZD.MongoDBResponse.is(Z)){if(Z.isMaxTimeExpiredError)throw new E2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new E2.MongoServerError(Z.toObject())})}else if(Array.isArray(Z?.writeErrors)&&Z.writeErrors.some((D)=>D?.code===E2.MONGODB_ERROR_CODES.MaxTimeMSExpired)||Z?.writeConcernError?.code===E2.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new E2.MongoOperationTimeoutError("Server reported a timeout error",{cause:new E2.MongoServerError(Z)})}return Z}throw new E2.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(A,F,B,$){(async()=>{this.throwIfAborted();for await(let D of this.sendCommand(A,F,B))$(void 0,D),this.throwIfAborted();throw new E2.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,$)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(A,F){let B=F.agreedCompressor==="none"||!jW.OpCompressedRequest.canCompress(A)?A:new jW.OpCompressedRequest(A,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0}),$=Buffer.concat(await B.toBin());if(F.timeoutContext?.csotEnabled()){if(F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new E2.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}if(this.socket.write($))return;let Z=R9.once(this.socket,"drain",F),D=F?.timeoutContext?.timeoutForSocketWrite,X=D?Promise.race([Z,D]):Z;try{return await X}catch(J){if(Qv.TimeoutError.is(J)){let Y=new E2.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(Y),Y}else if(J===F.signal?.reason)this.onError(J);throw J}finally{D?.clear()}}async*readMany(A){try{this.dataEvents=_R1.onData(this.messageStream,A),this.messageStream.resume();for await(let F of this.dataEvents){let B=await kR1.decompressResponse(F);if(yield B,!B.moreToCome)return}}catch(F){if(Qv.TimeoutError.is(F)){let B=new E2.MongoOperationTimeoutError(`Timed out during socket read (${F.duration}ms)`);throw this.dataEvents=null,this.onError(B),B}else if(F===A.signal?.reason)this.onError(F);throw F}finally{this.dataEvents=null,this.messageStream.pause()}}}Hv.Connection=S6;S6.COMMAND_STARTED=w5.COMMAND_STARTED;S6.COMMAND_SUCCEEDED=w5.COMMAND_SUCCEEDED;S6.COMMAND_FAILED=w5.COMMAND_FAILED;S6.CLUSTER_TIME_RECEIVED=w5.CLUSTER_TIME_RECEIVED;S6.CLOSE=w5.CLOSE;S6.PINNED=w5.PINNED;S6.UNPINNED=w5.UNPINNED;class vK extends PR1.Transform{constructor({connection:A}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new R9.BufferPool,this.connection=A}_transform(A,F,B){if(this.connection.delayedTimeoutId!=null)zv.clearTimeout(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(A);while(this.bufferPool.length){let $=this.bufferPool.getInt32();if($==null)break;if($<0)return B(new E2.MongoParseError(`Message size cannot be negative: ${$}`));if($>this.bufferPool.length)break;let Z=this.bufferPool.read($);if(!this.push(Z))return B(new E2.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}B()}}Hv.SizedMessageTransform=vK;class qv extends S6{constructor(A,F){super(A,F);this.autoEncrypter=F.autoEncrypter}async command(A,F,B,$){let{autoEncrypter:Z}=this;if(!Z)throw new E2.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});let D=R9.maxWireVersion(this);if(D===0)return await super.command(A,F,B,$);if(D<8)throw new E2.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2");let X=F.find||F.findAndModify?F.sort:null,J=F.createIndexes?F.indexes.map((q)=>q.key):null,Y=await Z.encrypt(A.toString(),F,B);if(X!=null&&(F.find||F.findAndModify))Y.sort=X;if(J!=null&&F.createIndexes)for(let[q,z]of J.entries())Y.indexes[q].key=z;let W=await super.command(A,Y,B,$??ZD.MongoDBResponse),G=await Z.decrypt(W.toBytes(),B),Q=$?.make(G)??jR1.deserialize(G,B);if(Z[w5.kDecorateResult]){if($==null)R9.decorateDecryptionResult(Q,W.toObject(),!0);else if(Q instanceof ZD.CursorResponse)Q.encryptedResponse=W}return Q}}Hv.CryptoConnection=qv});var cK=C((Nv)=>{Object.defineProperty(Nv,"__esModule",{value:!0});Nv.LEGAL_TCP_SOCKET_OPTIONS=Nv.LEGAL_TLS_SOCKET_OPTIONS=void 0;Nv.connect=dR1;Nv.makeConnection=Lv;Nv.performInitialHandshake=wv;Nv.prepareHandshakeDocument=Vv;Nv.makeSocket=OW;var Kv=A1("net"),yR1=A1("tls"),Ev=l2(),vR1=m7(),I2=X1(),hK=K1(),hR1=G5(),TW=U8(),Cv=IW(),NB=QA();async function dR1(A){let F=null;try{let B=await OW(A);return F=Lv(A,B),await wv(F,A),F}catch(B){throw F?.destroy(),B}}function Lv(A,F){let B=A.connectionType??Cv.Connection;if(A.autoEncrypter)B=Cv.CryptoConnection;return new B(F,A)}function mR1(A,F){let B=Number(A.maxWireVersion),$=Number(A.minWireVersion),Z=!Number.isNaN(B)&&B>=NB.MIN_SUPPORTED_WIRE_VERSION,D=!Number.isNaN($)&&$<=NB.MAX_SUPPORTED_WIRE_VERSION;if(Z){if(D)return null;let J=`Server at ${F.hostAddress} reports minimum wire version ${JSON.stringify(A.minWireVersion)}, but this version of the Node.js Driver requires at most ${NB.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${NB.MAX_SUPPORTED_SERVER_VERSION})`;return new I2.MongoCompatibilityError(J)}let X=`Server at ${F.hostAddress} reports maximum wire version ${JSON.stringify(A.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${NB.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${NB.MIN_SUPPORTED_SERVER_VERSION})`;return new I2.MongoCompatibilityError(X)}async function wv(A,F){let B=F.credentials;if(B){if(B.mechanism!==TW.AuthMechanism.MONGODB_DEFAULT&&!F.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties))throw new I2.MongoInvalidArgumentError(`AuthMechanism '${B.mechanism}' not supported`)}let $=new hR1.AuthContext(A,B,F);A.authContext=$;let Z=await Vv($),D={...F,raw:!1};if(typeof F.connectTimeoutMS==="number")D.socketTimeoutMS=F.connectTimeoutMS;let X=new Date().getTime(),J=await W(Z,D);if(!("isWritablePrimary"in J))J.isWritablePrimary=J[Ev.LEGACY_HELLO_COMMAND];if(J.helloOk)A.helloOk=!0;let Y=mR1(J,F);if(Y)throw Y;if(F.loadBalanced){if(!J.serviceId)throw new I2.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(A.hello=J,A.lastHelloMS=new Date().getTime()-X,!J.arbiterOnly&&B){$.response=J;let G=B.resolveAuthMechanism(J),Q=F.authProviders.getOrCreateProvider(G.mechanism,G.mechanismProperties);if(!Q)throw new I2.MongoInvalidArgumentError(`No AuthProvider for ${G.mechanism} defined.`);try{await Q.auth($)}catch(q){if(q instanceof I2.MongoError){if(q.addErrorLabel(I2.MongoErrorLabel.HandshakeError),I2.needsRetryableWriteLabel(q,J.maxWireVersion,A.description.type))q.addErrorLabel(I2.MongoErrorLabel.RetryableWriteError)}throw q}}A.established=!0;async function W(G,Q){try{return await A.command(hK.ns("admin.$cmd"),G,Q)}catch(q){if(q instanceof I2.MongoError)q.addErrorLabel(I2.MongoErrorLabel.HandshakeError);throw q}}}async function Vv(A){let F=A.options,B=F.compressors?F.compressors:[],{serverApi:$}=A.connection,Z=await F.extendedMetadata,D={[$?.version||F.loadBalanced===!0?"hello":Ev.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:Z,compression:B};if(F.loadBalanced===!0)D.loadBalanced=!0;let X=A.credentials;if(X){if(X.mechanism===TW.AuthMechanism.MONGODB_DEFAULT&&X.username){D.saslSupportedMechs=`${X.source}.${X.username}`;let Y=A.options.authProviders.getOrCreateProvider(TW.AuthMechanism.MONGODB_SCRAM_SHA256,X.mechanismProperties);if(!Y)throw new I2.MongoInvalidArgumentError(`No AuthProvider for ${TW.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await Y.prepare(D,A)}let J=A.options.authProviders.getOrCreateProvider(X.mechanism,X.mechanismProperties);if(!J)throw new I2.MongoInvalidArgumentError(`No AuthProvider for ${X.mechanism} defined.`);return await J.prepare(D,A)}return D}Nv.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Nv.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function dK(A){let F=A.hostAddress;if(!F)throw new I2.MongoInvalidArgumentError('Option "hostAddress" is required');let B={};for(let $ of Nv.LEGAL_TCP_SOCKET_OPTIONS)if(A[$]!=null)B[$]=A[$];if(B.keepAliveInitialDelay??=120000,B.keepAlive=!0,B.noDelay=A.noDelay??!0,typeof F.socketPath==="string")return B.path=F.socketPath,B;else if(typeof F.host==="string")return B.host=F.host,B.port=F.port,B;else throw new I2.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(F)}`)}function cR1(A){let F=dK(A);for(let B of Nv.LEGAL_TLS_SOCKET_OPTIONS)if(A[B]!=null)F[B]=A[B];if(A.existingSocket)F.socket=A.existingSocket;if(F.servername==null&&F.host&&!Kv.isIP(F.host))F.servername=F.host;return F}async function OW(A){let F=A.tls??!1,B=A.connectTimeoutMS??30000,$=A.existingSocket,Z;if(A.proxyHost!=null)return await pR1({...A,connectTimeoutMS:B});if(F){let W=yR1.connect(cR1(A));if(typeof W.disableRenegotiation==="function")W.disableRenegotiation();Z=W}else if($)Z=$;else Z=Kv.createConnection(dK(A));Z.setTimeout(B);let D=null,{promise:X,resolve:J,reject:Y}=hK.promiseWithResolvers();if($)J(Z);else{let W=performance.now(),G=F?"secureConnect":"connect";if(Z.once(G,()=>J(Z)).once("error",(Q)=>Y(new I2.MongoNetworkError(I2.MongoError.buildErrorMessage(Q),{cause:Q}))).once("timeout",()=>{Y(new I2.MongoNetworkTimeoutError(`Socket '${G}' timed out after ${performance.now()-W|0}ms (connectTimeoutMS: ${B})`))}).once("close",()=>Y(new I2.MongoNetworkError(`Socket closed after ${performance.now()-W|0} during connection establishment`))),A.cancellationToken!=null)D=()=>Y(new I2.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-W|0}`)),A.cancellationToken.once("cancel",D)}try{return Z=await X,Z}catch(W){throw Z.destroy(),W}finally{if(Z.setTimeout(0),D!=null)A.cancellationToken?.removeListener("cancel",D)}}var DD=null;function lR1(){if(DD==null){let A=vR1.getSocks();if("kModuleError"in A)throw A.kModuleError;DD=A}return DD}async function pR1(A){let F=hK.HostAddress.fromHostPort(A.proxyHost??"",A.proxyPort??1080),B=await OW({...A,hostAddress:F,tls:!1,proxyHost:void 0}),$=dK(A);if(typeof $.host!=="string"||typeof $.port!=="number")throw new I2.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");DD??=lR1();let Z;try{Z=(await DD.SocksClient.createConnection({existing_socket:B,timeout:A.connectTimeoutMS,command:"connect",destination:{host:$.host,port:$.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:A.proxyUsername||void 0,password:A.proxyPassword||void 0}})).socket}catch(D){throw new I2.MongoNetworkError(I2.MongoError.buildErrorMessage(D),{cause:D})}return await OW({...A,existingSocket:Z,proxyHost:void 0})}});var SW=C((xv)=>{Object.defineProperty(xv,"__esModule",{value:!0});xv.ServerHeartbeatFailedEvent=xv.ServerHeartbeatSucceededEvent=xv.ServerHeartbeatStartedEvent=xv.TopologyClosedEvent=xv.TopologyOpeningEvent=xv.TopologyDescriptionChangedEvent=xv.ServerClosedEvent=xv.ServerOpeningEvent=xv.ServerDescriptionChangedEvent=void 0;var Y3=l2();class Rv{constructor(A,F,B,$){this.name=Y3.SERVER_DESCRIPTION_CHANGED,this.topologyId=A,this.address=F,this.previousDescription=B,this.newDescription=$}}xv.ServerDescriptionChangedEvent=Rv;class Pv{constructor(A,F){this.name=Y3.SERVER_OPENING,this.topologyId=A,this.address=F}}xv.ServerOpeningEvent=Pv;class jv{constructor(A,F){this.name=Y3.SERVER_CLOSED,this.topologyId=A,this.address=F}}xv.ServerClosedEvent=jv;class Iv{constructor(A,F,B){this.name=Y3.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=A,this.previousDescription=F,this.newDescription=B}}xv.TopologyDescriptionChangedEvent=Iv;class Tv{constructor(A){this.name=Y3.TOPOLOGY_OPENING,this.topologyId=A}}xv.TopologyOpeningEvent=Tv;class Ov{constructor(A){this.name=Y3.TOPOLOGY_CLOSED,this.topologyId=A}}xv.TopologyClosedEvent=Ov;class Sv{constructor(A,F){this.name=Y3.SERVER_HEARTBEAT_STARTED,this.connectionId=A,this.awaited=F}}xv.ServerHeartbeatStartedEvent=Sv;class kv{constructor(A,F,B,$){this.name=Y3.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=A,this.duration=F,this.reply=B??{},this.awaited=$}}xv.ServerHeartbeatSucceededEvent=kv;class _v{constructor(A,F,B,$){this.name=Y3.SERVER_HEARTBEAT_FAILED,this.connectionId=A,this.duration=F,this.failure=B,this.awaited=$}}xv.ServerHeartbeatFailedEvent=_v});var pK=C((iv)=>{Object.defineProperty(iv,"__esModule",{value:!0});iv.ConnectionPoolClearedEvent=iv.ConnectionCheckedInEvent=iv.ConnectionCheckedOutEvent=iv.ConnectionCheckOutFailedEvent=iv.ConnectionCheckOutStartedEvent=iv.ConnectionClosedEvent=iv.ConnectionReadyEvent=iv.ConnectionCreatedEvent=iv.ConnectionPoolClosedEvent=iv.ConnectionPoolReadyEvent=iv.ConnectionPoolCreatedEvent=iv.ConnectionPoolMonitoringEvent=void 0;var p7=l2(),lK=K1();class P9{constructor(A){this.time=new Date,this.address=A.address}}iv.ConnectionPoolMonitoringEvent=P9;class fv extends P9{constructor(A){super(A);this.name=p7.CONNECTION_POOL_CREATED;let{maxConnecting:F,maxPoolSize:B,minPoolSize:$,maxIdleTimeMS:Z,waitQueueTimeoutMS:D}=A.options;this.options={maxConnecting:F,maxPoolSize:B,minPoolSize:$,maxIdleTimeMS:Z,waitQueueTimeoutMS:D}}}iv.ConnectionPoolCreatedEvent=fv;class gv extends P9{constructor(A){super(A);this.name=p7.CONNECTION_POOL_READY}}iv.ConnectionPoolReadyEvent=gv;class uv extends P9{constructor(A){super(A);this.name=p7.CONNECTION_POOL_CLOSED}}iv.ConnectionPoolClosedEvent=uv;class yv extends P9{constructor(A,F){super(A);this.name=p7.CONNECTION_CREATED,this.connectionId=F.id}}iv.ConnectionCreatedEvent=yv;class vv extends P9{constructor(A,F,B){super(A);this.name=p7.CONNECTION_READY,this.durationMS=lK.now()-B,this.connectionId=F.id}}iv.ConnectionReadyEvent=vv;class hv extends P9{constructor(A,F,B,$){super(A);this.name=p7.CONNECTION_CLOSED,this.connectionId=F.id,this.reason=B,this.serviceId=F.serviceId,this.error=$??null}}iv.ConnectionClosedEvent=hv;class dv extends P9{constructor(A){super(A);this.name=p7.CONNECTION_CHECK_OUT_STARTED}}iv.ConnectionCheckOutStartedEvent=dv;class mv extends P9{constructor(A,F,B,$){super(A);this.name=p7.CONNECTION_CHECK_OUT_FAILED,this.durationMS=lK.now()-B,this.reason=F,this.error=$}}iv.ConnectionCheckOutFailedEvent=mv;class cv extends P9{constructor(A,F,B){super(A);this.name=p7.CONNECTION_CHECKED_OUT,this.durationMS=lK.now()-B,this.connectionId=F.id}}iv.ConnectionCheckedOutEvent=cv;class lv extends P9{constructor(A,F){super(A);this.name=p7.CONNECTION_CHECKED_IN,this.connectionId=F.id}}iv.ConnectionCheckedInEvent=lv;class pv extends P9{constructor(A,F={}){super(A);this.name=p7.CONNECTION_POOL_CLEARED,this.serviceId=F.serviceId,this.interruptInUseConnections=F.interruptInUseConnections}}iv.ConnectionPoolClearedEvent=pv});var nK=C((rv)=>{Object.defineProperty(rv,"__esModule",{value:!0});rv.WaitQueueTimeoutError=rv.PoolClearedOnNetworkError=rv.PoolClearedError=rv.PoolClosedError=void 0;var kW=X1();class sv extends kW.MongoDriverError{constructor(A){super("Attempted to check out a connection from closed connection pool");this.address=A.address}get name(){return"MongoPoolClosedError"}}rv.PoolClosedError=sv;class iK extends kW.MongoNetworkError{constructor(A,F){let B=F?F:`Connection pool for ${A.address} was cleared because another operation failed with: "${A.serverError?.message}"`;super(B,A.serverError?{cause:A.serverError}:void 0);this.address=A.address,this.addErrorLabel(kW.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}}rv.PoolClearedError=iK;class av extends iK{constructor(A){super(A,`Connection to ${A.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}rv.PoolClearedOnNetworkError=av;class tv extends kW.MongoDriverError{constructor(A,F){super(A);this.address=F}get name(){return"MongoWaitQueueTimeoutError"}}rv.WaitQueueTimeoutError=tv});var Bh=C((Ah)=>{Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ConnectionPool=Ah.PoolState=void 0;var MB=A1("timers"),e9=l2(),i7=X1(),ev=V9(),LP1=r6(),W3=K1(),wP1=cK(),_W=IW(),k6=pK(),RB=nK(),VP1=wK();Ah.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class S0 extends ev.TypedEventEmitter{constructor(A,F){super();if(this.on("error",W3.noop),this.options=Object.freeze({connectionType:_W.Connection,...F,maxPoolSize:F.maxPoolSize??100,minPoolSize:F.minPoolSize??0,maxConnecting:F.maxConnecting??2,maxIdleTimeMS:F.maxIdleTimeMS??0,waitQueueTimeoutMS:F.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:F.minPoolSizeCheckFrequencyMS??100,autoEncrypter:F.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new i7.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=Ah.PoolState.paused,this.server=A,this.connections=new W3.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=W3.makeCounter(1),this.cancellationToken=new ev.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new W3.List,this.metrics=new VP1.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(S0.CONNECTION_POOL_CREATED,new k6.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===Ah.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==Ah.PoolState.paused)return;this.poolState=Ah.PoolState.ready,this.emitAndLog(S0.CONNECTION_POOL_READY,new k6.ConnectionPoolReadyEvent(this)),MB.clearTimeout(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(A){let F=W3.now();this.emitAndLog(S0.CONNECTION_CHECK_OUT_STARTED,new k6.ConnectionCheckOutStartedEvent(this));let{promise:B,resolve:$,reject:Z}=W3.promiseWithResolvers(),D=A.timeoutContext.connectionCheckoutTimeout,X={resolve:$,reject:Z,cancelled:!1,checkoutTime:F},J=W3.addAbortListener(A.signal,function(){X.cancelled=!0,Z(this.reason)});this.waitQueue.push(X),process.nextTick(()=>this.processWaitQueue());try{return D?.throwIfExpired(),await(D?Promise.race([B,D]):B)}catch(Y){if(LP1.TimeoutError.is(Y)){D?.clear(),X.cancelled=!0,this.emitAndLog(S0.CONNECTION_CHECK_OUT_FAILED,new k6.ConnectionCheckOutFailedEvent(this,"timeout",X.checkoutTime));let W=new RB.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(A.timeoutContext.csotEnabled())throw new i7.MongoOperationTimeoutError("Timed out during connection checkout",{cause:W});throw W}throw Y}finally{J?.[W3.kDispose](),D?.clear()}}checkIn(A){if(!this.checkedOut.has(A))return;let F=this.closed,B=this.connectionIsStale(A),$=!!(F||B||A.closed);if(!$)A.markAvailable(),this.connections.unshift(A);if(this.checkedOut.delete(A),this.emitAndLog(S0.CONNECTION_CHECKED_IN,new k6.ConnectionCheckedInEvent(this,A)),$){let Z=A.closed?"error":F?"poolClosed":"stale";this.destroyConnection(A,Z)}process.nextTick(()=>this.processWaitQueue())}clear(A={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:Z}=A;if(!Z)throw new i7.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let D=Z.toHexString(),X=this.serviceGenerations.get(D);if(X==null)throw new i7.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(D,X+1);this.emitAndLog(S0.CONNECTION_POOL_CLEARED,new k6.ConnectionPoolClearedEvent(this,{serviceId:Z}));return}let F=A.interruptInUseConnections??!1,B=this.generation;this.generation+=1;let $=this.poolState===Ah.PoolState.paused;if(this.poolState=Ah.PoolState.paused,this.clearMinPoolSizeTimer(),!$)this.emitAndLog(S0.CONNECTION_POOL_CLEARED,new k6.ConnectionPoolClearedEvent(this,{interruptInUseConnections:F}));if(F)process.nextTick(()=>this.interruptInUseConnections(B));this.processWaitQueue()}interruptInUseConnections(A){for(let F of this.checkedOut)if(F.generation<=A)F.onError(new RB.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let A of this.checkedOut)A.onError(new i7.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=Ah.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let A of this.connections)this.emitAndLog(S0.CONNECTION_CLOSED,new k6.ConnectionClosedEvent(this,A,"poolClosed")),A.destroy();this.connections.clear(),this.emitAndLog(S0.CONNECTION_POOL_CLOSED,new k6.ConnectionPoolClosedEvent(this))}async reauthenticate(A){let F=A.authContext;if(!F)throw new i7.MongoRuntimeError("No auth context found on connection.");let B=F.credentials;if(!B)throw new i7.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let $=B.resolveAuthMechanism(A.hello),Z=this.server.topology.client.s.authProviders.getOrCreateProvider($.mechanism,$.mechanismProperties);if(!Z)throw new i7.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${B.mechanism}`);await Z.reauth(F);return}clearMinPoolSizeTimer(){let A=this.minPoolSizeTimer;if(A)MB.clearTimeout(A)}destroyConnection(A,F){this.emitAndLog(S0.CONNECTION_CLOSED,new k6.ConnectionClosedEvent(this,A,F)),A.destroy()}connectionIsStale(A){let F=A.serviceId;if(this.loadBalanced&&F){let B=F.toHexString(),$=this.serviceGenerations.get(B);return A.generation!==$}return A.generation!==this.generation}connectionIsIdle(A){return!!(this.options.maxIdleTimeMS&&A.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(A){let F=this.connectionIsStale(A),B=this.connectionIsIdle(A);if(!F&&!B&&!A.closed)return!1;let $=A.closed?"error":F?"stale":"idle";return this.destroyConnection(A,$),!0}createConnection(A){let F={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let B=W3.now();this.emitAndLog(S0.CONNECTION_CREATED,new k6.ConnectionCreatedEvent(this,{id:F.id})),wP1.connect(F).then(($)=>{if(this.poolState!==Ah.PoolState.ready){this.pending--,$.destroy(),A(this.closed?new RB.PoolClosedError(this):new RB.PoolClearedError(this));return}for(let Z of[...e9.APM_EVENTS,_W.Connection.CLUSTER_TIME_RECEIVED])$.on(Z,(D)=>this.emit(Z,D));if(this.loadBalanced){$.on(_W.Connection.PINNED,(D)=>this.metrics.markPinned(D)),$.on(_W.Connection.UNPINNED,(D)=>this.metrics.markUnpinned(D));let Z=$.serviceId;if(Z){let D,X=Z.toHexString();if(D=this.serviceGenerations.get(X))$.generation=D;else this.serviceGenerations.set(X,0),$.generation=0}}$.markAvailable(),this.emitAndLog(S0.CONNECTION_READY,new k6.ConnectionReadyEvent(this,$,B)),this.pending--,A(void 0,$)},($)=>{if(this.pending--,this.server.handleError($),this.emitAndLog(S0.CONNECTION_CLOSED,new k6.ConnectionClosedEvent(this,{id:F.id,serviceId:void 0},"error",$)),$ instanceof i7.MongoNetworkError||$ instanceof i7.MongoServerError)$.connectionGeneration=F.generation;A($??new i7.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let A=this.options.minPoolSize;if(this.poolState!==Ah.PoolState.ready)return;if(this.connections.prune((F)=>this.destroyConnectionIfPerished(F)),this.totalConnectionCount<A&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((F,B)=>{if(!F&&B)this.connections.push(B),process.nextTick(()=>this.processWaitQueue());if(this.poolState===Ah.PoolState.ready)MB.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=MB.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else MB.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=MB.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let B=this.waitQueue.first();if(!B){this.waitQueue.shift();continue}if(B.cancelled){this.waitQueue.shift();continue}if(this.poolState!==Ah.PoolState.ready){let Z=this.closed?"poolClosed":"connectionError",D=this.closed?new RB.PoolClosedError(this):new RB.PoolClearedError(this);this.emitAndLog(S0.CONNECTION_CHECK_OUT_FAILED,new k6.ConnectionCheckOutFailedEvent(this,Z,B.checkoutTime,D)),this.waitQueue.shift(),B.reject(D);continue}if(!this.availableConnectionCount)break;let $=this.connections.shift();if(!$)break;if(!this.destroyConnectionIfPerished($))this.checkedOut.add($),this.emitAndLog(S0.CONNECTION_CHECKED_OUT,new k6.ConnectionCheckedOutEvent(this,$,B.checkoutTime)),this.waitQueue.shift(),B.resolve($)}let{maxPoolSize:A,maxConnecting:F}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<F&&(A===0||this.totalConnectionCount<A)){let B=this.waitQueue.shift();if(!B||B.cancelled)continue;this.createConnection(($,Z)=>{if(B.cancelled){if(!$&&Z)this.connections.push(Z)}else if($)this.emitAndLog(S0.CONNECTION_CHECK_OUT_FAILED,new k6.ConnectionCheckOutFailedEvent(this,"connectionError",B.checkoutTime,$)),B.reject($);else if(Z)this.checkedOut.add(Z),this.emitAndLog(S0.CONNECTION_CHECKED_OUT,new k6.ConnectionCheckedOutEvent(this,Z,B.checkoutTime)),B.resolve(Z);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}Ah.ConnectionPool=S0;S0.CONNECTION_POOL_CREATED=e9.CONNECTION_POOL_CREATED;S0.CONNECTION_POOL_CLOSED=e9.CONNECTION_POOL_CLOSED;S0.CONNECTION_POOL_CLEARED=e9.CONNECTION_POOL_CLEARED;S0.CONNECTION_POOL_READY=e9.CONNECTION_POOL_READY;S0.CONNECTION_CREATED=e9.CONNECTION_CREATED;S0.CONNECTION_READY=e9.CONNECTION_READY;S0.CONNECTION_CLOSED=e9.CONNECTION_CLOSED;S0.CONNECTION_CHECK_OUT_STARTED=e9.CONNECTION_CHECK_OUT_STARTED;S0.CONNECTION_CHECK_OUT_FAILED=e9.CONNECTION_CHECK_OUT_FAILED;S0.CONNECTION_CHECKED_OUT=e9.CONNECTION_CHECKED_OUT;S0.CONNECTION_CHECKED_IN=e9.CONNECTION_CHECKED_IN});var oK=C((Dh)=>{Object.defineProperty(Dh,"__esModule",{value:!0});Dh.Server=void 0;var NP1=IW(),MP1=Bh(),RP1=nK(),L8=l2(),z2=X1(),PP1=V9(),tK=PK(),IA=K1(),$h=a6(),p0=L9(),jP1=eK(),rK=AD(),XD=IA.makeStateMachine({[p0.STATE_CLOSED]:[p0.STATE_CLOSED,p0.STATE_CONNECTING],[p0.STATE_CONNECTING]:[p0.STATE_CONNECTING,p0.STATE_CLOSING,p0.STATE_CONNECTED,p0.STATE_CLOSED],[p0.STATE_CONNECTED]:[p0.STATE_CONNECTED,p0.STATE_CLOSING,p0.STATE_CLOSED],[p0.STATE_CLOSING]:[p0.STATE_CLOSING,p0.STATE_CLOSED]});class a4 extends PP1.TypedEventEmitter{constructor(A,F,B){super();this.on("error",IA.noop),this.serverApi=B.serverApi;let $={hostAddress:F.hostAddress,...B};this.topology=A,this.pool=new MP1.ConnectionPool(this,$),this.s={description:F,options:B,state:p0.STATE_CLOSED,operationCount:0};for(let Z of[...L8.CMAP_EVENTS,...L8.APM_EVENTS])this.pool.on(Z,(D)=>this.emit(Z,D));if(this.pool.on(NP1.Connection.CLUSTER_TIME_RECEIVED,(Z)=>{this.clusterTime=Z}),this.loadBalanced){this.monitor=null;return}this.monitor=new jP1.Monitor(this,this.s.options);for(let Z of L8.HEARTBEAT_EVENTS)this.monitor.on(Z,(D)=>this.emit(Z,D));this.monitor.on("resetServer",(Z)=>sK(this,Z)),this.monitor.on(a4.SERVER_HEARTBEAT_SUCCEEDED,(Z)=>{if(this.emit(a4.DESCRIPTION_RECEIVED,new rK.ServerDescription(this.description.hostAddress,Z.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===p0.STATE_CONNECTING)XD(this,p0.STATE_CONNECTED),this.emit(a4.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(A){this.topology.clusterTime=A}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===p0.TopologyType.LoadBalanced}connect(){if(this.s.state!==p0.STATE_CLOSED)return;if(XD(this,p0.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else XD(this,p0.STATE_CONNECTED),this.emit(a4.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===p0.STATE_CLOSED)return;if(XD(this,p0.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),XD(this,p0.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(A,F,{...B},$){if(A.db==null||typeof A==="string")throw new z2.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===p0.STATE_CLOSING||this.s.state===p0.STATE_CLOSED)throw new z2.MongoServerClosedError;if(B.directConnection=this.topology.s.options.directConnection,B.omitReadPreference)delete B.readPreference;if(this.description.iscryptd)B.omitMaxTimeMS=!0;let Z=B.session,D=Z?.pinnedConnection;if(this.incrementOperationCount(),D==null)try{if(D=await this.pool.checkOut(B),this.loadBalanced&&IP1(F,Z))Z?.pin(D)}catch(J){if(this.decrementOperationCount(),!(J instanceof RP1.PoolClearedError))this.handleError(J);throw J}let X=null;try{try{let J=await D.command(A,F,B,$);return $h.throwIfWriteConcernError(J),J}catch(J){throw this.decorateCommandError(D,F,B,J)}}catch(J){if(J instanceof z2.MongoError&&J.code===z2.MONGODB_ERROR_CODES.Reauthenticate){X=this.pool.reauthenticate(D),X.then(void 0,(Y)=>{X=null,IA.squashError(Y)}),await IA.abortable(X,B),X=null;try{let Y=await D.command(A,F,B,$);return $h.throwIfWriteConcernError(Y),Y}catch(Y){throw this.decorateCommandError(D,F,B,Y)}}else throw J}finally{if(this.decrementOperationCount(),Z?.pinnedConnection!==D)if(X!=null){let J=()=>{this.pool.checkIn(D)};X.then(J,J)}else this.pool.checkIn(D)}}handleError(A,F){if(!(A instanceof z2.MongoError))return;if(A.connectionGeneration&&A.connectionGeneration<this.pool.generation)return;let $=A instanceof z2.MongoNetworkError&&!(A instanceof z2.MongoNetworkTimeoutError),Z=A instanceof z2.MongoNetworkError&&A.beforeHandshake,D=A.hasErrorLabel(z2.MongoErrorLabel.HandshakeError);if($||Z||D){if(!this.loadBalanced)A.addErrorLabel(z2.MongoErrorLabel.ResetPool),sK(this,A);else if(F)this.pool.clear({serviceId:F.serviceId})}else if(z2.isSDAMUnrecoverableError(A)){if(OP1(this,A)){let X=IA.maxWireVersion(this)<=7||z2.isNodeShuttingDownError(A);if(this.loadBalanced&&F&&X)this.pool.clear({serviceId:F.serviceId});if(!this.loadBalanced){if(X)A.addErrorLabel(z2.MongoErrorLabel.ResetPool);sK(this,A),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(A,F,B,$){if(typeof $!=="object"||$==null||!("name"in $))throw new z2.MongoRuntimeError("An unexpected error type: "+typeof $);if($.name==="AbortError"&&"cause"in $&&$.cause instanceof z2.MongoError)$=$.cause;if(!($ instanceof z2.MongoError))return $;if(TP1(this.pool,A))return $;let Z=B?.session;if($ instanceof z2.MongoNetworkError){if(Z&&!Z.hasEnded&&Z.serverSession)Z.serverSession.isDirty=!0;if(aK(Z,F)&&!$.hasErrorLabel(z2.MongoErrorLabel.TransientTransactionError))$.addErrorLabel(z2.MongoErrorLabel.TransientTransactionError);if((Zh(this.topology)||tK.isTransactionCommand(F))&&IA.supportsRetryableWrites(this)&&!aK(Z,F))$.addErrorLabel(z2.MongoErrorLabel.RetryableWriteError)}else if((Zh(this.topology)||tK.isTransactionCommand(F))&&z2.needsRetryableWriteLabel($,IA.maxWireVersion(this),this.description.type)&&!aK(Z,F))$.addErrorLabel(z2.MongoErrorLabel.RetryableWriteError);if(Z&&Z.isPinned&&$.hasErrorLabel(z2.MongoErrorLabel.TransientTransactionError))Z.unpin({force:!0});return this.handleError($,A),$}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}Dh.Server=a4;a4.SERVER_HEARTBEAT_STARTED=L8.SERVER_HEARTBEAT_STARTED;a4.SERVER_HEARTBEAT_SUCCEEDED=L8.SERVER_HEARTBEAT_SUCCEEDED;a4.SERVER_HEARTBEAT_FAILED=L8.SERVER_HEARTBEAT_FAILED;a4.CONNECT=L8.CONNECT;a4.DESCRIPTION_RECEIVED=L8.DESCRIPTION_RECEIVED;a4.CLOSED=L8.CLOSED;a4.ENDED=L8.ENDED;function sK(A,F){if(A.loadBalanced)return;if(F instanceof z2.MongoNetworkError&&!(F instanceof z2.MongoNetworkTimeoutError))A.monitor?.reset();A.emit(a4.DESCRIPTION_RECEIVED,new rK.ServerDescription(A.description.hostAddress,void 0,{error:F}))}function IP1(A,F){if(F)return F.inTransaction()||F.transaction.isCommitted&&"commitTransaction"in A||"aggregate"in A||"find"in A||"getMore"in A||"listCollections"in A||"listIndexes"in A||"bulkWrite"in A;return!1}function TP1(A,F){if(F.serviceId)return F.generation!==A.serviceGenerations.get(F.serviceId.toHexString());return F.generation!==A.generation}function OP1(A,F){let B=F.topologyVersion,$=A.description.topologyVersion;return rK.compareTopologyVersion($,B)<0}function aK(A,F){return A&&A.inTransaction()&&!tK.isTransactionCommand(F)}function Zh(A){return A.s.options.retryWrites!==!1}});var eK=C((zh)=>{Object.defineProperty(zh,"__esModule",{value:!0});zh.RTTSampler=zh.MonitorInterval=zh.RTTPinger=zh.Monitor=zh.ServerMonitoringMode=void 0;var V5=A1("timers"),Jh=C0(),xW=cK(),SP1=sY(),AE=l2(),PB=X1(),kP1=Z5(),Yh=V9(),_6=K1(),x6=L9(),JD=SW(),YD=oK(),jB="idle",TA="monitoring",IB=_6.makeStateMachine({[x6.STATE_CLOSING]:[x6.STATE_CLOSING,jB,x6.STATE_CLOSED],[x6.STATE_CLOSED]:[x6.STATE_CLOSED,TA],[jB]:[jB,TA,x6.STATE_CLOSING],[TA]:[TA,jB,x6.STATE_CLOSING]}),_P1=new Set([x6.STATE_CLOSING,x6.STATE_CLOSED,TA]);function WD(A){return A.s.state===x6.STATE_CLOSED||A.s.state===x6.STATE_CLOSING}zh.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class Qh extends Yh.TypedEventEmitter{constructor(A,F){super();this.component=kP1.MongoLoggableComponent.TOPOLOGY,this.on("error",_6.noop),this.server=A,this.connection=null,this.cancellationToken=new Yh.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:x6.STATE_CLOSED},this.address=A.description.address,this.options=Object.freeze({connectTimeoutMS:F.connectTimeoutMS??1e4,heartbeatFrequencyMS:F.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:F.minHeartbeatFrequencyMS??500,serverMonitoringMode:F.serverMonitoringMode}),this.isRunningInFaasEnv=SP1.getFAASEnv()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new ZE(10);let B=this.cancellationToken,$={id:"<monitor>",generation:A.pool.generation,cancellationToken:B,hostAddress:A.description.hostAddress,...F,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete $.credentials,$.autoEncrypter)delete $.autoEncrypter;this.connectOptions=Object.freeze($)}connect(){if(this.s.state!==x6.STATE_CLOSED)return;let A=this.options.heartbeatFrequencyMS,F=this.options.minHeartbeatFrequencyMS;this.monitorId=new bW(Gh(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:F,immediate:!0})}requestCheck(){if(_P1.has(this.s.state))return;this.monitorId?.wake()}reset(){let A=this.server.description.topologyVersion;if(WD(this)||A==null)return;IB(this,x6.STATE_CLOSING),Wh(this),IB(this,jB);let F=this.options.heartbeatFrequencyMS,B=this.options.minHeartbeatFrequencyMS;this.monitorId=new bW(Gh(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:B})}close(){if(WD(this))return;IB(this,x6.STATE_CLOSING),Wh(this),this.emit("close"),IB(this,x6.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(A){this.rttSampler.addSample(A)}clearRttSamples(){this.rttSampler.clear()}}zh.Monitor=Qh;function Wh(A){A.monitorId?.stop(),A.monitorId=void 0,A.rttPinger?.close(),A.rttPinger=void 0,A.cancellationToken.emit("cancel"),A.connection?.destroy(),A.connection=null,A.clearRttSamples()}function FE(A,F){if(F==null)return!1;let B=A.options.serverMonitoringMode;if(B===zh.ServerMonitoringMode.poll)return!1;if(B===zh.ServerMonitoringMode.stream)return!0;if(A.isRunningInFaasEnv)return!1;return!0}function xP1(A,F){let B,$,Z=A.server.description.topologyVersion,D=FE(A,Z);A.emitAndLogHeartbeat(YD.Server.SERVER_HEARTBEAT_STARTED,A.server.topology.s.id,void 0,new JD.ServerHeartbeatStartedEvent(A.address,D));function X(W){A.connection?.destroy(),A.connection=null,A.emitAndLogHeartbeat(YD.Server.SERVER_HEARTBEAT_FAILED,A.server.topology.s.id,void 0,new JD.ServerHeartbeatFailedEvent(A.address,_6.calculateDurationInMs(B),W,$));let G=!(W instanceof PB.MongoError)?new PB.MongoError(PB.MongoError.buildErrorMessage(W),{cause:W}):W;if(G.addErrorLabel(PB.MongoErrorLabel.ResetPool),G instanceof PB.MongoNetworkTimeoutError)G.addErrorLabel(PB.MongoErrorLabel.InterruptInUseConnections);A.emit("resetServer",G),F(W)}function J(W){if(!("isWritablePrimary"in W))W.isWritablePrimary=W[AE.LEGACY_HELLO_COMMAND];let G=D&&A.rttPinger?A.rttPinger.latestRtt??_6.calculateDurationInMs(B):_6.calculateDurationInMs(B);if(A.addRttSample(G),A.emitAndLogHeartbeat(YD.Server.SERVER_HEARTBEAT_SUCCEEDED,A.server.topology.s.id,W.connectionId,new JD.ServerHeartbeatSucceededEvent(A.address,G,W,D)),D)A.emitAndLogHeartbeat(YD.Server.SERVER_HEARTBEAT_STARTED,A.server.topology.s.id,void 0,new JD.ServerHeartbeatStartedEvent(A.address,!0)),B=_6.now();else A.rttPinger?.close(),A.rttPinger=void 0,F(void 0,W)}let{connection:Y}=A;if(Y&&!Y.closed){let{serverApi:W,helloOk:G}=Y,Q=A.options.connectTimeoutMS,q=A.options.heartbeatFrequencyMS,z={[W?.version||G?"hello":AE.LEGACY_HELLO_COMMAND]:1,...D&&Z?{maxAwaitTimeMS:q,topologyVersion:bP1(Z)}:{}},H=D?{socketTimeoutMS:Q?Q+q:0,exhaustAllowed:!0}:{socketTimeoutMS:Q};if(D&&A.rttPinger==null)A.rttPinger=new $E(A);if(B=_6.now(),D)return $=!0,Y.exhaustCommand(_6.ns("admin.$cmd"),z,H,(U,K)=>{if(U)return X(U);return J(K)});$=!1,Y.command(_6.ns("admin.$cmd"),z,H).then(J,X);return}(async()=>{let W=await xW.makeSocket(A.connectOptions),G=xW.makeConnection(A.connectOptions,W);B=_6.now();try{return await xW.performInitialHandshake(G,A.connectOptions),G}catch(Q){throw G.destroy(),Q}})().then((W)=>{if(WD(A)){W.destroy();return}let G=_6.calculateDurationInMs(B);A.addRttSample(G),A.connection=W,A.emitAndLogHeartbeat(YD.Server.SERVER_HEARTBEAT_SUCCEEDED,A.server.topology.s.id,W.hello?.connectionId,new JD.ServerHeartbeatSucceededEvent(A.address,G,W.hello,FE(A,W.hello?.topologyVersion))),F(void 0,W.hello)},(W)=>{A.connection=null,$=!1,X(W)})}function Gh(A){return(F)=>{if(A.s.state===TA){process.nextTick(F);return}IB(A,TA);function B(){if(!WD(A))IB(A,jB);F()}xP1(A,($,Z)=>{if($){if(A.server.description.type===x6.ServerType.Unknown)return B()}if(FE(A,Z?.topologyVersion))V5.setTimeout(()=>{if(!WD(A))A.monitorId?.wake()},0);B()})}}function bP1(A){return{processId:A.processId,counter:Jh.Long.isLong(A.counter)?A.counter:Jh.Long.fromNumber(A.counter)}}class $E{constructor(A){this.connection=void 0,this.cancellationToken=A.cancellationToken,this.closed=!1,this.monitor=A,this.latestRtt=A.latestRtt??void 0;let F=A.options.heartbeatFrequencyMS;this.monitorId=V5.setTimeout(()=>this.measureRoundTripTime(),F)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,V5.clearTimeout(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(A,F){if(this.closed){F?.destroy();return}if(this.connection==null)this.connection=F;this.latestRtt=_6.calculateDurationInMs(A),this.monitorId=V5.setTimeout(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let A=_6.now();if(this.closed)return;let F=this.connection;if(F==null){xW.connect(this.monitor.connectOptions).then(($)=>{this.measureAndReschedule(A,$)},()=>{this.connection=void 0});return}let B=F.serverApi?.version||F.helloOk?"hello":AE.LEGACY_HELLO_COMMAND;F.command(_6.ns("admin.$cmd"),{[B]:1},void 0).then(()=>this.measureAndReschedule(A),()=>{this.connection?.destroy(),this.connection=void 0;return})}}zh.RTTPinger=$E;class bW{constructor(A,F={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)V5.clearTimeout(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=_6.now(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=A,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=F.minHeartbeatFrequencyMS??500,F.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let F=_6.now()-this.lastExecutionEnded;if(F<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(F<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-F);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)V5.clearTimeout(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let A=_6.now(),F=A-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:A,timeSinceLastCall:F}}_reschedule(A){if(this.stopped)return;if(this.timerId)V5.clearTimeout(this.timerId);this.timerId=V5.setTimeout(this._executeAndReschedule,A||this.heartbeatFrequencyMS)}}zh.MonitorInterval=bW;class ZE{constructor(A=10){this.rttSamples=new Float64Array(A),this.length=0,this.writeIndex=0}addSample(A){if(this.rttSamples[this.writeIndex++]=A,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let A=this.rttSamples[0];for(let F=1;F<this.length;F++)if(this.rttSamples[F]<A)A=this.rttSamples[F];return A}average(){if(this.length===0)return 0;let A=0;for(let F=0;F<this.length;F++)A+=this.rttSamples[F];return A/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}zh.RTTSampler=ZE});var QE=C((wh)=>{Object.defineProperty(wh,"__esModule",{value:!0});wh.DEFAULT_OPTIONS=wh.OPTIONS=void 0;wh.resolveSRVRecord=iP1;wh.parseOptions=sP1;var DE=A1("dns"),yP1=eC(),vP1=A1("url"),TB=iY(),w8=U8(),Hh=sY(),Uh=iZ(),Ch=My(),L1=X1(),fW=Y5(),YE=Z5(),XE=i9(),N5=E6(),hP1=eK(),b6=K1(),G3=a6(),JE=["authSource","replicaSet","loadBalanced"],dP1="loadBalanced option only supported with a single host in the URI",mP1="loadBalanced option not supported with a replicaSet option",cP1="loadBalanced option not supported when directConnection is provided";function Lh(A){return async function F(B){try{return await DE.promises[A](B)}catch($){if($.code===DE.TIMEOUT)return await DE.promises[A](B);else throw $}}}var lP1=Lh("resolveSrv"),pP1=Lh("resolveTxt");async function iP1(A){if(typeof A.srvHost!=="string")throw new L1.MongoAPIError('Option "srvHost" must not be empty');let F=A.srvHost,B=pP1(F);B.then(void 0,b6.squashError);let $=`_${A.srvServiceName}._tcp.${F}`,Z=await lP1($);if(Z.length===0)throw new L1.MongoAPIError("No addresses found at host");for(let{name:q}of Z)b6.checkParentDomainMatch(q,F);let D=Z.map((q)=>b6.HostAddress.fromString(`${q.name}:${q.port??27017}`));WE(D,A,!0);let X;try{X=await B}catch(q){if(q.code!=="ENODATA"&&q.code!=="ENOTFOUND")throw q;return D}if(X.length>1)throw new L1.MongoParseError("Multiple text records not allowed");let J=new vP1.URLSearchParams(X[0].join(""));if([...J.keys()].some((q)=>!JE.includes(q)))throw new L1.MongoParseError(`Text record may only set any of: ${JE.join(", ")}`);if(JE.some((q)=>J.get(q)===""))throw new L1.MongoParseError("Cannot have empty URI params in DNS TXT Record");let W=J.get("authSource")??void 0,G=J.get("replicaSet")??void 0,Q=J.get("loadBalanced")??void 0;if(!A.userSpecifiedAuthSource&&W&&A.credentials&&!w8.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(A.credentials.mechanism))A.credentials=TB.MongoCredentials.merge(A.credentials,{source:W});if(!A.userSpecifiedReplicaSet&&G)A.replicaSet=G;if(Q==="true")A.loadBalanced=!0;if(A.replicaSet&&A.srvMaxHosts>0)throw new L1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return WE(D,A,!0),D}function nP1(A){if(!A)return;let F=(B,$)=>{if(A.has(B)&&A.has($))throw new L1.MongoAPIError(`The '${B}' option cannot be used with the '${$}' option`)};F("tlsInsecure","tlsAllowInvalidCertificates"),F("tlsInsecure","tlsAllowInvalidHostnames")}function Q3(A,F){if(typeof F==="boolean")return F;switch(F){case"true":return!0;case"false":return!1;default:throw new L1.MongoParseError(`${A} must be either "true" or "false"`)}}function GE(A,F){let B=b6.parseInteger(F);if(B!=null)return B;throw new L1.MongoParseError(`Expected ${A} to be stringified int value, got: ${F}`)}function GD(A,F){let B=GE(A,F);if(B<0)throw new L1.MongoParseError(`${A} can only be a positive int value, got: ${F}`);return B}function*Kh(A){if(A==="")return;let F=A.split(",");for(let B of F){let[$,Z]=B.split(/:(.*)/);if(Z==null)throw new L1.MongoParseError("Cannot have undefined values in key value pairs");yield[$,Z]}}class QD extends Map{constructor(A=[]){super(A.map(([F,B])=>[F.toLowerCase(),B]))}has(A){return super.has(A.toLowerCase())}get(A){return super.get(A.toLowerCase())}set(A,F){return super.set(A.toLowerCase(),F)}delete(A){return super.delete(A.toLowerCase())}}function sP1(A,F=void 0,B={}){if(F!=null&&!(F instanceof fW.MongoClient))B=F,F=void 0;if(B.useBigInt64&&typeof B.promoteLongs==="boolean"&&!B.promoteLongs)throw new L1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(B.useBigInt64&&typeof B.promoteValues==="boolean"&&!B.promoteValues)throw new L1.MongoAPIError("Must request either bigint or Long for int64 deserialization");let $=new yP1.default(A),{hosts:Z,isSRV:D}=$,X=Object.create(null);X.hosts=D?[]:Z.map(b6.HostAddress.fromString);let J=new QD;if($.pathname!=="/"&&$.pathname!==""){let H=decodeURIComponent($.pathname[0]==="/"?$.pathname.slice(1):$.pathname);if(H)J.set("dbName",[H])}if($.username!==""){let H={username:decodeURIComponent($.username)};if(typeof $.password==="string")H.password=decodeURIComponent($.password);J.set("auth",[H])}for(let H of $.searchParams.keys()){let U=$.searchParams.getAll(H),K=/readPreferenceTags/i.test(H);if(!K&&U.length>1)throw new L1.MongoInvalidArgumentError(`URI option "${H}" cannot appear more than once in the connection string`);if(!K&&U.includes(""))throw new L1.MongoAPIError(`URI option "${H}" cannot be specified with no value`);if(!J.has(H))J.set(H,U)}let Y=new QD(Object.entries(B).filter(([,H])=>H!=null));if(J.has("serverApi"))throw new L1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let W=J.get("authMechanismProperties");if(W){for(let H of W)if(/(^|,)ALLOWED_HOSTS:/.test(H))throw new L1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(Y.has("loadBalanced"))throw new L1.MongoParseError("loadBalanced is only a valid option in the URI");let G=new QD,Q=new Set([...J.keys(),...Y.keys()]);for(let H of Q){let U=[],K=Y.get(H);if(K!=null)U.push(K);let E=J.get(H)??[];U.push(...E),G.set(H,U)}if(G.has("tls")||G.has("ssl")){let H=(G.get("tls")||[]).concat(G.get("ssl")||[]).map(Q3.bind(null,"tls/ssl"));if(new Set(H).size!==1)throw new L1.MongoParseError("All values of tls/ssl must be the same.")}nP1(G);let q=b6.setDifference(Q,Array.from(Object.keys(wh.OPTIONS)).map((H)=>H.toLowerCase()));if(q.size!==0){let H=q.size>1?"options":"option",U=q.size>1?"are":"is";throw new L1.MongoParseError(`${H} ${Array.from(q).join(", ")} ${U} not supported`)}for(let[H,U]of Object.entries(wh.OPTIONS)){let K=G.get(H);if(!K||K.length===0){if(wh.DEFAULT_OPTIONS.has(H))Eh(X,H,U,[wh.DEFAULT_OPTIONS.get(H)])}else{let{deprecated:E}=U;if(E){let L=typeof E==="string"?`: ${E}`:"";b6.emitWarning(`${H} is a deprecated option${L}`)}Eh(X,H,U,K)}}if(X.credentials){let H=X.credentials.mechanism===w8.AuthMechanism.MONGODB_GSSAPI,U=X.credentials.mechanism===w8.AuthMechanism.MONGODB_X509,K=X.credentials.mechanism===w8.AuthMechanism.MONGODB_AWS,E=X.credentials.mechanism===w8.AuthMechanism.MONGODB_OIDC;if((H||U)&&G.has("authSource")&&X.credentials.source!=="$external")throw new L1.MongoParseError(`authMechanism ${X.credentials.mechanism} requires an authSource of '$external'`);if(!(H||U||K||E)&&X.dbName&&!G.has("authSource"))X.credentials=TB.MongoCredentials.merge(X.credentials,{source:X.dbName});if(K&&X.credentials.username&&!X.credentials.password)throw new L1.MongoMissingCredentialsError(`When using ${X.credentials.mechanism} password must be set when a username is specified`);if(X.credentials.validate(),X.credentials.password===""&&X.credentials.username===""&&X.credentials.mechanism===w8.AuthMechanism.MONGODB_DEFAULT&&Object.keys(X.credentials.mechanismProperties).length===0)delete X.credentials}if(!X.dbName)X.dbName="test";if(WE(Z,X,D),F&&X.autoEncryption)Ch.Encrypter.checkForMongoCrypt(),X.encrypter=new Ch.Encrypter(F,A,B),X.autoEncrypter=X.encrypter.autoEncrypter;if(X.userSpecifiedAuthSource=Y.has("authSource")||J.has("authSource"),X.userSpecifiedReplicaSet=Y.has("replicaSet")||J.has("replicaSet"),D){if(X.srvHost=Z[0],X.directConnection)throw new L1.MongoAPIError("SRV URI does not support directConnection");if(X.srvMaxHosts>0&&typeof X.replicaSet==="string")throw new L1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let H=!Y.has("tls")&&!J.has("tls"),U=!Y.has("ssl")&&!J.has("ssl");if(H&&U)X.tls=!0}else if(J.has("srvMaxHosts")||Y.has("srvMaxHosts")||J.has("srvServiceName")||Y.has("srvServiceName"))throw new L1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(X.directConnection&&X.hosts.length!==1)throw new L1.MongoParseError("directConnection option requires exactly one host");if(!X.proxyHost&&(X.proxyPort||X.proxyUsername||X.proxyPassword))throw new L1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(X.proxyUsername&&!X.proxyPassword||!X.proxyUsername&&X.proxyPassword)throw new L1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((H)=>J.get(H)??[]).some((H)=>H.length>1))throw new L1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return X.mongoLoggerOptions=YE.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:X.mongodbLogPath,mongodbLogComponentSeverities:X.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:X.mongodbLogMaxDocumentLength}),X.additionalDriverInfo=[],X.metadata=Hh.makeClientMetadata(X),X.extendedMetadata=Hh.addContainerMetadata(X.metadata).then(void 0,b6.squashError),X}function WE(A,F,B){if(F.loadBalanced){if(A.length>1)throw new L1.MongoParseError(dP1);if(F.replicaSet)throw new L1.MongoParseError(mP1);if(F.directConnection)throw new L1.MongoParseError(cP1);if(B&&F.srvMaxHosts>0)throw new L1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function Eh(A,F,B,$){let{target:Z,type:D,transform:X}=B,J=Z??F;switch(D){case"boolean":A[J]=Q3(J,$[0]);break;case"int":A[J]=GE(J,$[0]);break;case"uint":A[J]=GD(J,$[0]);break;case"string":if($[0]==null)break;A[J]=String($[0]);break;case"record":if(!b6.isRecord($[0]))throw new L1.MongoParseError(`${J} must be an object`);A[J]=$[0];break;case"any":A[J]=$[0];break;default:{if(!X)throw new L1.MongoParseError("Descriptors missing a type must define a transform");let Y=X({name:J,options:A,values:$});A[J]=Y;break}}}wh.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:A,options:F,values:[B]}){if(!b6.isRecord(B,["username","password"]))throw new L1.MongoParseError(`${A} must be an object with 'username' and 'password' properties`);return TB.MongoCredentials.merge(F.credentials,{username:B.username,password:B.password})}},authMechanism:{target:"credentials",transform({options:A,values:[F]}){let B=Object.values(w8.AuthMechanism),[$]=B.filter((X)=>X.match(RegExp(String.raw`\b${F}\b`,"i")));if(!$)throw new L1.MongoParseError(`authMechanism one of ${B}, got ${F}`);let Z=A.credentials?.source;if($===w8.AuthMechanism.MONGODB_PLAIN||w8.AUTH_MECHS_AUTH_SRC_EXTERNAL.has($))Z="$external";let D=A.credentials?.password;if($===w8.AuthMechanism.MONGODB_X509&&D==="")D=void 0;return TB.MongoCredentials.merge(A.credentials,{mechanism:$,source:Z,password:D})}},authMechanismProperties:{target:"credentials",transform({options:A,values:F}){let B=Object.create(null);for(let $ of F)if(typeof $==="string")for(let[Z,D]of Kh($))try{B[Z]=Q3(Z,D)}catch{B[Z]=D}else{if(!b6.isRecord($))throw new L1.MongoParseError("AuthMechanismProperties must be an object");B={...$}}return TB.MongoCredentials.merge(A.credentials,{mechanismProperties:B})}},authSource:{target:"credentials",transform({options:A,values:[F]}){let B=String(F);return TB.MongoCredentials.merge(A.credentials,{source:B})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[A]}){let F=typeof A==="string"?{version:A}:A,B=F&&F.version;if(!B)throw new L1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(fW.ServerApiVersion).join('", "')}"]`);if(!Object.values(fW.ServerApiVersion).some(($)=>$===B))throw new L1.MongoParseError(`Invalid server API version=${B}; must be in the following enum: ["${Object.values(fW.ServerApiVersion).join('", "')}"]`);return F}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:A}){let F=new Set;for(let B of A){let $=typeof B==="string"?B.split(","):B;if(!Array.isArray($))throw new L1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let Z of $)if(Object.keys(Uh.Compressor).includes(String(Z)))F.add(String(Z));else throw new L1.MongoInvalidArgumentError(`${Z} is not a valid compression mechanism. Must be one of: ${Object.keys(Uh.Compressor)}.`)}return[...F]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:A,values:[F]}){let B=GE(A,F);if(B===4||B===6)return B;throw new L1.MongoParseError(`Option 'family' must be 4 or 6 got ${B}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:A,options:F,values:[B]}){let $=G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,fsync:Q3(A,B)}});if(!$)throw new L1.MongoParseError(`Unable to make a writeConcern from fsync=${B}`);return $}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:A,options:F,values:[B]}){let $=G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:Q3(A,B)}});if(!$)throw new L1.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return $}},journal:{target:"writeConcern",transform({name:A,options:F,values:[B]}){let $=G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:Q3(A,B)}});if(!$)throw new L1.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return $}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:A,values:[F]}){let B=GD(A,F);if(B===0)throw new L1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return B}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:A,options:F,values:[B]}){let $=GD(A,B);if(F.readPreference)return N5.ReadPreference.fromOptions({readPreference:{...F.readPreference,maxStalenessSeconds:$}});else return new N5.ReadPreference("secondary",void 0,{maxStalenessSeconds:$})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[A],options:F}){return{...F.driverInfo,name:String(A)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:b6.DEFAULT_PK_FACTORY,transform({values:[A]}){if(b6.isRecord(A,["createPk"])&&typeof A.createPk==="function")return A;throw new L1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${A}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[A],options:F}){if(A instanceof XE.ReadConcern||b6.isRecord(A,["level"]))return XE.ReadConcern.fromOptions({...F.readConcern,...A});throw new L1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(A)}`)}},readConcernLevel:{target:"readConcern",transform({values:[A],options:F}){return XE.ReadConcern.fromOptions({...F.readConcern,level:A})}},readPreference:{default:N5.ReadPreference.primary,transform({values:[A],options:F}){if(A instanceof N5.ReadPreference)return N5.ReadPreference.fromOptions({readPreference:{...F.readPreference,...A},...A});if(b6.isRecord(A,["mode"])){let B=N5.ReadPreference.fromOptions({readPreference:{...F.readPreference,...A},...A});if(B)return B;else throw new L1.MongoParseError(`Cannot make read preference from ${JSON.stringify(A)}`)}if(typeof A==="string"){let B={hedge:F.readPreference?.hedge,maxStalenessSeconds:F.readPreference?.maxStalenessSeconds};return new N5.ReadPreference(A,F.readPreference?.tags,B)}throw new L1.MongoParseError(`Unknown ReadPreference value: ${A}`)}},readPreferenceTags:{target:"readPreference",transform({values:A,options:F}){let B=Array.isArray(A[0])?A[0]:A,$=[];for(let Z of B){let D=Object.create(null);if(typeof Z==="string")for(let[X,J]of Kh(Z))D[X]=J;if(b6.isRecord(Z))for(let[X,J]of Object.entries(Z))D[X]=J;$.push(D)}return N5.ReadPreference.fromOptions({readPreference:F.readPreference,readPreferenceTags:$})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[A]}){if(!Object.values(hP1.ServerMonitoringMode).includes(A))throw new L1.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return A}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:A,values:[F]}){return!Q3(A,F)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:A,values:[F]}){return Q3(A,F)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:A,options:F,values:[B]}){let $=Q3(A,B);if($)F.checkServerIdentity=()=>{return},F.rejectUnauthorized=!1;else F.checkServerIdentity=F.tlsAllowInvalidHostnames?()=>{return}:void 0,F.rejectUnauthorized=F.tlsAllowInvalidCertificates?!1:!0;return $}},w:{target:"writeConcern",transform({values:[A],options:F}){return G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:A}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[A],options:F}){if(b6.isRecord(A)||A instanceof G3.WriteConcern)return G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,...A}});else if(A==="majority"||typeof A==="number")return G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:A}});throw new L1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(A)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[A],options:F}){let B=G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeout:GD("wtimeout",A)}});if(B)return B;throw new L1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[A],options:F}){let B=G3.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeoutMS:GD("wtimeoutMS",A)}});if(B)return B;throw new L1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[A]}){if(!(typeof A==="string"&&["stderr","stdout"].includes(A)||A&&typeof A==="object"&&("write"in A)&&typeof A.write==="function"))throw new L1.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return A}},mongodbLogComponentSeverities:{transform({values:[A]}){if(typeof A!=="object"||!A)throw new L1.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[F,B]of Object.entries(A)){if(typeof B!=="string"||typeof F!=="string")throw new L1.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(YE.MongoLoggableComponent).some(($)=>$===F)&&F!=="default")throw new L1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${F}`);if(!Object.values(YE.SeverityLevel).some(($)=>$===B))throw new L1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${B} as a value for ${F}`)}return A}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};wh.DEFAULT_OPTIONS=new QD(Object.entries(wh.OPTIONS).filter(([,A])=>A.default!=null).map(([A,F])=>[A,F.default]))});var Rh=C((Nh)=>{Object.defineProperty(Nh,"__esModule",{value:!0});Nh.MongoDBAWS=void 0;var zE=C0(),qE=m7(),SB=X1(),OB=K1(),rP1=G5(),HE=QK(),oP1=iY(),eP1=U8(),Aj1=110,UE={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class Vh extends rP1.AuthProvider{constructor(A){super();this.credentialProvider=A,this.credentialFetcher=HE.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new HE.AWSSDKCredentialProvider(A):new HE.LegacyAWSTemporaryCredentialProvider}async auth(A){let{connection:F}=A;if(!A.credentials)throw new SB.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in qE.aws4)throw qE.aws4.kModuleError;let{sign:B}=qE.aws4;if(OB.maxWireVersion(F)<9)throw new SB.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!A.credentials.username)A.credentials=await Fj1(A.credentials,this.credentialFetcher);let{credentials:$}=A,Z=$.username,D=$.password,X=$.mechanismProperties.AWS_SESSION_TOKEN,J=Z&&D&&X?{accessKeyId:Z,secretAccessKey:D,sessionToken:X}:Z&&D?{accessKeyId:Z,secretAccessKey:D}:void 0,Y=$.source,W=await OB.randomBytes(32),G={saslStart:1,mechanism:"MONGODB-AWS",payload:zE.serialize({r:W,p:Aj1},UE)},Q=await F.command(OB.ns(`${Y}.$cmd`),G,void 0),q=zE.deserialize(Q.payload.buffer,UE),z=q.h,H=q.s.buffer;if(H.length!==64)throw new SB.MongoRuntimeError(`Invalid server nonce length ${H.length}, expected 64`);if(!OB.ByteUtils.equals(H.subarray(0,W.byteLength),W))throw new SB.MongoRuntimeError("Server nonce does not begin with client nonce");if(z.length<1||z.length>255||z.indexOf("..")!==-1)throw new SB.MongoRuntimeError(`Server returned an invalid host: "${z}"`);let U="Action=GetCallerIdentity&Version=2011-06-15",K=B({method:"POST",host:z,region:Bj1(q.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":U.length,"X-MongoDB-Server-Nonce":OB.ByteUtils.toBase64(H),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:U},J),E={a:K.headers.Authorization,d:K.headers["X-Amz-Date"]};if(X)E.t=X;let L={saslContinue:1,conversationId:Q.conversationId,payload:zE.serialize(E,UE)};await F.command(OB.ns(`${Y}.$cmd`),L,void 0)}}Nh.MongoDBAWS=Vh;async function Fj1(A,F){function B(Z){if(!Z.AccessKeyId||!Z.SecretAccessKey)throw new SB.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new oP1.MongoCredentials({username:Z.AccessKeyId,password:Z.SecretAccessKey,source:A.source,mechanism:eP1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:Z.Token}})}let $=await F.getCredentials();return B($)}function Bj1(A){let F=A.split(".");if(F.length===1||F[1]==="amazonaws")return"us-east-1";return F[1]}});var Ih=C((jh)=>{Object.defineProperty(jh,"__esModule",{value:!0});jh.finishCommandDocument=$j1;jh.startCommandDocument=Zj1;var kB=C0(),Ph=U8();function $j1(A,F){if(F!=null)return{saslContinue:1,conversationId:F,payload:new kB.Binary(kB.BSON.serialize({jwt:A}))};return{saslStart:1,mechanism:Ph.AuthMechanism.MONGODB_OIDC,payload:new kB.Binary(kB.BSON.serialize({jwt:A}))}}function Zj1(A){let F={};if(A.username)F.n=A.username;return{saslStart:1,autoAuthorize:1,mechanism:Ph.AuthMechanism.MONGODB_OIDC,payload:new kB.Binary(kB.BSON.serialize(F))}}});var EE=C((Sh)=>{Object.defineProperty(Sh,"__esModule",{value:!0});Sh.CallbackWorkflow=Sh.AUTOMATED_TIMEOUT_MS=Sh.HUMAN_TIMEOUT_MS=void 0;var Jj1=A1("timers/promises"),Yj1=X1(),Th=K1(),CE=Ih();Sh.HUMAN_TIMEOUT_MS=300000;Sh.AUTOMATED_TIMEOUT_MS=60000;var Wj1=["accessToken","expiresInSeconds","refreshToken"],Gj1="User provided OIDC callbacks must return a valid object with an accessToken.",KE=100;class Oh{constructor(A,F){this.cache=A,this.callback=this.withLock(F),this.lastExecutionTime=Date.now()-KE}async speculativeAuth(A,F){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();A.accessToken=B;let $=CE.finishCommandDocument(B);return $.db=F.source,{speculativeAuthenticate:$}}return{}}async reauthenticate(A,F){if(this.cache.hasAccessToken)if(A.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete A.accessToken;else A.accessToken=this.cache.getAccessToken();await this.execute(A,F)}async startAuthentication(A,F,B){let $;if(B?.speculativeAuthenticate)$=B.speculativeAuthenticate;else $=await A.command(Th.ns(F.source),CE.startCommandDocument(F),void 0);return $}async finishAuthentication(A,F,B,$){await A.command(Th.ns(F.source),CE.finishCommandDocument(B,$),void 0)}async executeAndValidateCallback(A){let F=await this.callback(A);if(Qj1(F))throw new Yj1.MongoMissingCredentialsError(Gj1);return F}withLock(A){let F=Promise.resolve();return async(B)=>{return await F,F=F.catch(()=>null).then(async()=>{let $=Date.now()-this.lastExecutionTime;if($<=KE)await Jj1.setTimeout(KE-$,{signal:B.timeoutContext});return this.lastExecutionTime=Date.now(),await A(B)}),await F}}}Sh.CallbackWorkflow=Oh;function Qj1(A){if(A==null||typeof A!=="object")return!0;if(!("accessToken"in A))return!0;return!Object.getOwnPropertyNames(A).every((F)=>Wj1.includes(F))}});var VE=C((bh)=>{Object.defineProperty(bh,"__esModule",{value:!0});bh.AutomatedCallbackWorkflow=void 0;var LE=X1(),_h=r6(),Hj1=yW(),wE=EE();class xh extends wE.CallbackWorkflow{constructor(A,F){super(A,F)}async execute(A,F){if(this.cache.hasAccessToken){let $=this.cache.getAccessToken();if(!A.accessToken)A.accessToken=$;try{return await this.finishAuthentication(A,F,$)}catch(Z){if(Z instanceof LE.MongoError&&Z.code===LE.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(A,F);else throw Z}}let B=await this.fetchAccessToken(F);this.cache.put(B),A.accessToken=B.accessToken,await this.finishAuthentication(A,F,B.accessToken)}async fetchAccessToken(A){let F=new AbortController,B={timeoutContext:F.signal,version:Hj1.OIDC_VERSION};if(A.username)B.username=A.username;if(A.mechanismProperties.TOKEN_RESOURCE)B.tokenAudience=A.mechanismProperties.TOKEN_RESOURCE;let $=_h.Timeout.expires(wE.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(B),$])}catch(Z){if(_h.TimeoutError.is(Z))throw F.abort(),new LE.MongoOIDCError(`OIDC callback timed out after ${wE.AUTOMATED_TIMEOUT_MS}ms.`);throw Z}finally{$.clear()}}}bh.AutomatedCallbackWorkflow=xh});var vh=C((uh)=>{Object.defineProperty(uh,"__esModule",{value:!0});uh.callback=void 0;var gh=HK(),NE=X1(),Uj1=K1(),Cj1=Object.freeze({Metadata:"true",Accept:"application/json"}),Kj1="Azure endpoint did not return a value with only access_token and expires_in properties",Ej1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",Lj1=async(A)=>{let{tokenAudience:F,username:B}=A;if(!F)throw new NE.MongoAzureError(Ej1);let $=await wj1(F,B);if(!Vj1($))throw new NE.MongoAzureError(Kj1);return $};uh.callback=Lj1;async function wj1(A,F){let B=new URL(gh.AZURE_BASE_URL);gh.addAzureParams(B,A,F);let $=await Uj1.get(B,{headers:Cj1});if($.status!==200)throw new NE.MongoAzureError(`Status code ${$.status} returned from the Azure endpoint. Response body: ${$.body}`);let Z=JSON.parse($.body);return{accessToken:Z.access_token,expiresInSeconds:Number(Z.expires_in)}}function Vj1(A){if(A==null||typeof A!=="object")return!1;return"accessToken"in A&&typeof A.accessToken==="string"&&"expiresInSeconds"in A&&typeof A.expiresInSeconds==="number"}});var ch=C((dh)=>{Object.defineProperty(dh,"__esModule",{value:!0});dh.callback=void 0;var hh=X1(),Nj1=K1(),Mj1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",Rj1=Object.freeze({"Metadata-Flavor":"Google"}),Pj1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",jj1=async(A)=>{let F=A.tokenAudience;if(!F)throw new hh.MongoGCPError(Pj1);return await Ij1(F)};dh.callback=jj1;async function Ij1(A){let F=new URL(Mj1);F.searchParams.append("audience",A);let B=await Nj1.get(F,{headers:Rj1});if(B.status!==200)throw new hh.MongoGCPError(`Status code ${B.status} returned from the GCP endpoint. Response body: ${B.body}`);return{accessToken:B.body}}});var ah=C((ih)=>{Object.defineProperty(ih,"__esModule",{value:!0});ih.callback=void 0;var Tj1=A1("fs/promises"),Oj1="/var/run/secrets/kubernetes.io/serviceaccount/token",lh="AZURE_FEDERATED_TOKEN_FILE",ph="AWS_WEB_IDENTITY_TOKEN_FILE",Sj1=async()=>{let A;if(process.env[lh])A=process.env[lh];else if(process.env[ph])A=process.env[ph];else A=Oj1;return{accessToken:await Tj1.readFile(A,"utf8")}};ih.callback=Sj1});var ME=C((rh)=>{Object.defineProperty(rh,"__esModule",{value:!0});rh.TokenCache=void 0;var kj1=X1();class vW extends kj1.MongoDriverError{}class th{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new vW("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new vW("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new vW("Attempted to get IDP information when none exists.");return this.idpInfo}put(A,F){if(this.accessToken=A.accessToken,this.refreshToken=A.refreshToken,this.expiresInSeconds=A.expiresInSeconds,F)this.idpInfo=F}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}rh.TokenCache=th});var Fd=C((eh)=>{Object.defineProperty(eh,"__esModule",{value:!0});eh.callback=void 0;var _j1=A1("fs"),xj1=X1(),bj1="OIDC_TOKEN_FILE must be set in the environment.",fj1=async()=>{let A=process.env.OIDC_TOKEN_FILE;if(!A)throw new xj1.MongoAWSError(bj1);return{accessToken:await _j1.promises.readFile(A,"utf8")}};eh.callback=fj1});var yW=C((Dd)=>{Object.defineProperty(Dd,"__esModule",{value:!0});Dd.MongoDBOIDC=Dd.OIDC_WORKFLOWS=Dd.OIDC_VERSION=void 0;var $d=X1(),gj1=G5(),hW=VE(),uj1=vh(),yj1=ch(),vj1=ah(),dW=ME(),hj1=Fd(),dj1="AuthContext must provide credentials.";Dd.OIDC_VERSION=1;Dd.OIDC_WORKFLOWS=new Map;Dd.OIDC_WORKFLOWS.set("test",()=>new hW.AutomatedCallbackWorkflow(new dW.TokenCache,hj1.callback));Dd.OIDC_WORKFLOWS.set("azure",()=>new hW.AutomatedCallbackWorkflow(new dW.TokenCache,uj1.callback));Dd.OIDC_WORKFLOWS.set("gcp",()=>new hW.AutomatedCallbackWorkflow(new dW.TokenCache,yj1.callback));Dd.OIDC_WORKFLOWS.set("k8s",()=>new hW.AutomatedCallbackWorkflow(new dW.TokenCache,vj1.callback));class Zd extends gj1.AuthProvider{constructor(A){super();if(!A)throw new $d.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=A}async auth(A){let{connection:F,reauthenticating:B,response:$}=A;if($?.speculativeAuthenticate?.done&&!B)return;let Z=Bd(A);if(B)await this.workflow.reauthenticate(F,Z);else await this.workflow.execute(F,Z,$)}async prepare(A,F){let{connection:B}=F,$=Bd(F),Z=await this.workflow.speculativeAuth(B,$);return{...A,...Z}}}Dd.MongoDBOIDC=Zd;function Bd(A){let{credentials:F}=A;if(!F)throw new $d.MongoMissingCredentialsError(dj1);return F}});var Qd=C((Wd)=>{Object.defineProperty(Wd,"__esModule",{value:!0});Wd.HumanCallbackWorkflow=void 0;var cj1=C0(),qD=X1(),Jd=r6(),lj1=yW(),RE=EE();class Yd extends RE.CallbackWorkflow{constructor(A,F){super(A,F)}async execute(A,F){if(this.cache.hasAccessToken){let X=this.cache.getAccessToken();A.accessToken=X;try{return await this.finishAuthentication(A,F,X)}catch(J){if(J instanceof qD.MongoError&&J.code===qD.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete A.accessToken,await this.execute(A,F);else throw J}}if(this.cache.hasRefreshToken){let X=this.cache.getRefreshToken(),J=await this.fetchAccessToken(this.cache.getIdpInfo(),F,X);this.cache.put(J),A.accessToken=J.accessToken;try{return await this.finishAuthentication(A,F,J.accessToken)}catch(Y){if(Y instanceof qD.MongoError&&Y.code===qD.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete A.accessToken,await this.execute(A,F);else throw Y}}let B=await this.startAuthentication(A,F),$=B.conversationId,Z=cj1.BSON.deserialize(B.payload.buffer),D=await this.fetchAccessToken(Z,F);return this.cache.put(D,Z),A.accessToken=D.accessToken,await this.finishAuthentication(A,F,D.accessToken,$)}async fetchAccessToken(A,F,B){let $=new AbortController,Z={timeoutContext:$.signal,version:lj1.OIDC_VERSION,idpInfo:A};if(F.username)Z.username=F.username;if(B)Z.refreshToken=B;let D=Jd.Timeout.expires(RE.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(Z),D])}catch(X){if(Jd.TimeoutError.is(X))throw $.abort(),new qD.MongoOIDCError(`OIDC callback timed out after ${RE.HUMAN_TIMEOUT_MS}ms.`);throw X}finally{D.clear()}}}Wd.HumanCallbackWorkflow=Yd});var Ud=C((qd)=>{Object.defineProperty(qd,"__esModule",{value:!0});qd.Plain=void 0;var pj1=C0(),ij1=X1(),nj1=K1(),sj1=G5();class zd extends sj1.AuthProvider{async auth(A){let{connection:F,credentials:B}=A;if(!B)throw new ij1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:$,password:Z}=B,X={saslStart:1,mechanism:"PLAIN",payload:new pj1.Binary(Buffer.from(`\x00${$}\x00${Z}`)),autoAuthorize:1};await F.command(nj1.ns("$external.$cmd"),X,void 0)}}qd.Plain=zd});var Ld=C((lD0,Ed)=>{var Cd=(A)=>A.codePointAt(0),aj1=(A)=>A[0],tj1=(A)=>A[A.length-1];function Kd(A){let F=[],B=A.length;for(let $=0;$<B;$+=1){let Z=A.charCodeAt($);if(Z>=55296&&Z<=56319&&B>$+1){let D=A.charCodeAt($+1);if(D>=56320&&D<=57343){F.push((Z-55296)*1024+D-56320+65536),$+=1;continue}}F.push(Z)}return F}function HD({unassigned_code_points:A,commonly_mapped_to_nothing:F,non_ASCII_space_characters:B,prohibited_characters:$,bidirectional_r_al:Z,bidirectional_l:D},X,J={}){let Y=B,W=F;if(typeof X!=="string")throw new TypeError("Expected string.");if(X.length===0)return"";let G=Kd(X).map((L)=>Y.get(L)?32:L).filter((L)=>!W.get(L)),Q=String.fromCodePoint.apply(null,G).normalize("NFKC"),q=Kd(Q);if(q.some((L)=>$.get(L)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(J.allowUnassigned!==!0){if(q.some((V)=>A.get(V)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let H=q.some((L)=>Z.get(L)),U=q.some((L)=>D.get(L));if(H&&U)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let K=Z.get(Cd(aj1(Q))),E=Z.get(Cd(tj1(Q)));if(H&&!(K&&E))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return Q}HD.saslprep=HD;HD.default=HD;Ed.exports=HD});var Nd=C((pD0,Vd)=>{Vd.exports=z3;function z3(A,F){if(!(this instanceof z3))return new z3(A,F);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=A||1024,this.deduplicate=F?F.deduplicate:null,this.zeros=this.deduplicate?mW(this.deduplicate.length):null}z3.prototype.updated=function(A){while(this.deduplicate&&A.buffer[A.deduplicate]===this.deduplicate[A.deduplicate])if(A.deduplicate++,A.deduplicate===this.deduplicate.length){if(A.deduplicate=0,A.buffer.equals&&A.buffer.equals(this.deduplicate))A.buffer=this.deduplicate;break}if(A.updated||!this.updates)return;A.updated=!0,this.updates.push(A)};z3.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var A=this.updates.pop();return A.updated=!1,A};z3.prototype._array=function(A,F){if(A>=this.maxPages){if(F)return;rj1(this,A)}AI1(A,this.path);var B=this.pages;for(var $=this.level;$>0;$--){var Z=this.path[$],D=B[Z];if(!D){if(F)return;D=B[Z]=new Array(32768)}B=D}return B};z3.prototype.get=function(A,F){var B=this._array(A,F),$=this.path[0],Z=B&&B[$];if(!Z&&!F){if(Z=B[$]=new wd(A,mW(this.pageSize)),A>=this.length)this.length=A+1}if(Z&&Z.buffer===this.deduplicate&&this.deduplicate&&!F)Z.buffer=ej1(Z.buffer),Z.deduplicate=0;return Z};z3.prototype.set=function(A,F){var B=this._array(A,!1),$=this.path[0];if(A>=this.length)this.length=A+1;if(!F||this.zeros&&F.equals&&F.equals(this.zeros)){B[$]=void 0;return}if(this.deduplicate&&F.equals&&F.equals(this.deduplicate))F=this.deduplicate;var Z=B[$],D=oj1(F,this.pageSize);if(Z)Z.buffer=D;else B[$]=new wd(A,D)};z3.prototype.toBuffer=function(){var A=new Array(this.length),F=mW(this.pageSize),B=0;while(B<A.length){var $=this._array(B,!0);for(var Z=0;Z<32768&&B<A.length;Z++)A[B++]=$&&$[Z]?$[Z].buffer:F}return Buffer.concat(A)};function rj1(A,F){while(A.maxPages<F){var B=A.pages;A.pages=new Array(32768),A.pages[0]=B,A.level++,A.maxPages*=32768}}function oj1(A,F){if(A.length===F)return A;if(A.length>F)return A.slice(0,F);var B=mW(F);return A.copy(B),B}function mW(A){if(Buffer.alloc)return Buffer.alloc(A);var F=new Buffer(A);return F.fill(0),F}function ej1(A){var F=Buffer.allocUnsafe?Buffer.allocUnsafe(A.length):new Buffer(A.length);return A.copy(F),F}function wd(A,F){this.offset=A*F.length,this.buffer=F,this.updated=!1,this.deduplicate=0}function AI1(A,F){A=(A-(F[0]=A&32767))/32768,A=(A-(F[1]=A&32767))/32768,F[3]=(A-(F[2]=A&32767))/32768&32767}});var Rd=C((iD0,Md)=>{var FI1=Nd();Md.exports=M5;function M5(A){if(!(this instanceof M5))return new M5(A);if(!A)A={};if(Buffer.isBuffer(A))A={buffer:A};if(this.pageOffset=A.pageOffset||0,this.pageSize=A.pageSize||1024,this.pages=A.pages||FI1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!$I1(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!A.trackUpdates,this._pageMask=this.pageSize-1,A.buffer){for(var F=0;F<A.buffer.length;F+=this.pageSize)this.pages.set(F/this.pageSize,A.buffer.slice(F,F+this.pageSize));this.byteLength=A.buffer.length,this.length=8*this.byteLength}}M5.prototype.get=function(A){var F=A&7,B=(A-F)/8;return!!(this.getByte(B)&128>>F)};M5.prototype.getByte=function(A){var F=A&this._pageMask,B=(A-F)/this.pageSize,$=this.pages.get(B,!0);return $?$.buffer[F+this.pageOffset]:0};M5.prototype.set=function(A,F){var B=A&7,$=(A-B)/8,Z=this.getByte($);return this.setByte($,F?Z|128>>B:Z&(255^128>>B))};M5.prototype.toBuffer=function(){var A=BI1(this.pages.length*this.pageSize);for(var F=0;F<this.pages.length;F++){var B=this.pages.get(F,!0),$=F*this.pageSize;if(B)B.buffer.copy(A,$,this.pageOffset,this.pageOffset+this.pageSize)}return A};M5.prototype.setByte=function(A,F){var B=A&this._pageMask,$=(A-B)/this.pageSize,Z=this.pages.get($,!1);if(B+=this.pageOffset,Z.buffer[B]===F)return!1;if(Z.buffer[B]=F,A>=this.byteLength)this.byteLength=A+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(Z);return!0};function BI1(A){if(Buffer.alloc)return Buffer.alloc(A);var F=new Buffer(A);return F.fill(0),F}function $I1(A){return!(A&A-1)}});var Pd=C((UD)=>{var ZI1=UD&&UD.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(UD,"__esModule",{value:!0});UD.createMemoryCodePoints=XI1;var DI1=ZI1(Rd());function XI1(A){let F=0;function B(){let W=A.readUInt32BE(F);F+=4;let G=A.slice(F,F+W);return F+=W,DI1.default({buffer:G})}let $=B(),Z=B(),D=B(),X=B(),J=B(),Y=B();return{unassigned_code_points:$,commonly_mapped_to_nothing:Z,non_ASCII_space_characters:D,prohibited_characters:X,bidirectional_r_al:J,bidirectional_l:Y}}});var Id=C((jd)=>{Object.defineProperty(jd,"__esModule",{value:!0});var JI1=A1("zlib");jd.default=JI1.gunzipSync(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var Sd=C((PE,Od)=>{var Td=PE&&PE.__importDefault||function(A){return A&&A.__esModule?A:{default:A}},WI1=Td(Ld()),GI1=Pd(),QI1=Td(Id()),zI1=GI1.createMemoryCodePoints(QI1.default);function CD(A,F){return WI1.default(zI1,A,F)}CD.saslprep=CD;CD.default=CD;Od.exports=CD});var dd=C((vd)=>{Object.defineProperty(vd,"__esModule",{value:!0});vd.ScramSHA256=vd.ScramSHA1=void 0;var qI1=Sd(),OA=A1("crypto"),jE=C0(),n7=X1(),pW=K1(),HI1=G5(),kd=U8();class TE extends HI1.AuthProvider{constructor(A){super();this.cryptoMethod=A||"sha1"}async prepare(A,F){let B=this.cryptoMethod,$=F.credentials;if(!$)throw new n7.MongoMissingCredentialsError("AuthContext must provide credentials.");let Z=await pW.randomBytes(24);return F.nonce=Z,{...A,speculativeAuthenticate:{...fd(B,$,Z),db:$.source}}}async auth(A){let{reauthenticating:F,response:B}=A;if(B?.speculativeAuthenticate&&!F)return await gd(this.cryptoMethod,B.speculativeAuthenticate,A);return await UI1(this.cryptoMethod,A)}}function xd(A){return A.replace("=","=3D").replace(",","=2C")}function bd(A,F){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(A,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(F.toString("base64"),"utf8")])}function fd(A,F,B){let $=xd(F.username);return{saslStart:1,mechanism:A==="sha1"?kd.AuthMechanism.MONGODB_SCRAM_SHA1:kd.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new jE.Binary(Buffer.concat([Buffer.from("n,,","utf8"),bd($,B)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function UI1(A,F){let{connection:B,credentials:$}=F;if(!$)throw new n7.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!F.nonce)throw new n7.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let Z=F.nonce,D=$.source,X=fd(A,$,Z),J=await B.command(pW.ns(`${D}.$cmd`),X,void 0);await gd(A,J,F)}async function gd(A,F,B){let{connection:$,credentials:Z}=B;if(!Z)throw new n7.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!B.nonce)throw new n7.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let D=B.nonce,X=Z.source,J=xd(Z.username),Y=Z.password,W=A==="sha256"?qI1.saslprep(Y):CI1(J,Y),G=Buffer.isBuffer(F.payload)?new jE.Binary(F.payload):F.payload,Q=_d(G),q=parseInt(Q.i,10);if(q&&q<4096)throw new n7.MongoRuntimeError(`Server returned an invalid iteration count ${q}`);let{s:z,r:H}=Q;if(H.startsWith("nonce"))throw new n7.MongoRuntimeError(`Server returned an invalid nonce: ${H}`);let U=`c=biws,r=${H}`,K=VI1(W,Buffer.from(z,"base64"),q,A),E=cW(A,K,"Client Key"),L=cW(A,K,"Server Key"),V=EI1(A,E),M=[bd(J,D),G.toString("utf8"),U].join(","),O=cW(A,V,M),R=`p=${KI1(E,O)}`,_=[U,R].join(","),P=cW(A,L,M),T={saslContinue:1,conversationId:F.conversationId,payload:new jE.Binary(Buffer.from(_))},N=await $.command(pW.ns(`${X}.$cmd`),T,void 0),y=_d(N.payload);if(!NI1(Buffer.from(y.v,"base64"),P))throw new n7.MongoRuntimeError("Server returned an invalid signature");if(N.done!==!1)return;let S={saslContinue:1,conversationId:N.conversationId,payload:Buffer.alloc(0)};await $.command(pW.ns(`${X}.$cmd`),S,void 0)}function _d(A){let F=A.toString("utf8"),B={},$=F.split(",");for(let Z=0;Z<$.length;Z++){let D=($[Z].match(/^([^=]*)=(.*)$/)??[]).slice(1);B[D[0]]=D[1]}return B}function CI1(A,F){if(typeof A!=="string")throw new n7.MongoInvalidArgumentError("Username must be a string");if(typeof F!=="string")throw new n7.MongoInvalidArgumentError("Password must be a string");if(F.length===0)throw new n7.MongoInvalidArgumentError("Password cannot be empty");let B;try{B=OA.createHash("md5")}catch($){if(OA.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw $}return B.update(`${A}:mongo:${F}`,"utf8"),B.digest("hex")}function KI1(A,F){if(!Buffer.isBuffer(A))A=Buffer.from(A);if(!Buffer.isBuffer(F))F=Buffer.from(F);let B=Math.max(A.length,F.length),$=[];for(let Z=0;Z<B;Z+=1)$.push(A[Z]^F[Z]);return Buffer.from($).toString("base64")}function EI1(A,F){return OA.createHash(A).update(F).digest()}function cW(A,F,B){return OA.createHmac(A,F).update(B).digest()}var lW={},IE=0;function LI1(){lW={},IE=0}var wI1={sha256:32,sha1:20};function VI1(A,F,B,$){let Z=[A,F.toString("base64"),B].join("_");if(lW[Z]!=null)return lW[Z];let D=OA.pbkdf2Sync(A,F,B,wI1[$],$);if(IE>=200)LI1();return lW[Z]=D,IE+=1,D}function NI1(A,F){if(A.length!==F.length)return!1;if(typeof OA.timingSafeEqual==="function")return OA.timingSafeEqual(A,F);let B=0;for(let $=0;$<A.length;$++)B|=A[$]^F[$];return B===0}class ud extends TE{constructor(){super("sha1")}}vd.ScramSHA1=ud;class yd extends TE{constructor(){super("sha256")}}vd.ScramSHA256=yd});var nd=C((pd)=>{Object.defineProperty(pd,"__esModule",{value:!0});pd.X509=void 0;var md=X1(),RI1=K1(),PI1=G5();class ld extends PI1.AuthProvider{async prepare(A,F){let{credentials:B}=F;if(!B)throw new md.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...A,speculativeAuthenticate:cd(B)}}async auth(A){let{connection:F,credentials:B}=A;if(!B)throw new md.MongoMissingCredentialsError("AuthContext must provide credentials.");if(A.response?.speculativeAuthenticate)return;await F.command(RI1.ns("$external.$cmd"),cd(B),void 0)}}pd.X509=ld;function cd(A){let F={authenticate:1,mechanism:"MONGODB-X509"};if(A.username)F.user=A.username;return F}});var SE=C((od)=>{Object.defineProperty(od,"__esModule",{value:!0});od.MongoClientAuthProviders=void 0;var jI1=lY(),II1=Rh(),td=yW(),TI1=VE(),OI1=Qd(),sd=ME(),SI1=Ud(),R5=U8(),ad=dd(),kI1=nd(),OE=X1(),_I1=new Map([[R5.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:A})=>new II1.MongoDBAWS(A)],[R5.AuthMechanism.MONGODB_CR,()=>{throw new OE.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[R5.AuthMechanism.MONGODB_GSSAPI,()=>new jI1.GSSAPI],[R5.AuthMechanism.MONGODB_OIDC,(A)=>new td.MongoDBOIDC(xI1(A))],[R5.AuthMechanism.MONGODB_PLAIN,()=>new SI1.Plain],[R5.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new ad.ScramSHA1],[R5.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new ad.ScramSHA256],[R5.AuthMechanism.MONGODB_X509,()=>new kI1.X509]]);class rd{constructor(){this.existingProviders=new Map}getOrCreateProvider(A,F){let B=this.existingProviders.get(A);if(B)return B;let $=_I1.get(A);if(!$)throw new OE.MongoInvalidArgumentError(`authMechanism ${A} not supported`);let Z=$(F);return this.existingProviders.set(A,Z),Z}}od.MongoClientAuthProviders=rd;function xI1(A){if(A.OIDC_HUMAN_CALLBACK)return new OI1.HumanCallbackWorkflow(new sd.TokenCache,A.OIDC_HUMAN_CALLBACK);else if(A.OIDC_CALLBACK)return new TI1.AutomatedCallbackWorkflow(new sd.TokenCache,A.OIDC_CALLBACK);else{let F=A.ENVIRONMENT,B=td.OIDC_WORKFLOWS.get(F)?.();if(!B)throw new OE.MongoInvalidArgumentError(`Could not load workflow for environment ${A.ENVIRONMENT}`);return B}}});var kE=C((Fm)=>{Object.defineProperty(Fm,"__esModule",{value:!0});Fm.GridFSBucketReadStream=void 0;var bI1=A1("stream"),fI1=A4(),j9=X1(),gI1=r6();class iW extends bI1.Readable{constructor(A,F,B,$,Z){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:A,expected:0,files:F,filter:$,init:!1,expectedEnd:0,options:{start:0,end:0,...Z},readPreference:B,timeoutContext:Z?.timeoutMS!=null?new gI1.CSOTTimeoutContext({timeoutMS:Z.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;vI1(this,()=>uI1(this))}start(A=0){return Am(this),this.s.options.start=A,this}end(A=0){return Am(this),this.s.options.end=A,this}async abort(){this.push(null),this.destroy();let A=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:A})}}Fm.GridFSBucketReadStream=iW;iW.FILE="file";function Am(A){if(A.s.init)throw new j9.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function uI1(A){if(A.destroyed)return;if(!A.s.cursor)return;if(!A.s.file)return;let F=(B)=>{if(A.destroyed)return;if(!B){A.push(null),A.s.cursor?.close().then(void 0,(Q)=>A.destroy(Q));return}if(!A.s.file)return;let $=A.s.file.length-A.s.bytesRead,Z=A.s.expected++,D=Math.min(A.s.file.chunkSize,$);if(B.n>Z)return A.destroy(new j9.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${B.n}, expected: ${Z}`));if(B.n<Z)return A.destroy(new j9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected: ${Z}`));let X=Buffer.isBuffer(B.data)?B.data:B.data.buffer;if(X.byteLength!==D){if($<=0)return A.destroy(new j9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected file length ${A.s.file.length} bytes but already read ${A.s.bytesRead} bytes`));return A.destroy(new j9.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${X.byteLength}, expected: ${D}`))}if(A.s.bytesRead+=X.byteLength,X.byteLength===0)return A.push(null);let J=null,Y=null;if(A.s.bytesToSkip!=null)J=A.s.bytesToSkip,A.s.bytesToSkip=0;let W=Z===A.s.expectedEnd-1,G=A.s.options.end-A.s.bytesToSkip;if(W&&A.s.bytesToTrim!=null)Y=A.s.file.chunkSize-A.s.bytesToTrim;else if(A.s.options.end&&G<B.data.byteLength)Y=G;if(J!=null||Y!=null)X=X.slice(J||0,Y||X.byteLength);A.push(X);return};A.s.cursor.next().then(F,(B)=>{if(A.destroyed)return;A.destroy(B)})}function yI1(A){let F={};if(A.s.readPreference)F.readPreference=A.s.readPreference;if(A.s.options&&A.s.options.sort)F.sort=A.s.options.sort;if(A.s.options&&A.s.options.skip)F.skip=A.s.options.skip;let B=(Z)=>{if(A.destroyed)return;if(!Z){let Y=`FileNotFound: file ${A.s.filter._id?A.s.filter._id.toString():A.s.filter.filename} was not found`,W=new j9.MongoRuntimeError(Y);return W.code="ENOENT",A.destroy(W)}if(Z.length<=0){A.push(null);return}if(A.destroyed){A.destroy();return}try{A.s.bytesToSkip=hI1(A,Z,A.s.options)}catch(J){return A.destroy(J)}let D={files_id:Z._id};if(A.s.options&&A.s.options.start!=null){let J=Math.floor(A.s.options.start/Z.chunkSize);if(J>0)D.n={$gte:J}}let X;try{X=A.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${A.s.timeoutContext?.timeoutMS}ms`)}catch(J){return A.destroy(J)}if(A.s.cursor=A.s.chunks.find(D,{timeoutMode:A.s.options.timeoutMS!=null?fI1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:X}).sort({n:1}),A.s.readPreference)A.s.cursor.withReadPreference(A.s.readPreference);A.s.expectedEnd=Math.ceil(Z.length/Z.chunkSize),A.s.file=Z;try{A.s.bytesToTrim=dI1(A,Z,A.s.cursor,A.s.options)}catch(J){return A.destroy(J)}A.emit(iW.FILE,Z);return},$;try{$=A.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${A.s.timeoutContext?.timeoutMS}ms`)}catch(Z){if(!A.destroyed)A.destroy(Z);return}F.timeoutMS=$,A.s.files.findOne(A.s.filter,F).then(B,(Z)=>{if(A.destroyed)return;A.destroy(Z)})}function vI1(A,F){if(A.s.file)return F();if(!A.s.init)yI1(A),A.s.init=!0;A.once("file",()=>{F()})}function hI1(A,F,B){if(B&&B.start!=null){if(B.start>F.length)throw new j9.MongoInvalidArgumentError(`Stream start (${B.start}) must not be more than the length of the file (${F.length})`);if(B.start<0)throw new j9.MongoInvalidArgumentError(`Stream start (${B.start}) must not be negative`);if(B.end!=null&&B.end<B.start)throw new j9.MongoInvalidArgumentError(`Stream start (${B.start}) must not be greater than stream end (${B.end})`);return A.s.bytesRead=Math.floor(B.start/F.chunkSize)*F.chunkSize,A.s.expected=Math.floor(B.start/F.chunkSize),B.start-A.s.bytesRead}throw new j9.MongoInvalidArgumentError("Start option must be defined")}function dI1(A,F,B,$){if($&&$.end!=null){if($.end>F.length)throw new j9.MongoInvalidArgumentError(`Stream end (${$.end}) must not be more than the length of the file (${F.length})`);if($.start==null||$.start<0)throw new j9.MongoInvalidArgumentError(`Stream end (${$.end}) must not be negative`);let Z=$.start!=null?Math.floor($.start/F.chunkSize):0;return B.limit(Math.ceil($.end/F.chunkSize)-Z),A.s.expectedEnd=Math.ceil($.end/F.chunkSize),Math.ceil($.end/F.chunkSize)*F.chunkSize-$.end}throw new j9.MongoInvalidArgumentError("End option must be defined")}});var xE=C((Ym)=>{Object.defineProperty(Ym,"__esModule",{value:!0});Ym.GridFSBucketWriteStream=void 0;var mI1=A1("stream"),Zm=C0(),Dm=A4(),s7=X1(),cI1=r6(),$m=K1(),lI1=a6();class Xm extends mI1.Writable{constructor(A,F,B){super();if(this.gridFSFile=null,B=B??{},this.bucket=A,this.chunks=A.s._chunksCollection,this.filename=F,this.files=A.s._filesCollection,this.options=B,this.writeConcern=lI1.WriteConcern.fromOptions(B)||A.s.options.writeConcern,this.done=!1,this.id=B.id?B.id:new Zm.ObjectId,this.chunkSizeBytes=B.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},B.timeoutMS!=null)this.timeoutContext=new cI1.CSOTTimeoutContext({timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:$m.resolveTimeoutOptions(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(A){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,iI1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),A()},(F)=>{if(F instanceof s7.MongoOperationTimeoutError)return SA(this,F,A);$m.squashError(F),A()});else return process.nextTick(A)}_write(A,F,B){sI1(this,A,F,B)}_final(A){if(this.state.streamEnd)return process.nextTick(A);this.state.streamEnd=!0,aI1(this,A)}async abort(){if(this.state.streamEnd)throw new s7.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new s7.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let A=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:A})}}Ym.GridFSBucketWriteStream=Xm;function SA(A,F,B){if(A.state.errored){process.nextTick(B);return}A.state.errored=!0,process.nextTick(B,F)}function Jm(A,F,B){return{_id:new Zm.ObjectId,files_id:A,n:F,data:B}}async function pI1(A){let F={files_id:1,n:1},B;B=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);let $;try{$=await A.chunks.listIndexes({timeoutMode:B!=null?Dm.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:B}).toArray()}catch(D){if(D instanceof s7.MongoError&&D.code===s7.MONGODB_ERROR_CODES.NamespaceNotFound)$=[];else throw D}if(!$.find((D)=>{if(Object.keys(D.key).length===2&&D.key.files_id===1&&D.key.n===1)return!0;return!1}))B=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),await A.chunks.createIndex(F,{...A.writeConcern,background:!0,unique:!0,timeoutMS:B})}function _E(A,F){if(A.done)return process.nextTick(F);if(A.state.streamEnd&&A.state.outstandingRequests===0&&!A.state.errored){A.done=!0;let B=nI1(A.id,A.length,A.chunkSizeBytes,A.filename,A.options.contentType,A.options.aliases,A.options.metadata);if(nW(A,F))return;let $=A.timeoutContext?.remainingTimeMS;if($!=null&&$<=0)return SA(A,new s7.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),F);A.files.insertOne(B,{writeConcern:A.writeConcern,timeoutMS:$}).then(()=>{A.gridFSFile=B,F()},(Z)=>{return SA(A,Z,F)});return}process.nextTick(F)}async function iI1(A){let F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);if(await A.files.findOne({},{projection:{_id:1},timeoutMS:F})!=null)return;let $={filename:1,uploadDate:1},Z;F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);let D={timeoutMode:F!=null?Dm.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:F};try{Z=await A.files.listIndexes(D).toArray()}catch(J){if(J instanceof s7.MongoError&&J.code===s7.MONGODB_ERROR_CODES.NamespaceNotFound)Z=[];else throw J}if(!Z.find((J)=>{if(Object.keys(J.key).length===2&&J.key.filename===1&&J.key.uploadDate===1)return!0;return!1}))F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),await A.files.createIndex($,{background:!1,timeoutMS:F});await pI1(A)}function nI1(A,F,B,$,Z,D,X){let J={_id:A,length:F,chunkSize:B,uploadDate:new Date,filename:$};if(Z)J.contentType=Z;if(D)J.aliases=D;if(X)J.metadata=X;return J}function sI1(A,F,B,$){if(nW(A,$))return;let Z=Buffer.isBuffer(F)?F:Buffer.from(F,B);if(A.length+=Z.length,A.pos+Z.length<A.chunkSizeBytes){Z.copy(A.bufToStore,A.pos),A.pos+=Z.length,process.nextTick($);return}let D=Z.length,X=A.chunkSizeBytes-A.pos,J=Math.min(X,Z.length),Y=0;while(D>0){let W=Z.length-D;Z.copy(A.bufToStore,A.pos,W,W+J),A.pos+=J,X-=J;let G;if(X===0){G=Jm(A.id,A.n,Buffer.from(A.bufToStore));let Q=A.timeoutContext?.remainingTimeMS;if(Q!=null&&Q<=0)return SA(A,new s7.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),$);if(++A.state.outstandingRequests,++Y,nW(A,$))return;A.chunks.insertOne(G,{writeConcern:A.writeConcern,timeoutMS:Q}).then(()=>{if(--A.state.outstandingRequests,--Y,!Y)_E(A,$)},(q)=>{return SA(A,q,$)}),X=A.chunkSizeBytes,A.pos=0,++A.n}D-=J,J=Math.min(X,D)}}function aI1(A,F){if(A.pos===0)return _E(A,F);let B=Buffer.alloc(A.pos);A.bufToStore.copy(B,0,0,A.pos);let $=Jm(A.id,A.n,B);if(nW(A,F))return;let Z=A.timeoutContext?.remainingTimeMS;if(Z!=null&&Z<=0)return SA(A,new s7.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),F);++A.state.outstandingRequests,A.chunks.insertOne($,{writeConcern:A.writeConcern,timeoutMS:Z}).then(()=>{--A.state.outstandingRequests,_E(A,F)},(D)=>{return SA(A,D,F)})}function nW(A,F){if(A.state.aborted)return process.nextTick(F,new s7.MongoAPIError("Stream has been aborted")),!0;return!1}});var Um=C((qm)=>{Object.defineProperty(qm,"__esModule",{value:!0});qm.GridFSBucket=void 0;var bE=X1(),tI1=V9(),Gm=r6(),sW=K1(),rI1=a6(),Qm=kE(),zm=xE(),oI1={bucketName:"fs",chunkSizeBytes:261120};class fE extends tI1.TypedEventEmitter{constructor(A,F){super();this.on("error",sW.noop),this.setMaxListeners(0);let B=sW.resolveOptions(A,{...oI1,...F,writeConcern:rI1.WriteConcern.fromOptions(F)});this.s={db:A,options:B,_chunksCollection:A.collection(B.bucketName+".chunks"),_filesCollection:A.collection(B.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(A,F){return new zm.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...F})}openUploadStreamWithId(A,F,B){return new zm.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...B,id:A})}openDownloadStream(A,F){return new Qm.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:A},{timeoutMS:this.s.options.timeoutMS,...F})}async delete(A,F){let{timeoutMS:B}=sW.resolveOptions(this.s.db,F),$=void 0;if(B)$=new Gm.CSOTTimeoutContext({timeoutMS:B,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:Z}=await this.s._filesCollection.deleteOne({_id:A},{timeoutMS:$?.remainingTimeMS}),D=$?.remainingTimeMS;if(D!=null&&D<=0)throw new bE.MongoOperationTimeoutError(`Timed out after ${B}ms`);if(await this.s._chunksCollection.deleteMany({files_id:A},{timeoutMS:D}),Z===0)throw new bE.MongoRuntimeError(`File not found for id ${A}`)}find(A={},F={}){return this.s._filesCollection.find(A,F)}openDownloadStreamByName(A,F){let B={uploadDate:-1},$=void 0;if(F&&F.revision!=null)if(F.revision>=0)B={uploadDate:1},$=F.revision;else $=-F.revision-1;return new Qm.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:A},{timeoutMS:this.s.options.timeoutMS,...F,sort:B,skip:$})}async rename(A,F,B){let $={_id:A},Z={$set:{filename:F}},{matchedCount:D}=await this.s._filesCollection.updateOne($,Z,B);if(D===0)throw new bE.MongoRuntimeError(`File with id ${A} not found`)}async drop(A){let{timeoutMS:F}=sW.resolveOptions(this.s.db,A),B=void 0;if(F)B=new Gm.CSOTTimeoutContext({timeoutMS:F,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if(B){await this.s._filesCollection.drop({timeoutMS:B.remainingTimeMS});let $=B.getRemainingTimeMSOrThrow(`Timed out after ${F}ms`);await this.s._chunksCollection.drop({timeoutMS:$})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}qm.GridFSBucket=fE;fE.INDEX="index"});var gE=C((wm)=>{Object.defineProperty(wm,"__esModule",{value:!0});wm.WaitingForSuitableServerEvent=wm.ServerSelectionSucceededEvent=wm.ServerSelectionFailedEvent=wm.ServerSelectionStartedEvent=wm.ServerSelectionEvent=void 0;var eI1=K1(),aW=l2();class _B{constructor(A,F,B){this.selector=A,this.operation=B,this.topologyDescription=F}}wm.ServerSelectionEvent=_B;class Cm extends _B{constructor(A,F,B){super(A,F,B);this.name=aW.SERVER_SELECTION_STARTED,this.message="Server selection started"}}wm.ServerSelectionStartedEvent=Cm;class Km extends _B{constructor(A,F,B,$){super(A,F,$);this.name=aW.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=B}}wm.ServerSelectionFailedEvent=Km;class Em extends _B{constructor(A,F,B,$){super(A,F,$);this.name=aW.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:Z,port:D}=eI1.HostAddress.fromString(B).toHostPort();this.serverHost=Z,this.serverPort=D}}wm.ServerSelectionSucceededEvent=Em;class Lm extends _B{constructor(A,F,B,$){super(A,F,$);this.name=aW.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=B}}wm.WaitingForSuitableServerEvent=Lm});var vE=C((Nm)=>{Object.defineProperty(Nm,"__esModule",{value:!0});Nm.SrvPoller=Nm.SrvPollingEvent=void 0;var ZT1=A1("dns"),uE=A1("timers"),DT1=X1(),XT1=V9(),KD=K1();class yE{constructor(A){this.srvRecords=A}hostnames(){return new Set(this.srvRecords.map((A)=>KD.HostAddress.fromSrvRecord(A).toString()))}}Nm.SrvPollingEvent=yE;class tW extends XT1.TypedEventEmitter{constructor(A){super();if(this.on("error",KD.noop),!A||!A.srvHost)throw new DT1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=A.srvHost,this.srvMaxHosts=A.srvMaxHosts??0,this.srvServiceName=A.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)uE.clearTimeout(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)uE.clearTimeout(this._timeout);this._timeout=uE.setTimeout(()=>{this._poll().then(void 0,KD.squashError)},this.intervalMS)}success(A){this.haMode=!1,this.schedule(),this.emit(tW.SRV_RECORD_DISCOVERY,new yE(A))}failure(){this.haMode=!0,this.schedule()}async _poll(){let A=this.generation,F;try{F=await ZT1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(A!==this.generation)return;let B=[];for(let $ of F)try{KD.checkParentDomainMatch($.name,this.srvHost),B.push($)}catch(Z){KD.squashError(Z)}if(!B.length){this.failure();return}this.success(B)}}Nm.SrvPoller=tW;tW.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var kA=C((m)=>{Object.defineProperty(m,"__esModule",{value:!0});m.MongoServerClosedError=m.MongoRuntimeError=m.MongoParseError=m.MongoOperationTimeoutError=m.MongoOIDCError=m.MongoNotConnectedError=m.MongoNetworkTimeoutError=m.MongoNetworkError=m.MongoMissingDependencyError=m.MongoMissingCredentialsError=m.MongoKerberosError=m.MongoInvalidArgumentError=m.MongoGridFSStreamError=m.MongoGridFSChunkError=m.MongoGCPError=m.MongoExpiredSessionError=m.MongoError=m.MongoDriverError=m.MongoDecompressionError=m.MongoCursorInUseError=m.MongoCursorExhaustedError=m.MongoCompatibilityError=m.MongoClientClosedError=m.MongoClientBulkWriteExecutionError=m.MongoClientBulkWriteError=m.MongoClientBulkWriteCursorError=m.MongoChangeStreamError=m.MongoBatchReExecutionError=m.MongoAzureError=m.MongoAWSError=m.MongoAPIError=m.ChangeStreamCursor=m.ClientEncryption=m.MongoBulkWriteError=m.UUID=m.Timestamp=m.ObjectId=m.MinKey=m.MaxKey=m.Long=m.Int32=m.Double=m.Decimal128=m.DBRef=m.Code=m.BSONType=m.BSONSymbol=m.BSONRegExp=m.Binary=m.BSON=void 0;m.CommandFailedEvent=m.WriteConcern=m.ReadPreference=m.ReadConcern=m.TopologyType=m.ServerType=m.ReadPreferenceMode=m.ReadConcernLevel=m.ProfilingLevel=m.ReturnDocument=m.SeverityLevel=m.MongoLoggableComponent=m.ServerApiVersion=m.ExplainVerbosity=m.MongoErrorLabel=m.CursorTimeoutMode=m.CURSOR_FLAGS=m.Compressor=m.AuthMechanism=m.GSSAPICanonicalizationValue=m.AutoEncryptionLoggerLevel=m.BatchType=m.UnorderedBulkOperation=m.OrderedBulkOperation=m.MongoClient=m.ListIndexesCursor=m.ListCollectionsCursor=m.GridFSBucketWriteStream=m.GridFSBucketReadStream=m.GridFSBucket=m.FindCursor=m.ExplainableCursor=m.Db=m.Collection=m.ClientSession=m.ChangeStream=m.CancellationToken=m.AggregationCursor=m.Admin=m.AbstractCursor=m.configureExplicitResourceManagement=m.MongoWriteConcernError=m.MongoUnexpectedServerResponseError=m.MongoTransactionError=m.MongoTopologyClosedError=m.MongoTailableCursorError=m.MongoSystemError=m.MongoStalePrimaryError=m.MongoServerSelectionError=m.MongoServerError=void 0;m.MongoClientAuthProviders=m.MongoCryptKMSRequestNetworkTimeoutError=m.MongoCryptInvalidArgumentError=m.MongoCryptError=m.MongoCryptCreateEncryptedCollectionError=m.MongoCryptCreateDataKeyError=m.MongoCryptAzureKMSRequestError=m.SrvPollingEvent=m.WaitingForSuitableServerEvent=m.ServerSelectionSucceededEvent=m.ServerSelectionStartedEvent=m.ServerSelectionFailedEvent=m.ServerSelectionEvent=m.TopologyOpeningEvent=m.TopologyDescriptionChangedEvent=m.TopologyClosedEvent=m.ServerOpeningEvent=m.ServerHeartbeatSucceededEvent=m.ServerHeartbeatStartedEvent=m.ServerHeartbeatFailedEvent=m.ServerDescriptionChangedEvent=m.ServerClosedEvent=m.ConnectionReadyEvent=m.ConnectionPoolReadyEvent=m.ConnectionPoolMonitoringEvent=m.ConnectionPoolCreatedEvent=m.ConnectionPoolClosedEvent=m.ConnectionPoolClearedEvent=m.ConnectionCreatedEvent=m.ConnectionClosedEvent=m.ConnectionCheckOutStartedEvent=m.ConnectionCheckOutFailedEvent=m.ConnectionCheckedOutEvent=m.ConnectionCheckedInEvent=m.CommandSucceededEvent=m.CommandStartedEvent=void 0;var YT1=MC();Object.defineProperty(m,"Admin",{enumerable:!0,get:function(){return YT1.Admin}});var WT1=NU();Object.defineProperty(m,"OrderedBulkOperation",{enumerable:!0,get:function(){return WT1.OrderedBulkOperation}});var GT1=MU();Object.defineProperty(m,"UnorderedBulkOperation",{enumerable:!0,get:function(){return GT1.UnorderedBulkOperation}});var QT1=VA();Object.defineProperty(m,"ChangeStream",{enumerable:!0,get:function(){return QT1.ChangeStream}});var zT1=wA();Object.defineProperty(m,"Collection",{enumerable:!0,get:function(){return zT1.Collection}});var qT1=A4();Object.defineProperty(m,"AbstractCursor",{enumerable:!0,get:function(){return qT1.AbstractCursor}});var HT1=SZ();Object.defineProperty(m,"AggregationCursor",{enumerable:!0,get:function(){return HT1.AggregationCursor}});var UT1=yU();Object.defineProperty(m,"FindCursor",{enumerable:!0,get:function(){return UT1.FindCursor}});var CT1=jC();Object.defineProperty(m,"ListCollectionsCursor",{enumerable:!0,get:function(){return CT1.ListCollectionsCursor}});var KT1=lU();Object.defineProperty(m,"ListIndexesCursor",{enumerable:!0,get:function(){return KT1.ListIndexesCursor}});var ET1=dY();Object.defineProperty(m,"Db",{enumerable:!0,get:function(){return ET1.Db}});var LT1=LA();Object.defineProperty(m,"ExplainableCursor",{enumerable:!0,get:function(){return LT1.ExplainableCursor}});var wT1=Um();Object.defineProperty(m,"GridFSBucket",{enumerable:!0,get:function(){return wT1.GridFSBucket}});var VT1=kE();Object.defineProperty(m,"GridFSBucketReadStream",{enumerable:!0,get:function(){return VT1.GridFSBucketReadStream}});var NT1=xE();Object.defineProperty(m,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return NT1.GridFSBucketWriteStream}});var MT1=Y5();Object.defineProperty(m,"MongoClient",{enumerable:!0,get:function(){return MT1.MongoClient}});var RT1=V9();Object.defineProperty(m,"CancellationToken",{enumerable:!0,get:function(){return RT1.CancellationToken}});var PT1=VB();Object.defineProperty(m,"ClientSession",{enumerable:!0,get:function(){return PT1.ClientSession}});var jT1=C0();Object.defineProperty(m,"BSON",{enumerable:!0,get:function(){return jT1.BSON}});var R4=C0();Object.defineProperty(m,"Binary",{enumerable:!0,get:function(){return R4.Binary}});Object.defineProperty(m,"BSONRegExp",{enumerable:!0,get:function(){return R4.BSONRegExp}});Object.defineProperty(m,"BSONSymbol",{enumerable:!0,get:function(){return R4.BSONSymbol}});Object.defineProperty(m,"BSONType",{enumerable:!0,get:function(){return R4.BSONType}});Object.defineProperty(m,"Code",{enumerable:!0,get:function(){return R4.Code}});Object.defineProperty(m,"DBRef",{enumerable:!0,get:function(){return R4.DBRef}});Object.defineProperty(m,"Decimal128",{enumerable:!0,get:function(){return R4.Decimal128}});Object.defineProperty(m,"Double",{enumerable:!0,get:function(){return R4.Double}});Object.defineProperty(m,"Int32",{enumerable:!0,get:function(){return R4.Int32}});Object.defineProperty(m,"Long",{enumerable:!0,get:function(){return R4.Long}});Object.defineProperty(m,"MaxKey",{enumerable:!0,get:function(){return R4.MaxKey}});Object.defineProperty(m,"MinKey",{enumerable:!0,get:function(){return R4.MinKey}});Object.defineProperty(m,"ObjectId",{enumerable:!0,get:function(){return R4.ObjectId}});Object.defineProperty(m,"Timestamp",{enumerable:!0,get:function(){return R4.Timestamp}});Object.defineProperty(m,"UUID",{enumerable:!0,get:function(){return R4.UUID}});var IT1=rF();Object.defineProperty(m,"MongoBulkWriteError",{enumerable:!0,get:function(){return IT1.MongoBulkWriteError}});var TT1=QW();Object.defineProperty(m,"ClientEncryption",{enumerable:!0,get:function(){return TT1.ClientEncryption}});var OT1=KC();Object.defineProperty(m,"ChangeStreamCursor",{enumerable:!0,get:function(){return OT1.ChangeStreamCursor}});var n1=X1();Object.defineProperty(m,"MongoAPIError",{enumerable:!0,get:function(){return n1.MongoAPIError}});Object.defineProperty(m,"MongoAWSError",{enumerable:!0,get:function(){return n1.MongoAWSError}});Object.defineProperty(m,"MongoAzureError",{enumerable:!0,get:function(){return n1.MongoAzureError}});Object.defineProperty(m,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return n1.MongoBatchReExecutionError}});Object.defineProperty(m,"MongoChangeStreamError",{enumerable:!0,get:function(){return n1.MongoChangeStreamError}});Object.defineProperty(m,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return n1.MongoClientBulkWriteCursorError}});Object.defineProperty(m,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return n1.MongoClientBulkWriteError}});Object.defineProperty(m,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return n1.MongoClientBulkWriteExecutionError}});Object.defineProperty(m,"MongoClientClosedError",{enumerable:!0,get:function(){return n1.MongoClientClosedError}});Object.defineProperty(m,"MongoCompatibilityError",{enumerable:!0,get:function(){return n1.MongoCompatibilityError}});Object.defineProperty(m,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return n1.MongoCursorExhaustedError}});Object.defineProperty(m,"MongoCursorInUseError",{enumerable:!0,get:function(){return n1.MongoCursorInUseError}});Object.defineProperty(m,"MongoDecompressionError",{enumerable:!0,get:function(){return n1.MongoDecompressionError}});Object.defineProperty(m,"MongoDriverError",{enumerable:!0,get:function(){return n1.MongoDriverError}});Object.defineProperty(m,"MongoError",{enumerable:!0,get:function(){return n1.MongoError}});Object.defineProperty(m,"MongoExpiredSessionError",{enumerable:!0,get:function(){return n1.MongoExpiredSessionError}});Object.defineProperty(m,"MongoGCPError",{enumerable:!0,get:function(){return n1.MongoGCPError}});Object.defineProperty(m,"MongoGridFSChunkError",{enumerable:!0,get:function(){return n1.MongoGridFSChunkError}});Object.defineProperty(m,"MongoGridFSStreamError",{enumerable:!0,get:function(){return n1.MongoGridFSStreamError}});Object.defineProperty(m,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return n1.MongoInvalidArgumentError}});Object.defineProperty(m,"MongoKerberosError",{enumerable:!0,get:function(){return n1.MongoKerberosError}});Object.defineProperty(m,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return n1.MongoMissingCredentialsError}});Object.defineProperty(m,"MongoMissingDependencyError",{enumerable:!0,get:function(){return n1.MongoMissingDependencyError}});Object.defineProperty(m,"MongoNetworkError",{enumerable:!0,get:function(){return n1.MongoNetworkError}});Object.defineProperty(m,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return n1.MongoNetworkTimeoutError}});Object.defineProperty(m,"MongoNotConnectedError",{enumerable:!0,get:function(){return n1.MongoNotConnectedError}});Object.defineProperty(m,"MongoOIDCError",{enumerable:!0,get:function(){return n1.MongoOIDCError}});Object.defineProperty(m,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return n1.MongoOperationTimeoutError}});Object.defineProperty(m,"MongoParseError",{enumerable:!0,get:function(){return n1.MongoParseError}});Object.defineProperty(m,"MongoRuntimeError",{enumerable:!0,get:function(){return n1.MongoRuntimeError}});Object.defineProperty(m,"MongoServerClosedError",{enumerable:!0,get:function(){return n1.MongoServerClosedError}});Object.defineProperty(m,"MongoServerError",{enumerable:!0,get:function(){return n1.MongoServerError}});Object.defineProperty(m,"MongoServerSelectionError",{enumerable:!0,get:function(){return n1.MongoServerSelectionError}});Object.defineProperty(m,"MongoStalePrimaryError",{enumerable:!0,get:function(){return n1.MongoStalePrimaryError}});Object.defineProperty(m,"MongoSystemError",{enumerable:!0,get:function(){return n1.MongoSystemError}});Object.defineProperty(m,"MongoTailableCursorError",{enumerable:!0,get:function(){return n1.MongoTailableCursorError}});Object.defineProperty(m,"MongoTopologyClosedError",{enumerable:!0,get:function(){return n1.MongoTopologyClosedError}});Object.defineProperty(m,"MongoTransactionError",{enumerable:!0,get:function(){return n1.MongoTransactionError}});Object.defineProperty(m,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return n1.MongoUnexpectedServerResponseError}});Object.defineProperty(m,"MongoWriteConcernError",{enumerable:!0,get:function(){return n1.MongoWriteConcernError}});var ST1=DB();Object.defineProperty(m,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return ST1.configureExplicitResourceManagement}});var kT1=rF();Object.defineProperty(m,"BatchType",{enumerable:!0,get:function(){return kT1.BatchType}});var _T1=LK();Object.defineProperty(m,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return _T1.AutoEncryptionLoggerLevel}});var xT1=lY();Object.defineProperty(m,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return xT1.GSSAPICanonicalizationValue}});var bT1=U8();Object.defineProperty(m,"AuthMechanism",{enumerable:!0,get:function(){return bT1.AuthMechanism}});var fT1=iZ();Object.defineProperty(m,"Compressor",{enumerable:!0,get:function(){return fT1.Compressor}});var Rm=A4();Object.defineProperty(m,"CURSOR_FLAGS",{enumerable:!0,get:function(){return Rm.CURSOR_FLAGS}});Object.defineProperty(m,"CursorTimeoutMode",{enumerable:!0,get:function(){return Rm.CursorTimeoutMode}});var gT1=X1();Object.defineProperty(m,"MongoErrorLabel",{enumerable:!0,get:function(){return gT1.MongoErrorLabel}});var uT1=LA();Object.defineProperty(m,"ExplainVerbosity",{enumerable:!0,get:function(){return uT1.ExplainVerbosity}});var yT1=Y5();Object.defineProperty(m,"ServerApiVersion",{enumerable:!0,get:function(){return yT1.ServerApiVersion}});var Pm=Z5();Object.defineProperty(m,"MongoLoggableComponent",{enumerable:!0,get:function(){return Pm.MongoLoggableComponent}});Object.defineProperty(m,"SeverityLevel",{enumerable:!0,get:function(){return Pm.SeverityLevel}});var vT1=oU();Object.defineProperty(m,"ReturnDocument",{enumerable:!0,get:function(){return vT1.ReturnDocument}});var hT1=IC();Object.defineProperty(m,"ProfilingLevel",{enumerable:!0,get:function(){return hT1.ProfilingLevel}});var dT1=i9();Object.defineProperty(m,"ReadConcernLevel",{enumerable:!0,get:function(){return dT1.ReadConcernLevel}});var mT1=E6();Object.defineProperty(m,"ReadPreferenceMode",{enumerable:!0,get:function(){return mT1.ReadPreferenceMode}});var jm=L9();Object.defineProperty(m,"ServerType",{enumerable:!0,get:function(){return jm.ServerType}});Object.defineProperty(m,"TopologyType",{enumerable:!0,get:function(){return jm.TopologyType}});var cT1=i9();Object.defineProperty(m,"ReadConcern",{enumerable:!0,get:function(){return cT1.ReadConcern}});var lT1=E6();Object.defineProperty(m,"ReadPreference",{enumerable:!0,get:function(){return lT1.ReadPreference}});var pT1=a6();Object.defineProperty(m,"WriteConcern",{enumerable:!0,get:function(){return pT1.WriteConcern}});var hE=gK();Object.defineProperty(m,"CommandFailedEvent",{enumerable:!0,get:function(){return hE.CommandFailedEvent}});Object.defineProperty(m,"CommandStartedEvent",{enumerable:!0,get:function(){return hE.CommandStartedEvent}});Object.defineProperty(m,"CommandSucceededEvent",{enumerable:!0,get:function(){return hE.CommandSucceededEvent}});var A7=pK();Object.defineProperty(m,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return A7.ConnectionCheckedInEvent}});Object.defineProperty(m,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return A7.ConnectionCheckedOutEvent}});Object.defineProperty(m,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return A7.ConnectionCheckOutFailedEvent}});Object.defineProperty(m,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return A7.ConnectionCheckOutStartedEvent}});Object.defineProperty(m,"ConnectionClosedEvent",{enumerable:!0,get:function(){return A7.ConnectionClosedEvent}});Object.defineProperty(m,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return A7.ConnectionCreatedEvent}});Object.defineProperty(m,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return A7.ConnectionPoolClearedEvent}});Object.defineProperty(m,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return A7.ConnectionPoolClosedEvent}});Object.defineProperty(m,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return A7.ConnectionPoolCreatedEvent}});Object.defineProperty(m,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return A7.ConnectionPoolMonitoringEvent}});Object.defineProperty(m,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return A7.ConnectionPoolReadyEvent}});Object.defineProperty(m,"ConnectionReadyEvent",{enumerable:!0,get:function(){return A7.ConnectionReadyEvent}});var q3=SW();Object.defineProperty(m,"ServerClosedEvent",{enumerable:!0,get:function(){return q3.ServerClosedEvent}});Object.defineProperty(m,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return q3.ServerDescriptionChangedEvent}});Object.defineProperty(m,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return q3.ServerHeartbeatFailedEvent}});Object.defineProperty(m,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return q3.ServerHeartbeatStartedEvent}});Object.defineProperty(m,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return q3.ServerHeartbeatSucceededEvent}});Object.defineProperty(m,"ServerOpeningEvent",{enumerable:!0,get:function(){return q3.ServerOpeningEvent}});Object.defineProperty(m,"TopologyClosedEvent",{enumerable:!0,get:function(){return q3.TopologyClosedEvent}});Object.defineProperty(m,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return q3.TopologyDescriptionChangedEvent}});Object.defineProperty(m,"TopologyOpeningEvent",{enumerable:!0,get:function(){return q3.TopologyOpeningEvent}});var ED=gE();Object.defineProperty(m,"ServerSelectionEvent",{enumerable:!0,get:function(){return ED.ServerSelectionEvent}});Object.defineProperty(m,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return ED.ServerSelectionFailedEvent}});Object.defineProperty(m,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return ED.ServerSelectionStartedEvent}});Object.defineProperty(m,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return ED.ServerSelectionSucceededEvent}});Object.defineProperty(m,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return ED.WaitingForSuitableServerEvent}});var iT1=vE();Object.defineProperty(m,"SrvPollingEvent",{enumerable:!0,get:function(){return iT1.SrvPollingEvent}});var xB=CB();Object.defineProperty(m,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return xB.MongoCryptAzureKMSRequestError}});Object.defineProperty(m,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return xB.MongoCryptCreateDataKeyError}});Object.defineProperty(m,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return xB.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(m,"MongoCryptError",{enumerable:!0,get:function(){return xB.MongoCryptError}});Object.defineProperty(m,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return xB.MongoCryptInvalidArgumentError}});Object.defineProperty(m,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return xB.MongoCryptKMSRequestNetworkTimeoutError}});var nT1=SE();Object.defineProperty(m,"MongoClientAuthProviders",{enumerable:!0,get:function(){return nT1.MongoClientAuthProviders}})});var Im=C((rW)=>{Object.defineProperty(rW,"__esModule",{value:!0});rT1(kA(),rW);function rT1(A){for(let F of Object.keys(A))Object.defineProperty(rW,F,{enumerable:!0,get:function(){return A[F]}})}});var cE=C((Tm)=>{Object.defineProperty(Tm,"__esModule",{value:!0});Tm.ClientBulkWriteOperation=void 0;var dE=Im(),oT1=v7(),eT1=K1(),AO1=_2(),bB=P0();class mE extends AO1.CommandOperation{get commandName(){return"bulkWrite"}constructor(A,F){super(void 0,F);this.commandBuilder=A,this.options=F,this.ns=new eT1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}async execute(A,F,B){let $;if(A.description.type===dE.ServerType.LoadBalancer)if(F){let Z;if(!F.pinnedConnection)Z=await A.pool.checkOut({timeoutContext:B}),F.pin(Z);else Z=F.pinnedConnection;$=this.commandBuilder.buildBatch(Z.hello?.maxMessageSizeBytes,Z.hello?.maxWriteBatchSize,Z.hello?.maxBsonObjectSize)}else throw new dE.MongoClientBulkWriteExecutionError("Session provided to the client bulk write operation must be present.");else{if(!A.description.maxWriteBatchSize||!A.description.maxMessageSizeBytes||!A.description.maxBsonObjectSize)throw new dE.MongoClientBulkWriteExecutionError("In order to execute a client bulk write, both maxWriteBatchSize, maxMessageSizeBytes and maxBsonObjectSize must be provided by the servers hello response.");$=this.commandBuilder.buildBatch(A.description.maxMessageSizeBytes,A.description.maxWriteBatchSize,A.description.maxBsonObjectSize)}if(!this.canRetryWrite)this.options.willRetryWrite=!1;return await super.executeCommand(A,F,$,B,oT1.ClientBulkWriteCursorResponse)}}Tm.ClientBulkWriteOperation=mE;bB.defineAspects(mE,[bB.Aspect.WRITE_OPERATION,bB.Aspect.SKIP_COLLATION,bB.Aspect.CURSOR_CREATING,bB.Aspect.RETRYABLE,bB.Aspect.COMMAND_BATCHING])});var xm=C((km)=>{Object.defineProperty(km,"__esModule",{value:!0});km.ClientBulkWriteCursor=void 0;var FO1=cE(),BO1=e6(),Sm=K1(),$O1=A4();class lE extends $O1.AbstractCursor{constructor(A,F,B={}){super(A,new Sm.MongoDBNamespace("admin","$cmd"),B);this.commandBuilder=F,this.clientBulkWriteOptions=B}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let A=Sm.mergeOptions({},this.clientBulkWriteOptions);return delete A.session,new lE(this.client,this.commandBuilder,{...A})}async _initialize(A){let F=new FO1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:A}),B=await BO1.executeOperation(this.client,F,this.timeoutContext);return this.cursorResponse=B,{server:F.server,session:A,response:B}}}km.ClientBulkWriteCursor=lE});var im=C((hm)=>{Object.defineProperty(hm,"__esModule",{value:!0});hm.buildReplaceOneOperation=hm.buildUpdateManyOperation=hm.buildUpdateOneOperation=hm.buildDeleteManyOperation=hm.buildDeleteOneOperation=hm.buildInsertOneOperation=hm.ClientBulkWriteCommandBuilder=void 0;hm.buildOperation=nE;var pE=C0(),bm=pZ(),LD=X1(),gm=eF(),sE=K1(),fm=1000;class um{constructor(A,F,B){this.models=A,this.options=F,this.pkFactory=B??sE.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(A,F,B){this.isBatchRetryable=!0;let $=0,Z=0,D=this.baseCommand(),X=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let J=this.models[this.currentModelIndex],Y=J.namespace,W=X.get(Y);if(J.name==="deleteMany"||J.name==="updateMany")this.isBatchRetryable=!1;if(W!=null){let G=nE(J,W,this.pkFactory,this.options),Q;try{Q=pE.BSON.serialize(G)}catch(q){throw new LD.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:q})}if(iE("ops",Q,B),$+Q.length<A&&D.ops.documents.length<F)$=fm+D.ops.push(G,Q),this.currentModelIndex++;else break}else{X.set(Y,Z);let G={ns:Y},Q=nE(J,Z,this.pkFactory,this.options),q,z;try{q=pE.BSON.serialize(G),z=pE.BSON.serialize(Q)}catch(H){throw new LD.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:H})}if(iE("nsInfo",q,B),iE("ops",z,B),$+q.length+z.length<A&&D.ops.documents.length<F)$=fm+D.nsInfo.push(G,q)+D.ops.push(Q,z),Z++,this.currentModelIndex++;else break}}return this.lastOperations=D.ops.documents,D}baseCommand(){let A={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new bm.DocumentSequence("ops"),nsInfo:new bm.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)A.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)A.let=this.options.let;if(this.options.comment!==void 0)A.comment=this.options.comment;return A}}hm.ClientBulkWriteCommandBuilder=um;function iE(A,F,B){if(F.length>B)throw new LD.MongoInvalidArgumentError(`Client bulk write operation ${A} of length ${F.length} exceeds the max bson object size of ${B}`)}var ZO1=(A,F,B)=>{let $={insert:F,document:A.document};return $.document._id=A.document._id??B.createPk(),$};hm.buildInsertOneOperation=ZO1;var DO1=(A,F)=>{return ym(A,F,!1)};hm.buildDeleteOneOperation=DO1;var XO1=(A,F)=>{return ym(A,F,!0)};hm.buildDeleteManyOperation=XO1;function ym(A,F,B){let $={delete:F,multi:B,filter:A.filter};if(A.hint)$.hint=A.hint;if(A.collation)$.collation=A.collation;return $}var JO1=(A,F,B)=>{return vm(A,F,!1,B)};hm.buildUpdateOneOperation=JO1;var YO1=(A,F,B)=>{return vm(A,F,!0,B)};hm.buildUpdateManyOperation=YO1;function WO1(A,F){if(!sE.hasAtomicOperators(A,F))throw new LD.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function vm(A,F,B,$){WO1(A.update,$);let Z={update:F,multi:B,filter:A.filter,updateMods:A.update};if(A.hint)Z.hint=A.hint;if(A.upsert)Z.upsert=A.upsert;if(A.arrayFilters)Z.arrayFilters=A.arrayFilters;if(A.collation)Z.collation=A.collation;if(!B&&"sort"in A&&A.sort!=null)Z.sort=gm.formatSort(A.sort);return Z}var GO1=(A,F)=>{if(sE.hasAtomicOperators(A.replacement))throw new LD.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let B={update:F,multi:!1,filter:A.filter,updateMods:A.replacement};if(A.hint)B.hint=A.hint;if(A.upsert)B.upsert=A.upsert;if(A.collation)B.collation=A.collation;if(A.sort!=null)B.sort=gm.formatSort(A.sort);return B};hm.buildReplaceOneOperation=GO1;function nE(A,F,B,$){switch(A.name){case"insertOne":return hm.buildInsertOneOperation(A,F,B);case"deleteOne":return hm.buildDeleteOneOperation(A,F);case"deleteMany":return hm.buildDeleteManyOperation(A,F);case"updateOne":return hm.buildUpdateOneOperation(A,F,$);case"updateMany":return hm.buildUpdateManyOperation(A,F,$);case"replaceOne":return hm.buildReplaceOneOperation(A,F)}}});var tm=C((sm)=>{Object.defineProperty(sm,"__esModule",{value:!0});sm.ClientBulkWriteResultsMerger=void 0;var qO1=kA(),HO1=X1(),UO1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class nm{static unacknowledged(){return UO1}constructor(A){if(this.options=A,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},A.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(A){let F;try{for await(let B of A)if(B.ok===1){if(this.options.verboseResults)this.processDocument(A,B)}else if(this.options.ordered){let $=new HO1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw $.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg}),$.partialResult=this.result,$}else this.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg})}catch(B){if(B instanceof qO1.MongoWriteConcernError){let $=B.result;if(F={insertedCount:$.nInserted,upsertedCount:$.nUpserted,matchedCount:$.nMatched,modifiedCount:$.nModified,deletedCount:$.nDeleted,writeConcernError:$.writeConcernError},this.options.verboseResults&&$.cursor.firstBatch){for(let Z of $.cursor.firstBatch)if(Z.ok===1)this.processDocument(A,Z)}}else throw B}finally{if(A.response){let B=A.response;this.incrementCounts(B)}this.currentBatchOffset+=A.operations.length}if(F){let B=F.writeConcernError;this.incrementCounts(F),this.writeConcernErrors.push({code:B.code,message:B.errmsg})}return this.result}processDocument(A,F){let B=A.operations[F.idx];if("insert"in B)this.result.insertResults?.set(F.idx+this.currentBatchOffset,{insertedId:B.document._id});if("update"in B){let $={matchedCount:F.n,modifiedCount:F.nModified??0,didUpsert:F.upserted!=null};if(F.upserted)$.upsertedId=F.upserted._id;this.result.updateResults?.set(F.idx+this.currentBatchOffset,$)}if("delete"in B)this.result.deleteResults?.set(F.idx+this.currentBatchOffset,{deletedCount:F.n})}incrementCounts(A){this.result.insertedCount+=A.insertedCount,this.result.upsertedCount+=A.upsertedCount,this.result.matchedCount+=A.matchedCount,this.result.modifiedCount+=A.modifiedCount,this.result.deletedCount+=A.deletedCount}}sm.ClientBulkWriteResultsMerger=nm});var Bc=C((Ac)=>{Object.defineProperty(Ac,"__esModule",{value:!0});Ac.ClientBulkWriteExecutor=void 0;var rm=A4(),CO1=xm(),_A=X1(),KO1=r6(),EO1=K1(),LO1=a6(),wO1=e6(),VO1=cE(),NO1=im(),om=tm();class em{constructor(A,F,B){if(F.length===0)throw new _A.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=A,this.operations=F,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...B},!this.options.writeConcern)this.options.writeConcern=LO1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new _A.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new _A.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let A=this.client.s.options.pkFactory,F=new NO1.ClientBulkWriteCommandBuilder(this.operations,this.options,A),B=EO1.resolveTimeoutOptions(this.client,this.options),$=KO1.TimeoutContext.create(B);if(this.options.writeConcern?.w===0){while(F.hasNextBatch()){let Z=new VO1.ClientBulkWriteOperation(F,this.options);await wO1.executeOperation(this.client,Z,$)}return om.ClientBulkWriteResultsMerger.unacknowledged()}else{let Z=new om.ClientBulkWriteResultsMerger(this.options);while(F.hasNextBatch()){let D=new rm.CursorTimeoutContext($,Symbol()),X={...this.options,timeoutContext:D,...B.timeoutMS!=null&&{timeoutMode:rm.CursorTimeoutMode.LIFETIME}},J=new CO1.ClientBulkWriteCursor(this.client,F,X);try{await Z.merge(J)}catch(Y){if(Y instanceof _A.MongoServerError&&!(Y instanceof _A.MongoClientBulkWriteError)){let W=new _A.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw W.cause=Y,W.partialResult=Z.bulkWriteResult,W}else throw Y}}if(Z.writeConcernErrors.length>0||Z.writeErrors.size>0){let D=new _A.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw D.writeConcernErrors=Z.writeConcernErrors,D.writeErrors=Z.writeErrors,D.partialResult=Z.bulkWriteResult,D}return Z.bulkWriteResult}}}Ac.ClientBulkWriteExecutor=em});var zc=C((Gc)=>{Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ServerCapabilities=Gc.Topology=void 0;var MO1=QE(),t4=l2(),V8=X1(),L2=Z5(),RO1=V9(),wD=E6(),tE=r6(),P4=K1(),s1=L9(),P5=SW(),$c=oK(),oE=AD(),rE=IZ(),j5=gE(),oW=vE(),Zc=NK(),PO1=0,VD=P4.makeStateMachine({[s1.STATE_CLOSED]:[s1.STATE_CLOSED,s1.STATE_CONNECTING],[s1.STATE_CONNECTING]:[s1.STATE_CONNECTING,s1.STATE_CLOSING,s1.STATE_CONNECTED,s1.STATE_CLOSED],[s1.STATE_CONNECTED]:[s1.STATE_CONNECTED,s1.STATE_CLOSING,s1.STATE_CLOSED],[s1.STATE_CLOSING]:[s1.STATE_CLOSING,s1.STATE_CLOSED]});class h0 extends RO1.TypedEventEmitter{constructor(A,F,B){super();if(this.on("error",P4.noop),this.client=A,B=B??{hosts:[P4.HostAddress.fromString("localhost:27017")],...Object.fromEntries(MO1.DEFAULT_OPTIONS.entries())},typeof F==="string")F=[P4.HostAddress.fromString(F)];else if(!Array.isArray(F))F=[F];let $=[];for(let Y of F)if(typeof Y==="string")$.push(P4.HostAddress.fromString(Y));else if(Y instanceof P4.HostAddress)$.push(Y);else throw new V8.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(Y)}`);let Z=jO1(B),D=PO1++,X=B.srvMaxHosts==null||B.srvMaxHosts===0||B.srvMaxHosts>=$.length?$:P4.shuffle($,B.srvMaxHosts),J=new Map;for(let Y of X)J.set(Y.toString(),new oE.ServerDescription(Y));if(this.waitQueue=new P4.List,this.s={id:D,options:B,seedlist:$,state:s1.STATE_CLOSED,description:new Zc.TopologyDescription(Z,J,B.replicaSet,void 0,void 0,void 0,B),serverSelectionTimeoutMS:B.serverSelectionTimeoutMS,heartbeatFrequencyMS:B.heartbeatFrequencyMS,minHeartbeatFrequencyMS:B.minHeartbeatFrequencyMS,servers:new Map,credentials:B?.credentials,clusterTime:void 0,detectShardedTopology:(Y)=>this.detectShardedTopology(Y),detectSrvRecords:(Y)=>this.detectSrvRecords(Y)},this.mongoLogger=A.mongoLogger,this.component="topology",B.srvHost&&!B.loadBalanced)this.s.srvPoller=B.srvPoller??new oW.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:B.srvHost,srvMaxHosts:B.srvMaxHosts,srvServiceName:B.srvServiceName}),this.on(h0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(A){let F=A.previousDescription.type,B=A.newDescription.type,$=F!==s1.TopologyType.Sharded&&B===s1.TopologyType.Sharded,D=!!this.s.srvPoller?.listeners(oW.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if($&&!D)this.s.srvPoller?.on(oW.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(A){let F=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(A,this.s.options.srvMaxHosts),this.s.description===F)return;Dc(this),this.emitAndLog(h0.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new eE(this.lastHello())}async connect(A){this.connectionLock??=this._connect(A);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(A){if(A=A??{},this.s.state===s1.STATE_CONNECTED)return this;VD(this,s1.STATE_CONNECTING),this.emitAndLog(h0.TOPOLOGY_OPENING,new P5.TopologyOpeningEvent(this.s.id)),this.emitAndLog(h0.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,new Zc.TopologyDescription(s1.TopologyType.Unknown),this.s.description));let F=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(F.map((X)=>[X.address,Yc(this,X)])),this.s.options.loadBalanced)for(let X of F){let J=new oE.ServerDescription(X.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(J)}let B=this.client.s.options.serverSelectionTimeoutMS,$=A.readPreference??wD.ReadPreference.primary,Z=tE.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),D={operationName:"ping",...A,timeoutContext:Z};try{let X=await this.selectServer(rE.readPreferenceServerSelector($),D);if(this.s.options.__skipPingOnConnect!==!0&&this.s.credentials)return await X.command(P4.ns("admin.$cmd"),{ping:1},{timeoutContext:Z}),VD(this,s1.STATE_CONNECTED),this.emit(h0.OPEN,this),this.emit(h0.CONNECT,this),this;return VD(this,s1.STATE_CONNECTED),this.emit(h0.OPEN,this),this.emit(h0.CONNECT,this),this}catch(X){throw this.close(),X}}closeCheckedOutConnections(){for(let A of this.s.servers.values())return A.closeCheckedOutConnections()}close(){if(this.s.state===s1.STATE_CLOSED||this.s.state===s1.STATE_CLOSING)return;for(let A of this.s.servers.values())Jc(A,this);if(this.s.servers.clear(),VD(this,s1.STATE_CLOSING),Wc(this.waitQueue,new V8.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(oW.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(h0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),VD(this,s1.STATE_CLOSED),this.emitAndLog(h0.TOPOLOGY_CLOSED,new P5.TopologyClosedEvent(this.s.id))}async selectServer(A,F){let B;if(typeof A!=="function")if(typeof A==="string")B=rE.readPreferenceServerSelector(wD.ReadPreference.fromString(A));else{let q;if(A instanceof wD.ReadPreference)q=A;else wD.ReadPreference.translate(F),q=F.readPreference||wD.ReadPreference.primary;B=rE.readPreferenceServerSelector(q)}else B=A;if(F={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...F},this.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionStartedEvent(A,this.description,F.operationName));let $;if(F.timeoutContext)$=F.timeoutContext.serverSelectionTimeout;else $=tE.Timeout.expires(F.serverSelectionTimeoutMS??0);let Z=this.description.type===s1.TopologyType.Sharded,D=F.session,X=D&&D.transaction;if(Z&&X&&X.server){if(this.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionSucceededEvent(A,this.description,X.server.pool.address,F.operationName));if(F.timeoutContext?.clearServerSelectionTimeout)$?.clear();return X.server}let{promise:J,resolve:Y,reject:W}=P4.promiseWithResolvers(),G={serverSelector:B,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:X,resolve:Y,reject:W,cancelled:!1,startTime:P4.now(),operationName:F.operationName,waitingLogged:!1,previousServer:F.previousServer},Q=P4.addAbortListener(F.signal,function(){G.cancelled=!0,W(this.reason)});this.waitQueue.push(G),Xc(this);try{$?.throwIfExpired();let q=await($?Promise.race([J,$]):J);if(F.timeoutContext?.csotEnabled()&&q.description.minRoundTripTime!==0)F.timeoutContext.minRoundTripTime=q.description.minRoundTripTime;return q}catch(q){if(tE.TimeoutError.is(q)){G.cancelled=!0;let z=new V8.MongoServerSelectionError(`Server selection timed out after ${$?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionFailedEvent(A,this.description,z,F.operationName));if(F.timeoutContext?.csotEnabled())throw new V8.MongoOperationTimeoutError("Timed out during server selection",{cause:z});throw z}throw q}finally{if(Q?.[P4.kDispose](),F.timeoutContext?.clearServerSelectionTimeout)$?.clear()}}serverUpdateHandler(A){if(!this.s.description.hasServer(A.address))return;if(IO1(this.s.description,A))return;let F=this.s.description,B=this.s.description.servers.get(A.address);if(!B)return;let $=A.$clusterTime;if($)s1._advanceClusterTime(this,$);let Z=B&&B.equals(A);if(this.s.description=this.s.description.update(A),this.s.description.compatibilityError){this.emit(h0.ERROR,new V8.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!Z){let D=this.s.description.servers.get(A.address);if(D)this.emit(h0.SERVER_DESCRIPTION_CHANGED,new P5.ServerDescriptionChangedEvent(this.s.id,A.address,B,D))}if(Dc(this,A),this.waitQueue.length>0)Xc(this);if(!Z)this.emitAndLog(h0.TOPOLOGY_DESCRIPTION_CHANGED,new P5.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}auth(A,F){if(typeof A==="function")F=A,A=void 0;if(typeof F==="function")F(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===s1.STATE_CONNECTED}isDestroyed(){return this.s.state===s1.STATE_CLOSED}lastHello(){let A=Array.from(this.description.servers.values());if(A.length===0)return{};return A.filter(($)=>$.type!==s1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(A){this.s.clusterTime=A}}Gc.Topology=h0;h0.SERVER_OPENING=t4.SERVER_OPENING;h0.SERVER_CLOSED=t4.SERVER_CLOSED;h0.SERVER_DESCRIPTION_CHANGED=t4.SERVER_DESCRIPTION_CHANGED;h0.TOPOLOGY_OPENING=t4.TOPOLOGY_OPENING;h0.TOPOLOGY_CLOSED=t4.TOPOLOGY_CLOSED;h0.TOPOLOGY_DESCRIPTION_CHANGED=t4.TOPOLOGY_DESCRIPTION_CHANGED;h0.ERROR=t4.ERROR;h0.OPEN=t4.OPEN;h0.CONNECT=t4.CONNECT;h0.CLOSE=t4.CLOSE;h0.TIMEOUT=t4.TIMEOUT;function Jc(A,F){for(let B of t4.LOCAL_SERVER_EVENTS)A.removeAllListeners(B);A.close(),F.emitAndLog(h0.SERVER_CLOSED,new P5.ServerClosedEvent(F.s.id,A.description.address));for(let B of t4.SERVER_RELAY_EVENTS)A.removeAllListeners(B)}function jO1(A){if(A?.directConnection)return s1.TopologyType.Single;if(A?.replicaSet)return s1.TopologyType.ReplicaSetNoPrimary;if(A?.loadBalanced)return s1.TopologyType.LoadBalanced;return s1.TopologyType.Unknown}function Yc(A,F){A.emitAndLog(h0.SERVER_OPENING,new P5.ServerOpeningEvent(A.s.id,F.address));let B=new $c.Server(A,F,A.s.options);for(let $ of t4.SERVER_RELAY_EVENTS)B.on($,(Z)=>A.emit($,Z));return B.on($c.Server.DESCRIPTION_RECEIVED,($)=>A.serverUpdateHandler($)),B.connect(),B}function Dc(A,F){if(F&&A.s.servers.has(F.address)){let B=A.s.servers.get(F.address);if(B){if(B.s.description=F,F.error instanceof V8.MongoError&&F.error.hasErrorLabel(V8.MongoErrorLabel.ResetPool)){let $=F.error.hasErrorLabel(V8.MongoErrorLabel.InterruptInUseConnections);B.pool.clear({interruptInUseConnections:$})}else if(F.error==null){let $=A.s.description.type;if(F.isDataBearing||F.type!==s1.ServerType.Unknown&&$===s1.TopologyType.Single)B.pool.ready()}}}for(let B of A.description.servers.values())if(!A.s.servers.has(B.address)){let $=Yc(A,B);A.s.servers.set(B.address,$)}for(let B of A.s.servers){let $=B[0];if(A.description.hasServer($))continue;if(!A.s.servers.has($))continue;let Z=A.s.servers.get($);if(A.s.servers.delete($),Z)Jc(Z,A)}}function Wc(A,F){while(A.length){let B=A.shift();if(!B)continue;if(!B.cancelled){if(B.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))B.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionFailedEvent(B.serverSelector,B.topologyDescription,F,B.operationName));B.reject(F)}}}function Xc(A){if(A.s.state===s1.STATE_CLOSED){Wc(A.waitQueue,new V8.MongoTopologyClosedError);return}let F=A.description.type===s1.TopologyType.Sharded,B=Array.from(A.description.servers.values()),$=A.waitQueue.length;for(let Z=0;Z<$;++Z){let D=A.waitQueue.shift();if(!D)continue;if(D.cancelled)continue;let X;try{let{serverSelector:W,previousServer:G}=D;X=W?W(A.description,B,G?[G]:[]):B}catch(W){if(A.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionFailedEvent(D.serverSelector,A.description,W,D.operationName));D.reject(W);continue}let J;if(X.length===0){if(!D.waitingLogged){if(A.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.INFORMATIONAL))A.client.mongoLogger?.info(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.WaitingForSuitableServerEvent(D.serverSelector,A.description,A.s.serverSelectionTimeoutMS!==0?A.s.serverSelectionTimeoutMS-(P4.now()-D.startTime):-1,D.operationName));D.waitingLogged=!0}A.waitQueue.push(D);continue}else if(X.length===1)J=A.s.servers.get(X[0].address);else{let W=P4.shuffle(X,2),G=A.s.servers.get(W[0].address),Q=A.s.servers.get(W[1].address);J=G&&Q&&G.s.operationCount<Q.s.operationCount?G:Q}if(!J){let W=new V8.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",A.description);if(A.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionFailedEvent(D.serverSelector,A.description,W,D.operationName));D.reject(W);return}let Y=D.transaction;if(F&&Y&&Y.isActive&&J)Y.pinServer(J);if(A.client.mongoLogger?.willLog(L2.MongoLoggableComponent.SERVER_SELECTION,L2.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(L2.MongoLoggableComponent.SERVER_SELECTION,new j5.ServerSelectionSucceededEvent(D.serverSelector,D.topologyDescription,J.pool.address,D.operationName));D.resolve(J)}if(A.waitQueue.length>0)for(let[,Z]of A.s.servers)process.nextTick(function D(){return Z.requestCheck()})}function IO1(A,F){let $=A.servers.get(F.address)?.topologyVersion;return oE.compareTopologyVersion($,F.topologyVersion)>0}class eE{constructor(A){this.minWireVersion=A.minWireVersion||0,this.maxWireVersion=A.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}}Gc.ServerCapabilities=eE});var Y5=C((Lc)=>{Object.defineProperty(Lc,"__esModule",{value:!0});Lc.MongoClient=Lc.ServerApiVersion=void 0;var AL=A1("fs"),OO1=C0(),SO1=VA(),kO1=iY(),_O1=U8(),qc=sY(),Hc=QE(),xO1=l2(),bO1=dY(),FL=X1(),fO1=SE(),Uc=Z5(),gO1=V9(),uO1=Bc(),yO1=e6(),vO1=BB(),Cc=E6(),hO1=DB(),dO1=IZ(),Kc=zc(),Ec=VB(),V6=K1();Lc.ServerApiVersion=Object.freeze({v1:"1"});class BL extends gO1.TypedEventEmitter{constructor(A,F){super();this.on("error",V6.noop),this.options=Hc.parseOptions(A,this,F);let B=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((Z)=>Z!==Uc.SeverityLevel.OFF);this.mongoLogger=B?new Uc.MongoLogger(this.options.mongoLoggerOptions):void 0;let $=this;this.s={url:A,bsonOptions:OO1.resolveBSONOptions(this.options),namespace:V6.ns("admin"),hasBeenClosed:!1,sessionPool:new Ec.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new fO1.MongoClientAuthProviders,get options(){return $.options},get readConcern(){return $.options.readConcern},get writeConcern(){return $.options.writeConcern},get readPreference(){return $.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(A){this.options.additionalDriverInfo.push(A),this.options.metadata=qc.makeClientMetadata(this.options),this.options.extendedMetadata=qc.addContainerMetadata(this.options.metadata).then(void 0,V6.squashError).then((F)=>F??{})}checkForNonGenuineHosts(){let A=this.options.hosts.filter((Z)=>V6.isHostMatch(V6.DOCUMENT_DB_CHECK,Z.host)),F=V6.isHostMatch(V6.DOCUMENT_DB_CHECK,this.options.srvHost),B=this.options.hosts.filter((Z)=>V6.isHostMatch(V6.COSMOS_DB_CHECK,Z.host)),$=V6.isHostMatch(V6.COSMOS_DB_CHECK,this.options.srvHost);if(A.length!==0||F)this.mongoLogger?.info("client",V6.DOCUMENT_DB_MSG);else if(B.length!==0||$)this.mongoLogger?.info("client",V6.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(A){this.options.monitorCommands=A}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(A,F){if(this.autoEncrypter)throw new FL.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new uO1.ClientBulkWriteExecutor(this,A,V6.resolveOptions(this,F)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let A=this.options;if(A.tls){if(typeof A.tlsCAFile==="string")A.ca??=await AL.promises.readFile(A.tlsCAFile);if(typeof A.tlsCRLFile==="string")A.crl??=await AL.promises.readFile(A.tlsCRLFile);if(typeof A.tlsCertificateKeyFile==="string"){if(!A.key||!A.cert){let B=await AL.promises.readFile(A.tlsCertificateKeyFile);A.key??=B,A.cert??=B}}}if(typeof A.srvHost==="string"){let B=await Hc.resolveSRVRecord(A);for(let[$,Z]of B.entries())A.hosts[$]=Z}if(A.credentials?.mechanism===_O1.AuthMechanism.MONGODB_OIDC){let B=A.credentials?.mechanismProperties?.ALLOWED_HOSTS||kO1.DEFAULT_ALLOWED_HOSTS;if(!A.credentials?.mechanismProperties?.ENVIRONMENT){for(let Z of A.hosts)if(!V6.hostMatchesWildcards(Z.toHostPort().host,B))throw new FL.MongoInvalidArgumentError(`Host '${Z}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${B.join(",")}'`)}}this.topology=new Kc.Topology(this,A.hosts,A),this.topology.once(Kc.Topology.OPEN,()=>this.emit("open",this));for(let B of xO1.MONGO_CLIENT_EVENTS)this.topology.on(B,(...$)=>this.emit(B,...$));let F=async()=>{try{await this.topology?.connect(A)}catch(B){throw this.topology?.close(),B}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await F(),await A.encrypter.connectInternalClient();else await F();return this}async close(A=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let A=Array.from(this.s.activeCursors,(Y)=>Y.close());this.s.activeCursors.clear(),await Promise.all(A);let F=Array.from(this.s.activeSessions,(Y)=>Y.endSession());if(this.s.activeSessions.clear(),await Promise.all(F),this.topology==null)return;let B=dO1.readPreferenceServerSelector(Cc.ReadPreference.primaryPreferred),$=this.topology.description,Z=Array.from($.servers.values());if(B($,Z).length!==0){let Y=Array.from(this.s.sessionPool.sessions,({id:W})=>W);if(Y.length!==0)try{await yO1.executeOperation(this,new vO1.RunAdminCommandOperation({endSessions:Y},{readPreference:Cc.ReadPreference.primaryPreferred,noResponse:!0}))}catch(W){V6.squashError(W)}}let X=this.topology;this.topology=void 0,X.close();let{encrypter:J}=this.options;if(J)await J.close(this)}db(A,F){if(F=F??{},!A)A=this.s.options.dbName;let B=Object.assign({},this.options,F);return new bO1.Db(this,A,B)}static async connect(A,F){return await new this(A,F).connect()}startSession(A){let F=new Ec.ClientSession(this,this.s.sessionPool,{explicit:!0,...A},this.options);return this.s.activeSessions.add(F),F.once("ended",()=>{this.s.activeSessions.delete(F)}),F}async withSession(A,F){let B={owner:Symbol(),...typeof A==="object"?A:{}},$=typeof A==="function"?A:F;if($==null)throw new FL.MongoInvalidArgumentError("Missing required callback parameter");let Z=this.startSession(B);try{return await $(Z)}finally{try{await Z.endSession()}catch(D){V6.squashError(D)}}}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new SO1.ChangeStream(this,A,V6.resolveOptions(this,F))}}Lc.MongoClient=BL;hO1.configureResourceManagement(BL.prototype)});var DB=C((Vc)=>{Object.defineProperty(Vc,"__esModule",{value:!0});Vc.configureResourceManagement=ND;Vc.configureExplicitResourceManagement=cO1;function ND(A){Symbol.asyncDispose&&Object.defineProperty(A,Symbol.asyncDispose,{value:async function F(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function cO1(){let{MongoClient:A}=Y5(),{ClientSession:F}=VB(),{AbstractCursor:B}=A4(),{ChangeStream:$}=VA();ND(A.prototype),ND(F.prototype),ND(B.prototype),ND($.prototype)}});var A4=C((Ic)=>{Object.defineProperty(Ic,"__esModule",{value:!0});Ic.CursorTimeoutContext=Ic.AbstractCursor=Ic.CursorTimeoutMode=Ic.CURSOR_FLAGS=void 0;var Pc=A1("stream"),fB=C0(),Q6=X1(),iO1=V9(),Nc=e6(),nO1=LU(),sO1=z_(),Mc=i9(),eW=E6(),aO1=DB(),tO1=VB(),$L=r6(),I9=K1();Ic.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function Rc(){this.client.s.activeCursors.delete(this)}Ic.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class AG extends iO1.TypedEventEmitter{constructor(A,F,B={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",I9.noop),!A.s.isMongoClient)throw new Q6.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=A,this.cursorNamespace=F,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:B.readPreference&&B.readPreference instanceof eW.ReadPreference?B.readPreference:eW.ReadPreference.primary,...fB.pluckBSONSerializeOptions(B),timeoutMS:B?.timeoutContext?.csotEnabled()?B.timeoutContext.timeoutMS:B.timeoutMS,tailable:B.tailable,awaitData:B.awaitData},this.cursorOptions.timeoutMS!=null)if(B.timeoutMode==null)if(B.tailable){if(B.awaitData){if(B.maxAwaitTimeMS!=null&&B.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new Q6.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=Ic.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Ic.CursorTimeoutMode.LIFETIME;else{if(B.tailable&&B.timeoutMode===Ic.CursorTimeoutMode.LIFETIME)throw new Q6.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=B.timeoutMode}else if(B.timeoutMode!=null)throw new Q6.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let $=Mc.ReadConcern.fromOptions(B);if($)this.cursorOptions.readConcern=$;if(typeof B.batchSize==="number")this.cursorOptions.batchSize=B.batchSize;if(B.comment!==void 0)this.cursorOptions.comment=B.comment;if(typeof B.maxTimeMS==="number")this.cursorOptions.maxTimeMS=B.maxTimeMS;if(typeof B.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=B.maxAwaitTimeMS;this.cursorSession=B.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:B?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=B.timeoutContext,this.signal=B.signal,this.abortListener=I9.addAbortListener(this.signal,()=>void this.close().then(void 0,I9.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(A){this.cursorSession=A}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(Rc))this.once("close",Rc)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(A){let F=[],B=Math.min(A??this.documents?.length??0,this.documents?.length??0);for(let $=0;$<B;$++){let Z=this.documents?.shift(this.deserializationOptions);if(Z!=null)F.push(Z)}return F}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let A=await this.next();if(A===null)return;yield A,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(A){I9.squashError(A)}}}stream(A){let F=new jc(this),B=I9.addAbortListener(this.signal,function(){F.destroy(this.reason)});if(F.once("end",()=>{B?.[I9.kDispose]()}),A?.transform){let $=A.transform,Z=F.pipe(new Pc.Transform({objectMode:!0,highWaterMark:1,transform(D,X,J){try{let Y=$(D);J(void 0,Y)}catch(Y){J(Y)}}}));return F.on("error",(D)=>Z.emit("error",D)),Z}return F}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===fB.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===fB.Long.ZERO)throw new Q6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let A=this.documents?.shift(this.deserializationOptions);if(A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===fB.Long.ZERO)throw new Q6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let A=this.documents?.shift(this.deserializationOptions);if(A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}if(await this.fetchBatch(),A=this.documents?.shift(this.deserializationOptions),A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}}finally{if(this.cursorOptions.timeoutMode===Ic.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(A){if(this.signal?.throwIfAborted(),typeof A!=="function")throw new Q6.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let F of this)if(A(F)===!1)break}async close(A){await this.cleanup(A?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let A=[];for await(let F of this){A.push(F);let B=this.readBufferedDocuments();if(this.transform!=null)for(let $ of B)A.push(await this.transformDocument($));else A.push(...B)}return A}addCursorFlag(A,F){if(this.throwIfInitialized(),!Ic.CURSOR_FLAGS.includes(A))throw new Q6.MongoInvalidArgumentError(`Flag ${A} is not one of ${Ic.CURSOR_FLAGS}`);if(typeof F!=="boolean")throw new Q6.MongoInvalidArgumentError(`Flag ${A} must be a boolean value`);return this.cursorOptions[A]=F,this}map(A){this.throwIfInitialized();let F=this.transform;if(F)this.transform=(B)=>{return A(F(B))};else this.transform=A;return this}withReadPreference(A){if(this.throwIfInitialized(),A instanceof eW.ReadPreference)this.cursorOptions.readPreference=A;else if(typeof A==="string")this.cursorOptions.readPreference=eW.ReadPreference.fromString(A);else throw new Q6.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return this}withReadConcern(A){this.throwIfInitialized();let F=Mc.ReadConcern.fromOptions({readConcern:A});if(F)this.cursorOptions.readConcern=F;return this}maxTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new Q6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=A,this}batchSize(A){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new Q6.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof A!=="number")throw new Q6.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=A,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new Q6.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,I9.squashError);this.cursorSession=null}}async getMore(A){if(this.cursorId==null)throw new Q6.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new Q6.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new Q6.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F={...this.cursorOptions,session:this.cursorSession,batchSize:A},B=new nO1.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,F);return await Nc.executeOperation(this.cursorClient,B,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new MD($L.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let A=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let F=A.response;this.selectedServer=A.server,this.cursorId=F.id,this.cursorNamespace=F.ns??this.namespace,this.documents=F,this.initialized=!0}catch(A){throw this.initialized=!0,await this.cleanup(void 0,A),A}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}let A=this.cursorOptions.batchSize||1000;try{let F=await this.getMore(A);this.cursorId=F.id,this.documents=F}catch(F){try{await this.cleanup(void 0,F)}catch(B){I9.squashError(B)}throw F}if(this.isDead)await this.cleanup()}async cleanup(A,F){this.abortListener?.[I9.kDispose](),this.isClosed=!0;let B=()=>{if(A!=null)return this.timeoutContext?.clear(),new MD($L.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:A}),this);else return this.timeoutContext?.refreshed()};await(async(D)=>{try{await D()}finally{this.emitClose()}})(async()=>{let D=this.cursorSession;if(!D)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!D.hasEnded){this.isKilled=!0;let X=this.cursorId;this.cursorId=fB.Long.ZERO,await Nc.executeOperation(this.cursorClient,new sO1.KillCursorsOperation(X,this.cursorNamespace,this.selectedServer,{session:D}),B())}}catch(X){I9.squashError(X)}finally{if(D.owner===this)await D.endSession({error:F});if(!D.inTransaction())tO1.maybeClearPinnedConnection(D,{error:F})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(A){if(this.transform==null)return A;try{let F=this.transform(A);if(F===null)throw new Q6.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return F}catch(F){try{await this.close()}catch(B){I9.squashError(B)}throw F}}throwIfInitialized(){if(this.initialized)throw new Q6.MongoCursorInUseError}}Ic.AbstractCursor=AG;AG.CLOSE="close";class jc extends Pc.Readable{constructor(A){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=A}_read(A){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(A,F){this._cursor.close().then(()=>F(A),(B)=>F(B))}_readNext(){if(this._cursor.id===fB.Long.ZERO){this.push(null);return}this._cursor.next().then((A)=>{if(A==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,I9.squashError);else{if(this.push(A))return this._readNext();this._readInProgress=!1}},(A)=>{if(A.message.match(/server is closed/))return this._cursor.close().then(void 0,I9.squashError),this.push(null);if(A.message.match(/operation was interrupted/))return this.push(null);return this.destroy(A)}).catch((A)=>{this._readInProgress=!1,this.destroy(A)})}}aO1.configureResourceManagement(AG.prototype);class MD extends $L.TimeoutContext{constructor(A,F){super();this.timeoutContext=A,this.owner=F}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new MD(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(A,F){this.timeoutContext.addMaxTimeMSToCommand(A,F)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}Ic.CursorTimeoutContext=MD});var LA=C((Sc)=>{Object.defineProperty(Sc,"__esModule",{value:!0});Sc.ExplainableCursor=Sc.Explain=Sc.ExplainVerbosity=void 0;Sc.validateExplainTimeoutOptions=AS1;Sc.decorateWithExplain=FS1;var oO1=A4(),eO1=X1();Sc.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class FG{constructor(A,F){if(typeof A==="boolean")this.verbosity=A?Sc.ExplainVerbosity.allPlansExecution:Sc.ExplainVerbosity.queryPlanner;else this.verbosity=A;this.maxTimeMS=F}static fromOptions({explain:A}={}){if(A==null)return;if(typeof A==="boolean"||typeof A==="string")return new FG(A);let{verbosity:F,maxTimeMS:B}=A;return new FG(F,B)}}Sc.Explain=FG;function AS1(A,F){let{maxTimeMS:B,timeoutMS:$}=A;if($!=null&&(B!=null||F?.maxTimeMS!=null))throw new eO1.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function FS1(A,F){let{verbosity:B,maxTimeMS:$}=F,Z={explain:A,verbosity:B};if(typeof $==="number")Z.maxTimeMS=$;return Z}class Oc extends oO1.AbstractCursor{resolveExplainTimeoutOptions(A,F){let B,$;if(A==null&&F==null)B=void 0,$=void 0;else if(A!=null&&F==null)B=typeof A!=="object"?A:("verbosity"in A)?A:void 0,$=typeof A==="object"&&"timeoutMS"in A?A:void 0;else B=A,$=F;return{timeout:$,explain:B}}}Sc.ExplainableCursor=Oc});var _2=C((bc)=>{Object.defineProperty(bc,"__esModule",{value:!0});bc.CommandOperation=void 0;var DS1=X1(),XL=LA(),XS1=i9(),JS1=IZ(),BG=K1(),_c=a6(),gB=P0();class xc extends gB.AbstractOperation{constructor(A,F){super(F);this.options=F??{};let B=F?.dbName||F?.authdb;if(B)this.ns=new BG.MongoDBNamespace(B,"$cmd");else this.ns=A?A.s.namespace.withCollection("$cmd"):new BG.MongoDBNamespace("admin","$cmd");if(this.readConcern=XS1.ReadConcern.fromOptions(F),this.writeConcern=_c.WriteConcern.fromOptions(F),this.hasAspect(gB.Aspect.EXPLAINABLE)){if(this.explain=XL.Explain.fromOptions(F),this.explain)XL.validateExplainTimeoutOptions(this.options,this.explain)}else if(F?.explain!=null)throw new DS1.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(gB.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}async executeCommand(A,F,B,$,Z){this.server=A;let D={...this.options,...this.bsonOptions,timeoutContext:$,readPreference:this.readPreference,session:F},X=BG.maxWireVersion(A),J=this.session&&this.session.inTransaction();if(this.readConcern&&BG.commandSupportsReadConcern(B)&&!J)Object.assign(B,{readConcern:this.readConcern});if(this.trySecondaryWrite&&X<JS1.MIN_SECONDARY_WRITE_WIRE_VERSION)D.omitReadPreference=!0;if(this.writeConcern&&this.hasAspect(gB.Aspect.WRITE_OPERATION)&&!J)_c.WriteConcern.apply(B,this.writeConcern);if(D.collation&&typeof D.collation==="object"&&!this.hasAspect(gB.Aspect.SKIP_COLLATION))Object.assign(B,{collation:D.collation});if(typeof D.maxTimeMS==="number")B.maxTimeMS=D.maxTimeMS;if(this.hasAspect(gB.Aspect.EXPLAINABLE)&&this.explain)B=XL.decorateWithExplain(B,this.explain);return await A.command(this.ns,B,D,Z)}}bc.CommandOperation=xc});var qC=C((gc)=>{Object.defineProperty(gc,"__esModule",{value:!0});gc.DeleteManyOperation=gc.DeleteOneOperation=gc.DeleteOperation=void 0;gc.makeDeleteStatement=WL;var RD=X1(),YS1=_2(),F7=P0();class PD extends YS1.CommandOperation{constructor(A,F,B){super(void 0,B);this.options=B,this.ns=A,this.statements=F}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((A)=>A.limit!=null?A.limit>0:!0)}async execute(A,F,B){let $=this.options??{},Z=typeof $.ordered==="boolean"?$.ordered:!0,D={delete:this.ns.collection,deletes:this.statements,ordered:Z};if($.let)D.let=$.let;if($.comment!==void 0)D.comment=$.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((Y)=>Y.hint))throw new RD.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(A,F,D,B)}}gc.DeleteOperation=PD;class JL extends PD{constructor(A,F,B){super(A.s.namespace,[WL(F,{...B,limit:1})],B)}async execute(A,F,B){let $=await super.execute(A,F,B);if(this.explain)return $;if($.code)throw new RD.MongoServerError($);if($.writeErrors)throw new RD.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:$.n}}}gc.DeleteOneOperation=JL;class YL extends PD{constructor(A,F,B){super(A.s.namespace,[WL(F,B)],B)}async execute(A,F,B){let $=await super.execute(A,F,B);if(this.explain)return $;if($.code)throw new RD.MongoServerError($);if($.writeErrors)throw new RD.MongoServerError($.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:$.n}}}gc.DeleteManyOperation=YL;function WL(A,F){let B={q:A,limit:typeof F.limit==="number"?F.limit:0};if(F.collation)B.collation=F.collation;if(F.hint)B.hint=F.hint;return B}F7.defineAspects(PD,[F7.Aspect.RETRYABLE,F7.Aspect.WRITE_OPERATION]);F7.defineAspects(JL,[F7.Aspect.RETRYABLE,F7.Aspect.WRITE_OPERATION,F7.Aspect.EXPLAINABLE,F7.Aspect.SKIP_COLLATION]);F7.defineAspects(YL,[F7.Aspect.WRITE_OPERATION,F7.Aspect.EXPLAINABLE,F7.Aspect.SKIP_COLLATION])});var rF=C((lc)=>{Object.defineProperty(lc,"__esModule",{value:!0});lc.BulkOperationBase=lc.BulkWriteShimOperation=lc.FindOperators=lc.MongoBulkWriteError=lc.WriteError=lc.WriteConcernError=lc.BulkWriteResult=lc.Batch=lc.BatchType=void 0;lc.mergeBatchResults=GL;var vc=C0(),z6=X1(),ID=qC(),hc=e6(),zS1=FC(),qS1=P0(),xA=YC(),N8=K1(),yc=a6();lc.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class dc{constructor(A,F){this.originalZeroIndex=F,this.currentIndex=0,this.originalIndexes=[],this.batchType=A,this.operations=[],this.size=0,this.sizeBytes=0}}lc.Batch=dc;class H3{static generateIdMap(A){let F={};for(let B of A)F[B.index]=B._id;return F}constructor(A,F){this.result=A,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=H3.generateIdMap(this.result.upserted),this.insertedIds=H3.generateIdMap(this.getSuccessfullyInsertedIds(A,F)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(A,F){if(A.writeErrors.length===0)return A.insertedIds;if(F)return A.insertedIds.slice(0,A.writeErrors[0].index);return A.insertedIds.filter(({index:B})=>!A.writeErrors.some(($)=>B===$.index))}getUpsertedIdAt(A){return this.result.upserted[A]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(A){return A<this.result.writeErrors.length?this.result.writeErrors[A]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let A="";for(let F=0;F<this.result.writeConcernErrors.length;F++){let B=this.result.writeConcernErrors[F];if(A=A+B.errmsg,F===0)A=A+" and "}return new TD({errmsg:A,code:z6.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${vc.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}lc.BulkWriteResult=H3;class TD{constructor(A){this.serverError=A}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}lc.WriteConcernError=TD;class $G{constructor(A){this.err=A}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}lc.WriteError=$G;function GL(A,F,B,$){if(B)$=B;else if($&&$.result)$=$.result;if($==null)return;if($.ok===0&&F.ok===1){F.ok=0;let D={index:0,code:$.code||0,errmsg:$.message,errInfo:$.errInfo,op:A.operations[0]};F.writeErrors.push(new $G(D));return}else if($.ok===0&&F.ok===0)return;if(cc(A)&&$.n)F.nInserted=F.nInserted+$.n;if(zL(A)&&$.n)F.nRemoved=F.nRemoved+$.n;let Z=0;if(Array.isArray($.upserted)){Z=$.upserted.length;for(let D=0;D<$.upserted.length;D++)F.upserted.push({index:$.upserted[D].index+A.originalZeroIndex,_id:$.upserted[D]._id})}else if($.upserted)Z=1,F.upserted.push({index:A.originalZeroIndex,_id:$.upserted});if(QL(A)&&$.n){let D=$.nModified;if(F.nUpserted=F.nUpserted+Z,F.nMatched=F.nMatched+($.n-Z),typeof D==="number")F.nModified=F.nModified+D;else F.nModified=0}if(Array.isArray($.writeErrors))for(let D=0;D<$.writeErrors.length;D++){let X={index:A.originalIndexes[$.writeErrors[D].index],code:$.writeErrors[D].code,errmsg:$.writeErrors[D].errmsg,errInfo:$.writeErrors[D].errInfo,op:A.operations[$.writeErrors[D].index]};F.writeErrors.push(new $G(X))}if($.writeConcernError)F.writeConcernErrors.push(new TD($.writeConcernError))}async function HS1(A,F){if(A.s.batches.length===0)return new H3(A.s.bulkResult,A.isOrdered);for(let $ of A.s.batches){let Z=N8.resolveOptions(A,{...F,ordered:A.isOrdered});if(Z.bypassDocumentValidation!==!0)delete Z.bypassDocumentValidation;if(A.s.bypassDocumentValidation===!0)Z.bypassDocumentValidation=!0;if(A.s.checkKeys===!1)Z.checkKeys=!1;if(Z.retryWrites){if(QL($))Z.retryWrites=Z.retryWrites&&!$.operations.some((W)=>W.multi);if(zL($))Z.retryWrites=Z.retryWrites&&!$.operations.some((W)=>W.limit===0)}let D=cc($)?new zS1.InsertOperation(A.s.namespace,$.operations,Z):QL($)?new xA.UpdateOperation(A.s.namespace,$.operations,Z):zL($)?new ID.DeleteOperation(A.s.namespace,$.operations,Z):null;if(D==null)throw new z6.MongoRuntimeError(`Unknown batchType: ${$.batchType}`);let X=null,J;try{J=await hc.executeOperation(A.s.collection.client,D,Z.timeoutContext)}catch(W){X=W}if(X!=null)if(X instanceof z6.MongoWriteConcernError){GL($,A.s.bulkResult,X,J);let W=new H3(A.s.bulkResult,A.isOrdered);throw new uB({message:X.result.writeConcernError.errmsg,code:X.result.writeConcernError.code},W)}else throw new uB(X,new H3(A.s.bulkResult,A.isOrdered));GL($,A.s.bulkResult,X,J);let Y=new H3(A.s.bulkResult,A.isOrdered);A.handleWriteError(Y)}A.s.batches.length=0;let B=new H3(A.s.bulkResult,A.isOrdered);return A.handleWriteError(B),B}class uB extends z6.MongoServerError{constructor(A,F){super(A);if(this.writeErrors=[],A instanceof TD)this.err=A;else if(!(A instanceof Error))this.message=A.message,this.code=A.code,this.writeErrors=A.writeErrors??[];this.result=F,Object.assign(this,A)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}lc.MongoBulkWriteError=uB;class qL{constructor(A){this.bulkOperation=A}update(A){let F=jD(this.bulkOperation);return this.bulkOperation.addToOperationsList(lc.BatchType.UPDATE,xA.makeUpdateStatement(F.selector,A,{...F,multi:!0}))}updateOne(A){if(!N8.hasAtomicOperators(A,this.bulkOperation.bsonOptions))throw new z6.MongoInvalidArgumentError("Update document requires atomic operators");let F=jD(this.bulkOperation);return this.bulkOperation.addToOperationsList(lc.BatchType.UPDATE,xA.makeUpdateStatement(F.selector,A,{...F,multi:!1}))}replaceOne(A){if(N8.hasAtomicOperators(A))throw new z6.MongoInvalidArgumentError("Replacement document must not use atomic operators");let F=jD(this.bulkOperation);return this.bulkOperation.addToOperationsList(lc.BatchType.UPDATE,xA.makeUpdateStatement(F.selector,A,{...F,multi:!1}))}deleteOne(){let A=jD(this.bulkOperation);return this.bulkOperation.addToOperationsList(lc.BatchType.DELETE,ID.makeDeleteStatement(A.selector,{...A,limit:1}))}delete(){let A=jD(this.bulkOperation);return this.bulkOperation.addToOperationsList(lc.BatchType.DELETE,ID.makeDeleteStatement(A.selector,{...A,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=A,this}arrayFilters(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=A,this}hint(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=A,this}}lc.FindOperators=qL;class HL extends qS1.AbstractOperation{constructor(A,F){super(F);this.bulkOperation=A}get commandName(){return"bulkWrite"}async execute(A,F,B){if(this.options.session==null)this.options.session=F;return await HS1(this.bulkOperation,{...this.options,timeoutContext:B})}}lc.BulkWriteShimOperation=HL;class mc{constructor(A,F,B){this.collection=A,this.isOrdered=B;let $=N8.getTopology(A);F=F==null?{}:F;let Z=A.s.namespace,D=!1,X=void 0,J=$.lastHello(),Y=!!($.s.options&&$.s.options.autoEncrypter),W=J&&J.maxBsonObjectSize?J.maxBsonObjectSize:16777216,G=Y?2097152:W,Q=J&&J.maxWriteBatchSize?J.maxWriteBatchSize:1000,q=(Q-1).toString(10).length+2,z=Object.assign({},F);z=N8.applyRetryableWrites(z,A.s.db);let H={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:H,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:yc.WriteConcern.fromOptions(F),maxBsonObjectSize:W,maxBatchSizeBytes:G,maxWriteBatchSize:Q,maxKeySize:q,namespace:Z,topology:$,options:z,bsonOptions:vc.resolveBSONOptions(F),currentOp:X,executed:D,collection:A,err:void 0,checkKeys:typeof F.checkKeys==="boolean"?F.checkKeys:!1},F.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(A){return N8.maybeAddIdToDocuments(this.collection,A,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(lc.BatchType.INSERT,A)}find(A){if(!A)throw new z6.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:A},new qL(this)}raw(A){if(A==null||typeof A!=="object")throw new z6.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in A){let F=this.shouldForceServerObjectId(),B=A.insertOne&&A.insertOne.document==null?A.insertOne:A.insertOne.document;return N8.maybeAddIdToDocuments(this.collection,B,{forceServerObjectId:F}),this.addToOperationsList(lc.BatchType.INSERT,B)}if("replaceOne"in A||"updateOne"in A||"updateMany"in A){if("replaceOne"in A){if("q"in A.replaceOne)throw new z6.MongoInvalidArgumentError("Raw operations are not allowed");let F=xA.makeUpdateStatement(A.replaceOne.filter,A.replaceOne.replacement,{...A.replaceOne,multi:!1});if(N8.hasAtomicOperators(F.u))throw new z6.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(lc.BatchType.UPDATE,F)}if("updateOne"in A){if("q"in A.updateOne)throw new z6.MongoInvalidArgumentError("Raw operations are not allowed");let F=xA.makeUpdateStatement(A.updateOne.filter,A.updateOne.update,{...A.updateOne,multi:!1});if(!N8.hasAtomicOperators(F.u,this.bsonOptions))throw new z6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(lc.BatchType.UPDATE,F)}if("updateMany"in A){if("q"in A.updateMany)throw new z6.MongoInvalidArgumentError("Raw operations are not allowed");let F=xA.makeUpdateStatement(A.updateMany.filter,A.updateMany.update,{...A.updateMany,multi:!0});if(!N8.hasAtomicOperators(F.u,this.bsonOptions))throw new z6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(lc.BatchType.UPDATE,F)}}if("deleteOne"in A){if("q"in A.deleteOne)throw new z6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(lc.BatchType.DELETE,ID.makeDeleteStatement(A.deleteOne.filter,{...A.deleteOne,limit:1}))}if("deleteMany"in A){if("q"in A.deleteMany)throw new z6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(lc.BatchType.DELETE,ID.makeDeleteStatement(A.deleteMany.filter,{...A.deleteMany,limit:0}))}throw new z6.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let A=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)A.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)A.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)A.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)A.push(this.s.currentRemoveBatch)}return A}async execute(A={}){if(this.s.executed)throw new z6.MongoBatchReExecutionError;let F=yc.WriteConcern.fromOptions(A);if(F)this.s.writeConcern=F;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new z6.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let B={...this.s.options,...A},$=new HL(this,B);return await hc.executeOperation(this.s.collection.client,$,B.timeoutContext)}handleWriteError(A){if(this.s.bulkResult.writeErrors.length>0){let B=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new uB({message:B,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},A)}let F=A.getWriteConcernError();if(F)throw new uB(F,A)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.s.db.options?.forceServerObjectId===!0}}lc.BulkOperationBase=mc;function cc(A){return A.batchType===lc.BatchType.INSERT}function QL(A){return A.batchType===lc.BatchType.UPDATE}function zL(A){return A.batchType===lc.BatchType.DELETE}function jD(A){let{currentOp:F}=A.s;if(A.s.currentOp=void 0,!F)F={};return F}});var nc=C((cY0,ic)=>{var MS1=rF().BulkWriteResult;ic.exports=MS1});var OD=C((sc,ac)=>{/*!
 * Connection states
 */var j4=ac.exports=sc=Object.create(null);j4[0]="disconnected";j4[1]="connected";j4[2]="connecting";j4[3]="disconnecting";j4[99]="uninitialized";j4.disconnected=0;j4.connected=1;j4.connecting=2;j4.disconnecting=3;j4.uninitialized=99});var B7=C((lY0,tc)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var RS1=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(A)=>setTimeout(A,0);tc.exports=function A(F){return RS1(F)}});var UL=C((pY0,oc)=>{/*!
 * Module dependencies.
 */var PS1=A1("events").EventEmitter,jS1=OD(),rc=B7();function f0(A,F,B){if(B===void 0)B={};if(this.opts=B,this.name=A,this.collectionName=A,this.conn=F,this.queue=[],this.buffer=!F?._hasOpened,this.emitter=new PS1,jS1.connected===this.conn.readyState)this.onOpen()}f0.prototype.name;f0.prototype.collectionName;f0.prototype.conn;f0.prototype.onOpen=function(){this.buffer=!1,rc(()=>this.doQueue())};f0.prototype.onClose=function(){};f0.prototype.addQueue=function(A,F){return this.queue.push([A,F]),this};f0.prototype.removeQueue=function(A,F){let B=this.queue.findIndex(($)=>$[0]===A&&$[1]===F);if(B===-1)return!1;return this.queue.splice(B,1),!0};f0.prototype.doQueue=function(){for(let F of this.queue)if(typeof F[0]==="function")F[0].apply(this,F[1]);else this[F[0]].apply(this,F[1]);this.queue=[];let A=this;return rc(function(){A.emitter.emit("queue")}),this};f0.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};f0.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};f0.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};f0.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};f0.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};f0.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};f0.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};f0.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};f0.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};f0.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};f0.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};f0.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};f0.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};f0.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};f0.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};f0.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};f0.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};f0.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */f0.prototype._shouldBufferCommands=function A(){let F=this.opts;if(F.bufferCommands!=null)return F.bufferCommands;if(F&&F.schemaUserProvidedOptions!=null&&F.schemaUserProvidedOptions.bufferCommands!=null)return F.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */f0.prototype._getBufferTimeoutMS=function A(){let F=this.conn,B=this.opts;if(B.bufferTimeoutMS!=null)return B.bufferTimeoutMS;if(B&&B.schemaUserProvidedOptions!=null&&B.schemaUserProvidedOptions.bufferTimeoutMS!=null)return B.schemaUserProvidedOptions.bufferTimeoutMS;return F._getBufferTimeoutMS()};/*!
 * Module exports.
 */oc.exports=f0});var t1=C((iY0,ec)=>{/*!
 * ignore
 */class CL extends Error{}Object.defineProperty(CL.prototype,"name",{value:"MongooseError"});ec.exports=CL});var w1=C((IS1)=>{IS1.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");IS1.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");IS1.arrayParentSymbol=Symbol("mongoose#Array#_parent");IS1.arrayPathSymbol=Symbol("mongoose#Array#_path");IS1.arraySchemaSymbol=Symbol("mongoose#Array#_schema");IS1.documentArrayParent=Symbol("mongoose#documentArrayParent");IS1.documentIsSelected=Symbol("mongoose#Document#isSelected");IS1.documentIsModified=Symbol("mongoose#Document#isModified");IS1.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");IS1.documentSchemaSymbol=Symbol("mongoose#Document#schema");IS1.getSymbol=Symbol("mongoose#Document#get");IS1.modelSymbol=Symbol("mongoose#Model");IS1.objectIdSymbol=Symbol("mongoose#ObjectId");IS1.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");IS1.schemaTypeSymbol=Symbol("mongoose#schemaType");IS1.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");IS1.scopeSymbol=Symbol("mongoose#Document#scope");IS1.validatorErrorSymbol=Symbol("mongoose#validatorError")});var U3=C((sY0,Al)=>{var SD=l4().ObjectId,iS1=w1().objectIdSymbol;Object.defineProperty(SD.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!SD.prototype.hasOwnProperty("valueOf"))SD.prototype.valueOf=function A(){return this.toString()};SD.prototype[iS1]=!0;Al.exports=SD});var I4=C((aY0,Fl)=>{Fl.exports=function A(F){if(F==null)return;if(typeof F.constructor!=="function")return;return F.constructor.name}});var t7=C((nS1)=>{/*!
 * ignore
 */nS1.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var ZG=C((rY0,Bl)=>{Bl.exports=l4().Decimal128});var bA=C((oY0,$l)=>{$l.exports=new Set(["__proto__","constructor","prototype"])});var DG=C((aS1)=>{aS1.isMongooseArray=function(A){return Array.isArray(A)&&A.isMongooseArray}});var kD=C((AW0,Zl)=>{var rS1=DG().isMongooseArray;Zl.exports=function(A){return A!=null&&(rS1(A)||A.$__!=null||A.isMongooseBuffer||A.$isMongooseMap)}});var KL=C((FW0,Dl)=>{var oS1=/^function\s*([^\s(]+)/;Dl.exports=function(A){return A.name||(A.toString().trim().match(oS1)||[])[1]}});var f6=C((BW0,Xl)=>{function eS1(A,F){return A!=null&&A._bsontype===F}Xl.exports=eS1});var I5=C(($W0,Jl)=>{Jl.exports=function(A){return Buffer.isBuffer(A)||Object.prototype.toString.call(A)==="[object Object]"}});var yB=C((ZW0,Yl)=>{Yl.exports=function A(F){if(F==null||typeof F!=="object")return!1;let B=Object.getPrototypeOf(F);return!B||B.constructor.name==="Object"}});var vB=C((Ak1)=>{var Wl=Symbol("mongoose#trustedSymbol");Ak1.trustedSymbol=Wl;Ak1.trusted=function A(F){if(F==null||typeof F!=="object")return F;return F[Wl]=!0,F}});var T2=C((XW0,Gl)=>{var $k1=ZG(),Zk1=U3(),Dk1=bA(),Xk1=kD(),Jk1=KL(),EL=f6(),Yk1=DG().isMongooseArray,Wk1=I5(),Gk1=yB(),Qk1=w1(),LL=vB().trustedSymbol,zk1=l4();function VL(A,F,B){if(A==null)return A;if(EL(A,"Double"))return new zk1.Double(A.value);if(typeof A==="number"||typeof A==="string"||typeof A==="boolean"||typeof A==="bigint")return A;if(Array.isArray(A))return qk1(Yk1(A)?A.__array:A,F);if(Xk1(A)){if(F){if(F.retainDocuments&&A.$__!=null){let D=A.$clone();if(A.__index!=null)D.__index=A.__index;if(A.__parentArray!=null)D.__parentArray=A.__parentArray;return D.$__parent=A.$__parent,D}}if(Gk1(A)&&A.$__!=null&&A._doc!=null)return A._doc;let Z;if(F&&F.json&&typeof A.toJSON==="function")Z=A.toJSON(F);else Z=A.toObject(F);return Z}let $=A.constructor;if($)switch(Jk1($)){case"Object":return wL(A,F,B);case"Date":return new $(+A);case"RegExp":return Hk1(A);default:break}if(EL(A,"ObjectId")){if(F&&F.flattenObjectIds)return A.toJSON();return new Zk1(A.id)}if(EL(A,"Decimal128")){if(F&&F.flattenDecimals)return A.toJSON();return $k1.fromString(A.toString())}if(!$&&Wk1(A))return wL(A,F,B);if(typeof A==="object"&&A[Qk1.schemaTypeSymbol])return A.clone();if(F&&F.bson&&typeof A.toBSON==="function")return A;if(typeof A.valueOf==="function")return A.valueOf();return wL(A,F,B)}Gl.exports=VL;/*!
 * ignore
 */function wL(A,F,B){let $=F&&F.minimize,Z=F&&F.omitUndefined,D=F&&F._seen,X={},J;if(D&&D.has(A))return D.get(A);else if(D)D.set(A,X);if(LL in A&&F?.copyTrustedSymbol!==!1)X[LL]=A[LL];let Y=Object.keys(A),W=Y.length;for(let G=0;G<W;++G){let Q=Y[G];if(Dk1.has(Q))continue;let q=VL(A[Q],F,!1);if(($===!1||Z)&&typeof q==="undefined")delete X[Q];else if($!==!0||typeof q!=="undefined")J||(J=!0),X[Q]=q}return $&&!B?J&&X:X}function qk1(A,F){let B=0,$=A.length,Z=new Array($);for(B=0;B<$;++B)Z[B]=VL(A[B],F,!0);return Z}function Hk1(A){let F=new RegExp(A.source,A.flags);if(F.lastIndex!==A.lastIndex)F.lastIndex=A.lastIndex;return F}});var ql=C((JW0,zl)=>{/*!
 * Module dependencies.
 */var XG=UL(),NL=t1(),ML=kA().Collection,Uk1=U3(),Ql=I4(),Ck1=t7().internalToObjectOptions,Kk1=A1("stream"),RL=A1("util"),Ek1=Object.freeze({...Ck1,copyTrustedSymbol:!1});function r7(A,F,B){this.collection=null,this.Promise=B.Promise||Promise,this.modelName=B.modelName,delete B.modelName,this._closed=!1,XG.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(r7.prototype,XG.prototype);r7.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),XG.prototype.onOpen.call(this),this.collection};r7.prototype.onClose=function(A){XG.prototype.onClose.call(this,A)};r7.prototype._getCollection=function A(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};/*!
 * ignore
 */var _D={watch:!0,find:!0,aggregate:!0};function Lk1(A){r7.prototype[A]=function(){let F=this._getCollection(),B=Array.from(arguments),$=this,Z=$&&$.conn&&$.conn.base&&$.conn.base.options&&$.conn.base.options.debug,D=$&&$.conn&&$.conn.options&&$.conn.options.debug,X=D==null?Z:D,J=arguments[arguments.length-1],Y=new Uk1;if(this.conn.$wasForceClosed){let Q=new NL("Connection was force closed");if(B.length>0&&typeof B[B.length-1]==="function"){B[B.length-1](Q);return}else throw Q}let W=B,G=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:Y,modelName:$.modelName,collectionName:$.name,method:A,args:B});let Q,q=B,z=null,H=null;if(_D[A]&&typeof J==="function")this.addQueue(A,q),Q=J;else if(_D[A])z=new this.Promise((K,E)=>{Q=function L(V,M){if(H!=null)clearTimeout(H);if(V!=null)return E(V);K(M)},q=B.concat([Q]),this.addQueue(A,q)});else if(typeof J==="function")Q=function K(){if(H!=null)clearTimeout(H);return J.apply(this,arguments)},q=B.slice(0,B.length-1).concat([Q]);else z=new Promise((K,E)=>{Q=function L(V,M){if(H!=null)clearTimeout(H);if(V!=null)return E(V);K(M)},q=B.concat([Q]),this.addQueue(A,q)});let U=this._getBufferTimeoutMS();if(H=setTimeout(()=>{if(this.removeQueue(A,q)){let E="Operation `"+this.name+"."+A+"()` buffering timed out after "+U+"ms",L=new NL(E);this.conn.emit("buffer-end",{_id:Y,modelName:$.modelName,collectionName:$.name,method:A,error:L}),Q(L)}},U),!_D[A]&&typeof J==="function"){this.addQueue(A,q);return}return z}else if(!_D[A]&&typeof J==="function")G=function Q(q,z){if(q!=null)$.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:$.name,method:A,error:q});else $.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:$.name,method:A,result:z});return J.apply(this,arguments)},W=B.slice(0,B.length-1).concat([G]);if(X)if(typeof X==="function"){let Q=null;if(typeof B[B.length-1]=="function")Q=B.slice(0,B.length-1);else Q=B;X.apply($,[$.name,A].concat(Q))}else if(X instanceof Kk1.Writable)this.$printToStream($.name,A,B,X);else{let Q=X.color==null?!0:X.color,q=X.shell==null?!1:X.shell;this.$print($.name,A,B,Q,q)}this.conn.emit("operation-start",{_id:Y,modelName:$.modelName,collectionName:this.name,method:A,params:W});try{if(F==null){let q="Cannot call `"+this.name+"."+A+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new NL(q)}if(_D[A]&&typeof J==="function"){let q=F[A].apply(F,W.slice(0,W.length-1));return this.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:this.name,method:A,result:q}),J.call(this,null,q)}let Q=F[A].apply(F,W);if(Q!=null&&typeof Q.then==="function")return Q.then((q)=>{if(typeof J==="function")J(null,q);else this.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:this.name,method:A,result:q});return q},(q)=>{if(typeof J==="function"){J(q);return}else this.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:this.name,method:A,error:q});throw q});return Q}catch(Q){if(typeof J==="function")return J(Q);else throw this.conn.emit("operation-end",{_id:Y,modelName:$.modelName,collectionName:this.name,method:A,error:Q}),Q}}}for(let A of Object.getOwnPropertyNames(ML.prototype)){if(Object.getOwnPropertyDescriptor(ML.prototype,A).get!==void 0)continue;if(typeof ML.prototype[A]!=="function")continue;Lk1(A)}r7.prototype.$print=function(A,F,B,$,Z){let D=$?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",X=[A,F].join("."),J=[];for(let W=B.length-1;W>=0;--W)if(this.$format(B[W])||J.length)J.unshift(this.$format(B[W],$,Z));let Y="("+J.join(", ")+")";console.info(D+X+Y)};r7.prototype.$printToStream=function(A,F,B,$){let Z=[A,F].join("."),D=[];for(let J=B.length-1;J>=0;--J)if(this.$format(B[J])||D.length)D.unshift(this.$format(B[J]));let X="("+D.join(", ")+")";$.write(Z+X,"utf8")};r7.prototype.$format=function(A,F,B){let $=typeof A;if($==="function"||$==="undefined")return"";return PL(A,!1,F,B)};function hB(A){let F={inspect:function(){return A}};if(RL.inspect.custom)F[RL.inspect.custom]=F.inspect;return F}function wk1(A){return PL(A,!0)}function Vk1(A,F){A[F]=hB('ObjectId("'+A[F].toHexString()+'")')}function Nk1(A,F,B){if(B)A[F]=hB('ISODate("'+A[F].toUTCString()+'")');else A[F]=hB('new Date("'+A[F].toUTCString()+'")')}function PL(A,F,B,$){if(A&&typeof A.toBSON==="function")A=A.toBSON();if(A==null)return A;let Z=T2(),D=F?A:Z(A,Ek1),X=Ql(D);if(X==="Binary")D="BinData("+D.sub_type+', "'+D.toString("base64")+'")';else if(X==="ObjectId")D=hB('ObjectId("'+D.toHexString()+'")');else if(X==="Date")D=hB('new Date("'+D.toUTCString()+'")');else if(X==="Object"){let J=Object.keys(D),Y=J.length,W;for(let G=0;G<Y;++G)if(W=J[G],D[W]){let Q;if(typeof D[W].toBSON==="function")try{D[W]=D[W].toBSON()}catch(z){Q=z}let q=Ql(D[W]);if(q==="Binary")D[W]="BinData("+D[W].sub_type+', "'+D[W].buffer.toString("base64")+'")';else if(q==="Object")D[W]=PL(D[W],!0);else if(q==="ObjectId")Vk1(D,W);else if(q==="Date")Nk1(D,W,$);else if(q==="ClientSession")D[W]=hB('ClientSession("'+(D[W]&&D[W].id&&D[W].id.id&&D[W].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(D[W]))D[W]=D[W].map(wk1);else if(Q!=null)throw Q}}if(F)return D;return RL.inspect(D,!1,10,B).replace(/\n/g,"").replace(/\s{2,}/g," ")}r7.prototype.getIndexes=r7.prototype.indexInformation;/*!
 * Module exports.
 */zl.exports=r7});var jL=C((YW0,Cl)=>{/*!
 * Module dependencies.
 */var Mk1=A1("events").EventEmitter,xD=t1();/*!
 * ignore
 */var Hl=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class Ul extends Mk1{constructor(A,F,B){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=F,this.options=B,this.errored=!1,B&&B.hydrate&&!B.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let $=null;if(this.$driverChangeStreamPromise=new Promise((Z,D)=>{try{A((X,J)=>{if(X!=null)return this.errored=!0,this.emit("error",X),D(X);this.driverChangeStream=J,this.emit("ready"),Z()})}catch(X){$=X,this.errored=!0,this.emit("error",X),D(X)}}),$!=null)throw $}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),Hl.forEach((A)=>{this.driverChangeStream.on(A,(F)=>{if(F!=null&&F.fullDocument!=null&&this.options&&this.options.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit(A,F)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),Hl.forEach((A)=>{this.driverChangeStream.on(A,(F)=>{if(F!=null&&F.fullDocument!=null&&this.options&&this.options.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit(A,F)})})}hasNext(A){if(this.errored)throw new xD("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(A)}next(A){if(this.errored)throw new xD("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(A!=null){let B=A;A=($,Z)=>{if($!=null)return B($);if(Z.fullDocument!=null)Z.fullDocument=this.options.model.hydrate(Z.fullDocument);return B(null,Z)}}let F=this.driverChangeStream.next(A);if(F&&typeof F.then==="function")F=F.then((B)=>{if(B.fullDocument!=null)B.fullDocument=this.options.model.hydrate(B.fullDocument);return B});return F}return this.driverChangeStream.next(A)}addListener(A,F){if(this.errored)throw new xD("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(A,F)}on(A,F){if(this.errored)throw new xD("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(A,F)}once(A,F){if(this.errored)throw new xD("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(A,F)}_queue(A){this.once("ready",()=>A())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */Cl.exports=Ul});var fA=C((WW0,Ll)=>{function k0(){this._pres=new Map,this._posts=new Map}k0.skipWrappedFunction=function A(){if(!(this instanceof k0.skipWrappedFunction))return new k0.skipWrappedFunction(...arguments);this.args=[...arguments]};k0.overwriteResult=function A(){if(!(this instanceof k0.overwriteResult))return new k0.overwriteResult(...arguments);this.args=[...arguments]};k0.prototype.execPre=function(A,F,B,$){if(arguments.length===3)$=B,B=[];let Z=this._pres.get(A)||[],D=Z.length,X=Z.numAsync||0,J=0,Y=X,W=!1,G=B,Q=null;if(!D)return fD(function(){$(null)});function q(){if(J>=D)return;let H=Z[J];if(H.isAsync){let U=[bD(z),bD(function(K){if(K){if(W)return;if(K instanceof k0.skipWrappedFunction)Q=K;else return W=!0,$(K)}if(--Y===0&&J>=D)return $(Q)})];JG(H.fn,F,U,U[0])}else if(H.fn.length>0){let U=[bD(z)],K=arguments.length>=2?arguments:[null].concat(G);for(let E=1;E<K.length;++E){if(E===K.length-1&&typeof K[E]==="function")continue;U.push(K[E])}JG(H.fn,F,U,U[0])}else{let U=null;try{U=H.fn.call(F)}catch(K){if(K!=null)return $(K)}if(YG(U))U.then(()=>z(),(K)=>z(K));else{if(++J>=D)if(Y>0)return;else return fD(function(){$(Q)});q()}}}q.apply(null,[null].concat(B));function z(H){if(H){if(W)return;if(H instanceof k0.skipWrappedFunction)Q=H;else return W=!0,$(H)}if(++J>=D)if(Y>0)return;else return $(Q);q.apply(F,arguments)}};k0.prototype.execPreSync=function(A,F,B){let $=this._pres.get(A)||[],Z=$.length;for(let D=0;D<Z;++D)$[D].fn.apply(F,B||[])};k0.prototype.execPost=function(A,F,B,$,Z){if(arguments.length<5)Z=$,$=null;let D=this._posts.get(A)||[],X=D.length,J=0,Y=null;if($&&$.error)Y=$.error;if(!X)return fD(function(){Z.apply(null,[Y].concat(B))});function W(){let G=D[J].fn,Q=0,q=B.length,z=[];for(let H=0;H<q;++H)if(Q+=B[H]&&B[H]._kareemIgnore?0:1,!B[H]||!B[H]._kareemIgnore)z.push(B[H]);if(Y)if(El(D[J],Q)){let H=bD(function(U){if(U){if(U instanceof k0.overwriteResult){if(B=U.args,++J>=X)return Z.call(null,Y);return W()}Y=U}if(++J>=X)return Z.call(null,Y);W()});JG(G,F,[Y].concat(z).concat([H]),H)}else{if(++J>=X)return Z.call(null,Y);W()}else{let H=bD(function(U){if(U){if(U instanceof k0.overwriteResult){if(B=U.args,++J>=X)return Z.apply(null,[null].concat(B));return W()}return Y=U,W()}if(++J>=X)return Z.apply(null,[null].concat(B));W()});if(El(D[J],Q)){if(++J>=X)return Z.apply(null,[null].concat(B));return W()}if(G.length===Q+1)JG(G,F,z.concat([H]),H);else{let U,K;try{K=G.apply(F,z)}catch(E){U=E,Y=E}if(YG(K))return K.then((E)=>{H(E instanceof k0.overwriteResult?E:null)},(E)=>H(E));if(K instanceof k0.overwriteResult)B=K.args;if(++J>=X)return Z.apply(null,[U].concat(B));W()}}}W()};k0.prototype.execPostSync=function(A,F,B){let $=this._posts.get(A)||[],Z=$.length;for(let D=0;D<Z;++D){let X=$[D].fn.apply(F,B||[]);if(X instanceof k0.overwriteResult)B=X.args}return B};k0.prototype.createWrapperSync=function(A,F){let B=this;return function $(){B.execPreSync(A,this,arguments);let Z=F.apply(this,arguments);return B.execPostSync(A,this,[Z])[0]}};function Kl(A,F,B,$,Z,D,X){if(D.useErrorHandlers)return A.execPost(B,$,Z,{error:F},function(J){return typeof X==="function"&&X(J)});else return typeof X==="function"&&X(F)}k0.prototype.wrap=function(A,F,B,$,Z){let D=$.length>0?$[$.length-1]:null,X=Array.from($);typeof D==="function"&&X.pop();let J=this;Z=Z||{};let Y=Z.checkForPromise;this.execPre(A,B,$,function(W){if(W&&!(W instanceof k0.skipWrappedFunction)){let z=Z.numCallbackParams||0,H=Z.contextParameter?[B]:[];for(let U=H.length;U<z;++U)H.push(null);return Kl(J,W,A,B,H,Z,D)}let G=F.length,Q;if(W instanceof k0.skipWrappedFunction)return Q=W.args[0],q(null,...W.args);else try{Q=F.apply(B,X.concat(q))}catch(z){return q(z)}if(Y){if(YG(Q))return Q.then((z)=>q(null,z),(z)=>q(z));if(G<X.length+1)return q(null,Q)}function q(){let z=Array.from(arguments);if(z.shift(),Z.nullResultByDefault&&z.length===0)z.push(null);if(arguments[0])return Kl(J,arguments[0],A,B,z,Z,D);else J.execPost(A,B,z,function(){if(D===null)return;arguments[0]?D(arguments[0]):D.apply(B,arguments)})}})};k0.prototype.filter=function(A){let F=this.clone(),B=Array.from(F._pres.keys());for(let Z of B){let D=this._pres.get(Z).map((X)=>Object.assign({},X,{name:Z})).filter(A);if(D.length===0){F._pres.delete(Z);continue}D.numAsync=D.filter((X)=>X.isAsync).length,F._pres.set(Z,D)}let $=Array.from(F._posts.keys());for(let Z of $){let D=this._posts.get(Z).map((X)=>Object.assign({},X,{name:Z})).filter(A);if(D.length===0){F._posts.delete(Z);continue}F._posts.set(Z,D)}return F};k0.prototype.hasHooks=function(A){return this._pres.has(A)||this._posts.has(A)};k0.prototype.createWrapper=function(A,F,B,$){let Z=this;if(!this.hasHooks(A))return function(){fD(()=>F.apply(this,arguments))};return function(){let D=B||this;Z.wrap(A,F,D,Array.from(arguments),$)}};k0.prototype.pre=function(A,F,B,$,Z){let D={};if(typeof F==="object"&&F!==null)D=F,F=D.isAsync;else if(typeof arguments[1]!=="boolean")B=F,F=!1;let X=this._pres.get(A)||[];if(this._pres.set(A,X),F)X.numAsync=X.numAsync||0,++X.numAsync;if(typeof B!=="function")throw new Error('pre() requires a function, got "'+typeof B+'"');if(Z)X.unshift(Object.assign({},D,{fn:B,isAsync:F}));else X.push(Object.assign({},D,{fn:B,isAsync:F}));return this};k0.prototype.post=function(A,F,B,$){let Z=this._posts.get(A)||[];if(typeof F==="function")$=!!B,B=F,F={};if(typeof B!=="function")throw new Error('post() requires a function, got "'+typeof B+'"');if($)Z.unshift(Object.assign({},F,{fn:B}));else Z.push(Object.assign({},F,{fn:B}));return this._posts.set(A,Z),this};k0.prototype.clone=function(){let A=new k0;for(let F of this._pres.keys()){let B=this._pres.get(F).slice();B.numAsync=this._pres.get(F).numAsync,A._pres.set(F,B)}for(let F of this._posts.keys())A._posts.set(F,this._posts.get(F).slice());return A};k0.prototype.merge=function(A,F){F=arguments.length===1?!0:F;let B=F?this.clone():this;for(let $ of A._pres.keys()){let Z=B._pres.get($)||[],D=A._pres.get($).filter((J)=>Z.map((Y)=>Y.fn).indexOf(J.fn)===-1),X=Z.concat(D);X.numAsync=Z.numAsync||0,X.numAsync+=D.filter((J)=>J.isAsync).length,B._pres.set($,X)}for(let $ of A._posts.keys()){let Z=B._posts.get($)||[],D=A._posts.get($).filter((X)=>Z.indexOf(X)===-1);B._posts.set($,Z.concat(D))}return B};function JG(A,F,B,$){let Z;try{Z=A.apply(F,B)}catch(D){return $(D)}if(YG(Z))Z.then(()=>$(),(D)=>$(D))}function YG(A){return typeof A==="object"&&A!==null&&typeof A.then==="function"}function bD(A){let F=!1,B=this;return function(){if(F)return;return F=!0,fD(()=>A.apply(B,arguments))}}var fD=typeof process==="object"&&process!==null&&process.nextTick||function A(F){setTimeout(F,0)};function El(A,F){if(A.errorHandler)return!0;return A.fn.length===F+2}Ll.exports=k0});var Nl=C((wl,Vl)=>{var Z4=Vl.exports=wl={};Z4.DocumentNotFoundError=null;Z4.general={};Z4.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";Z4.general.required="Path `{PATH}` is required.";Z4.Number={};Z4.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";Z4.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";Z4.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Z4.Date={};Z4.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";Z4.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";Z4.String={};Z4.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Z4.String.match="Path `{PATH}` is invalid ({VALUE}).";Z4.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";Z4.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var D4=C((GW0,Pl)=>{/*!
 * Module dependencies.
 */var Rk1=t1(),Pk1=A1("util");class OL extends Rk1{constructor(A,F,B,$,Z){if(arguments.length>0){let D=Ml(F),X=Rl(Z),J=IL(null,A,F,B,X,D,$);super(J);this.init(A,F,B,$,Z)}else super(IL())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(A,F,B,$,Z){/*!
   * ignore
   */this.stringValue=TL(F),this.messageFormat=Rl(Z),this.kind=A,this.value=F,this.path=B,this.reason=$,this.valueType=Ml(F)}copy(A){this.messageFormat=A.messageFormat,this.stringValue=A.stringValue,this.kind=A.kind,this.value=A.value,this.path=A.path,this.reason=A.reason,this.message=A.message,this.valueType=A.valueType}setModel(A){/*!
   * ignore
   */this.message=IL(A,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(OL.prototype,"name",{value:"CastError"});function TL(A){let F=Pk1.inspect(A);if(F=F.replace(/^'|'$/g,'"'),!F.startsWith('"'))F='"'+F+'"';return F}function Ml(A){if(A==null)return""+A;let F=typeof A;if(F!=="object")return F;if(typeof A.constructor!=="function")return F;return A.constructor.name}function Rl(A){let F=A&&A._castErrorMessage||null;if(typeof F==="string"||typeof F==="function")return F}/*!
 * ignore
 */function IL(A,F,B,$,Z,D,X){if(typeof Z==="string"){let J=TL(B),Y=Z.replace("{KIND}",F).replace("{VALUE}",J).replace("{PATH}",$);if(A!=null)Y=Y.replace("{MODEL}",A.modelName);return Y}else if(typeof Z==="function")return Z(B,$,A,F);else{let J=TL(B),Y=D?" (type "+D+")":"",W="Cast to "+F+" failed for value "+J+Y+' at path "'+$+'"';if(A!=null)W+=' for model "'+A.modelName+'"';if(X!=null&&typeof X.constructor==="function"&&X.constructor.name!=="AssertionError"&&X.constructor.name!=="Error")W+=' because of "'+X.constructor.name+'"';return W}}/*!
 * exports
 */Pl.exports=OL});var WG=C((QW0,Il)=>{/*!
 * Module dependencies.
 */var jl=t1(),jk1=A1("util");class SL extends jl{constructor(A,F,B,$){let Z,D=jl.messages;if(D.DocumentNotFoundError!=null)Z=typeof D.DocumentNotFoundError==="function"?D.DocumentNotFoundError(A,F):D.DocumentNotFoundError;else Z='No document found for query "'+jk1.inspect(A)+'" on model "'+F+'"';super(Z);this.result=$,this.numAffected=B,this.filter=A,this.query=A}}Object.defineProperty(SL.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */Il.exports=SL});var kL=C((zW0,Tl)=>{/*!
 * ignore
 */Tl.exports=function A(F){let B=Object.keys(F.errors||{}),$=B.length,Z=[],D;for(let X=0;X<$;++X){if(D=B[X],F===F.errors[D])continue;Z.push(D+": "+F.errors[D].message)}return Z.join(", ")}});var uA=C((qW0,kl)=>{/*!
 * Module requirements
 */var Ik1=t1(),Tk1=I4(),Ol=A1("util"),Sl=kL();class gA extends Ik1{constructor(A){let F;if(Tk1(A)==="model")F=A.constructor.modelName+" validation failed";else F="Validation failed";super(F);if(this.errors={},this._message=F,A)A.$errors=this.errors}toString(){return this.name+": "+Sl(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(A,F){if(F instanceof gA){let{errors:B}=F;for(let $ of Object.keys(B))this.addError(`${A}.${$}`,B[$]);return}this.errors[A]=F,this.message=this._message+": "+Sl(this)}}if(Ol.inspect.custom)gA.prototype[Ol.inspect.custom]=gA.prototype.inspect;Object.defineProperty(gA.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(gA.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */kl.exports=gA});var _L=C((HW0,bl)=>{/*!
 * Module dependencies.
 */var _l=t1();class gD extends _l{constructor(A,F){let B=A.message;if(!B)B=_l.messages.general.default;let $=xl(B,A,F);super($);A=Object.assign({},A,{message:$}),this.properties=A,this.kind=A.type,this.path=A.path,this.value=A.value,this.reason=A.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(gD.prototype,"name",{value:"ValidatorError"});Object.defineProperty(gD.prototype,"properties",{enumerable:!1,writable:!0,value:null});gD.prototype.formatMessage=xl;function xl(A,F,B){if(typeof A==="function")return A(F,B);let $=Object.keys(F);for(let Z of $){if(Z==="message")continue;A=A.replace("{"+Z.toUpperCase()+"}",F[Z])}return A}/*!
 * exports
 */bl.exports=gD});var bL=C((UW0,fl)=>{/*!
 * Module dependencies.
 */var Ok1=t1();class xL extends Ok1{constructor(A,F,B){let $=B.join(", ");super('No matching document found for id "'+A._doc._id+'" version '+F+' modifiedPaths "'+$+'"');this.version=F,this.modifiedPaths=B}}Object.defineProperty(xL.prototype,"name",{value:"VersionError"});/*!
 * exports
 */fl.exports=xL});var gL=C((CW0,gl)=>{/*!
 * Module dependencies.
 */var Sk1=t1();class fL extends Sk1{constructor(A){super("Can't save() the same doc multiple times in parallel. Document: "+A._doc._id)}}Object.defineProperty(fL.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */gl.exports=fL});var yL=C((KW0,ul)=>{/*!
 * Module dependencies.
 */var kk1=t1();class uL extends kk1{constructor(A){super("Cannot overwrite `"+A+"` model once compiled.")}}Object.defineProperty(uL.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */ul.exports=uL});var vl=C((EW0,yl)=>{/*!
 * Module dependencies.
 */var _k1=t1();class vL extends _k1{constructor(A){let F=`Schema hasn't been registered for model "`+A+`".
Use mongoose.model(name, schema)`;super(F)}}Object.defineProperty(vL.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */yl.exports=vL});var dL=C((LW0,hl)=>{/*!
 * Module dependencies.
 */var xk1=t1();class hL extends xk1{constructor(A,F,B){let $=B?.matchedCount??0,Z=B?.insertedCount??0,D=F.map((J)=>J._id).join(", ");if(D.length>100)D=D.slice(0,100)+"...";let X=F.length-$-Z;super(`${A}.bulkSave() was not able to update ${X} of the given documents due to incorrect version or optimistic concurrency, document ids: ${D}`);this.modelName=A,this.documents=F,this.bulkWriteResult=B,this.numDocumentsNotUpdated=X}}Object.defineProperty(hL.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */hl.exports=hL});var ml=C((wW0,dl)=>{var bk1=I4();dl.exports=function A(F){if(bk1(F)!=="TopologyDescription")return!1;let B=Array.from(F.servers.values());return B.length>0&&B.every(($)=>$.type==="Unknown")}});var ll=C((VW0,cl)=>{var fk1=I4();cl.exports=function A(F){if(fk1(F)!=="TopologyDescription")return!1;if(F.servers.size===0)return!1;for(let B of F.servers.values())if(B.host.endsWith(".mongodb.net")===!1||B.port!==27017)return!1;return!0}});var il=C((NW0,pl)=>{var gk1=I4(),uk1="Client network socket disconnected before secure TLS connection was established";pl.exports=function A(F){if(gk1(F)!=="TopologyDescription")return!1;let B=Array.from(F.servers.values());return B.length>0&&B.every(($)=>$.error&&$.error.message.indexOf(uk1)!==-1)}});var cL=C((MW0,nl)=>{/*!
 * Module dependencies.
 */var yk1=t1(),vk1=ml(),hk1=ll(),dk1=il();/*!
 * ignore
 */var mk1="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",ck1="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class mL extends yk1{assimilateError(A){let F=A.reason;if(hk1(F)&&vk1(F)&&A.message.indexOf("bad auth")===-1&&A.message.indexOf("Authentication failed")===-1)this.message=mk1;else if(dk1(F))this.message=ck1;else this.message=A.message;for(let $ in A)if($!=="name")this[$]=A[$];return this.cause=F,this}}Object.defineProperty(mL.prototype,"name",{value:"MongooseServerSelectionError"});nl.exports=mL});var pL=C((RW0,sl)=>{/*!
 * Module dependencies.
 */var lk1=t1();class lL extends lk1{constructor(A){let F="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+A.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(F)}}Object.defineProperty(lL.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */sl.exports=lL});var T5=C((PW0,al)=>{/*!
 * Module dependencies.
 */var pk1=t1();class iL extends pk1{constructor(A,F,B){F=F||"Field `"+A+"` is not in schema and strict mode is set to throw.";super(F);this.isImmutableError=!!B,this.path=A}}Object.defineProperty(iL.prototype,"name",{value:"StrictModeError"});al.exports=iL});var sL=C((jW0,tl)=>{/*!
 * Module dependencies.
 */var ik1=t1();class nL extends ik1{constructor(A,F){F=F||"Cannot populate path `"+A+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(F);this.path=A}}Object.defineProperty(nL.prototype,"name",{value:"StrictPopulateError"});tl.exports=nL});var r4=C((rl,ol)=>{var g6=t1();/*!
 * Module exports.
 */ol.exports=rl=g6;g6.messages=Nl();g6.Messages=g6.messages;g6.CastError=D4();g6.DocumentNotFoundError=WG();g6.ValidationError=uA();g6.ValidatorError=_L();g6.VersionError=bL();g6.ParallelSaveError=gL();g6.OverwriteModelError=yL();g6.MissingSchemaError=vl();g6.MongooseBulkSaveIncompleteError=dL();g6.MongooseServerSelectionError=cL();g6.DivergentArrayError=pL();g6.StrictModeError=T5();g6.StrictPopulateError=sL()});var $7=C((IW0,el)=>{el.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var T9=C((TW0,Ap)=>{var nk1=T2();class X4{constructor(A){if(A==null)return this;Object.assign(this,nk1(A))}}var o4=$7();Object.defineProperty(X4.prototype,"type",o4);Object.defineProperty(X4.prototype,"validate",o4);Object.defineProperty(X4.prototype,"cast",o4);Object.defineProperty(X4.prototype,"required",o4);Object.defineProperty(X4.prototype,"default",o4);Object.defineProperty(X4.prototype,"ref",o4);Object.defineProperty(X4.prototype,"refPath",o4);Object.defineProperty(X4.prototype,"select",o4);Object.defineProperty(X4.prototype,"index",o4);Object.defineProperty(X4.prototype,"unique",o4);Object.defineProperty(X4.prototype,"immutable",o4);Object.defineProperty(X4.prototype,"sparse",o4);Object.defineProperty(X4.prototype,"text",o4);Object.defineProperty(X4.prototype,"transform",o4);Ap.exports=X4});var GG=C((OW0,dB)=>{var sk1=D4();dB.exports=function A(F,B){if(dB.exports.convertToTrue.has(F))return!0;if(dB.exports.convertToFalse.has(F))return!1;if(F==null)return F;throw new sk1("boolean",F,B)};dB.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);dB.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var QG=C((SW0,Fp)=>{var ak1=GG();/*!
 * ignore
 */Fp.exports=function(A){let F=this!=null?this.path:null;return ak1(A,F)}});var aL=C((kW0,Bp)=>{/*!
 * ignore
 */Bp.exports=function(A){if(Array.isArray(A)){if(!A.every((F)=>typeof F==="number"||typeof F==="string"))throw new Error("$type array values must be strings or numbers");return A}if(typeof A!=="number"&&typeof A!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return A}});var Zp=C((_W0,$p)=>{var tk1=T5();/*!
 * ignore
 */$p.exports=function(A){if(A.$immutable)A.$immutableSetter=rk1(A.path,A.options.immutable),A.set(A.$immutableSetter);else if(A.$immutableSetter)A.setters=A.setters.filter((F)=>F!==A.$immutableSetter),delete A.$immutableSetter};function rk1(A,F){return function B($,Z,D,X){if(this==null||this.$__==null)return $;if(this.isNew)return $;if(X&&X.overwriteImmutable)return $;if(!(typeof F==="function"?F.call(this,this):F))return $;let Y=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(A):this.$__getValue(A);if(this.$__.strictMode==="throw"&&$!==Y)throw new tk1(A,"Path `"+A+"` is immutable and strict mode is set to throw.",!0);return Y}}});var Xp=C((xW0,Dp)=>{Dp.exports=function A(F){return typeof F==="function"&&F.constructor&&F.constructor.name==="AsyncFunction"}});var Yp=C((bW0,Jp)=>{Jp.exports=function A(F){let B=Object.keys(F),$=!0;for(let Z=0,D=B.length;Z<D;++Z)if(typeof F[B[Z]]==="object"&&F[B[Z]]!==null){$=!1;break}return $}});var qG=C((fW0,Wp)=>{var mB=1000,cB=mB*60,lB=cB*60,yA=lB*24,ok1=yA*7,ek1=yA*365.25;Wp.exports=function(A,F){F=F||{};var B=typeof A;if(B==="string"&&A.length>0)return A_1(A);else if(B==="number"&&isFinite(A))return F.long?B_1(A):F_1(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function A_1(A){if(A=String(A),A.length>100)return;var F=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(!F)return;var B=parseFloat(F[1]),$=(F[2]||"ms").toLowerCase();switch($){case"years":case"year":case"yrs":case"yr":case"y":return B*ek1;case"weeks":case"week":case"w":return B*ok1;case"days":case"day":case"d":return B*yA;case"hours":case"hour":case"hrs":case"hr":case"h":return B*lB;case"minutes":case"minute":case"mins":case"min":case"m":return B*cB;case"seconds":case"second":case"secs":case"sec":case"s":return B*mB;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}function F_1(A){var F=Math.abs(A);if(F>=yA)return Math.round(A/yA)+"d";if(F>=lB)return Math.round(A/lB)+"h";if(F>=cB)return Math.round(A/cB)+"m";if(F>=mB)return Math.round(A/mB)+"s";return A+"ms"}function B_1(A){var F=Math.abs(A);if(F>=yA)return zG(A,F,yA,"day");if(F>=lB)return zG(A,F,lB,"hour");if(F>=cB)return zG(A,F,cB,"minute");if(F>=mB)return zG(A,F,mB,"second");return A+" ms"}function zG(A,F,B,$){var Z=F>=B*1.5;return Math.round(A/B)+" "+$+(Z?"s":"")}});var Qp=C((gW0,Gp)=>{Gp.exports=function A(F){let B=[],$="",Z="DEFAULT";for(let D=0;D<F.length;++D){if(Z==="IN_SQUARE_BRACKETS"&&!/\d/.test(F[D])&&F[D]!=="]")Z="DEFAULT",$=B[B.length-1]+"["+$,B.splice(B.length-1,1);if(F[D]==="["){if(Z!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push($),$="";Z="IN_SQUARE_BRACKETS"}else if(F[D]==="]")if(Z==="IN_SQUARE_BRACKETS")Z="IMMEDIATELY_AFTER_SQUARE_BRACKETS",B.push($),$="";else Z="DEFAULT",$+=F[D];else if(F[D]==="."){if(Z!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push($),$="";Z="DEFAULT"}else $+=F[D]}if(Z!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push($);return B}});var Cp=C(($_1)=>{var uD=Qp(),qp=["__proto__","constructor","prototype"];$_1.get=function(A,F,B,$){var Z;if(typeof B=="function")if(B.length<2)$=B,B=void 0;else Z=B,B=void 0;$||($=Up);var D=typeof A=="string"?uD(A):A;if(!Array.isArray(D))throw new TypeError("Invalid `path`. Must be either string or array");var X=F,J;for(var Y=0;Y<D.length;++Y){if(J=D[Y],typeof D[Y]!=="string"&&typeof D[Y]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof D[Y]);if(Array.isArray(X)&&!/^\d+$/.test(J)){var W=D.slice(Y);return[].concat(X).map(function(Q){return Q?$_1.get(W,Q,B||Z,$):$(void 0)})}if(Z)X=Z(X,J);else{var G=B&&X[B]?X[B]:X;X=G instanceof Map?G.get(J):G[J]}if(!X)return $(X)}return $(X)};$_1.has=function(A,F){var B=typeof A==="string"?uD(A):A;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var $=B.length,Z=F;for(var D=0;D<$;++D){if(typeof B[D]!=="string"&&typeof B[D]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof B[D]);if(Z==null||typeof Z!=="object"||!(B[D]in Z))return!1;Z=Z[B[D]]}return!0};$_1.unset=function(A,F){var B=typeof A==="string"?uD(A):A;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var $=B.length,Z=F;for(var D=0;D<$;++D){if(Z==null||typeof Z!=="object"||!(B[D]in Z))return!1;if(typeof B[D]!=="string"&&typeof B[D]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof B[D]);if(qp.indexOf(B[D])!==-1)return!1;if(D===$-1)return delete Z[B[D]],!0;Z=Z instanceof Map?Z.get(B[D]):Z[B[D]]}return!0};$_1.set=function(A,F,B,$,Z,D){var X;if(typeof $=="function")if($.length<2)Z=$,$=void 0;else X=$,$=void 0;Z||(Z=Up);var J=typeof A=="string"?uD(A):A;if(!Array.isArray(J))throw new TypeError("Invalid `path`. Must be either string or array");if(B==null)return;for(var Y=0;Y<J.length;++Y){if(typeof J[Y]!=="string"&&typeof J[Y]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof J[Y]);if(qp.indexOf(J[Y])!==-1)return}var W=D||/\$/.test(A)&&D!==!1,G=B,Q;for(var Y=0,q=J.length-1;Y<q;++Y){if(Q=J[Y],Q=="$")if(Y==q-1)break;else continue;if(Array.isArray(G)&&!/^\d+$/.test(Q)){var z=J.slice(Y);if(!W&&Array.isArray(F))for(var H=0;H<G.length&&H<F.length;++H)$_1.set(z,F[H],G[H],$||X,Z,W);else for(var H=0;H<G.length;++H)$_1.set(z,F,G[H],$||X,Z,W);return}if(X)G=X(G,Q);else{var U=$&&G[$]?G[$]:G;G=U instanceof Map?U.get(Q):U[Q]}if(!G)return}if(Q=J[q],$&&G[$])G=G[$];if(Array.isArray(G)&&!/^\d+$/.test(Q))if(!W&&Array.isArray(F))Hp(G,F,Q,X,$,Z);else for(var H=0;H<G.length;++H){var K=G[H];if(K)if(X)X(K,Q,Z(F));else{if(K[$])K=K[$];K[Q]=Z(F)}}else if(X)X(G,Q,Z(F));else if(G instanceof Map)G.set(Q,Z(F));else G[Q]=Z(F)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */$_1.stringToParts=uD;/*!
 * Recursively set nested arrays
 */function Hp(A,F,B,$,Z,D){for(var X,J=0;J<A.length&&J<F.length;++J)if(X=A[J],Array.isArray(X)&&Array.isArray(F[J]))Hp(X,F[J],B,$,Z,D);else if(X)if($)$(X,B,D(F[J]));else{if(X[Z])X=X[Z];X[B]=D(F[J])}}/*!
 * Returns the value passed to it.
 */function Up(A){return A}});var O9=C((Kp,Ep)=>{Ep.exports=Kp=Cp()});var rL=C((yW0,wp)=>{var J_1=T2();class Lp{constructor(A){if(this._docs={},this._childDocs=[],A==null)return;if(A=J_1(A),Object.assign(this,A),typeof A.subPopulate==="object")this.populate=A.subPopulate;if(A.perDocumentLimit!=null&&A.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+A.path+"`.")}}wp.exports=Lp});var Vp=C((Y_1)=>{Y_1.isMongooseDocumentArray=function(A){return Array.isArray(A)&&A.isMongooseDocumentArray}});var HG=C((hW0,Np)=>{var G_1=B7(),pB=Symbol("mongoose#emitted");Np.exports=function A(F,B,$,Z){if(typeof F==="function")try{return B(function(D){if(D!=null){if($!=null&&$.listeners!=null&&$.listeners("error").length>0&&!D[pB])D[pB]=!0,$.emit("error",D);try{F(D)}catch(X){return G_1(()=>{throw X})}return}F.apply(this,arguments)})}catch(D){if($!=null&&$.listeners!=null&&$.listeners("error").length>0&&!D[pB])D[pB]=!0,$.emit("error",D);return F(D)}return Z=Z||global.Promise,new Z((D,X)=>{B(function(J,Y){if(J!=null){if($!=null&&$.listeners!=null&&$.listeners("error").length>0&&!J[pB])J[pB]=!0,$.emit("error",J);return X(J)}if(arguments.length>2)return D(Array.prototype.slice.call(arguments,1));D(Y)})})}});var UG=C((dW0,Mp)=>{Mp.exports=function A(F,B,$){let Z=Object.keys(B.tree),D={};for(let X of Z){if($&&(F.paths[X]||F.nested[X]||F.singleNestedPaths[X]))continue;D[X]=B.tree[X]}F.options._isMerging=!0,F.add(D,null),delete F.options._isMerging,F.callQueue=F.callQueue.concat(B.callQueue),F.method(B.methods),F.static(B.statics);for(let[X,J]of Object.entries(B._userProvidedOptions))if(!(X in F._userProvidedOptions))F.set(X,J);for(let X in B.query)F.query[X]=B.query[X];for(let X in B.virtuals)F.virtuals[X]=B.virtuals[X].clone();F._indexes=F._indexes.concat(B._indexes||[]),F.s.hooks.merge(B.s.hooks,!1)}});var jp=C((Rp,Pp)=>{/*!
 * Module dependencies.
 */var mW0=f1(),Z7=Pp.exports=Rp=function A(){};Z7.ctor=function(){let A=[...arguments],F=function(){Z7.apply(this,arguments),this.paths={},this.states={}};return F.prototype=new Z7,F.prototype.constructor=F,F.prototype.stateNames=A,A.forEach(function(B){F.prototype[B]=function($){this._changeState($,B)}}),F};Z7.prototype._changeState=function A(F,B){let $=this.paths[F];if($===B)return;let Z=this.states[$];if(Z)delete Z[F];this.paths[F]=B,this.states[B]=this.states[B]||{},this.states[B][F]=!0};/*!
 * ignore
 */Z7.prototype.clear=function A(F){if(this.states[F]==null)return;let B=Object.keys(this.states[F]),$=B.length,Z;while($--)Z=B[$],delete this.states[F][Z],delete this.paths[Z]};/*!
 * ignore
 */Z7.prototype.clearPath=function A(F){let B=this.paths[F];if(!B)return;delete this.paths[F],delete this.states[B][F]};Z7.prototype.getStatePaths=function A(F){if(this.states[F]!=null)return this.states[F];return{}};Z7.prototype.some=function A(){let F=this,B=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(B,function($){if(F.states[$]==null)return!1;return Object.keys(F.states[$]).length})};Z7.prototype._iter=function A(F){return function(){let B=[...arguments],$=B.pop();if(!B.length)B=this.stateNames;let Z=this;return B.reduce(function(X,J){if(Z.states[J]==null)return X;return X.concat(Object.keys(Z.states[J]))},[])[F](function(X,J,Y){return $(X,J,Y)})}};Z7.prototype.forEach=function A(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};Z7.prototype.map=function A(){return this.map=this._iter("map"),this.map.apply(this,arguments)};Z7.prototype.clone=function A(){let F=new this.constructor;F.paths={...this.paths};for(let B of this.stateNames){if(!(B in this.states))continue;F.states[B]=this.states[B]==null?this.states[B]:{...this.states[B]}}return F}});var Op=C((Ip,Tp)=>{/*!
 * Dependencies
 */var Q_1=jp(),z_1=Q_1.ctor("require","modify","init","default","ignore");Tp.exports=Ip=b2;function b2(){this.activePaths=new z_1}b2.prototype.strictMode=!0;b2.prototype.fullPath=void 0;b2.prototype.selected=void 0;b2.prototype.shardval=void 0;b2.prototype.saveError=void 0;b2.prototype.validationError=void 0;b2.prototype.adhocPaths=void 0;b2.prototype.removing=void 0;b2.prototype.inserting=void 0;b2.prototype.saving=void 0;b2.prototype.version=void 0;b2.prototype._id=void 0;b2.prototype.ownerDocument=void 0;b2.prototype.populate=void 0;b2.prototype.populated=void 0;b2.prototype.primitiveAtomics=void 0;b2.prototype.wasPopulated=!1;b2.prototype.scope=void 0;b2.prototype.session=null;b2.prototype.pathsToScopes=null;b2.prototype.cachedRequired=null});var iB=C((cW0,_p)=>{/*!
 * Module dependencies.
 */var oL=l4().Binary,q_1=l4().UUID,Sp=f1();function T4(A,F,B){let $=A;if(A==null)$=0;let Z,D,X;if(Array.isArray(F))D=F[0],X=F[1];else Z=F;let J;if(typeof $==="number"||$ instanceof Number)J=Buffer.alloc($);else J=Buffer.from($,Z,B);return Sp.decorate(J,T4.mixin),J.isMongooseBuffer=!0,J[T4.pathSymbol]=D,J[kp]=X,J._subtype=0,J}var H_1=Symbol.for("mongoose#Buffer#_path"),kp=Symbol.for("mongoose#Buffer#_parent");T4.pathSymbol=H_1;/*!
 * Inherit from Buffer.
 */T4.mixin={_subtype:void 0,_markModified:function(){let A=this[kp];if(A)A.markModified(this[T4.pathSymbol]);return this},write:function(){let A=Buffer.prototype.write.apply(this,arguments);if(A>0)this._markModified();return A},copy:function(A){let F=Buffer.prototype.copy.apply(this,arguments);if(A&&A.isMongooseBuffer)A._markModified();return F}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */Sp.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(A){if(!Buffer.prototype[A])return;T4.mixin[A]=function(){let F=Buffer.prototype[A].apply(this,arguments);return this._markModified(),F}});T4.mixin.toObject=function(A){let F=typeof A==="number"?A:this._subtype||0;return new oL(Buffer.from(this),F)};T4.mixin.$toObject=T4.mixin.toObject;T4.mixin.toBSON=function(){return new oL(this,this._subtype||0)};T4.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new q_1(this)};T4.mixin.equals=function(A){if(!Buffer.isBuffer(A))return!1;if(this.length!==A.length)return!1;for(let F=0;F<this.length;++F)if(this[F]!==A[F])return!1;return!0};T4.mixin.subtype=function(A){if(typeof A!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==A)this._markModified();this._subtype=A};/*!
 * Module exports.
 */T4.Binary=oL;_p.exports=T4});var vA=C((U_1)=>{U_1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");U_1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var hA=C((pW0,xp)=>{/*!
 * Module dependencies.
 */var CG=B6(),E_1=vA(),L_1=I5(),w_1=f1();function D7(A,F){if(F&&F.default){let B=F.default;if(Array.isArray(B)&&B.length===0)F.default=Array;else if(!F.shared&&L_1(B)&&Object.keys(B).length===0)F.default=function(){return{}}}CG.call(this,A,F,"Mixed"),this[E_1.schemaMixedSymbol]=!0}D7.schemaName="Mixed";D7.defaultOptions={};/*!
 * Inherits from SchemaType.
 */D7.prototype=Object.create(CG.prototype);D7.prototype.constructor=D7;D7.get=CG.get;D7.set=CG.set;D7.setters=[];D7.prototype.cast=function(A){if(A instanceof Error)return w_1.errorToPOJO(A);return A};D7.prototype.castForQuery=function(A,F){return F};D7.prototype.toJSONSchema=function A(F){return{}};/*!
 * Module exports.
 */xp.exports=D7});var fp=C((iW0,bp)=>{bp.exports=class A{constructor(F,B,$){this.subdocSnapshot=F,this.activePaths=B,this.version=$}}});var KG=C((nW0,gp)=>{/*!
 * Module dependencies.
 */var V_1=t1();class eL extends V_1{constructor(A,F){let B=Array.isArray(F)?"array":"primitive value";super("Tried to set nested object field `"+A+`\` to ${B} \``+F+"`");this.path=A}}Object.defineProperty(eL.prototype,"name",{value:"ObjectExpectedError"});gp.exports=eL});var EG=C((sW0,up)=>{/*!
 * Module dependencies.
 */var N_1=t1();class Aw extends N_1{constructor(A,F,B){super('Parameter "'+F+'" to '+B+'() must be an object, got "'+A.toString()+'" (type '+typeof A+")")}}Object.defineProperty(Aw.prototype,"name",{value:"ObjectParameterError"});up.exports=Aw});var vp=C((aW0,yp)=>{/*!
 * Module dependencies.
 */var M_1=t1();class Fw extends M_1{constructor(A){super("Can't validate() the same doc multiple times in parallel. Document: "+A._doc._id)}}Object.defineProperty(Fw.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */yp.exports=Fw});var Bw=C((tW0,hp)=>{hp.exports=function A(F){let B={},$=Object.keys(F);for(let Z of $){if(Z.indexOf(".")===-1){B[Z]=1;continue}let D=Z.split("."),X=D[0];for(let J=0;J<D.length;++J)if(B[X]=1,J+1<D.length)X=X+"."+D[J+1]}return B}});var mp=C((rW0,dp)=>{dp.exports=function A(F){if(F==null||typeof F!=="object")return!1;return F.$slice==null&&F.$elemMatch==null&&F.$meta==null&&F.$==null}});var LG=C((oW0,cp)=>{var R_1=mp();cp.exports=function A(F,B,$,Z,D,X,J){let Y=Object.keys(F.$__schema.paths),W=Y.length,G=J&&J.skipParentChangeTracking;for(let Q=0;Q<W;++Q){let q,z="",H=Y[Q];if(H==="_id"&&F.$__.skipId)continue;let U=F.$__schema.paths[H],K=U.splitPath(),E=K.length;if(K[E-1]==="$*")continue;let L=!1,V=F._doc;for(let M=0;M<E;++M){if(V==null)break;let O=K[M];if(z+=(!z.length?"":".")+O,$===!0){if(z in B)break}else if($===!1&&B&&!L){let R=U.$isSingleNested||U.$isMongooseDocumentArray;if(z in B&&!R_1(B[z])||M===E-1&&R&&Z!=null&&Z[z])L=!0;else if(Z!=null&&!Z[z])break}if(M===E-1){if(V[O]!==void 0)break;if(D!=null){if(typeof U.defaultValue==="function"){if(!U.defaultValue.$runBeforeSetters&&D)break;if(U.defaultValue.$runBeforeSetters&&!D)break}else if(!D)continue}if(X&&X[z])break;if(B&&$!==null){if($===!0){if(H in B)continue;try{q=U.getDefault(F,!1)}catch(R){F.invalidate(H,R);break}if(typeof q!=="undefined")V[O]=q,$w(F,H,G)}else if(L){try{q=U.getDefault(F,!1)}catch(R){F.invalidate(H,R);break}if(typeof q!=="undefined")V[O]=q,$w(F,H,G)}}else{try{q=U.getDefault(F,!1)}catch(R){F.invalidate(H,R);break}if(typeof q!=="undefined")V[O]=q,$w(F,H,G)}}else V=V[O]}}};/*!
 * ignore
 */function $w(A,F,B){if(A.$__.activePaths.default(F),!B&&A.$isSubdocument&&A.$isSingleNested&&A.$parent()!=null)A.$parent().$__.activePaths.default(A.$__pathRelativeToParent(F))}});var wG=C((eW0,pp)=>{/*!
 * ignore
 */pp.exports=function A(F,B,$){$=$||{};let Z=$.skipDocArrays,D=0;if(!F)return D;for(let X of Object.keys(F.$__.activePaths.getStatePaths("modify"))){if(Z){let J=F.$__schema.path(X);if(J&&J.$isMongooseDocumentArray)continue}if(X.startsWith(B+".")){if(F.$__.activePaths.clearPath(X),++D,F.$isSubdocument)lp(F,X)}}return D};function lp(A,F,B=new Set){if(B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");let $=A.$parent(),Z=A.$__pathRelativeToParent(void 0,!1)+"."+F;if($.$__.activePaths.clearPath(Z),$.$isSubdocument)lp($,Z,B)}});var NG=C((x_1)=>{var P_1=T2(),j_1=w1().documentSchemaSymbol,I_1=t7().internalToObjectOptions,T_1=f1(),nB,O_1=w1().getSymbol,VG=w1().scopeSymbol,ip=T_1.isPOJO;/*!
 * exports
 */x_1.compile=np;x_1.defineKey=sp;var S_1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),k_1=Object.freeze({noDottedPath:!0});function np(A,F,B,$){nB=nB||X7();let Z=$.typeKey;for(let D of Object.keys(A)){let X=A[D],Y=ip(X)&&Object.keys(X).length>0&&(!X[Z]||Z==="type"&&ip(X.type)&&X.type.type)?X:null;sp({prop:D,subprops:Y,prototype:F,prefix:B,options:$})}}function sp({prop:A,subprops:F,prototype:B,prefix:$,options:Z}){nB=nB||X7();let D=($?$+".":"")+A;$=$||"";let X=$?Object.freeze({}):k_1;if(F)Object.defineProperty(B,A,{enumerable:!0,configurable:!0,get:function(){let J=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[D]){let Y=Object.create(nB.prototype,__1(this));if(!$)Y.$__[VG]=this;Y.$__.nestedPath=D,Object.defineProperty(Y,"schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,j_1,{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return P_1(J.get(D,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(Y,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return J.get(D,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(Y,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return J.get(D,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(Y,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(Y,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(D,null,S_1)||{}).length===0}}),Object.defineProperty(Y,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),np(F,Y,D,Z),this.$__.getters[D]=Y}return this.$__.getters[D]},set:function(J){if(J!=null&&J.$__isNested)J=J.$__get();else if(J instanceof nB&&!J.$__isNested)J=J.$toObject(I_1);(this.$__[VG]||this).$set(D,J)}});else Object.defineProperty(B,A,{enumerable:!0,configurable:!0,get:function(){return this[O_1].call(this.$__[VG]||this,D,null,X)},set:function(J){this.$set.call(this.$__[VG]||this,D,J)}})}function __1(A){let F={};return Object.getOwnPropertyNames(A).forEach(function(B){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(B)===-1)return;F[B]=Object.getOwnPropertyDescriptor(A,B),F[B].enumerable=!1}),F}});var tp=C((FG0,ap)=>{ap.exports=function A(F){if(F==null)return null;return Object.keys(F)[0]}});var sB=C((v_1)=>{/*!
 * Module dependencies.
 */var g_1=l4().Binary,rp=f6(),op=kD(),u_1=r4(),y_1=A1("util");v_1.flatten=ep;v_1.modifiedPaths=Ai;/*!
 * ignore
 */function ep(A,F,B,$){let Z;if(A&&op(A)&&!Buffer.isBuffer(A))Z=Object.keys(A.toObject({transform:!1,virtuals:!1})||{});else Z=Object.keys(A||{});let D=Z.length,X={};F=F?F+".":"";for(let J=0;J<D;++J){let Y=Z[J],W=A[Y];X[F+Y]=W;let G=$&&$.path&&$.path(F+Y),Q=$&&$.nested&&$.nested[F+Y];if(G&&G.instance==="Mixed")continue;if(Fi(W)){if(B&&B.skipArrays&&Array.isArray(W))continue;let q=ep(W,F+Y,B,$);for(let z in q)X[z]=q[z];if(Array.isArray(W))X[F+Y]=W}if(Q){let q=Object.keys($.paths);for(let z of q)if(z.startsWith(F+Y+".")&&!X.hasOwnProperty(z))X[z]=void 0}}return X}/*!
 * ignore
 */function Ai(A,F,B,$=null){if(A==null||typeof A!=="object")return;if($==null)$={raw:{update:A,path:F},trace:new WeakSet};if($.trace.has(A))throw new u_1(`a circular reference in the update value, updateValue:
${y_1.inspect($.raw.update,{showHidden:!1,depth:1})}
updatePath: '${$.raw.path}'`);$.trace.add(A);let Z=Object.keys(A||{}),D=Z.length;B=B||{},F=F?F+".":"";for(let X=0;X<D;++X){let J=Z[X],Y=A[J],W=F+J;if(B[W]=!0,!Buffer.isBuffer(Y)&&op(Y))Y=Y.toObject({transform:!1,virtuals:!1});if(Fi(Y))Ai(Y,F+J,B,$)}return $.trace.delete(A),B}/*!
 * ignore
 */function Fi(A){return A&&typeof A==="object"&&!(A instanceof Date)&&!rp(A,"ObjectId")&&(!Array.isArray(A)||A.length!==0)&&!(A instanceof Buffer)&&!rp(A,"Decimal128")&&!(A instanceof g_1)}});var f2=C(($G0,Bi)=>{Bi.exports=function A(F,B,$){let Z,D=!1;if(typeof B==="string"){if(B.indexOf(".")===-1){let Y=Zw(F,B);if(Y==null)return $;return Y}Z=B.split(".")}else if(D=!0,Z=B,Z.length===1){let Y=Zw(F,Z[0]);if(Y==null)return $;return Y}let X=B,J=F;for(let Y of Z){if(J==null)return $;if(!D&&J[X]!=null)return J[X];if(J=Zw(J,Y),!D)X=X.substr(Y.length+1)}return J==null?$:J};function Zw(A,F){if(A==null)return A;if(A instanceof Map)return A.get(F);return A[F]}});var Dw=C((ZG0,Zi)=>{var $i=f6();Zi.exports=function A(F,B){if(typeof F==="string"&&typeof B==="string")return F===B;if(typeof F==="number"&&typeof B==="number")return F===B;if($i(F,"ObjectId")&&$i(B,"ObjectId"))return F.toString()===B.toString();return!1}});var MG=C((DG0,Di)=>{var m_1=Dw();Di.exports=function A(F,B){if(F==null||F.discriminators==null)return null;for(let $ of Object.keys(F.discriminators)){let Z=F.discriminators[$];if(Z.discriminatorMapping==null)continue;if(m_1(Z.discriminatorMapping.value,B))return Z}return null}});var Ji=C((XG0,Xi)=>{var c_1=f2(),l_1=MG();Xi.exports=function A(F,B,$){$=$||{};let Z=$.typeOnly,D=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split("."),X=null,J="adhocOrUndefined",Y=l_1(F.schema,F.get(F.schema.options.discriminatorKey))||F.schema;for(let W=0;W<D.length;++W){let G=D.slice(0,W+1).join(".");if(X=Y.path(G),X==null){J="adhocOrUndefined";continue}if(X.instance==="Mixed")return Z?"real":X;if(J=Y.pathType(G),(X.$isSingleNested||X.$isMongooseDocumentArrayElement)&&X.schema.discriminators!=null){let Q=X.schema.discriminators,q=F.get(G+"."+c_1(X,"schema.options.discriminatorKey"));if(q==null||Q[q]==null)continue;let z=D.slice(W+1).join(".");return A(F.get(G),z,$)}}return Z?J:X}});var Wi=C((JG0,Yi)=>{var p_1=f2();Yi.exports=function A(F,B,$){let Z=$!=null?Object.keys(p_1(F.tree,$,{})):Object.keys(F.tree),D=new Set(Object.keys(B)),X;if(D.size>1){X=new Set;for(let J of Z)if(D.has(J))X.add(J);for(let J of D)if(!X.has(J))X.add(J);X=Array.from(X)}else X=Array.from(D);return X}});var Qi=C((YG0,Gi)=>{Gi.exports=function A(F,B){if(B.length===1)return;let $=B[0],Z=void 0;for(let D=0;D<B.length-1;++D){let X=F.path($);if(X&&X.schema)Z=X.schema.options.strict,F=X.schema,$=X.$isMongooseDocumentArray&&!isNaN(B[D+1])?"":B[D+1];else $+=$.length?"."+B[D+1]:B[D+1]}return Z}});var RG=C((WG0,zi)=>{var i_1=f1(),n_1=new Set(["__index","__parentArray","_doc"]);zi.exports=function A(F,B){if(i_1.isPOJO(F)&&F.$__!=null&&F._doc!=null){if(B){let $={};for(let Z of Object.keys(F)){if(typeof Z==="symbol")continue;if(Z[0]==="$")continue;if(n_1.has(Z))continue;$[Z]=F[Z]}return{...F._doc,...$}}return F._doc}return F}});var aB=C((GG0,qi)=>{/*!
 * ignore
 */qi.exports=function A(F){if(F==null)return!0;if(typeof F==="object")return!("$meta"in F)&&!("$slice"in F);return!0}});var tB=C((QG0,Hi)=>{var s_1=aB(),a_1=yB();/*!
 * ignore
 */Hi.exports=function A(F){if(F==null)return null;let B=Object.keys(F),$=null;if(B.length===1&&B[0]==="_id")$=!F._id;else for(let Z=0;Z<B.length;++Z){let D=B[Z];if(D!=="_id"&&s_1(F[D])){if($=a_1(F[D])?A(F[D])??$:!F[D],$!=null)break}}return $}});var Xw=C((zG0,Ui)=>{var t_1=aB();Ui.exports=function A(F,B){if(F==null)return!1;if(B==="_id")return F._id===0;let $=Object.keys(F),Z=null;for(let D of $)if(t_1(F[D])){Z=F[B]===1?"inclusive":"exclusive";break}if(Z==="inclusive")return F[B]!==1;if(Z==="exclusive")return F[B]===0;return!1}});var Jw=C((qG0,Ci)=>{var r_1=f1();Ci.exports=function A(F,B){if(F._doc._id==null||B==null||B.length===0)return;let $=String(F._doc._id);for(let Z of B){if(Z.isVirtual)continue;let X=Z.path.split(".");for(let J=0;J<X.length-1;++J){let Y=X.slice(0,J+1).join("."),W=X.slice(J+1).join("."),G=F.get(Y);if(G==null)continue;if(r_1.isMongooseDocumentArray(G)){for(let Q=0;Q<G.length;++Q)if(G[Q])G[Q].populated(W,Z._docs[$]==null?void 0:Z._docs[$][Q],Z);break}}}}});var Yw=C((HG0,Ei)=>{var{isPOJO:o_1}=f1();Ei.exports=Ki;function Ki(A){let F=Object.keys(A),B=F.length,$,Z,D;while(B--){if(Z=F[B],D=A[Z],o_1(D))A[Z]=Ki(D);if(A[Z]===void 0){delete A[Z];continue}$=!0}return $?A:void 0}});var Ww=C((UG0,Li)=>{var e_1=/\./g;Li.exports=function A(F){if(F.indexOf(".")===-1)return[F];let B=F.split(e_1),$=B.length,Z=new Array($),D="";for(let X=0;X<$;++X)D+=D.length!==0?"."+B[X]:B[X],Z[X]=D;return Z}});var Vi=C((CG0,wi)=>{wi.exports=function A(F,B,$,Z,D){let X=Object.keys(F).reduce((Y,W)=>Y||W.startsWith(B+"."),!1),J=B+"."+$.options.discriminatorKey;if(!X&&D.length===1&&D[0]===J)Z.splice(Z.indexOf(J),1)}});var J7=C((KG0,Ni)=>{var Ax1=Dw();Ni.exports=function A(F,B){if(F==null)return null;for(let $ of Object.keys(F)){let Z=F[$];if(Z.schema&&Z.schema.discriminatorMapping&&Ax1(Z.schema.discriminatorMapping.value,B))return Z}return null}});var PG=C((EG0,Mi)=>{/*!
 * ignore
 */Mi.exports=function A(F,B){let $=B.split("."),Z="",D,X,J;for(let Y=0;Y<$.length;++Y)if(Z+=Z.length?".":""+$[Y],F[Z]){X=Object.keys(F),J=X.length;for(D=0;D<J;++D)if(X[Y].indexOf(Z+".")===0&&X[Y].indexOf(B)!==0)continue;return!0}return!1}});var yD=C((Jx1)=>{/*!
 * Module dependencies
 */var Ri=rL(),Fx1=Vi(),Pi=f2(),Bx1=J7(),$x1=aB(),Zx1=T2(),Dx1=PG();Jx1.preparePopulationOptionsMQ=function A(F,B){let $=F._mongooseOptions.populate,Z=Object.keys($).reduce((J,Y)=>J.concat([$[Y]]),[]);if(B.lean!=null)Z.filter((J)=>(J&&J.options&&J.options.lean)==null).forEach(Xx1(B.lean));let D=F&&F.options&&F.options.session||null;if(D!=null)Z.forEach((J)=>{if(J.options==null){J.options={session:D};return}if(!("session"in J.options))J.options.session=D});let X=F._fieldsForExec();for(let J=0;J<Z.length;++J)if(Z[J]instanceof Ri)Z[J]=new Ri({...Z[J],_queryProjection:X,_localModel:F.model});else Z[J]._queryProjection=X,Z[J]._localModel=F.model;return Z};Jx1.createModel=function A(F,B,$,Z,D){F.hooks.execPreSync("createModel",B);let X=F.schema?F.schema.discriminatorMapping:null,J=X&&X.isRoot?X.key:null,Y=B[J];if(J&&Y&&F.discriminators){let G=F.discriminators[Y]||Bx1(F.discriminators,Y);if(G){let Q=Zx1(Z);return Jx1.applyPaths(Q,G.schema),new G(void 0,Q,!0)}}let W={skipId:!0,isNew:!1,willInit:!0};if(D!=null&&"defaults"in D)W.defaults=D.defaults;return new F(void 0,$,W)};/*!
 * ignore
 */Jx1.createModelAndInit=function A(F,B,$,Z,D,X,J){let Y=X?{populated:X}:void 0,W=Jx1.createModel(F,B,$,Z,D);try{W.$init(B,Y,J)}catch(G){J(G,W)}};/*!
 * ignore
 */Jx1.applyPaths=function A(F,B,$){let Z,D,X=new Set;if(F){D=Object.keys(F);let q=[];for(let z=0;z<D.length;++z){let H=D[z];if(D[z][0]!=="-")continue;if(delete F[H],H==="-_id")F._id=0;else q.push(H.slice(1))}D=Object.keys(F);for(let z=0;z<D.length;++z){if(D[z][0]==="+")continue;let H=F[D[z]];if(!$x1(H))continue;if(D[z]==="_id"&&D.length>1)continue;if(D[z]===B.options.discriminatorKey&&D.length>1&&H!=null&&!H)continue;Z=!H;break}for(let z of q){let H=B.path(z);if(!H||!H.selected||Z!==!1)F[z]=0,Z=!0;else if(H&&H.selected&&Z===!1)X.add(z)}}let J=[],Y=[],W=[];switch(G(B),Z){case!0:for(let q of Y)F[q]=0;break;case!1:if(B&&B.paths._id&&B.paths._id.options&&B.paths._id.options.select===!1)F._id=0;for(let q of J){if(X.has(q))continue;if(Dx1(F,q))continue;F[q]=F[q]||1}break;case void 0:if(F==null)break;for(let q of Object.keys(F||{}))if(q.startsWith("+"))delete F[q];for(let q of Y){if(F[q]!=null)continue;F[q]=0}break}function G(q,z){if(z||(z=""),W.indexOf(q)!==-1)return[];W.push(q);let H=[];return q.eachPath(function(U,K){if(z)U=z+"."+U;if(K.$isSchemaMap||U.endsWith(".$*")){let L="+"+U,V=F&&L in F;if(K.options&&K.options.select===!1&&!V)Y.push(U);return}let E=Q(U,K);if(E==null&&!Array.isArray(K)&&K.$isMongooseArray&&!K.$isMongooseDocumentArray)E=Q(U,K.caster);if(E!=null)H.push(E);if(K.schema){let L=G(K.schema,U);if(Z===!1)Fx1(F,U,K.schema,J,L)}}),W.pop(),H}function Q(q,z){if(F==null)return;if(typeof z.selected!=="boolean")return;if(z.selected===!1&&F[q]){if($)F[q]=0;return}if(!Z&&z.selected&&q===B.options.discriminatorKey&&F[q]!=null&&!F[q]){delete F[q];return}if(Z===!1&&z.selected&&F[q]!=null&&!F[q]){delete F[q];return}let H="+"+q;if(F&&H in F){if(delete F[H],Z===!1&&D.length>1&&!~D.indexOf(q)&&!$)F[q]=1;else if(Z==null&&$&&z.selected===!1)F[q]=0;return}let K=q.split("."),E="";for(let L=0;L<K.length;++L)if(E+=E.length?"."+K[L]:K[L],Y.indexOf(E)!==-1)return;if(!Z&&(z&&z.options&&z.options.$skipDiscriminatorCheck||!1)){let L="";for(let V=0;V<K.length;++V){L+=(L.length===0?"":".")+K[V];let M=Pi(F,L,!1)||Pi(F,L+".$",!1);if(M&&typeof M!=="object")return}}return(z.selected?J:Y).push(q),q}};function Xx1(A){return function(F){if(F.options||(F.options={}),A!=null&&Array.isArray(A.virtuals))A=Object.assign({},A),A.virtuals=A.virtuals.filter((B)=>typeof B==="string"&&B.startsWith(F.path+".")).map((B)=>B.slice(F.path.length+1));F.options.lean=A}}});var Gw=C((wG0,Ii)=>{function Qx1(A){return!!A&&(typeof A==="object"||typeof A==="function")&&typeof A.then==="function"}Ii.exports=Qx1});var Oi=C((VG0,Ti)=>{Ti.exports=function A(F,B,$){let Z=B[0],D=$,X=F;for(let J=0;J<B.length-1;++J){let Y=D.path(Z);if(Y&&Y.schema){let W=X.get(Z);if(D=Y.schema,Z=B[J+1],Array.isArray(W)&&!isNaN(Z))W=W[Z],Z="";if(W==null)break;X=W}else Z+=Z.length?"."+B[J+1]:B[J+1]}return X}});var jG=C((NG0,ki)=>{var C3=X7(),zx1=B7(),qx1=t7().internalToObjectOptions,Si=A1("util"),Hx1=f1();ki.exports=d0;function d0(A,F,B,$,Z){if(typeof $==="object"&&$!=null&&Z==null)Z=$,$=void 0;if(B!=null){let D={isNew:B.isNew};if("defaults"in B.$__)D.defaults=B.$__.defaults;Z=Object.assign(D,Z)}if(Z!=null&&Z.path!=null)this.$basePath=Z.path;C3.call(this,A,F,$,Z),delete this.$__.priorDoc}d0.prototype=Object.create(C3.prototype);Object.defineProperty(d0.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(d0.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */d0.prototype.toBSON=function(){return this.toObject(qx1)};d0.prototype.save=async function A(F){if(F=F||{},!F.suppressWarning)Hx1.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return new Promise((B,$)=>{this.$__save((Z)=>{if(Z!=null)return $(Z);B(this)})})};d0.prototype.$__fullPath=function(A){if(!this.$__.fullPath)this.ownerDocument();return A?this.$__.fullPath+"."+A:this.$__.fullPath};d0.prototype.$__pathRelativeToParent=function(A){if(A==null)return this.$basePath;return[this.$basePath,A].join(".")};d0.prototype.$__save=function(A){return zx1(()=>A(null,this))};/*!
 * ignore
 */d0.prototype.$isValid=function(A){let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)return F.$isValid(B);return C3.prototype.$isValid.call(this,A)};/*!
 * ignore
 */d0.prototype.markModified=function(A){C3.prototype.markModified.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F==null||B==null)return;let $=this.$__pathRelativeToParent().replace(/\.$/,"");if(F.isDirectModified($)||this.isNew)return;this.$__parent.markModified(B,this)};/*!
 * ignore
 */d0.prototype.isModified=function(A,F,B){let $=this.$parent();if($!=null){if(Array.isArray(A)||typeof A==="string")A=Array.isArray(A)?A:A.split(" "),A=A.map((Z)=>this.$__pathRelativeToParent(Z)).filter((Z)=>Z!=null);else if(!A)A=this.$__pathRelativeToParent();return $.$isModified(A,F,B)}return C3.prototype.isModified.call(this,A,F,B)};d0.prototype.$markValid=function(A){C3.prototype.$markValid.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)F.$markValid(B)};/*!
 * ignore
 */d0.prototype.invalidate=function(A,F,B){C3.prototype.invalidate.call(this,A,F,B);let $=this.$parent(),Z=this.$__pathRelativeToParent(A);if($!=null&&Z!=null)$.invalidate(Z,F,B);else if(F.kind==="cast"||F.name==="CastError"||Z==null)throw F;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */d0.prototype.$ignore=function(A){C3.prototype.$ignore.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)F.$ignore(B)};d0.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let A=this,F=[],B=new Set([A]);while(!0){if(typeof A.$__pathRelativeToParent!=="function")break;F.unshift(A.$__pathRelativeToParent(void 0,!0));let $=A.$parent();if($==null)break;if(A=$,B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");B.add(A)}return this.$__.fullPath=F.join("."),this.$__.ownerDocument=A,this.$__.ownerDocument};/*!
 * ignore
 */d0.prototype.$__fullPathWithIndexes=function(){let A=this,F=[],B=new Set([A]);while(!0){if(typeof A.$__pathRelativeToParent!=="function")break;F.unshift(A.$__pathRelativeToParent(void 0,!1));let $=A.$parent();if($==null)break;if(A=$,B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");B.add(A)}return F.join(".")};d0.prototype.parent=function(){return this.$__parent};d0.prototype.$parent=d0.prototype.parent;d0.prototype.$__deleteOne=function(A){if(A==null)return;return A(null,this)};d0.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};d0.prototype.deleteOne=function(A,F){if(typeof A==="function")F=A,A=null;if(Ux1(this),!A||!A.noop){this.$__removeFromParent();let B=this.ownerDocument();B.$__.removedSubdocs=B.$__.removedSubdocs||[],B.$__.removedSubdocs.push(this)}return this.$__deleteOne(F)};/*!
 * ignore
 */d0.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};d0.prototype.inspect=function(){return this.toObject()};if(Si.inspect.custom)d0.prototype[Si.inspect.custom]=d0.prototype.inspect;d0.prototype.$toObject=function A(F,B){let $=C3.prototype.$toObject.call(this,F,B);if(Object.keys($).length===0&&F?._calledWithOptions!=null){if((F._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??F.minimize)&&!this.constructor.$__required)return}return $};function Ux1(A){let F=A.ownerDocument();function B(){F.$removeListener("save",B),F.$removeListener("deleteOne",B),A.emit("deleteOne",A),A.constructor.emit("deleteOne",A)}F.$on("save",B),F.$on("deleteOne",B)}});var rB=C((MG0,bi)=>{/*!
 * Module dependencies.
 */var _i=A1("events").EventEmitter,xi=jG(),Cx1=f1(),vD=w1().documentArrayParent;function e4(A,F,B,$,Z){if(Cx1.isMongooseDocumentArray(F))this.__parentArray=F,this[vD]=F.$parent();else this.__parentArray=void 0,this[vD]=void 0;this.$setIndex(Z),this.$__parent=this[vD];let D;if(typeof B==="object"&&B!=null)D={isNew:!0,...B},B=void 0;else D={isNew:!0};xi.call(this,A,$,this[vD],B,D)}/*!
 * Inherit from Subdocument
 */e4.prototype=Object.create(xi.prototype);e4.prototype.constructor=e4;Object.defineProperty(e4.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(e4.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let A in _i.prototype)e4[A]=_i.prototype[A];/*!
 * ignore
 */e4.prototype.$setIndex=function(A){if(this.__index=A,this.$__!=null&&this.$__.validationError!=null){let F=Object.keys(this.$__.validationError.errors);for(let B of F)this.invalidate(B,this.$__.validationError.errors[B])}};/*!
 * ignore
 */e4.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */e4.prototype.$__removeFromParent=function(){let A=this._doc._id;if(!A)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:A})};e4.prototype.$__fullPath=function(A,F){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(F)return A?this.$__.fullPath+"."+A:this.$__.fullPath;return A?this.$__.fullPath+"."+this.__index+"."+A:this.$__.fullPath+"."+this.__index};e4.prototype.$__pathRelativeToParent=function(A,F){if(this.__index==null||(!this.__parentArray||!this.__parentArray.$path))return null;if(F)return A==null?this.__parentArray.$path():this.__parentArray.$path()+"."+A;if(A==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+A};e4.prototype.$parent=function(){return this[vD]};e4.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */bi.exports=e4});var OG=C((RG0,mi)=>{var qw=X7(),Qw=rB(),Kx1=t1(),fi=wG(),Ex1=T2(),gi=t7().internalToObjectOptions,vi=O9(),J4=f1(),zw=f6(),K3=w1().arrayAtomicsSymbol,E3=w1().arrayParentSymbol,L3=w1().arrayPathSymbol,A9=w1().arraySchemaSymbol,hi=w1().populateModelSymbol,Lx1=Symbol("mongoose#Array#sliced"),ui=Array.prototype.push;/*!
 * ignore
 */var TG={$__getAtomics(){let A=[],F=Object.keys(this[K3]||{}),B=F.length,$=Object.assign({},gi,{_isNested:!0});if(B===0)return A[0]=["$set",this.toObject($)],A;while(B--){let Z=F[B],D=this[K3][Z];if(J4.isMongooseObject(D))D=D.toObject($);else if(Array.isArray(D))D=this.toObject.call(D,$);else if(D!=null&&Array.isArray(D.$each))D.$each=this.toObject.call(D.$each,$);else if(D!=null&&typeof D.valueOf==="function")D=D.valueOf();if(Z==="$addToSet")D={$each:D};A.push([Z,D])}return A},$atomics(){/*!
   * ignore
   */return this[K3]},$parent(){/*!
   * ignore
   */return this[E3]},$path(){/*!
   * ignore
   */return this[L3]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let A=this.__array;if(A._shifted)return;return A._shifted=!0,[].shift.call(A)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[A9]},_cast(A){let F=!1,B,$=this[E3];if($)F=$.$populated(this[L3],!0);if(F&&A!==null&&A!==void 0){if(B=F.options[hi],B==null)throw new Kx1("No populated model found for path `"+this[L3]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(A)||zw(A,"ObjectId")||!J4.isObject(A))A={_id:A};if(!(A.schema&&A.schema.discriminatorMapping&&A.schema.discriminatorMapping.key!==void 0))A=new B(A);return this[A9].caster.applySetters(A,$,!0)}return this[A9].caster.applySetters(A,$,!1)},_mapCast(A,F){return this._cast(A,this.length+F)},_markModified(A){let F=this[E3],B;if(F){if(B=this[L3],arguments.length)B=B+"."+A;if(B!=null&&B.endsWith(".$"))return this;F.markModified(B,arguments.length!==0?A:F)}return this},_registerAtomic(A,F){if(this[Lx1])return;if(A==="$set")return this[K3]={$set:F},fi(this[E3],this[L3]),this._markModified(),this;let B=this[K3];if(A==="$pop"&&!("$pop"in B)){let Z=this;this[E3].once("save",function(){Z._popped=Z._shifted=null})}if(B.$set||Object.keys(B).length&&!(A in B))return this[K3]={$set:this},this;let $;if(A==="$pullAll"||A==="$addToSet")B[A]||(B[A]=[]),B[A]=B[A].concat(F);else if(A==="$pullDocs"){let Z=B.$pull||(B.$pull={});if(F[0]instanceof Qw)$=Z.$or||(Z.$or=[]),Array.prototype.push.apply($,F.map((D)=>{return D.toObject({transform:(X,J)=>{if(D==null||D.$__==null)return J;return Object.keys(D.$__.activePaths.getStatePaths("default")).forEach((Y)=>{vi.unset(Y,J),di(J,Y)}),J},virtuals:!1})}));else $=Z._id||(Z._id={$in:[]}),$.$in=$.$in.concat(F)}else if(A==="$push")if(B.$push=B.$push||{$each:[]},F!=null&&J4.hasUserDefinedProperty(F,"$each"))B.$push=F;else if(F.length===1)B.$push.$each.push(F[0]);else if(F.length<1e4)B.$push.$each.push(...F);else for(let Z of F)B.$push.$each.push(Z);else B[A]=F;return this},addToSet(){IG(this,arguments),yi(this,arguments);let A=[].map.call(arguments,this._mapCast,this),F=[],B="";if(A[0]instanceof Qw)B="doc";else if(A[0]instanceof Date)B="date";else if(zw(A[0],"ObjectId"))B="ObjectId";let $=J4.isMongooseArray(A)?A.__array:A,Z=J4.isMongooseArray(this)?this.__array:this;return $.forEach(function(D){let X,J=+D;switch(B){case"doc":X=this.some(function(Y){return Y.equals(D)});break;case"date":X=this.some(function(Y){return+Y===J});break;case"ObjectId":X=this.find((Y)=>Y.toString()===D.toString());break;default:X=~this.indexOf(D);break}if(!X)this._markModified(),Z.push(D),this._registerAtomic("$addToSet",D),[].push.call(F,D)},this),F},hasAtomics(){if(!J4.isPOJO(this[K3]))return 0;return Object.keys(this[K3]).length},includes(A,F){return this.indexOf(A,F)!==-1},indexOf(A,F){if(zw(A,"ObjectId"))A=A.toString();F=F==null?0:F;let B=this.length;for(let $=F;$<B;++$)if(A==this[$])return $;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let A=[].map.call(arguments,this._mapCast,this);this._markModified();let F=[].push.apply(this,A);return this._registerAtomic("$set",this),F},pop(){this._markModified();let A=[].pop.call(this);return this._registerAtomic("$set",this),A},pull(){let A=[].map.call(arguments,(Z,D)=>this._cast(Z,D,{defaults:!1}),this),F=this[E3].get(this[L3]);if(J4.isMongooseArray(F))F=F.__array;let B=F.length,$;this._markModified();while(B--)if($=F[B],$ instanceof qw){if(A.some(function(D){return $.equals(D)}))F.splice(B,1)}else if(~this.indexOf.call(A,$))F.splice(B,1);if(A[0]instanceof Qw)this._registerAtomic("$pullDocs",A.map(function(Z){let D=Z.$__getValue("_id");if(D===void 0||Z.$isDefault("_id"))return Z;return D}));else this._registerAtomic("$pullAll",A);if(fi(this[E3],this[L3])>0)this._registerAtomic("$set",this);return this},push(){let A=arguments,F=A,B=A[0]!=null&&J4.hasUserDefinedProperty(A[0],"$each"),$=J4.isMongooseArray(this)?this.__array:this;if(B)F=A[0],A=A[0].$each;if(this[A9]==null)return ui.apply(this,A);IG(this,A),yi(this,A),A=[].map.call(A,this._mapCast,this);let Z,D=this[K3];if(this._markModified(),B)if(F.$each=A,(D.$push&&D.$push.$each&&D.$push.$each.length||0)!==0&&D.$push.$position!=F.$position){if(F.$position!=null)[].splice.apply($,[F.$position,0].concat(A)),Z=$.length;else Z=[].push.apply($,A);this._registerAtomic("$set",this)}else if(F.$position!=null)[].splice.apply($,[F.$position,0].concat(A)),Z=this.length;else Z=[].push.apply($,A);else F=A,Z=ui.apply($,A);return this._registerAtomic("$push",F),Z},remove(){return this.pull.apply(this,arguments)},set(A,F,B){let $=this.__array;if(B)return $[A]=F,this;let Z=TG._cast.call(this,F,A);return TG._markModified.call(this,A),$[A]=Z,this},shift(){let A=J4.isMongooseArray(this)?this.__array:this;this._markModified();let F=[].shift.call(A);return this._registerAtomic("$set",this),F},sort(){let A=J4.isMongooseArray(this)?this.__array:this,F=[].sort.apply(A,arguments);return this._registerAtomic("$set",this),F},splice(){let A,F=J4.isMongooseArray(this)?this.__array:this;if(this._markModified(),IG(this,Array.prototype.slice.call(arguments,2)),arguments.length){let B;if(this[A9]==null)B=arguments;else{B=[];for(let $=0;$<arguments.length;++$)B[$]=$<2?arguments[$]:this._cast(arguments[$],arguments[0]+($-2))}A=[].splice.apply(F,B),this._registerAtomic("$set",this)}return A},toBSON(){/*!
   * ignore
   */return this.toObject(gi)},toObject(A){let F=J4.isMongooseArray(this)?this.__array:this;if(A&&A.depopulate)return A=Ex1(A),A._isNested=!0,[].concat(F).map(function(B){return B instanceof qw?B.toObject(A):B});return[].concat(F)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){IG(this,arguments);let A;if(this[A9]==null)A=arguments;else A=[].map.call(arguments,this._cast,this);let F=J4.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(F,A),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function wx1(A,F){if(!F)return!1;for(let B of A){if(B==null)return!1;let $=B.constructor;if(!(B instanceof qw)||$.modelName!==F&&$.baseModelName!==F)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function di(A,F,B){if(typeof F==="string"){if(F.indexOf(".")===-1)return;F=vi.stringToParts(F)}if(B=B||0,B>=F.length)return;if(A==null||typeof A!=="object")return;if(di(A[F[0]],F,B+1),A[F[0]]!=null&&typeof A[F[0]]==="object"&&Object.keys(A[F[0]]).length===0)delete A[F[0]]}/*!
 * ignore
 */function IG(A,F){let B=A==null?null:A[A9]&&A[A9].caster&&A[A9].caster.options&&A[A9].caster.options.ref||null;if(A.length===0&&F.length!==0){if(wx1(F,B))A[E3].$populated(A[L3],[],{[hi]:F[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function yi(A,F){let B=A==null?null:A[A9]&&A[A9].caster&&A[A9].caster.options&&A[A9].caster.options.ref||null,$=A[E3],Z=A[L3];if(!B||!$.populated(Z))return;for(let D of F){if(D==null)continue;if(typeof D!=="object"||D instanceof String||D instanceof Number||D instanceof Buffer||J4.isMongooseType(D)){$.depopulate(Z);break}}}var Vx1=["filter","flat","flatMap","map","slice"];for(let A of Vx1){if(Array.prototype[A]==null)continue;TG[A]=function(){let F=J4.isMongooseArray(this)?this.__array:this,B=[].concat(F);return B[A].apply(B,arguments)}}mi.exports=TG});var Uw=C((ni,si)=>{/*!
 * Module dependencies.
 */var Hw=OG(),SG=w1().arrayAtomicsSymbol,Nx1=w1().arrayAtomicsBackupSymbol,ci=w1().arrayParentSymbol,Mx1=w1().arrayPathSymbol,li=w1().arraySchemaSymbol,pi=Array.prototype.push,ii=/^\d+$/;function Rx1(A,F,B,$){let Z;if(Array.isArray(A)){let J=A.length;if(J===0)Z=new Array;else if(J===1)Z=new Array(1),Z[0]=A[0];else if(J<1e4)Z=new Array,pi.apply(Z,A);else{Z=new Array;for(let Y=0;Y<J;++Y)pi.call(Z,A[Y])}}else Z=[];let D={[SG]:{},[Nx1]:void 0,[Mx1]:F,[li]:$,[ci]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:Z};if(A&&A[SG]!=null)D[SG]=A[SG];if(B!=null&&B.$__)D[ci]=B,D[li]=$||B.schema.path(F);let X=new Proxy(Z,{get:function(J,Y){if(D.hasOwnProperty(Y))return D[Y];if(Hw.hasOwnProperty(Y))return Hw[Y];if($&&$.virtuals&&$.virtuals.hasOwnProperty(Y))return $.virtuals[Y].applyGetters(void 0,J);if(typeof Y==="string"&&ii.test(Y)&&$?.$embeddedSchemaType!=null)return $.$embeddedSchemaType.applyGetters(Z[Y],B);return Z[Y]},set:function(J,Y,W){if(typeof Y==="string"&&ii.test(Y))Hw.set.call(X,Y,W,!1);else if(D.hasOwnProperty(Y))D[Y]=W;else if($&&$.virtuals&&$.virtuals.hasOwnProperty(Y))$.virtuals[Y].applySetters(W,J);else Z[Y]=W;return!0}});return X}/*!
 * Module exports.
 */si.exports=ni=Rx1});var Kw=C((PG0,ti)=>{var ai=f6(),Cw=U3();ti.exports=function A(F){if(F==null)return F;if(ai(F,"ObjectId"))return F;if(F._id){if(ai(F._id,"ObjectId"))return F._id;if(F._id.toString instanceof Function)return new Cw(F._id.toString())}if(F.toString instanceof Function)return new Cw(F.toString());return new Cw(F)}});var An=C((jG0,ei)=>{var kG=OG(),Px1=X7(),jx1=Kw(),ri=J7(),Ix1=t7().internalToObjectOptions,_G=f1(),Ew=f6(),bG=w1().arrayParentSymbol,ww=w1().arrayPathSymbol,Lw=w1().arraySchemaSymbol,oi=w1().documentArrayParent,Tx1=Array.prototype.toString,Vw={toBSON(){/*!
   * ignore
   */return this.toObject(Ix1)},toString(){return Tx1.call(this.__array.map((A)=>{if(A!=null&&A.$__!=null)return A.toString();return A}))},getArrayParent(){/*!
   * ignore
   */return this[bG]},_cast(A,F,B){if(this[Lw]==null)return A;let $=this[Lw].casterConstructor;if(($.$isMongooseDocumentArray?_G.isMongooseDocumentArray(A):A instanceof $)||A&&A.constructor&&A.constructor.baseCasterConstructor===$){if(!(A[oi]&&A.__parentArray))A[oi]=this[bG],A.__parentArray=this;return A.$setIndex(F),A}if(A===void 0||A===null)return null;if(Buffer.isBuffer(A)||Ew(A,"ObjectId")||!_G.isObject(A))A={_id:A};if(A&&$.discriminators&&$.schema&&$.schema.options&&$.schema.options.discriminatorKey)if(typeof A[$.schema.options.discriminatorKey]==="string"&&$.discriminators[A[$.schema.options.discriminatorKey]])$=$.discriminators[A[$.schema.options.discriminatorKey]];else{let X=ri($.discriminators,A[$.schema.options.discriminatorKey]);if(X)$=X}if($.$isMongooseDocumentArray)return $.cast(A,this,void 0,void 0,F);let D=new $(A,this,B,void 0,F);return D.isNew=!0,D},id(A){let F,B,$;try{F=jx1(A).toString()}catch(Z){F=null}for(let Z of this){if(!Z)continue;if($=Z.get("_id"),$===null||typeof $==="undefined")continue;else if($ instanceof Px1){if(B||(B=String(A)),B==$._id)return Z}else if(!Ew(A,"ObjectId")&&!Ew($,"ObjectId")){if(A==$||_G.deepEqual(A,$))return Z}else if(F==$)return Z}return null},toObject(A){return[].concat(this.map(function(F){if(F==null)return null;if(typeof F.toObject!=="function")return F;return F.toObject(A)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let A=kG.push.apply(this,arguments);return xG(this),A},pull(){let A=kG.pull.apply(this,arguments);return xG(this),A},shift(){let A=kG.shift.apply(this,arguments);return xG(this),A},splice(){let A=kG.splice.apply(this,arguments);return xG(this),A},inspect(){return this.toObject()},create(A){let F=this[Lw].casterConstructor;if(A&&F.discriminators&&F.schema&&F.schema.options&&F.schema.options.discriminatorKey)if(typeof A[F.schema.options.discriminatorKey]==="string"&&F.discriminators[A[F.schema.options.discriminatorKey]])F=F.discriminators[A[F.schema.options.discriminatorKey]];else{let B=ri(F.discriminators,A[F.schema.options.discriminatorKey]);if(B)F=B}return new F(A,this)},notify(A){/*!
   * ignore
   */let F=this;return function B($,Z){Z=Z||F;let D=Z.length;while(D--){if(Z[D]==null)continue;switch(A){case"save":$=F[D];break;default:break}if(_G.isMongooseArray(Z[D]))B($,Z[D]);else if(Z[D])Z[D].emit(A,$)}}},set(A,F,B){let $=this.__array;if(B)return $[A]=F,this;let Z=Vw._cast.call(this,F,A);return Vw._markModified.call(this,A),$[A]=Z,this},_markModified(A,F){let B=this[bG],$;if(B){if($=this[ww],arguments.length)if(F!=null){let Z=A.__index;$=$+"."+Z+"."+F}else $=$+"."+A;if($!=null&&$.endsWith(".$"))return this;B.markModified($,arguments.length!==0?A:B)}return this}};ei.exports=Vw;function xG(A){let F=A[bG];if(!F||F.$__.populated==null)return;let B=Object.keys(F.$__.populated).filter(($)=>$.startsWith(A[ww]+"."));for(let $ of B){let Z=$.slice((A[ww]+".").length);if(!Array.isArray(F.$__.populated[$].value))continue;F.$__.populated[$].value=A.map((D)=>D.$populated(Z))}}});var mA=C((IG0,Bn)=>{/*!
 * Module dependencies.
 */var Fn=OG(),Nw=An(),Mw=w1().arrayAtomicsSymbol,Ox1=w1().arrayAtomicsBackupSymbol,Rw=w1().arrayParentSymbol,Pw=w1().arrayPathSymbol,dA=w1().arraySchemaSymbol,Sx1=Array.prototype.push,kx1=/^\d+$/;function _x1(A,F,B,$){let Z=[],D={[Mw]:{},[Ox1]:void 0,[Pw]:F,[dA]:void 0,[Rw]:void 0};if(Array.isArray(A)){if(A[Pw]===F&&A[Rw]===B)D[Mw]=Object.assign({},A[Mw]);A.forEach((J)=>{Sx1.call(Z,J)})}if(D[Pw]=F,D.__array=Z,B&&B.$__){D[Rw]=B,D[dA]=B.$__schema.path(F);while(D[dA]!=null&&D[dA].$isMongooseArray&&!D[dA].$isMongooseDocumentArray)D[dA]=D[dA].casterConstructor}let X=new Proxy(Z,{get:function(J,Y){if(Y==="isMongooseArray"||Y==="isMongooseArrayProxy"||Y==="isMongooseDocumentArray"||Y==="isMongooseDocumentArrayProxy")return!0;if(D.hasOwnProperty(Y))return D[Y];if(Nw.hasOwnProperty(Y))return Nw[Y];if($&&$.virtuals&&$.virtuals.hasOwnProperty(Y))return $.virtuals[Y].applyGetters(void 0,J);if(Fn.hasOwnProperty(Y))return Fn[Y];return Z[Y]},set:function(J,Y,W){if(typeof Y==="string"&&kx1.test(Y))Nw.set.call(X,Y,W,!1);else if(D.hasOwnProperty(Y))D[Y]=W;else if($&&$.virtuals&&$.virtuals.hasOwnProperty(Y))$.virtuals[Y].applySetters(W,J);else Z[Y]=W;return!0}});return X}/*!
 * Module exports.
 */Bn.exports=_x1});var X7=C((wn,Vn)=>{/*!
 * Module dependencies.
 */var xx1=pL(),Iw=A1("events").EventEmitter,bx1=Op(),fx1=iB(),F9=r4(),$n=hA(),gx1=fp(),ux1=KG(),yx1=EG(),vx1=vp(),hx1=cA(),Tw=T5(),vG=uA(),Qn=_L(),zn=Bw(),Ow=LG(),fG=wG(),o7=T2(),dx1=NG().compile,mx1=NG().defineKey,cx1=tp(),lx1=sB().flatten,jw=Ji(),Zn=Wi(),px1=Qi(),ix1=RG(),Dn=B7(),Xn=f6(),qn=aB(),nx1=tB(),Jn=Xw(),Sw=A1("util").inspect,Hn=t7().internalToObjectOptions,sx1=Jw(),ax1=Yw(),tx1=O9(),kw=Ww(),rx1=yD(),d1=f1(),ox1=Gw(),uG=d1.deepEqual,ex1=d1.isMongooseObject,dD=w1().arrayAtomicsBackupSymbol,O4=w1().arrayAtomicsSymbol,Ab1=w1().documentArrayParent,Fb1=w1().documentIsModified,Un=w1().documentModifiedPaths,Bb1=w1().documentSchemaSymbol,$b1=w1().getSymbol,Zb1=w1().modelSymbol,Yn=w1().populateModelSymbol,Db1=w1().scopeSymbol,Xb1=vA().schemaMixedSymbol,Jb1=Oi(),gG=w1().sessionNewDocuments,yG,Wn,hD,Cn=d1.specialProperties;function s(A,F,B,$){if(typeof B==="object"&&B!=null)$=B,B=$.skipId;if($=Object.assign({},$),this.$__schema==null){let W=d1.isObject(F)&&!F.instanceOfSchema?new hx1(F):F;this.$__setSchema(W),F=B,B=$,$=arguments[4]||{}}if(this.$__=new bx1,$.isNew!=null&&$.isNew!==!0)this.$isNew=$.isNew;if($.priorDoc!=null)this.$__.priorDoc=$.priorDoc;if(B)this.$__.skipId=B;if(A!=null&&typeof A!=="object")throw new yx1(A,"obj","Document");let Z=!0;if($.defaults!==void 0)this.$__.defaults=$.defaults,Z=$.defaults;let D=this.$__schema;if(typeof F==="boolean"||F==="throw"){if(F!==!0)this.$__.strictMode=F;F=void 0}else if(D.options.strict!==!0)this.$__.strictMode=D.options.strict;let X=D.requiredPaths(!0);for(let W of X)this.$__.activePaths.require(W);let J=null;if(d1.isPOJO(F)&&Object.keys(F).length>0)J=nx1(F),this.$__.selected=F,this.$__.exclude=J;let Y=J===!1&&F?zn(F):null;if(this._doc==null){if(this.$__buildDoc(A,F,B,J,Y,!1),Z)Ow(this,F,J,Y,!0,null,{skipParentChangeTracking:!0})}if(A){if(this.$__original_set)this.$__original_set(A,void 0,!0,$);else this.$set(A,void 0,!0,$);if(A instanceof s)this.$isNew=A.$isNew}if($.willInit&&Z){if($.skipDefaults)this.$__.skipDefaults=$.skipDefaults}else if(Z)Ow(this,F,J,Y,!1,$.skipDefaults);if(!this.$__.strictMode&&A){let W=this;Object.keys(this._doc).forEach(function(Q){if(!(Q in D.tree)&&!(Q in D.methods)&&!(Q in D.virtuals)&&!Q.startsWith("$"))mx1({prop:Q,subprops:null,prototype:W})})}Cb1(this)}s.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(s.prototype,"isNew",{get:function(){return this.$isNew},set:function(A){this.$isNew=A}});Object.defineProperty(s.prototype,"errors",{get:function(){return this.$errors},set:function(A){this.$errors=A}});/*!
 * ignore
 */s.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */d1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(A){s.prototype[A]=function(){if(!this.$__.emitter){if(A==="emit")return;this.$__.emitter=new Iw,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[A].apply(this.$__.emitter,arguments)},s.prototype[`$${A}`]=s.prototype[A]});s.prototype.constructor=s;for(let A in Iw.prototype)s[A]=Iw.prototype[A];s.prototype.$__schema;s.prototype.schema;Object.defineProperty(s.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(A){this.$__.locals=A}});s.prototype.isNew;Object.defineProperty(s.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});s.prototype.id;s.prototype.$errors;Object.defineProperty(s.prototype,"$op",{get:function(){return this.$__.op||null},set:function(A){this.$__.op=A}});/*!
 * ignore
 */function Yb1(A,F,B){if(A==null)return;let $=Object.keys(B.$__schema.paths),Z=$.length,D=F.indexOf(".")===-1?[F]:F.split(".");for(let X=0;X<Z;++X){let J="",Y=$[X];if(!Y.startsWith(F+"."))continue;let W=B.$__schema.paths[Y],G=W.splitPath().slice(D.length),Q=G.length;if(W.defaultValue===void 0)continue;let q=A;for(let z=0;z<Q;++z){if(q==null)break;let H=G[z];if(z===Q-1){if(q[H]!==void 0)break;try{let U=W.getDefault(B,!1);if(U!==void 0)q[H]=U}catch(U){B.invalidate(F+"."+J,U);break}break}J+=(!J.length?"":".")+H,q[H]=q[H]||{},q=q[H]}}}s.prototype.$__buildDoc=function(A,F,B,$,Z){let D={},X=Object.keys(this.$__schema.paths).filter((W)=>!W.includes("$*")),J=X.length,Y=0;for(;Y<J;++Y){let W=X[Y];if(W==="_id"){if(B)continue;if(A&&"_id"in A)continue}let G=this.$__schema.paths[W].splitPath(),Q=G.length,q=Q-1,z="",H=D,U=!1;for(let K=0;K<Q;++K){let E=G[K];if(!z.length)z=E;else z+="."+E;if($===!0){if(z in F)break}else if($===!1&&F&&!U){if(z in F)U=!0;else if(!Z[z])break}if(K<q)H=H[E]||(H[E]={})}}this._doc=D};/*!
 * Converts to POJO when you use the document for querying
 */s.prototype.toBSON=function(){return this.toObject(Hn)};s.prototype.init=function(A,F,B){if(typeof F==="function")B=F,F=null;if(this.$__init(A,F),B)B(null,this);return this};s.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};s.prototype.$__init=function(A,F){if(this.$isNew=!1,F=F||{},A._id!=null&&F.populated&&F.populated.length){let $=String(A._id);for(let Z of F.populated){if(Z.isVirtual)this.$populated(Z.path,d1.getValue(Z.path,A),Z);else this.$populated(Z.path,Z._docs[$],Z);if(Z._childDocs==null)continue;for(let D of Z._childDocs){if(D==null||D.$__==null)continue;D.$__.parent=this}Z._childDocs=[]}}Kn(this,A,this._doc,F),sx1(this,F.populated),this.$emit("init",this),this.constructor.emit("init",this);let B=this.$__.exclude===!1&&this.$__.selected?zn(this.$__.selected):null;return Ow(this,this.$__.selected,this.$__.exclude,B,!1,this.$__.skipDefaults),this};function Kn(A,F,B,$,Z){if(Z=Z||"",F.$__!=null)F=F._doc;let D=Object.keys(F),X=D.length,J,Y,W,G=A.$__.strictMode,Q=A.$__schema;for(let q=0;q<X;++q){if(W=D[q],Cn.has(W))continue;if(Y=Z?Z+W:W,J=Q.path(Y),Q.$isRootDiscriminator&&!A.$__isSelected(Y))continue;let z=F[W];if(!J&&d1.isPOJO(z)){if(!B[W]){if(B[W]={},!G&&!(W in Q.tree)&&!(W in Q.methods)&&!(W in Q.virtuals))A[W]=B[W]}Kn(A,z,B[W],$,Y+".")}else if(!J){if(B[W]=z,!G&&!Z)A[W]=z}else{if(B.hasOwnProperty(W)&&z!==void 0&&!$.hydratedPopulatedDocs)delete B[W];if(z===null)B[W]=J._castNullish(null);else if(z!==void 0){let H=z.$__==null?null:z.$__.wasPopulated;if(J&&!H&&!$.hydratedPopulatedDocs)try{if($&&$.setters)B[W]=J.applySetters(z,A,!1);else B[W]=J.cast(z,A,!0)}catch(U){A.invalidate(U.path,new Qn({path:U.path,message:U.message,type:"cast",value:U.value,reason:U}))}else if(J&&$.hydratedPopulatedDocs){if(B[W]=J.cast(z,A,!0,void 0,{hydratedPopulatedDocs:!0}),B[W]&&B[W].$__&&B[W].$__.wasPopulated)A.$populated(Y,B[W].$__.wasPopulated.value,B[W].$__.wasPopulated.options);else if(Array.isArray(B[W])&&B[W].length&&B[W][0]?.$__?.wasPopulated)A.$populated(Y,B[W].map((U)=>U?.$__?.wasPopulated?.value).filter((U)=>U!=null),B[W][0].$__.wasPopulated.options)}else B[W]=z}if(!A.$isModified(Y))A.$__.activePaths.init(Y)}}}s.prototype.updateOne=function A(F,B,$){let Z=this.constructor.updateOne({_id:this._doc._id},F,B),D=this;if(Z.pre(function X(J){D.constructor._middleware.execPre("updateOne",D,[D],J)}),Z.post(function X(J){D.constructor._middleware.execPost("updateOne",D,[D],{},J)}),this.$session()!=null){if(!("session"in Z.options))Z.options.session=this.$session()}if($!=null)return Z.exec($);return Z};s.prototype.replaceOne=function A(){let F=[...arguments];return F.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,F)};s.prototype.$session=function A(F){if(arguments.length===0){if(this.$__.session!=null&&this.$__.session.hasEnded)return this.$__.session=null,null;return this.$__.session}if(F!=null&&F.hasEnded)throw new F9("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(F==null&&this.$__.session==null)return;if(this.$__.session=F,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let $ of B)$.$session(F)}return F};s.prototype.$timestamps=function A(F){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let B=this.$timestamps();if(F!==B)this.$__.timestamps=F;return this};s.prototype.overwrite=function A(F){let B=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(F))));for(let $ of B){if($==="_id")continue;if(this.$__schema.options.versionKey&&$===this.$__schema.options.versionKey)continue;if(this.$__schema.options.discriminatorKey&&$===this.$__schema.options.discriminatorKey)continue;this.$set($,F[$])}return this};s.prototype.$set=function A(F,B,$,Z){if(d1.isPOJO($))Z=$,$=void 0;let D=Z&&Z.merge,X=$&&$!==!0,J=$===!0,Y,W,G=0,Q,q,z,H=Z&&"strict"in Z,U=H?Z.strict:this.$__.strictMode;if(X)Y=this.$__.adhocPaths||(this.$__.adhocPaths={}),Y[F]=this.$__schema.interpretAsType(F,$,this.$__schema.options);if(F==null)[F,B]=[B,F];else if(typeof F!=="string"){if(F instanceof s)if(F.$__isNested)F=F.toObject();else F=F.$__schema===this.$__schema?_w(F,{...F._doc}):F._doc;if(F==null)[F,B]=[B,F];z=B?B+".":"",W=Zn(this.$__schema,F);let P=W.length,T=Z&&Z._skipMinimizeTopLevel||!1;if(P===0&&T){if(delete Z._skipMinimizeTopLevel,B)this.$set(B,{});return this}Z=Object.assign({},Z,{_skipMinimizeTopLevel:!1});for(let S=0;S<P;++S){q=W[S];let k=z?z+q:q;Q=this.$__schema.pathType(k);let v=F[q];if($===!0&&!z&&v!=null&&Q==="nested"&&this._doc[q]!=null)delete this._doc[q];if(d1.isNonBuiltinObject(v)&&Q==="nested"){this.$set(k,v,J,Z),Yb1(this.$get(k),k,this);continue}else if(U){if(J&&v===void 0&&this.$get(k)!==void 0)continue;if(Q==="adhocOrUndefined")Q=jw(this,k,{typeOnly:!0});if(Q==="real"||Q==="virtual")this.$set(k,v,J,Z);else if(Q==="nested"&&v instanceof s)this.$set(k,v.toObject({transform:!1}),J,Z);else if(U==="throw")if(Q==="nested")throw new ux1(q,v);else throw new Tw(q);else if(Q==="nested"&&v==null)this.$set(k,v,J,Z)}else this.$set(k,v,J,Z)}let N={},y=Object.keys(this.$__schema.tree);for(let S=0,k=y.length;S<k;++S)(q=y[S])&&this._doc.hasOwnProperty(q)&&(N[q]=void 0);return this._doc=Object.assign(N,this._doc),this}let K=this.$__schema.pathType(F),E=null;if(K==="adhocOrUndefined")E=F.indexOf(".")===-1?[F]:F.split("."),K=jw(this,E,{typeOnly:!0});if(K==="adhocOrUndefined"&&!H){if(E==null)E=F.indexOf(".")===-1?[F]:F.split(".");let P=px1(this.$__schema,E);if(P!==void 0)U=P}B=ix1(B,!0);let L=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(F);if(J)return;return this.$__getValue(F)})();if(K==="nested"&&B){if(typeof B==="object"&&B!=null){if(B.$__!=null)B=B.toObject(Hn);if(B==null)return this.invalidate(F,new F9.CastError("Object",B,F)),this;let P=this.$isModified(F),T=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(F);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(F)){let y=this.$__getValue(F);this.$__.savedState[F]=y;let S=Object.keys(y||{});for(let k of S)this.$__.savedState[F+"."+k]=y[k]}if(!D)this.$__setValue(F,null),fG(this,F);else return this.$set(B,F,J,Z);let N=Zn(this.$__schema,B,F);this.$__setValue(F,{});for(let y of N)this.$set(F+"."+y,B[y],J,{...Z,_skipMarkModified:!0});if(L!=null&&(!P||T)&&d1.deepEqual(T?this.$__.savedState[F]:L,B))this.unmarkModified(F);else this.markModified(F);return this}return this.invalidate(F,new F9.CastError("Object",B,F)),this}let V;if(E==null)E=F.indexOf(".")===-1?[F]:F.split(".");if(typeof this.$__schema.aliases[E[0]]==="string")E[0]=this.$__schema.aliases[E[0]];if(K==="adhocOrUndefined"&&U){let P;for(G=0;G<E.length;++G){let T=E.slice(0,G+1).join(".");if(G+1<E.length&&this.$__schema.pathType(T)==="virtual")return tx1.set(F,B,this),this;if(V=this.$__schema.path(T),V==null)continue;if(V instanceof $n){P=!0;break}else if(V.$isSchemaMap&&V.$__schemaType instanceof $n&&G<E.length-1){P=!0,V=V.$__schemaType;break}}if(V==null)V=jw(this,F);if(!P&&!V){if(U==="throw")throw new Tw(F);return this}}else if(K==="virtual")return V=this.$__schema.virtualpath(F),V.applySetters(B,this),this;else V=this.$__path(F);let M=this._doc,O="";for(G=0;G<E.length-1;++G)if(M=M instanceof Map?M.get(E[G]):M[E[G]],O+=(O.length!==0?".":"")+E[G],!M){if(this.$set(O,{}),!this.$__isSelected(O))this.unmarkModified(O);M=this.$__getValue(O)}let R;if(E.length<=1)R=F;else{let P=E.length;for(G=0;G<P;++G){let T=E.slice(0,G+1).join(".");if(this.$get(T,null,{getters:!1})===null){R=T;break}}if(!R)R=F}if(!V){if(this.$__set(R,F,Z,J,E,V,B,L),K==="nested"&&B==null)fG(this,F);return this}if(V.$isSingleNested||V.$isMongooseArray)Hb1(this,F);if(B!=null&&D&&V.$isSingleNested){if(B instanceof s)B=B.toObject({virtuals:!1,transform:!1});let P=Object.keys(B);for(let T of P)this.$set(F+"."+T,B[T],J,Z);return this}let _=!0;try{let P=(()=>{if(V.options==null)return!1;if(!(B instanceof s))return!1;let S=B.constructor,k=typeof V.options.ref==="function"&&!V.options.ref[Zb1]?V.options.ref.call(this,this):V.options.ref,v=k?.modelName||k;if(v!=null&&(v===S.modelName||v===S.baseModelName))return!0;let J1=V.options.refPath;if(J1==null)return!1;let r=B.get(J1);return r===S.modelName||r===S.baseModelName})(),T=!1;if(P&&B instanceof s&&(!B.$__.wasPopulated||d1.deepEqual(B.$__.wasPopulated.value,B._doc._id))){let S=V&&V.$isSingleNested?V.cast(B,this):B._doc._id;this.$populated(F,S,{[Yn]:B.constructor}),B.$__.wasPopulated={value:S},T=!0}let N,y=this.$__schema.options.typeKey;if(V.options&&Array.isArray(V.options[y])&&V.options[y].length&&V.options[y][0]&&V.options[y][0].ref&&Wb1(B,V.options[y][0].ref)){N={[Yn]:B[0].constructor},this.$populated(F,B.map(function(S){return S._doc._id}),N);for(let S of B)S.$__.wasPopulated={value:S._doc._id};T=!0}if(!P||!V.$isSingleNested||!B.$__){let S=this;if(this.$__schema.singleNestedPaths[F]!=null&&E.length>1)S=Jb1(this,E,this.schema);if(Z!=null&&Z.overwriteImmutable)B=V.applySetters(B,S,!1,L,{path:F,overwriteImmutable:!0});else B=V.applySetters(B,S,!1,L,{path:F})}if(Array.isArray(B)&&!Array.isArray(V)&&V.$isMongooseDocumentArray&&B.length!==0&&B[0]!=null&&B[0].$__!=null&&B[0].$__.populated!=null){let S=Object.keys(B[0].$__.populated);for(let k of S)this.$populated(F+"."+k,B.map((v)=>v.$populated(k)),B[0].$__.populated[k].options);T=!0}if(!T&&this.$__.populated){if(Array.isArray(B)&&this.$__.populated[F]){for(let S=0;S<B.length;++S)if(B[S]instanceof s)B.set(S,B[S]._doc._id,!0)}delete this.$__.populated[F]}if(B!=null&&V.$isSingleNested)Ub1(B,V,L);this.$markValid(F)}catch(P){if(P instanceof F9.StrictModeError&&P.isImmutableError)this.invalidate(F,P);else if(P instanceof F9.CastError){if(this.invalidate(P.path,P),P.$originalErrorPath)this.invalidate(F,new F9.CastError(V.instance,B,F,P.$originalErrorPath))}else this.invalidate(F,new F9.CastError(V.instance,B,F,P));_=!1}if(_){let P=null,T=null;if(!J){let S=this.$isSubdocument?this.ownerDocument():this;P=S.$__.savedState,T=this.$isSubdocument?this.$__.fullPath+"."+F:F,S.$__saveInitialState(T)}this.$__set(R,F,Z,J,E,V,B,L);let N=!!this.$__.session?.transaction,y=this.$__.session&&this.$__.session[gG]&&this.$__.session[gG].has(this)&&this.$__.session[gG].get(this).modifiedPaths&&!this.$__.session[gG].get(this).modifiedPaths.has(T);if(P!=null&&P.hasOwnProperty(T)&&(!N||y)&&d1.deepEqual(B,P[T]))this.unmarkModified(F)}if(V.$isSingleNested&&(this.isDirectModified(F)||B==null))fG(this,F);else if(V.$isSchemaMap&&B==null)fG(this,F);return this};/*!
 * ignore
 */function Wb1(A,F){if(!Array.isArray(A))return!1;if(A.length===0)return!1;for(let B of A){if(!(B instanceof s))return!1;if(B.constructor.modelName==null)return!1;if(B.constructor.modelName!=F&&B.constructor.baseModelName!=F)return!1}return!0}s.prototype.set=s.prototype.$set;s.prototype.$__shouldModify=function(A,F,B,$,Z,D,X,J){if(B&&B._skipMarkModified)return!1;if(this.$isNew)return!0;if(F in this.$__.activePaths.getStatePaths("modify"))return!0;if(X===void 0&&!this.$__isSelected(F))return!0;if(X===void 0&&F in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(F)&&X instanceof s&&uG(X._doc._id,J))return!1;if(!uG(X,J!==void 0?J:d1.getValue(F,this)))return!0;if(!$&&X!==null&&X!==void 0&&F in this.$__.activePaths.getStatePaths("default")&&uG(X,D.getDefault(this,$)))return!0;return!1};s.prototype.$__set=function(A,F,B,$,Z,D,X,J){hD=hD||rB();let Y=this.$__shouldModify(A,F,B,$,Z,D,X,J);if(Y){if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[F]){if(delete this.$__.primitiveAtomics[F],Object.keys(this.$__.primitiveAtomics).length===0)delete this.$__.primitiveAtomics}if(this.markModified(A),Wn||(Wn=Uw()),X&&d1.isMongooseArray(X)){if(X._registerAtomic("$set",X),d1.isMongooseDocumentArray(X))X.forEach(function(z){z&&z.__parentArray&&(z.__parentArray=X)})}}else if(Array.isArray(X)&&Array.isArray(J)&&d1.isMongooseArray(X)&&d1.isMongooseArray(J)){if(X[O4]=J[O4],X[dD]=J[dD],d1.isMongooseDocumentArray(X))X.forEach((z)=>{if(z!=null)z.$isNew=!1})}let W=this._doc,G=0,Q=Z.length,q="";for(;G<Q;G++){let H=G+1===Q;if(q+=q?"."+Z[G]:Z[G],Cn.has(Z[G]))continue;if(H)if(W instanceof Map)W.set(Z[G],X);else if(W.$isSingleNested){if(!(Z[G]in W))W[Z[G]]=X,W._doc[Z[G]]=X;else W._doc[Z[G]]=X;if(Y)W.markModified(Z[G])}else W[Z[G]]=X;else{let U=W instanceof Map,K=U?W.get(Z[G]):W[Z[G]];if(d1.isPOJO(K))W=K;else if(K&&K instanceof hD)W=K;else if(K&&!Array.isArray(K)&&K.$isSingleNested)W=K;else if(K&&Array.isArray(K))W=K;else if(K==null){if(K={},U)W.set(Z[G],K);else W[Z[G]]=K;W=K}else W=K}}};s.prototype.$__getValue=function(A){if(typeof A!=="string"&&!Array.isArray(A))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${A}" (type ${typeof A})`);return d1.getValue(A,this._doc)};s.prototype.$inc=function A(F,B){if(B==null)B=1;if(Array.isArray(F))return F.forEach((Y)=>this.$inc(Y,B)),this;let $=this.$__path(F);if($==null){if(this.$__.strictMode==="throw")throw new Tw(F);else if(this.$__.strictMode===!0)return this}else if($.instance!=="Number")return this.invalidate(F,new F9.CastError($.instance,B,F)),this;let Z=this.$__getValue(F)||0,D=!1,X=null,J=B;try{B=$.cast(B),X=$.applySetters(Z+B,this),J=X-Z,D=!0}catch(Y){this.invalidate(F,new F9.CastError("number",B,F,Y))}if(D){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[F]==null)this.$__.primitiveAtomics[F]={$inc:J};else this.$__.primitiveAtomics[F].$inc+=J;this.markModified(F),this.$__setValue(F,X)}return this};s.prototype.$__setValue=function(A,F){return d1.setValue(A,F,this._doc),this};s.prototype.get=function(A,F,B){let $;if(B==null)B={};if(F)$=this.$__schema.interpretAsType(A,F,this.$__schema.options);let Z=B.noDottedPath,D=Z?this.$__schema.paths[A]:this.$__path(A);if(D==null){if(D=this.$__schema.virtualpath(A),D!=null)return D.applyGetters(void 0,this)}if(Z){let W=this._doc[A];if($)W=$.cast(W);if(D!=null&&B.getters!==!1)return D.applyGetters(W,this);return W}if(D!=null&&D.instance==="Mixed"){let W=this.$__schema.virtualpath(A);if(W!=null)D=W}let X=A.indexOf(".")!==-1,J=this._doc,Y=X?A.split("."):[A];if(typeof this.$__schema.aliases[Y[0]]==="string")Y[0]=this.$__schema.aliases[Y[0]];for(let W=0,G=Y.length;W<G;W++){if(J&&J._doc)J=J._doc;if(J==null)J=void 0;else if(J instanceof Map)J=J.get(Y[W],{getters:!1});else if(W===G-1)J=d1.getValue(Y[W],J);else J=J[Y[W]]}if($)J=$.cast(J);if(D!=null&&B.getters!==!1)J=D.applyGetters(J,this);else if(this.$__schema.nested[A]&&B.virtuals)return _w(this,o7(J)||{},{path:A});return J};/*!
 * ignore
 */s.prototype[$b1]=s.prototype.get;s.prototype.$get=s.prototype.get;s.prototype.$__path=function(A){let F=this.$__.adhocPaths,B=F&&F.hasOwnProperty(A)?F[A]:null;if(B)return B;return this.$__schema.path(A)};s.prototype.markModified=function(A,F){if(this.$__saveInitialState(A),this.$__.activePaths.modify(A),F!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[A]=F};/*!
 * ignore
 */s.prototype.$__saveInitialState=function A(F){let B=this.$__.savedState,$=F;if(B!=null){let Z=$.indexOf("."),D=Z===-1?$:$.slice(0,Z);if(!B.hasOwnProperty(D))B[D]=o7(this.$__getValue(D))}};s.prototype.unmarkModified=function(A){if(this.$__.activePaths.init(A),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[A]};s.prototype.$ignore=function(A){this.$__.activePaths.ignore(A)};s.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};s.prototype.$isEmpty=function(A){let F={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let B=this.$get(A);if(B==null)return!0;if(typeof B!=="object")return!1;if(d1.isPOJO(B))return En(B);return Object.keys(B.toObject(F)).length===0}return Object.keys(this.toObject(F)).length===0};/*!
 * ignore
 */function En(A){if(A==null)return!0;if(typeof A!=="object"||Array.isArray(A))return!1;for(let F of Object.keys(A))if(!En(A[F]))return!1;return!0}s.prototype.modifiedPaths=function(A){A=A||{};let F=Object.keys(this.$__.activePaths.getStatePaths("modify")),B=new Set,$=0,Z=0,D=F.length;for($=0;$<D;++$){let X=F[$],J=kw(X),Y=J.length;for(Z=0;Z<Y;++Z)B.add(J[Z]);if(!A.includeChildren)continue;let W=0,G=this.$get(X);if(typeof G==="object"&&G!==null){if(G._doc)G=G._doc;let Q=G.length;if(Array.isArray(G))for(W=0;W<Q;++W){let q=X+"."+W;if(!B.has(q)){if(B.add(q),G[W]!=null&&G[W].$__){let z=G[W].modifiedPaths(),H=0,U=z.length;for(H=0;H<U;++H)B.add(q+"."+z[H])}}}else{let q=Object.keys(G),z=0,H=q.length;for(z=0;z<H;++z)B.add(X+"."+q[z])}}}return Array.from(B)};s.prototype[Un]=s.prototype.modifiedPaths;s.prototype.isModified=function(A,F,B){if(A){let $=F&&F.ignoreAtomics,Z=this.$__.activePaths.states.modify;if(Z==null)return!1;if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");for(let Y of A)if(Z[Y]!=null)return!0;let D=B||this[Un](),X=A.some(function(Y){return!!~D.indexOf(Y)}),J=Object.keys(Z);if($)J=J.filter((Y)=>{let W=this.$__getValue(Y);if(W!=null&&W[O4]!=null&&W[O4].$set===void 0)return!1;return!0});return X||A.some(function(Y){return J.some(function(W){return W===Y||Y.startsWith(W+".")})})}return this.$__.activePaths.some("modify")};s.prototype.$isModified=s.prototype.isModified;s.prototype[Fb1]=s.prototype.isModified;s.prototype.$isDefault=function(A){if(A==null)return this.$__.activePaths.some("default");if(typeof A==="string"&&A.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(A);let F=A;if(!Array.isArray(F))F=F.split(" ");return F.some((B)=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(B))};s.prototype.$isDeleted=function(A){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!A,this};s.prototype.isDirectModified=function(A){if(A==null)return this.$__.activePaths.some("modify");if(typeof A==="string"&&A.indexOf(" ")===-1){let B=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(A);if(B||A.indexOf(".")===-1)return B;let $=A.split(".");for(let Z=0;Z<$.length-1;++Z){let D=$.slice(0,Z+1).join("."),X=this.$get(D);if(X!=null&&X.$__!=null&&X.isDirectModified($.slice(Z+1).join(".")))return!0}return!1}let F=A;if(typeof F==="string")F=F.split(" ");return F.some((B)=>this.isDirectModified(B))};s.prototype.isInit=function(A){if(A==null)return this.$__.activePaths.some("init");if(typeof A==="string"&&A.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(A);let F=A;if(!Array.isArray(F))F=F.split(" ");return F.some((B)=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(B))};s.prototype.isSelected=function A(F){if(this.$__.selected==null)return!0;if(!F)return!1;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((D)=>this.$__isSelected(D));let B=Object.keys(this.$__.selected),$=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let D of B){if(D==="_id")continue;if(!qn(this.$__.selected[D]))continue;$=!!this.$__.selected[D];break}if($===null)return!0;if(F in this.$__.selected)return $;let Z=F+".";for(let D of B){if(D==="_id")continue;if(D.startsWith(Z))return $||D!==Z;if(Z.startsWith(D+"."))return $}return!$};s.prototype.$__isSelected=s.prototype.isSelected;s.prototype.isDirectSelected=function A(F){if(this.$__.selected==null)return!0;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((Z)=>this.isDirectSelected(Z));let B=Object.keys(this.$__.selected),$=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let Z of B){if(Z==="_id")continue;if(!qn(this.$__.selected[Z]))continue;$=!!this.$__.selected[Z];break}if($===null)return!0;if(this.$__.selected.hasOwnProperty(F))return $;return!$};s.prototype.validate=async function A(F,B){if(typeof F==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new F9("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))B=arguments[0],F=null}if(B&&typeof B.pathsToSkip==="string"){let Z=B.pathsToSkip.indexOf(" ")===-1;B.pathsToSkip=Z?[B.pathsToSkip]:B.pathsToSkip.split(" ")}let $=B&&B._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!$)throw new vx1(this);else if(!$)this.$__.validating=!0;return new Promise((Z,D)=>{this.$__validate(F,B,(X)=>{if(this.$op=null,this.$__.validating=null,X!=null)return D(X);Z()})})};s.prototype.$validate=s.prototype.validate;/*!
 * ignore
 */function Gb1(A){let F=Object.keys(A.$__.activePaths.getStatePaths("require")),B=0,$=F.length;for(B=0;B<$;++B){let Z=F[B],D=A.$__schema.path(Z);if(D!=null&&typeof D.originalRequiredValue==="function"){A.$__.cachedRequired=A.$__.cachedRequired||{};try{A.$__.cachedRequired[Z]=D.originalRequiredValue.call(A,A)}catch(X){A.invalidate(Z,X)}}}}/*!
 * ignore
 */function Ln(A,F,B,$){let Z={};Gb1(A);let D=new Set(Object.keys(A.$__.activePaths.getStatePaths("require")).filter(function(Y){if(!A.$__isSelected(Y)&&!A.$isModified(Y))return!1;if(Y.endsWith(".$*"))return!1;if(A.$__.cachedRequired!=null&&Y in A.$__.cachedRequired)return A.$__.cachedRequired[Y];return!0}));Object.keys(A.$__.activePaths.getStatePaths("init")).forEach(X),Object.keys(A.$__.activePaths.getStatePaths("modify")).forEach(X),Object.keys(A.$__.activePaths.getStatePaths("default")).forEach(X);function X(Y){if(Y.endsWith(".$*"))return;D.add(Y)}if(!$){let Y=[];for(let G of Object.keys(A.$__schema.paths)){let Q=A.$__schema.path(G);if(Q.$isSingleNested){let q=A.$get(G);if(q)Y.push(q)}else if(Q.$isMongooseDocumentArray){let q=A.$get(G);if(q&&q.length){for(let z of q)if(z)Y.push(z)}}}let W=A.modifiedPaths();for(let G of Y)if(G.$basePath){let Q=G.$__pathRelativeToParent();for(let z of G.modifiedPaths())D.delete(Q+"."+z);let q=G.$parent();if(q==null)throw new Error("Cannot validate subdocument that does not have a parent");if(A.$isModified(Q,null,W)&&!q.$__.activePaths.getStatePaths("modify").hasOwnProperty(Q)&&!q.$isDefault(Q)){if(D.add(Q),A.$__.pathsToScopes==null)A.$__.pathsToScopes={};if(A.$__.pathsToScopes[Q]=G.$isDocumentArrayElement?G.__parentArray:G.$parent(),Z[Q]={skipSchemaValidators:!0},G.$isDocumentArrayElement&&G.__index!=null)Z[Q].index=G.__index}}}for(let Y of D){let W=A.$__schema.path(Y);if(!W)continue;if(W.$isMongooseDocumentArray){for(let G of D)if(G==null||G.startsWith(W.path+"."))D.delete(G)}if(!W.caster&&W.validators.length===0&&!W.$parentSchemaDocArray)D.delete(Y);else if(W.$isMongooseArray&&!W.$isMongooseDocumentArray&&!W.$embeddedSchemaType.$isMongooseArray&&W.validators.length===0&&W.$embeddedSchemaType.validators.length===0)D.delete(Y)}if(Array.isArray(F))D=zb1(D,F);else if(Array.isArray(B))D=qb1(D,B);Qb1(A,D);let J={skipArrays:!0};for(let Y of D)if(A.$__schema.nested[Y]){let W=A.$__getValue(Y);if(ex1(W))W=W.toObject({transform:!1});let G=lx1(W,Y,J,A.$__schema);Object.keys(G).filter((Q)=>!A.$__schema.singleNestedPaths.hasOwnProperty(Q)).forEach(X)}for(let Y of D){let W=A.$__schema.path(Y);if(!W)continue;if(W.$parentSchemaDocArray&&typeof W.$parentSchemaDocArray.path==="string")D.add(W.$parentSchemaDocArray.path);if(!W.$isSchemaMap)continue;let G=A.$__getValue(Y);if(G==null)continue;for(let Q of G.keys())D.add(Y+"."+Q)}return D=Array.from(D),[D,Z]}function Qb1(A,F){for(let B of F){let $=A.$__schema.path(B);if(!$)continue;if(!$.$isMongooseArray||!Array.isArray($)&&$.$isMongooseDocumentArray&&!($&&$.schemaOptions&&$.schemaOptions.required))continue;if($.$isMongooseArray&&!$.$isMongooseDocumentArray&&!$.$embeddedSchemaType.$isMongooseArray&&$.$embeddedSchemaType.validators.length===0)continue;let Z=A.$__getValue(B);hG(Z,F,B)}}function hG(A,F,B){if(A!=null){let $=A.length;for(let Z=0;Z<$;++Z)if(Array.isArray(A[Z]))hG(A[Z],F,B+"."+Z);else F.add(B+"."+Z)}}/*!
 * ignore
 */s.prototype.$__validate=function(A,F,B){if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!A)A=[...this.$__.saveOptions.pathsToSave];else if(typeof A==="function")B=A,F=null,A=null;else if(typeof F==="function")B=F,F=null;let $=F&&typeof F==="object"&&"validateModifiedOnly"in F,Z=F&&F.pathsToSkip||null,D;if($)D=!!F.validateModifiedOnly;else D=this.$__schema.options.validateModifiedOnly;let X=F&&F.validateAllPaths;if(X){if(Z)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if($&&D)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let J=this,Y=()=>{let K=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,D&&K!=null){let E=Object.keys(K.errors);for(let L of E)if(!this.$isModified(L))delete K.errors[L];if(Object.keys(K.errors).length===0)K=void 0}if(this.$__.cachedRequired={},this.$emit("validate",J),this.constructor.emit("validate",J),K){for(let E in K.errors)if(!this[Ab1]&&K.errors[E]instanceof F9.CastError)this.invalidate(E,K.errors[E]);return K}},W,G;if(X){W=new Set(Object.keys(this.$__schema.paths));for(let K of W){let E=this.$__schema.path(K);if(!E||!E.$isMongooseArray)continue;let L=this.$__getValue(K);if(!L)continue;hG(L,W,K)}W=[...W],G={}}else{let K=Ln(this,A,Z,F&&F._nestedValidate);W=D?K[0].filter((E)=>this.$isModified(E)):K[0],G=K[1]}if(typeof A==="string")A=A.split(" ");if(W.length===0)return Dn(function(){let K=Y();if(K)return J.$__schema.s.hooks.execPost("validate:error",J,[J],{error:K},function(E){B(E)});B(null,J)});let Q={},q=0,z=this.$__.saveOptions?.pathsToSave;if(Array.isArray(z)){z=new Set(z);for(let K of W){if(!z.has(K))continue;H(K)}}else for(let K of W)H(K);function H(K){if(K==null||Q[K])return;Q[K]=!0,q++,Dn(function(){let E=J.$__schema.path(K);if(!E)return--q||U();if(!J.$isValid(K)){--q||U();return}if(E[Xb1]!=null&&K!==E.path)return--q||U();let L=J.$__getValue(K),V;if(V=J.$populated(K))L=V;else if(L!=null&&L.$__!=null&&L.$__.wasPopulated)L=L._doc._id;let M=J.$__.pathsToScopes!=null&&K in J.$__.pathsToScopes?J.$__.pathsToScopes[K]:J,O={...G[K],path:K,validateAllPaths:X,_nestedValidate:!0};E.doValidate(L,function(R){if(R){if((E.$isSingleNested||E.$isArraySubdocument||E.$isMongooseDocumentArray)&&R instanceof vG)return--q||U();J.invalidate(K,R,void 0,!0)}--q||U()},M,O)})}function U(){let K=Y();if(K)return J.$__schema.s.hooks.execPost("validate:error",J,[J],{error:K},function(E){B(E)});B(null,J)}};/*!
 * ignore
 */function zb1(A,F){let B=new Set(F),$=new Map([]);for(let D of F){if(D.indexOf(".")===-1)continue;let X=D.split("."),J=X[0];for(let Y=1;Y<X.length;++Y)$.set(J,D),J=J+"."+X[Y]}let Z=new Set;for(let D of A)if(B.has(D))Z.add(D);else if($.has(D))Z.add($.get(D));return Z}/*!
 * ignore
 */function qb1(A,F){return F=new Set(F),A=Array.from(A).filter((B)=>!F.has(B)),new Set(A)}s.prototype.validateSync=function(A,F){let B=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))F=arguments[0],A=null;let $=F&&typeof F==="object"&&"validateModifiedOnly"in F,Z;if($)Z=!!F.validateModifiedOnly;else Z=this.$__schema.options.validateModifiedOnly;let D=F&&F.pathsToSkip,X=F&&F.validateAllPaths;if(X){if(D)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");else if(typeof D==="string"&&D.indexOf(" ")!==-1)D=D.split(" ");let J,Y;if(X){J=new Set(Object.keys(this.$__schema.paths));for(let Q of J){let q=this.$__schema.path(Q);if(!q||!q.$isMongooseArray)continue;let z=this.$__getValue(Q);if(!z)continue;hG(z,J,Q)}J=[...J],Y={}}else{let Q=Ln(this,A,D);J=Z?Q[0].filter((q)=>this.$isModified(q)):Q[0],Y=Q[1]}let W={};for(let Q=0,q=J.length;Q<q;++Q){let z=J[Q];if(W[z])continue;W[z]=!0;let H=B.$__schema.path(z);if(!H)continue;if(!B.$isValid(z))continue;let U=B.$__getValue(z),K=H.doValidateSync(U,B,{skipSchemaValidators:Y[z],path:z,validateModifiedOnly:Z,validateAllPaths:X});if(K){if((H.$isSingleNested||H.$isArraySubdocument||H.$isMongooseDocumentArray)&&K instanceof vG)continue;B.invalidate(z,K,void 0,!0)}}let G=B.$__.validationError;if(B.$__.validationError=void 0,B.$emit("validate",B),B.constructor.emit("validate",B),G){for(let Q in G.errors)if(G.errors[Q]instanceof F9.CastError)B.invalidate(Q,G.errors[Q])}return G};s.prototype.invalidate=function(A,F,B,$){if(!this.$__.validationError)this.$__.validationError=new vG(this);if(this.$__.validationError.errors[A])return;if(!F||typeof F==="string")F=new Qn({path:A,message:F,type:$||"user defined",value:B});if(this.$__.validationError===F)return this.$__.validationError;return this.$__.validationError.addError(A,F),this.$__.validationError};s.prototype.$markValid=function(A){if(!this.$__.validationError||!this.$__.validationError.errors[A])return;if(delete this.$__.validationError.errors[A],Object.keys(this.$__.validationError.errors).length===0)this.$__.validationError=null};/*!
 * ignore
 */function Hb1(A,F){if(!A.$__.validationError)return;let B=Object.keys(A.$__.validationError.errors);for(let $ of B)if($.startsWith(F+"."))delete A.$__.validationError.errors[$];if(Object.keys(A.$__.validationError.errors).length===0)A.$__.validationError=null}/*!
 * ignore
 */function Ub1(A,F,B){let $=F.schema;if($==null)return;for(let Z of Object.keys($.paths)){let D=$.paths[Z];if(D.$immutableSetter==null)continue;let X=B==null?void 0:B.$__getValue(Z);D.$immutableSetter.call(A,X)}}s.prototype.$isValid=function(A){if(this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0)return!0;if(A==null)return!1;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((F)=>this.$__.validationError.errors[F]==null);return this.$__.validationError.errors[A]==null};s.prototype.$__reset=function A(){let F=this,B=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if(B&&B.length>0)for(let $ of B)$.$__reset();return this.$__dirty().forEach(function($){let Z=$.value;if(Z&&Z[O4])Z[dD]=Z[O4],Z[O4]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,F=this,this.$__schema.requiredPaths().forEach(function($){F.$__.activePaths.require($)}),this};/*!
 * ignore
 */s.prototype.$__undoReset=function A(){if(this.$__.backup==null||this.$__.backup.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let F of this.$__dirty()){let B=F.value;if(B&&B[O4]&&B[dD])B[O4]=B[dD]}if(!this.$isSubdocument)for(let F of this.$getAllSubdocs())F.$__undoReset()};s.prototype.$__dirty=function(){let A=this,F=this.$__.activePaths.map("modify",function(Z){return{path:Z,value:A.$__getValue(Z),schema:A.$__path(Z)}});F=F.concat(this.$__.activePaths.map("default",function(Z){if(Z==="_id"||A.$__getValue(Z)==null)return;return{path:Z,value:A.$__getValue(Z),schema:A.$__path(Z)}}));let B=new Map(F.filter((Z)=>Z!=null).map((Z)=>[Z.path,Z.value])),$=[];return F.forEach(function(Z){if(!Z)return;let D=null,X=kw(Z.path);for(let J=0;J<X.length-1;J++)if(B.has(X[J])){D=B.get(X[J]);break}if(D==null)$.push(Z);else if(D!=null&&D[O4]!=null&&D.hasAtomics())D[O4]={},D[O4].$set=D}),$};s.prototype.$__setSchema=function(A){dx1(A.tree,this,void 0,A.options);for(let F of Object.keys(A.virtuals))A.virtuals[F]._applyDefaultGetters();if(A.path("schema")==null)this.schema=A;this.$__schema=A,this[Bb1]=A};s.prototype.$__getArrayPathsToValidate=function(){return yG||(yG=mA()),this.$__.activePaths.map("init","modify",function(A){return this.$__getValue(A)}.bind(this)).filter(function(A){return A&&Array.isArray(A)&&d1.isMongooseDocumentArray(A)&&A.length}).reduce(function(A,F){return A.concat(F)},[]).filter(function(A){return A})};s.prototype.$getAllSubdocs=function(A){if(A?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;yG||(yG=mA()),hD=hD||rB();let F=[];function B($){let Z=[];for(let{model:D}of $.$__schema.childSchemas){let X=$.$__getValue(D.path);if(X==null)continue;if(X.$__)Z.push(X);if(Array.isArray(X)){for(let J of X)if(J!=null&&J.$__)Z.push(J)}if(X instanceof Map){for(let J of X.values())if(J!=null&&J.$__)Z.push(J)}}for(let D of Z)B(D);F.push(...Z)}if(B(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=F;return F};/*!
 * Runs queued functions
 */function Cb1(A){let F=A.$__schema&&A.$__schema.callQueue;if(!F.length)return;for(let B of F)if(B[0]!=="pre"&&B[0]!=="post"&&B[0]!=="on")A[B[0]].apply(A,B[1])}/*!
 * ignore
 */s.prototype.$__handleReject=function A(F){if(this.$listeners("error").length)this.$emit("error",F);else if(this.constructor.listeners&&this.constructor.listeners("error").length)this.constructor.emit("error",F)};s.prototype.$toObject=function(A,F){let B=this.$__schema._defaultToObjectOptions(F),$=this.$__hasOnlyPrimitiveValues();A=d1.isPOJO(A)?{...A}:{},A._calledWithOptions=A._calledWithOptions||{...A};let Z;if(A._calledWithOptions.minimize!=null)Z=A.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)Z=this.$__schemaTypeOptions.minimize;else if(B!=null&&B.minimize!=null)Z=B.minimize;else Z=this.$__schema.options.minimize;if(A.minimize=Z,!$)A._seen=A._seen||new Map;let D=A._calledWithOptions.depopulate??B?.depopulate??A.depopulate??!1;if(D&&A._isNested&&this.$__.wasPopulated)return o7(this.$__.wasPopulated.value||this._doc._id,A);if(D)A.depopulate=!0;if(B!=null){for(let z of Object.keys(B))if(A[z]==null)A[z]=B[z]}A._isNested=!0,A.json=F,A.minimize=Z;let X=A._parentOptions;A._parentOptions=this.$isSubdocument?A:null;let J=A._calledWithOptions.schemaFieldsOnly??A.schemaFieldsOnly??B.schemaFieldsOnly??!1,Y;if($&&!A.flattenObjectIds)Y=this.$__toObjectShallow(J);else if(J){Y={};for(let z of Object.keys(this.$__schema.paths)){let H=this.$__getValue(z);if(H===void 0)continue;let U=z,K=Y;if(z.indexOf(".")!==-1){let E=z.split(".");U=E[E.length-1];for(let L=0;L<E.length-1;++L)K[E[L]]=K[E[L]]??{},K=K[E[L]]}if(H===null){K[U]=null;continue}K[U]=o7(H,A)}}else Y=o7(this._doc,A)||{};let W=A._calledWithOptions.getters??A.getters??B.getters??!1;if(W){if(Kb1(this,Y),A.minimize)Y=ax1(Y)||{}}let G=A._calledWithOptions.virtuals??B.virtuals??X?.virtuals??void 0;if(G||W&&G!==!1)_w(this,Y,A,A);if(A.versionKey===!1&&this.$__schema.options.versionKey)delete Y[this.$__schema.options.versionKey];let Q=A._calledWithOptions.transform??!0,q=void 0;if(Q===!0)q=B.transform;else if(typeof Q==="function")q=Q;if(Q)Eb1(this,Y);if(A.useProjection)Lb1(this,Y);if(typeof q==="function"){let z=q(this,Y,A);if(typeof z!=="undefined")Y=z}return Y};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */s.prototype.$__toObjectShallow=function A(F){let B={};if(this._doc!=null){let $=F?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let Z of $){let D=this._doc[Z];if(D instanceof Date)B[Z]=new Date(D);else if(D!==void 0)B[Z]=D}}return B};s.prototype.toObject=function(A){return this.$toObject(A)};/*!
 * Applies virtuals properties to `json`.
 */function _w(A,F,B,$){let Z=A.$__schema,D=Z.virtuals,X=Object.keys(D),J=X.length,Y=J,W,G,Q=A._doc,q,z=typeof($&&$.aliases)==="boolean"?$.aliases:!0;B=B||{};let H=null;if(Array.isArray(B.virtuals))H=new Set(B.virtuals);else if(B.virtuals&&B.virtuals.pathsToSkip){H=new Set(X);for(let U=0;U<B.virtuals.pathsToSkip.length;U++)if(H.has(B.virtuals.pathsToSkip[U]))H.delete(B.virtuals.pathsToSkip[U])}if(!Q)return F;for(J=0;J<Y;++J){if(W=X[J],H!=null&&!H.has(W))continue;if(!z&&Z.aliases.hasOwnProperty(W))continue;if(G=W,B.path!=null){if(!W.startsWith(B.path+"."))continue;G=W.substring(B.path.length+1)}if(G.indexOf(".")===-1&&G===W){if(q=D[W].applyGetters(void 0,A),q===void 0)continue;q=o7(q,B),F[G]=q;continue}let U=G.split(".");if(q=o7(A.get(W),B),q===void 0)continue;let K=U.length;Q=F;for(let E=0;E<K-1;++E)Q[U[E]]=Q[U[E]]||{},Q=Q[U[E]];Q[U[K-1]]=q}return F}function Kb1(A,F){let B=A.$__schema,$=Object.keys(B.paths),Z=$.length,D,X=A._doc,J;if(!X)return F;while(Z--){D=$[Z];let Y=D.split("."),W=Y.length,G=W-1,Q=F,q;if(X=A._doc,!A.$__isSelected(D))continue;for(let z=0;z<W;++z){if(q=Y[z],J=X[q],Q!=null&&typeof Q!=="object")break;else if(z===G){if(Q[q]=B.paths[D].applyGetters(Q[q],A),Array.isArray(Q[q])&&B.paths[D].$embeddedSchemaType)for(let H=0;H<Q[q].length;++H)Q[q][H]=B.paths[D].$embeddedSchemaType.applyGetters(Q[q][H],A)}else if(J==null){if(q in X)Q[q]=J;break}else Q=Q[q]||(Q[q]={});X=J}}return F}function Eb1(A,F){let B=A.$__schema,$=Object.keys(B.paths||{});if(!A._doc)return F;for(let D of $){let X=B.paths[D],J=X.options.transform??X.constructor?.defaultOptions?.transform,Y=X.$embeddedSchemaType?.options?.transform??X.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof J==="function"){let W=A.$get(D);if(W===void 0)continue;let G=J.call(A,W);Gn(D,G),d1.setValue(D,G,F)}else if(typeof Y==="function"){let W=A.$get(D);if(W===void 0)continue;let G=[].concat(W);for(let Q=0;Q<G.length;++Q){let q=Y.call(A,G[Q]);G[Q]=q,Gn(D,q)}F[D]=G}}return F}function Gn(A,F){if(ox1(F))throw new Error("`transform` function must be synchronous, but the transform on path `"+A+"` returned a promise.")}/*!
 * ignore
 */function Lb1(A,F){let B=A.$__schema,$=Object.keys(B.paths||{});if(!A._doc)return F;let D=A.$__.selected;if(D===void 0)D={},rx1.applyPaths(D,B);if(D==null||Object.keys(D).length===0)return F;for(let X of $)if(D[X]!=null&&!D[X])delete F[X];return F}s.prototype.toJSON=function(A){return this.$toObject(A,!0)};/*!
 * ignore
 */s.prototype.ownerDocument=function(){return this};s.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};s.prototype.$parent=s.prototype.parent;s.prototype.inspect=function(A){let F=d1.isPOJO(A),B;if(F)B=A,B.minimize=!1;let $=arguments.length>0?this.toObject(B):this.toObject();if($==null)return"MongooseDocument { "+$+" }";return $};if(Sw.custom)s.prototype[Sw.custom]=s.prototype.inspect;s.prototype.toString=function(){let A=this.inspect();if(typeof A==="string")return A;return Sw(A)};s.prototype.equals=function(A){if(!A)return!1;let F=this.$__getValue("_id"),B=A.$__!=null?A.$__getValue("_id"):A;if(!F&&!B)return uG(this,A);return F&&F.equals?F.equals(B):F===B};s.prototype.populate=async function A(){let F={},B=[...arguments];if(typeof B[B.length-1]==="function")throw new F9("Document.prototype.populate() no longer accepts a callback");if(B.length!==0){let D=d1.populate.apply(null,B);for(let X of D)F[X.path]=X}let $=d1.object.vals(F),Z=this.constructor;if(this.$__isNested){Z=this.$__[Db1].constructor;let D=this.$__.nestedPath;$.forEach(function(X){X.path=D+"."+X.path})}if(this.$session()!=null){let D=this.$session();$.forEach((X)=>{if(X.options==null){X.options={session:D};return}if(!("session"in X.options))X.options.session=D})}return $.forEach((D)=>{D._localModel=Z}),Z.populate(this,$)};s.prototype.$getPopulatedDocs=function A(){let F=[];if(this.$__.populated!=null)F=F.concat(Object.keys(this.$__.populated));let B=[];for(let $ of F){let Z=this.$get($);if(Array.isArray(Z))B=B.concat(Z);else if(Z instanceof s)B.push(Z)}return B};s.prototype.populated=function(A,F,B){if(F==null||F===!0){if(!this.$__.populated)return;if(typeof A!=="string")return;let Z=A.endsWith(".$*")?A.replace(/\.\$\*$/,""):A,D=this.$__.populated[Z];if(D)return F===!0?D:D.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[A]={value:F,options:B};let $=A.split(".");for(let Z=0;Z<$.length-1;++Z){let D=$.slice(0,Z+1).join("."),X=this.$get(D);if(X!=null&&X.$__!=null&&this.$populated(D)){let J=$.slice(Z+1).join(".");X.$populated(J,F,B);break}}return F};s.prototype.$populated=s.prototype.populated;s.prototype.$assertPopulated=function A(F,B){if(Array.isArray(F))return F.forEach(($)=>this.$assertPopulated($,B)),this;if(arguments.length>1)this.$set(B);if(!this.$populated(F))throw new F9(`Expected path "${F}" to be populated`);return this};s.prototype.depopulate=function(A){if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");let F,B=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],$=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let D of B)delete this.$$populatedVirtuals[D],delete this._doc[D],delete $[D];let Z=Object.keys($);for(let D of Z){if(F=this.$populated(D),!F)continue;if(delete $[D],Array.isArray(F)){let X=d1.getValue(D,this._doc);if(X.isMongooseArray){let J=X.__array;for(let Y=0;Y<J.length;++Y){let W=J[Y];if(W==null)continue;J[Y]=W instanceof s?W._doc._id:W._id}}else d1.setValue(D,F,this._doc)}else d1.setValue(D,F,this._doc)}return this}for(let Z of A)if(F=this.$populated(Z),delete $[Z],B.indexOf(Z)!==-1)delete this.$$populatedVirtuals[Z],delete this._doc[Z];else if(F)if(Array.isArray(F)){let D=d1.getValue(Z,this._doc);if(D.isMongooseArray){let X=D.__array;for(let J=0;J<X.length;++J){let Y=X[J];if(Y==null)continue;X[J]=Y instanceof s?Y._doc._id:Y._id}}else d1.setValue(Z,F,this._doc)}else d1.setValue(Z,F,this._doc);return this};s.prototype.$__fullPath=function(A){return A||""};s.prototype.getChanges=function(){let A=this.$__delta();return A?A[1]:{}};s.prototype.$__delta=function A(){let F=this.$__dirty(),B=this.$__schema.options.optimisticConcurrency;if(B)if(Array.isArray(B)){let Y=new Set(B);if(this.modifiedPaths().find((G)=>Y.has(G)))this.$__.version=F.length?3:1}else this.$__.version=F.length?3:1;if(!F.length&&this.$__.version!==3)return;let $={},Z={},D=F.length,X=[],J=0;if($._id=this._doc._id,($&&$._id&&$._id.$__||null)!=null)$._id=$._id.toObject({transform:!1,depopulate:!0});for(;J<D;++J){let Y=F[J],W=Y.value,G=wb1(this,Y.path,W);if(G){X.push(G);continue}if(!this.$populated(Y.path,!0)&&this.$__.selected){let q=Y.path.split("."),z=q[0];if(this.$__.selected[z]&&this.$__.selected[z].$elemMatch)if(q.length>1&&q[1]==0&&typeof $[z]==="undefined")$[z]=this.$__.selected[z],q[1]="$",Y.path=q.join(".");else{X.push(Y.path);continue}}if(this.$isDefault(Y.path)&&this.$__.selected){if(Y.path.indexOf(".")===-1&&Jn(this.$__.selected,Y.path))continue;if(kw(Y.path).find((z)=>Jn(this.$__.isSelected,z)))continue}if(X.length)continue;if(W===void 0)O5(this,$,Z,Y,1,"$unset");else if(W===null)O5(this,$,Z,Y,null);else if(d1.isMongooseArray(W)&&W.$path()&&W[O4])Vb1(this,$,Z,Y,W);else if(W[fx1.pathSymbol]&&Buffer.isBuffer(W))W=W.toObject(),O5(this,$,Z,Y,W);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Y.path]!=null){let q=this.$__.primitiveAtomics[Y.path],z=cx1(q);O5(this,$,Z,Y,q[z],z)}else W=o7(W,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),O5(this,$,Z,Y,W)}if(X.length)return new xx1(X);if(this.$__.version)this.$__version($,Z);if(Object.keys(Z).length===0)return[$,null];return[$,Z]};function wb1(A,F,B){let $=A.$populated(F,!0);if(!$&&A.$__.selected){let D=F.split(".")[0];if(A.$__.selected[D+".$"])return D}if(!($&&d1.isMongooseArray(B)))return;if($.options.match||$.options.options&&d1.object.hasOwnProperty($.options.options,"limit")||$.options.options&&$.options.options.skip||$.options.select&&($.options.select._id===0||/\s?-_id\s?/.test($.options.select))){let D=B[O4];if(Object.keys(D).length===0||D.$set||D.$pop)return F}}function O5(A,F,B,$,Z,D){if(D||(D="$set"),!B[D])B[D]={};if(B[D][$.path]=Z,A.$__schema.options.versionKey===!1)return;if(Nb1(A,$.path))return;if((3&A.$__.version)===3)return;if(A.$__schema.options.optimisticConcurrency)return;switch(D){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(D==="$push"||D==="$addToSet"||D==="$pullAll"||D==="$pull")if(/\.\d+\.|\.\d+$/.test($.path))A.$__.version=3;else A.$__.version=2;else if(/^\$p/.test(D))A.$__.version=3;else if(Array.isArray(Z))A.$__.version=3;else if(/\.\d+\.|\.\d+$/.test($.path))A.$__.version=1}function Vb1(A,F,B,$,Z){if(B.$set&&B.$set[$.path])return;if(typeof Z.$__getAtomics==="function"){Z.$__getAtomics().forEach(function(Q){let q=Q[0],z=Q[1];O5(A,F,B,$,z,q)});return}let D=Z[O4],X=Object.keys(D),J=X.length,Y,W;if(J===0){if(d1.isMongooseObject(Z))Z=Z.toObject({depopulate:1,_isNested:!0});else if(Z.valueOf)Z=Z.valueOf();return O5(A,F,B,$,Z)}function G(Q){return d1.isMongooseObject(Q)?Q.toObject({depopulate:1,_isNested:!0}):Q}while(J--){if(W=X[J],Y=D[W],d1.isMongooseObject(Y))Y=Y.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(Y))Y=Y.map(G);else if(Y.valueOf)Y=Y.valueOf();if(W==="$addToSet")Y={$each:Y};O5(A,F,B,$,Y,W)}}function Nb1(A,F){let B=A.$__schema.options.skipVersioning;if(!B)return!1;return F=F.replace(/\.\d+\./,"."),B[F]}s.prototype.$clone=function(){let F=new this.constructor;if(F.$isNew=this.$isNew,this._doc)F._doc=o7(this._doc,{retainDocuments:!0});if(this.$__){let $=new this.$__.constructor;for(let Z of Object.getOwnPropertyNames(this.$__)){if(Z==="activePaths")continue;$[Z]=o7(this.$__[Z])}Object.assign($.activePaths,o7({...this.$__.activePaths})),F.$__=$}return F};s.prototype.$createModifiedPathsSnapshot=function A(){let F=new WeakMap;if(!this.$isSubdocument){let B=this.$getAllSubdocs();for(let $ of B)F.set($,$.$__.activePaths.clone())}return new gx1(F,this.$__.activePaths.clone(),this.$__.version)};s.prototype.$restoreModifiedPathsSnapshot=function A(F){if(this.$__.activePaths=F.activePaths.clone(),this.$__.version=F.version,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let $ of B)if(F.subdocSnapshot.has($))$.$__.activePaths=F.subdocSnapshot.get($)}return this};s.prototype.$clearModifiedPaths=function A(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let F=this.$getAllSubdocs();for(let B of F)B.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */s.prototype.$__hasOnlyPrimitiveValues=function A(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((F)=>{return F==null||typeof F!=="object"||d1.isNativeObject(F)&&!Array.isArray(F)||Xn(F,"ObjectId")||Xn(F,"Decimal128")}))};/*!
 * Module exports.
 */s.VERSION_WHERE=1;s.VERSION_INC=2;s.VERSION_ALL=3;s.ValidationError=vG;Vn.exports=wn=s});var f1=C((ub1)=>{/*!
 * Module dependencies.
 */var Mb1=l4().UUID,Rb1=qG(),In=O9(),Pb1=U3(),Tn=rL(),bw=T2(),jb1=B7(),Ib1=I5(),On=DG(),Sn=Vp(),S5=f6(),Tb1=yB(),Ob1=KL(),mD=kD(),Sb1=HG(),kb1=UG(),cD=bA(),{trustedSymbol:eB}=vB(),xw;ub1.specialProperties=cD;ub1.isMongooseArray=On.isMongooseArray;ub1.isMongooseDocumentArray=Sn.isMongooseDocumentArray;ub1.registerMongooseArray=On.registerMongooseArray;ub1.registerMongooseDocumentArray=Sn.registerMongooseDocumentArray;var fw=/\s/,gw=/\s+/;ub1.toCollectionName=function(A,F){if(A==="system.profile")return A;if(A==="system.indexes")return A;if(typeof F==="function"){if(typeof A!=="string")throw new TypeError("Collection name must be a string");if(A.length===0)throw new TypeError("Collection name cannot be empty");return F(A)}return A};ub1.deepEqual=function A(F,B){if(F===B)return!0;if(typeof F!=="object"||typeof B!=="object")return F===B;if(F instanceof Date&&B instanceof Date)return F.getTime()===B.getTime();if(S5(F,"ObjectId")&&S5(B,"ObjectId")||S5(F,"Decimal128")&&S5(B,"Decimal128"))return F.toString()===B.toString();if(F instanceof RegExp&&B instanceof RegExp)return F.source===B.source&&F.ignoreCase===B.ignoreCase&&F.multiline===B.multiline&&F.global===B.global&&F.dotAll===B.dotAll&&F.unicode===B.unicode&&F.sticky===B.sticky&&F.hasIndices===B.hasIndices;if(F==null||B==null)return!1;if(F.prototype!==B.prototype)return!1;if(F instanceof Map||B instanceof Map){if(!(F instanceof Map)||!(B instanceof Map))return!1;return A(Array.from(F.keys()),Array.from(B.keys()))&&A(Array.from(F.values()),Array.from(B.values()))}if(F instanceof Number&&B instanceof Number)return F.valueOf()===B.valueOf();if(Buffer.isBuffer(F))return ub1.buffer.areEqual(F,B);if(Array.isArray(F)||Array.isArray(B)){if(!Array.isArray(F)||!Array.isArray(B))return!1;let X=F.length;if(X!==B.length)return!1;for(let J=0;J<X;++J)if(!A(F[J],B[J]))return!1;return!0}if(F.$__!=null)F=F._doc;else if(mD(F))F=F.toObject();if(B.$__!=null)B=B._doc;else if(mD(B))B=B.toObject();let $=Object.keys(F),Z=Object.keys(B),D=$.length;if(D!==Z.length)return!1;for(let X=D-1;X>=0;X--)if($[X]!==Z[X])return!1;for(let X of $)if(!A(F[X],B[X]))return!1;return!0};ub1.last=function(A){if(A.length>0)return A[A.length-1];return};/*!
 * ignore
 */ub1.promiseOrCallback=Sb1;/*!
 * ignore
 */ub1.cloneArrays=function A(F){if(!Array.isArray(F))return F;return F.map((B)=>ub1.cloneArrays(B))};/*!
 * ignore
 */ub1.omit=function A(F,B){if(B==null)return Object.assign({},F);if(!Array.isArray(B))B=[B];let $=Object.assign({},F);for(let Z of B)delete $[Z];return $};ub1.clonePOJOsAndArrays=function A(F){if(F==null)return F;if(F.$__!=null)return F;if(Tb1(F)){F={...F};for(let B of Object.keys(F))F[B]=ub1.clonePOJOsAndArrays(F[B]);return F}if(Array.isArray(F)){F=[...F];for(let B=0;B<F.length;++B)F[B]=ub1.clonePOJOsAndArrays(F[B]);return F}return F};ub1.merge=function A(F,B,$,Z){$=$||{};let D=Object.keys(B),X=0,J=D.length,Y;if(B[eB])F[eB]=B[eB];Z=Z||"";let W=$.omitNested||{};while(X<J){if(Y=D[X++],$.omit&&$.omit[Y])continue;if(W[Z])continue;if(cD.has(Y))continue;if(F[Y]==null)F[Y]=ub1.clonePOJOsAndArrays(B[Y]);else if(ub1.isObject(B[Y])){if(!ub1.isObject(F[Y]))F[Y]={};if(B[Y]!=null){if($.isDiscriminatorSchemaMerge&&(B[Y].$isSingleNested&&F[Y].$isMongooseDocumentArray)||B[Y].$isMongooseDocumentArray&&F[Y].$isSingleNested)continue;else if(B[Y].instanceOfSchema){if(F[Y].instanceOfSchema)kb1(F[Y],B[Y].clone(),$.isDiscriminatorSchemaMerge);else F[Y]=B[Y].clone();continue}else if(S5(B[Y],"ObjectId")){F[Y]=new Pb1(B[Y]);continue}}A(F[Y],B[Y],$,Z?Z+"."+Y:Y)}else if($.overwrite)F[Y]=B[Y]}return F};ub1.toObject=function A(F){xw||(xw=X7());let B;if(F==null)return F;if(F instanceof xw)return F.toObject();if(Array.isArray(F)){B=[];for(let $ of F)B.push(A($));return B}if(ub1.isPOJO(F)){if(B={},F[eB])B[eB]=F[eB];for(let $ of Object.keys(F)){if(cD.has($))continue;B[$]=A(F[$])}return B}return F};ub1.isObject=Ib1;ub1.isPOJO=yB();ub1.isNonBuiltinObject=function A(F){return typeof F==="object"&&!ub1.isNativeObject(F)&&!ub1.isMongooseType(F)&&!(F instanceof Mb1)&&F!=null};ub1.isNativeObject=function(A){return Array.isArray(A)||A instanceof Date||A instanceof Boolean||A instanceof Number||A instanceof String};ub1.isEmptyObject=function(A){return A!=null&&typeof A==="object"&&Object.keys(A).length===0};ub1.hasKey=function A(F,B){let $=Object.keys(F);for(let Z of $){if(Z===B)return!0;if(ub1.isPOJO(F[Z])&&ub1.hasKey(F[Z],B))return!0}return!1};ub1.tick=function A(F){if(typeof F!=="function")return;return function(){try{F.apply(this,arguments)}catch(B){jb1(function(){throw B})}}};ub1.isMongooseType=function(A){return S5(A,"ObjectId")||S5(A,"Decimal128")||A instanceof Buffer};ub1.isMongooseObject=mD;ub1.expires=function A(F){if(!(F&&F.constructor.name==="Object"))return;if(!("expires"in F))return;F.expireAfterSeconds=typeof F.expires!=="string"?F.expires:Math.round(Rb1(F.expires)/1000),delete F.expires};ub1.populate=function A(F,B,$,Z,D,X,J,Y){let W=null;if(arguments.length===1){if(F instanceof Tn)return F._docs={},F._childDocs=[],[F];if(Array.isArray(F))return G(F).map((q)=>ub1.populate(q)[0]);if(ub1.isObject(F))W=Object.assign({},F);else W={path:F}}else if(typeof $==="object")W={path:F,select:B,match:$,options:Z};else W={path:F,select:B,model:$,match:Z,options:D,populate:X,justOne:J,count:Y};if(typeof W.path!=="string"&&!(Array.isArray(W.path)&&W.path.every((Q)=>typeof Q==="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof F+"`");return _b1(W);function G(Q){let q=[];return Q.forEach(function(z){if(fw.test(z.path))z.path.split(gw).forEach(function(U){let K=Object.assign({},z);K.path=U,q.push(K)});else q.push(z)}),q}};function _b1(A){if(Array.isArray(A.populate)){let $=[];A.populate.forEach(function(Z){if(fw.test(Z.path)){let D=Object.assign({},Z);D.path.split(gw).forEach(function(J){D.path=J,$.push(ub1.populate(D)[0])})}else $.push(ub1.populate(Z)[0])}),A.populate=ub1.populate($)}else if(A.populate!=null&&typeof A.populate==="object")A.populate=ub1.populate(A.populate);let F=[],B=fw.test(A.path)?A.path.split(gw):Array.isArray(A.path)?A.path:[A.path];if(A.options!=null)A.options=bw(A.options);for(let $ of B)F.push(new Tn(Object.assign({},A,{path:$})));return F}ub1.getValue=function(A,F,B){return In.get(A,F,bb1,B)};/*!
 * ignore
 */var xb1=Object.freeze({getters:!1});function bb1(A,F){if(F==="$*"&&A instanceof Map)return A;let B=A?._doc||A;if(B!=null&&B.isMongooseArrayProxy)B=B.__array;return B instanceof Map?B.get(F,xb1):B[F]}ub1.setValue=function(A,F,B,$,Z){In.set(A,F,B,"_doc",$,Z)};ub1.object={};ub1.object.vals=function A(F){let B=Object.keys(F),$=B.length,Z=[];while($--)Z.push(F[B[$]]);return Z};var fb1=Object.prototype.hasOwnProperty;ub1.object.hasOwnProperty=function(A,F){return fb1.call(A,F)};ub1.isNullOrUndefined=function(A){return A===null||A===void 0};/*!
 * ignore
 */ub1.array={};ub1.array.flatten=function A(F,B,$){return $||($=[]),F.forEach(function(Z){if(Array.isArray(Z))A(Z,B,$);else if(!B||B(Z))$.push(Z)}),$};/*!
 * ignore
 */var gb1=Object.prototype.hasOwnProperty;ub1.hasUserDefinedProperty=function(A,F){if(A==null)return!1;if(Array.isArray(F)){for(let B of F)if(ub1.hasUserDefinedProperty(A,B))return!0;return!1}if(gb1.call(A,F))return!0;if(typeof A==="object"&&F in A){let B=A[F];return B!==Object.prototype[F]&&B!==Array.prototype[F]}return!1};/*!
 * ignore
 */var Nn=Math.pow(2,32)-1;ub1.isArrayIndex=function(A){if(typeof A==="number")return A>=0&&A<=Nn;if(typeof A==="string"){if(!/^\d+$/.test(A))return!1;return A=+A,A>=0&&A<=Nn}return!1};ub1.array.unique=function(A){let F=new Set,B=new Set,$=[];for(let Z of A)if(typeof Z==="number"||typeof Z==="string"||Z==null){if(F.has(Z))continue;$.push(Z),F.add(Z)}else if(S5(Z,"ObjectId")){if(B.has(Z.toString()))continue;$.push(Z),B.add(Z.toString())}else $.push(Z);return $};ub1.buffer={};ub1.buffer.areEqual=function(A,F){if(!Buffer.isBuffer(A))return!1;if(!Buffer.isBuffer(F))return!1;if(A.length!==F.length)return!1;for(let B=0,$=A.length;B<$;++B)if(A[B]!==F[B])return!1;return!0};ub1.getFunctionName=Ob1;ub1.decorate=function(A,F){for(let B in F){if(cD.has(B))continue;A[B]=F[B]}};ub1.mergeClone=function(A,F){if(mD(F))F=F.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let B=Object.keys(F),$=B.length,Z=0,D;while(Z<$){if(D=B[Z++],cD.has(D))continue;if(typeof A[D]==="undefined")A[D]=bw(F[D],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let X=F[D];if(X!=null&&X.valueOf&&!(X instanceof Date))X=X.valueOf();if(ub1.isObject(X)){let J=X;if(mD(X)&&!X.isMongooseBuffer)J=J.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(X.isMongooseBuffer)J=Buffer.from(J);ub1.mergeClone(A[D],J)}else A[D]=bw(X,{flattenDecimals:!1})}}};ub1.each=function(A,F){for(let B of A)F(B)};ub1.renameObjKey=function(A,F,B){return Object.keys(A).reduce((Z,D)=>{if(D===F)Z[B]=A[F];else Z[D]=A[D];return Z},{})};/*!
 * ignore
 */ub1.getOption=function(A){let F=Array.prototype.slice.call(arguments,1);for(let B of F){if(B==null)continue;if(B[A]!=null)return B[A]}return null};/*!
 * ignore
 */ub1.noop=function(){};ub1.errorToPOJO=function A(F){if(!(F instanceof Error))throw new Error("`error` must be `instanceof Error`.");let $={};for(let Z of Object.getOwnPropertyNames(F))$[Z]=F[Z];return $};/*!
 * ignore
 */ub1.warn=function A(F){return process.emitWarning(F,{code:"MONGOOSE"})};ub1.injectTimestampsOption=function A(F,B){if(B==null)return;F.timestamps=B}});var B6=C((lG,hn)=>{/*!
 * Module dependencies.
 */var lD=r4(),yn=T9(),Cf1=QG(),Kf1=aL(),cG=T2(),vw=Zp(),Ef1=Xp(),hw=Yp(),xn=B7(),Lf1=w1().schemaTypeSymbol,lA=f1(),vn=w1().validatorErrorSymbol,wf1=w1().documentIsModified,bn=w1().populateModelSymbol,dw=lD.CastError,mw=lD.ValidatorError,Vf1={_skipMarkModified:!0};function m1(A,F,B){this[Lf1]=!0,this.path=A,this.instance=B,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),F=F||{};let $=this.constructor.defaultOptions||{},Z=Object.keys($);for(let J of Z)if(J==="validate")this.validate($.validate);else if($.hasOwnProperty(J)&&!Object.prototype.hasOwnProperty.call(F,J))F[J]=$[J];if(F.select==null)delete F.select;let D=this.OptionsConstructor||yn;if(this.options=new D(F),this._index=null,lA.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,vw(this);let X=Object.keys(this.options);for(let J of X){if(J==="cast"){if(Array.isArray(this.options[J]))this.castFunction.apply(this,this.options[J]);else this.castFunction(this.options[J]);continue}if(lA.hasUserDefinedProperty(this.options,J)&&typeof this[J]==="function"){if(J==="index"&&this._index){if(F.index===!1){let G=this._index;if(typeof G==="object"&&G!=null){if(G.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(G.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let Y=F[J];if(J==="default"){this.default(Y);continue}let W=Array.isArray(Y)?Y:[Y];this[J].apply(this,W)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}m1.prototype.OptionsConstructor=yn;m1.prototype.path;m1.prototype.validators;m1.prototype.isRequired;m1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};m1.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=(B)=>B;return this._cast=F,this._cast};m1.prototype.castFunction=function A(F,B){if(arguments.length===0)return this._castFunction;if(F===!1)F=this.constructor._defaultCaster||(($)=>$);if(typeof F==="string")return this._castErrorMessage=F,this._castFunction;if(F!=null)this._castFunction=F;if(B!=null)this._castErrorMessage=B;return this._castFunction};m1.prototype.cast=function A(){throw new Error("Base SchemaType class does not implement a `cast()` function")};m1.set=function A(F,B){if(!this.hasOwnProperty("defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[F]=B};m1.get=function(A){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(A)};m1.prototype.default=function(A){if(arguments.length===1){if(A===void 0){this.defaultValue=void 0;return}if(A!=null&&A.instanceOfSchema)throw new lD("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=A,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};m1.prototype.index=function(A){return this._index=A,lA.expires(this._index),this};m1.prototype.unique=function A(F,B){if(this._index===!1){if(!F)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!F,typeof B==="string")this._duplicateKeyErrorMessage=B;return this};m1.prototype.text=function(A){if(this._index===!1){if(!A)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!this.options.hasOwnProperty("index")&&A===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=A,this};m1.prototype.sparse=function(A){if(this._index===!1){if(!A)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!this.options.hasOwnProperty("index")&&A===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=A,this};m1.prototype.immutable=function(A){return this.$immutable=A,vw(this),this};m1.prototype.transform=function(A){return this.options.transform=A,this};m1.prototype.set=function(A){if(typeof A!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(A),this};m1.prototype.get=function(A){if(typeof A!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(A),this};m1.prototype.validateAll=function(A){for(let F=0;F<A.length;F++)this.validate(A[F]);return this};m1.prototype.validate=function(A,F,B){if(typeof A==="function"||A&&lA.getFunctionName(A.constructor)==="RegExp"){let X;if(typeof F==="function")X={validator:A,message:F},X.type=B||"user defined";else if(F instanceof Object&&!B){if(X=hw(F)?Object.assign({},F):cG(F),!X.message)X.message=X.msg;X.validator=A,X.type=X.type||"user defined"}else{if(F==null)F=lD.messages.general.default;if(!B)B="user defined";X={message:F,type:B,validator:A}}return this.validators.push(X),this}let $,Z,D;for($=0,Z=arguments.length;$<Z;$++){if(D=arguments[$],!lA.isPOJO(D)){let X="Invalid validator. Received ("+typeof D+") "+D+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(X)}this.validate(D.validator,D)}return this};m1.prototype.required=function(A,F){let B={};if(arguments.length>0&&A==null)return this.validators=this.validators.filter(function(D){return D.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof A==="object")B=A,F=B.message||F,A=A.isRequired;if(A===!1)return this.validators=this.validators.filter(function(D){return D.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let $=this;if(this.isRequired=!0,this.requiredValidator=function(D){let X=this&&this.$__&&this.$__.cachedRequired;if(X!=null&&!this.$__isSelected($.path)&&!this[wf1]($.path))return!0;if(X!=null&&$.path in X){let J=X[$.path]?$.checkRequired(D,this):!0;return delete X[$.path],J}else if(typeof A==="function")return A.apply(this)?$.checkRequired(D,this):!0;return $.checkRequired(D,this)},this.originalRequiredValue=A,typeof A==="string")F=A,A=void 0;let Z=F||lD.messages.general.required;return this.validators.unshift(Object.assign({},B,{validator:this.requiredValidator,message:Z,type:"required"})),this};m1.prototype.ref=function(A){return this.options.ref=A,this};m1.prototype.getDefault=function(A,F,B){let $;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")$=this.defaultValue.call(A);else $=this.defaultValue.call(A,A);else $=this.defaultValue;if($!==null&&$!==void 0){if(typeof $==="object"&&(!this.options||!this.options.shared))$=cG($);if(B&&B.skipCast)return this._applySetters($,A);let Z=this.applySetters($,A,F,void 0,Vf1);if(Z&&!Array.isArray(Z)&&Z.$isSingleNested)Z.$__parent=A;return Z}return $};m1.prototype._applySetters=function(A,F,B,$,Z){let D=A;if(B)return D;let X=this.setters;for(let J=X.length-1;J>=0;J--)D=X[J].call(F,D,$,this,Z);return D};/*!
 * ignore
 */m1.prototype._castNullish=function A(F){return F};m1.prototype.applySetters=function(A,F,B,$,Z){let D=this._applySetters(A,F,B,$,Z);if(D==null)return this._castNullish(D);return D=this.cast(D,F,B,$,Z),D};m1.prototype.applyGetters=function(A,F){let B=A,$=this.getters,Z=$.length;if(Z===0)return B;for(let D=0;D<Z;++D)B=$[D].call(F,B,this);return B};m1.prototype.select=function A(F){return this.selected=!!F,this};m1.prototype.doValidate=function(A,F,B,$){let Z=!1,D=this.path;if(typeof F!=="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof F}`);let X=this.validators.filter((W)=>typeof W==="object"&&W!==null),J=X.length;if(!J)return F(null);for(let W=0,G=X.length;W<G;++W){if(Z)break;let Q=X[W],q=Q.validator,z,H=hw(Q)?Object.assign({},Q):cG(Q);if(H.path=$&&$.path?$.path:D,H.fullPath=this.$fullPath,H.value=A,q instanceof RegExp){Y(q.test(A),H,B);continue}if(typeof q!=="function")continue;if(A===void 0&&q!==this.requiredValidator){Y(!0,H,B);continue}try{if(H.propsParameter)z=q.call(B,A,H);else z=q.call(B,A)}catch(U){if(z=!1,H.reason=U,U.message)H.message=U.message}if(z!=null&&typeof z.then==="function")z.then(function(U){Y(U,H,B)},function(U){H.reason=U,H.message=U.message,z=!1,Y(z,H,B)});else Y(z,H,B)}function Y(W,G,Q){if(Z)return;if(W===void 0||W){if(--J<=0)xn(function(){F(null)})}else Z=new(G.ErrorConstructor||mw)(G,Q),Z[vn]=!0,xn(function(){F(Z)})}};function fn(A,F){if(A!==void 0&&!A){let $=new(F.ErrorConstructor||mw)(F);return $[vn]=!0,$}}m1.prototype.doValidateSync=function(A,F,B){let $=this.path;if(!this.validators.length)return null;let D=this.validators;if(A===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")D=[this.validators[0]];else return null;let X=null,J=0,Y=D.length;for(J=0;J<Y;++J){let W=D[J];if(W===null||typeof W!=="object")continue;let G=W.validator,Q=hw(W)?Object.assign({},W):cG(W);Q.path=B&&B.path?B.path:$,Q.fullPath=this.$fullPath,Q.value=A;let q=!1;if(Ef1(G))continue;if(G instanceof RegExp){X=fn(G.test(A),Q);continue}if(typeof G!=="function")continue;try{if(Q.propsParameter)q=G.call(F,A,Q);else q=G.call(F,A)}catch(z){q=!1,Q.reason=z}if(q!=null&&typeof q.then==="function")continue;if(X=fn(q,Q),X)break}return X};m1._isRef=function(A,F,B,$){let Z=$&&A.options&&(A.options.ref||A.options.refPath);if(!Z&&B&&B.$__!=null){let D=B.$__fullPath(A.path,!0),X=B.ownerDocument();Z=D!=null&&X.$populated(D)||B.$populated(A.path)}if(Z){if(F==null)return!0;if(!Buffer.isBuffer(F)&&F._bsontype!=="Binary"&&lA.isObject(F))return!0;return $}return!1};/*!
 * ignore
 */m1.prototype._castRef=function A(F,B,$,Z){if(F==null)return F;if(F.$__!=null)return F.$__.wasPopulated=F.$__.wasPopulated||{value:F._doc._id},F;if(Buffer.isBuffer(F)||!lA.isObject(F)){if($)return F;throw new dw(this.instance,F,this.path,null,this)}let D=B.$__fullPath(this.path,!0),J=B.ownerDocument().$populated(D,!0),Y=F;if(!B.$__.populated||!B.$__.populated[D]||!B.$__.populated[D].options||!B.$__.populated[D].options.options||!B.$__.populated[D].options.options.lean){let W=J?J.options[bn]:B.constructor.db.model(this.options.ref);Y=W.hydrate(F,null,Z),Y.$__.wasPopulated={value:Y._doc._id,options:{[bn]:W}}}return Y};/*!
 * ignore
 */function gn(A,F){return this.castForQuery(null,A,F)}/*!
 * ignore
 */function Nf1(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function($){return B.castForQuery(null,$,F)})}function un(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function($){if(Array.isArray($)&&$.length===0)return $;return B.castForQuery(null,$,F)})}m1.prototype.$conditionalHandlers={$all:Nf1,$eq:gn,$in:un,$ne:gn,$nin:un,$exists:Cf1,$type:Kf1};m1.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A);return $.call(this,F,B)}try{return this.applySetters(F,B)}catch(Z){if(Z instanceof dw&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};m1.checkRequired=function(A){if(arguments.length!==0)this._checkRequired=A;return this._checkRequired};m1.prototype.checkRequired=function(A){return A!=null};m1.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,A,this.instance);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)F.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)F.$immutable=this.$immutable,vw(F);if(this._index!==void 0)F._index=this._index;if(this.selected!==void 0)F.selected=this.selected;if(this.isRequired!==void 0)F.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)F.originalRequiredValue=this.originalRequiredValue;return F.getters=this.getters.slice(),F.setters=this.setters.slice(),F};m1.prototype.getEmbeddedSchemaType=function A(){return this.$embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */m1.prototype._duplicateKeyErrorMessage=null;m1.prototype.toJSONSchema=function A(F){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};m1.prototype.autoEncryptionType=function A(){return null};/*!
 * Module exports.
 */hn.exports=lG=m1;lG.CastError=dw;lG.ValidatorError=mw});var cw=C((OG0,dn)=>{var e7=$7();class S9{constructor(A){if(Object.assign(this,A),A!=null&&A.options!=null)this.options=Object.assign({},A.options)}}Object.defineProperty(S9.prototype,"ref",e7);Object.defineProperty(S9.prototype,"refPath",e7);Object.defineProperty(S9.prototype,"localField",e7);Object.defineProperty(S9.prototype,"foreignField",e7);Object.defineProperty(S9.prototype,"justOne",e7);Object.defineProperty(S9.prototype,"count",e7);Object.defineProperty(S9.prototype,"match",e7);Object.defineProperty(S9.prototype,"options",e7);Object.defineProperty(S9.prototype,"skip",e7);Object.defineProperty(S9.prototype,"limit",e7);Object.defineProperty(S9.prototype,"perDocumentLimit",e7);dn.exports=S9});var pG=C((SG0,mn)=>{mn.exports=function A(F,B,$){if(F==null)return F;if(F._doc!=null)F=F._doc;if(arguments.length>=3){if(typeof F!=="object")return;if($===void 0)return;if(F instanceof Map)F.set(B,$);else F[B]=$;return $}if(B==="$*")return F instanceof Map?Array.from(F.values()):Object.keys(F).map((Z)=>F[Z]);if(F instanceof Map)return F.get(B);return F[B]}});var lw=C((kG0,nn)=>{var Mf1=t1(),Rf1=Xw(),cn=pG(),ln=O9(),Pf1=A1("util"),jf1=f1(),pn=/(\.\d+$|\.\d+\.)/g;nn.exports=function A(F,B,$,Z,D){if(F==null)return[];if(typeof F==="string"&&D!=null&&Rf1(D,F))throw new Mf1("refPath `"+F+"` must not be excluded in projection, got "+Pf1.inspect(D));if(pn.test($)){let Y=$.split(pn);if(Y[Y.length-1]==="")throw new Error("Can't populate individual element in an array");let W="",G=F;for(let z=0;z<Y.length;z+=2){let H=Y[z];if(G.startsWith(H+"."))W+=G.substring(0,H.length)+Y[z+1],G=G.substring(H.length+1);else if(z===Y.length-1){W+=G,G="";break}else throw new Error("Could not normalize ref path, chunk "+H+" not in populated path")}let Q=ln.get(W,B,cn),q=Array.isArray(Q)?Q:[Q];return q=jf1.array.flatten(q),q}let X=ln.get(F,B,cn),J;if(Z!=null&&Z.virtuals.hasOwnProperty(F))J=[Z.virtuals[F].applyGetters(void 0,B)];else J=Array.isArray(X)?X:[X];return J}});var iG=C((_G0,sn)=>{var If1=lw(),Tf1=f1(),Of1=w1().modelSymbol;function w3(A,F){this.path=F,this.getters=[],this.setters=[],this.options=Object.assign({},A)}w3.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let F="$"+this.path;this.getters.push(function(){return this.$locals[F]}),this.setters.push(function(B){this.$locals[F]=B})};/*!
 * ignore
 */w3.prototype.clone=function(){let A=new w3(this.options,this.path);return A.getters=[].concat(this.getters),A.setters=[].concat(this.setters),A};w3.prototype.get=function(A){return this.getters.push(A),this};w3.prototype.set=function(A){return this.setters.push(A),this};w3.prototype.applyGetters=function(A,F){if(Tf1.hasUserDefinedProperty(this.options,["ref","refPath"])&&F.$$populatedVirtuals&&F.$$populatedVirtuals.hasOwnProperty(this.path))A=F.$$populatedVirtuals[this.path];let B=A;for(let $ of this.getters)B=$.call(F,B,this,F);return B};w3.prototype.applySetters=function(A,F){let B=A;for(let $ of this.setters)B=$.call(F,B,this,F);return B};w3.prototype._getModelNamesForPopulate=function A(F){if(this.options.refPath)return If1(this.options.refPath,F,this.path);let B=null;if(typeof this.options.ref==="function"&&!this.options.ref[Of1])B=this.options.ref.call(F,F);else B=this.options.ref;if(B!=null&&!Array.isArray(B))return[B];return B};/*!
 * exports
 */sn.exports=w3});var pw=C((xG0,an)=>{an.exports=function A(F){let B={_id:{auto:!0}};B._id[F.options.typeKey]="ObjectId",F.add(B)}});var iw=C((bG0,tn)=>{tn.exports=function A(F,B){let $=F.discriminatorMapping&&F.discriminatorMapping.value;if($&&!("sparse"in B)){let Z=F.options.discriminatorKey;B.partialFilterExpression=B.partialFilterExpression||{},B.partialFilterExpression[Z]=$}return B}});var on=C((fG0,rn)=>{var nw=f2(),Sf1=I5(),kf1=iw();rn.exports=function A(F){let B=[],$=new WeakMap,Z=F.constructor.indexTypes,D=new Map;return X(F),B;function X(Y,W,G){if($.has(Y))return;$.set(Y,!0),W=W||"";let Q=Object.keys(Y.paths);for(let q of Q){let z=Y.paths[q];if(G!=null&&G.paths[q])continue;if(z._duplicateKeyErrorMessage!=null)Y._duplicateKeyErrorMessagesByPath=Y._duplicateKeyErrorMessagesByPath||{},Y._duplicateKeyErrorMessagesByPath[q]=z._duplicateKeyErrorMessage;if(z.$isMongooseDocumentArray||z.$isSingleNested){if(nw(z,"options.excludeIndexes")!==!0&&nw(z,"schemaOptions.excludeIndexes")!==!0&&nw(z,"schema.options.excludeIndexes")!==!0)X(z.schema,W+q+".");if(z.schema.discriminators!=null){let U=z.schema.discriminators,K=Object.keys(U);for(let E of K)X(U[E],W+q+".",z.schema)}if(z.$isMongooseDocumentArray)continue}let H=z._index||z.caster&&z.caster._index;if(H!==!1&&H!==null&&H!==void 0){let U={},K=Sf1(H),E=K?H:{},L=typeof H==="string"?H:K?H.type:!1;if(L&&Z.indexOf(L)!==-1)U[W+q]=L;else if(E.text)U[W+q]="text",delete E.text;else{let M=!1;if(H==="descending"||H==="desc")M=!0;else if(H==="ascending"||H==="asc")M=!1;else M=Number(H)===-1;U[W+q]=M?-1:1}if(delete E.type,!("background"in E))E.background=!0;if(Y.options.autoIndex!=null)E._autoIndex=Y.options.autoIndex;let V=E&&E.name;if(typeof V==="string")if(D.has(V))Object.assign(D.get(V),U);else B.push([U,E]),D.set(V,U);else B.push([U,E]),D.set(V,U)}}if($.delete(Y),W)J(Y,W);else Y._indexes.forEach(function(q){let z=q[1];if(!("background"in z))z.background=!0;kf1(Y,z)}),B=B.concat(Y._indexes)}function J(Y,W){let G=Y._indexes,Q=G.length;for(let q=0;q<Q;++q){let z=G[q][0],H=G[q][1],U=Object.keys(z),K=U.length,E={};for(let V=0;V<K;++V){let M=U[V];E[W+M]=z[M]}let L=Object.assign({},H);if(H!=null&&H.partialFilterExpression!=null){L.partialFilterExpression={};let V=H.partialFilterExpression;for(let M of Object.keys(V))L.partialFilterExpression[W+M]=V[M]}B.push([E,L])}}}});var sw=C((gG0,en)=>{en.exports=function A(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F}});var Fs=C((uG0,As)=>{/*!
 * ignore
 */As.exports=function A(F){if(!(!F.paths.id&&F.paths._id&&F.options.id))return F;if(F.aliases&&F.aliases.id)return F;return F.virtual("id").get(_f1),F};function _f1(){if(this._id!=null)return this._id.toString();return null}});var $s=C((yG0,Bs)=>{Bs.exports=function A(F,B){let $=Object.keys(F),Z=Object.keys(B);if($.length!==Z.length)return!1;for(let D=0;D<$.length;D++){let X=$[D];if(X!==Z[D]||F[X]!==B[X])return!1}return!0}});var Ds=C((vG0,Zs)=>{Zs.exports=function A(F,B,$,Z){if(Z.justOne||Z.count){if(F[B]=Array.isArray($)?$[0]:$,typeof F[B]!=="object")F[B]=Z.count?$:null}else F[B]=Array.isArray($)?$:$==null?[]:[$],F[B]=F[B].filter(function(D){return D&&typeof D==="object"});return F[B]}});var pD=C((hG0,Xs)=>{Xs.exports=function A(F){return F.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var nG=C((dG0,Js)=>{Js.exports=xf1;/*!
 * ignore
 */function xf1(A,F){if(A==null)return null;if(typeof A==="boolean")return F;if(typeof A[F]==="boolean")return A[F]?F:null;if(!(F in A))return F;return A[F]}});var tw=C((mG0,Ys)=>{var bf1=pD(),V3=nG();Ys.exports=pA;/*!
 * ignore
 */function pA(A,F,B){if(F==null)return;if(Object.keys(F).some((J)=>J[0]==="$")){if(F.$push)X(F.$push);if(F.$addToSet)X(F.$addToSet);if(F.$set!=null){let J=Object.keys(F.$set);for(let Y of J)aw(B,Y,F.$set,A)}if(F.$setOnInsert!=null){let J=Object.keys(F.$setOnInsert);for(let Y of J)aw(B,Y,F.$setOnInsert,A)}}let D=Object.keys(F).filter((J)=>J[0]!=="$");for(let J of D)aw(B,J,F,A);function X(J){for(let Y of Object.keys(J)){let W=B.path(Y.replace(/\.\$\./i,".").replace(/.\$$/,""));if(J[Y]&&W&&W.$isMongooseDocumentArray&&W.schema.options.timestamps){let G=W.schema.options.timestamps,Q=V3(G,"createdAt"),q=V3(G,"updatedAt");if(J[Y].$each)J[Y].$each.forEach(function(z){if(q!=null)z[q]=A;if(Q!=null)z[Q]=A;pA(A,z,W.schema)});else{if(q!=null)J[Y][q]=A;if(Q!=null)J[Y][Q]=A;pA(A,J[Y],W.schema)}}}}}function ff1(A,F,B){let $=F.schema.options.timestamps,Z=A.length;if(!$){for(let J=0;J<Z;++J)pA(B,A[J],F.schema);return}let D=V3($,"createdAt"),X=V3($,"updatedAt");for(let J=0;J<Z;++J){if(X!=null)A[J][X]=B;if(D!=null)A[J][D]=B;pA(B,A[J],F.schema)}}function gf1(A,F,B){let $=F.schema.options.timestamps;if(!$){pA(B,A,F.schema);return}let Z=V3($,"createdAt"),D=V3($,"updatedAt");if(D!=null)A[D]=B;if(Z!=null)A[Z]=B;pA(B,A,F.schema)}function aw(A,F,B,$){let Z=bf1(F),D=A.path(Z);if(!D)return;let X=[],J=Z.split(".");for(let Y=J.length-1;Y>0;--Y){let W=A.path(J.slice(0,Y).join("."));if(W!=null&&(W.$isMongooseDocumentArray||W.$isSingleNested))X.push({parentPath:F.split(".").slice(0,Y).join("."),parentSchemaType:W})}if(Array.isArray(B[F])&&D.$isMongooseDocumentArray)ff1(B[F],D,$);else if(B[F]&&D.$isSingleNested)gf1(B[F],D,$);else if(X.length>0)for(let Y of X){let{parentPath:W,parentSchemaType:G}=Y,Q=G.schema.options.timestamps,q=V3(Q,"updatedAt");if(!Q||q==null)continue;if(G.$isSingleNested)B[W+"."+q]=$;else if(G.$isMongooseDocumentArray){let z=F.substring(W.length+1);if(/^\d+$/.test(z)){B[W+"."+z][q]=$;continue}let H=z.indexOf(".");z=H!==-1?z.substring(0,H):z,B[W+"."+z+"."+q]=$}}else if(D.schema!=null&&D.schema!=A&&B[F]){let Y=D.schema.options.timestamps,W=V3(Y,"createdAt"),G=V3(Y,"updatedAt");if(!Y)return;if(G!=null)B[F][G]=$;if(W!=null)B[F][W]=$}}});var rw=C((cG0,Ws)=>{/*!
 * ignore
 */var uf1=f2();Ws.exports=yf1;/*!
 * ignore
 */function yf1(A,F,B,$,Z,D){let X=$,J=X,Y=uf1(Z,"timestamps",!0);if(!Y||X==null)return $;let W=Y!=null&&Y.createdAt===!1,G=Y!=null&&Y.updatedAt===!1;if(D){if($&&$.$set)$=$.$set,X.$set={},J=X.$set;if(!G&&B&&!$[B])J[B]=A;if(!W&&F&&!$[F])J[F]=A;return X}if($=$||{},Array.isArray(X)){if(B==null)return X;return X.push({$set:{[B]:A}}),X}if(X.$set=X.$set||{},!G&&B&&(!$.$currentDate||!$.$currentDate[B])){let Q=!1;if(B.indexOf(".")!==-1){let q=B.split(".");for(let z=1;z<q.length;++z){let H=q.slice(-z).join("."),U=q.slice(0,-z).join(".");if($[U]!=null){$[U][H]=A,Q=!0;break}else if($.$set&&$.$set[U]){$.$set[U][H]=A,Q=!0;break}}}if(!Q)X.$set[B]=A;if(X.hasOwnProperty(B))delete X[B]}if(!W&&F){if($[F])delete $[F];if($.$set&&$.$set[F])delete $.$set[F];let Q=!1;if(F.indexOf(".")!==-1){let q=F.split(".");for(let z=1;z<q.length;++z){let H=q.slice(-z).join("."),U=q.slice(0,-z).join(".");if($[U]!=null){$[U][H]=A,Q=!0;break}else if($.$set&&$.$set[U]){$.$set[U][H]=A,Q=!0;break}}}if(!Q)X.$setOnInsert=X.$setOnInsert||{},X.$setOnInsert[F]=A}if(Object.keys(X.$set).length===0)delete X.$set;return X}});var Qs=C((lG0,Gs)=>{Gs.exports=function A(F,B,$,Z,D){let X=B!=null&&B.updatedAt===!1,J=B!=null&&B.createdAt===!1,Y=$!=null?$():F.ownerDocument().constructor.base.now();if(!J&&(F.isNew||F.$isSubdocument)&&Z&&!F.$__getValue(Z)&&F.$__isSelected(Z))F.$set(Z,Y,void 0,{overwriteImmutable:!0});if(!X&&D&&(F.isNew||F.$isModified())){let W=Y;if(F.isNew&&Z!=null)W=F.$__getValue(Z);F.$set(D,W)}}});var Us=C((pG0,Hs)=>{var vf1=tw(),hf1=rw(),df1=f2(),zs=nG(),mf1=Qs(),cf1=vA(),qs=new Set(["replaceOne","findOneAndReplace"]);Hs.exports=function A(F,B){let $=F.childSchemas.find(Z);function Z(Q){return!!Q.schema.options.timestamps}if(!B&&!$)return;let D=zs(B,"createdAt"),X=zs(B,"updatedAt"),J=B!=null&&B.hasOwnProperty("currentTime")?B.currentTime:null,Y={};if(F.$timestamps={createdAt:D,updatedAt:X},D&&!F.paths[D]){let Q=F.base!=null?F.base.get("timestamps.createdAt.immutable"):null,q=Q!=null?Q:!0;Y[D]={[F.options.typeKey||"type"]:Date,immutable:q}}if(X&&!F.paths[X])Y[X]=Date;F.add(Y),F.pre("save",function Q(q){let z=df1(this,"$__.saveOptions.timestamps");if(z===!1)return q();mf1(this,z,J,D,X),q()}),F.methods.initializeTimestamps=function(){let Q=J!=null?J():this.constructor.base.now();if(D&&!this.get(D))this.$set(D,Q);if(X&&!this.get(X))this.$set(X,Q);if(this.$isSubdocument)return this;let q=this.$getAllSubdocs();for(let z of q)if(z.initializeTimestamps)z.initializeTimestamps();return this},G[cf1.builtInMiddleware]=!0;let W={query:!0,model:!1};F.pre("findOneAndReplace",W,G),F.pre("findOneAndUpdate",W,G),F.pre("replaceOne",W,G),F.pre("update",W,G),F.pre("updateOne",W,G),F.pre("updateMany",W,G);function G(Q){let q=J!=null?J():this.model.base.now();if(qs.has(this.op)&&this.getUpdate()==null)this.setUpdate({});hf1(q,D,X,this.getUpdate(),this._mongooseOptions,qs.has(this.op)),vf1(q,this.getUpdate(),this.model.schema),Q()}}});var Ks=C((iG0,Cs)=>{var lf1=t1(),pf1=A1("util");Cs.exports=if1;function if1(A,F){if(typeof A==="string")return;if(typeof A==="function")return;throw new lf1('Invalid ref at path "'+F+'". Got '+pf1.inspect(A,{depth:0}))}});var sG=C((rf1)=>{/*!
 * ignore
 */var Es=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);rf1.queryOperations=Es;/*!
 * ignore
 */var nf1=Es.concat(["validate"]);rf1.queryMiddlewareFunctions=nf1;/*!
 * ignore
 */var sf1=["aggregate"];rf1.aggregateMiddlewareFunctions=sf1;/*!
 * ignore
 */var af1=["bulkWrite","createCollection","insertMany"];rf1.modelMiddlewareFunctions=af1;/*!
 * ignore
 */var tf1=["validate","save","remove","updateOne","deleteOne","init"];rf1.documentMiddlewareFunctions=tf1});var aG=C((sG0,Ls)=>{var $g1=vA(),Zg1=HG();/*!
 * ignore
 */Ls.exports=iD;/*!
 * ignore
 */iD.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];/*!
 * ignore
 */var Dg1=new Set(iD.middlewareFunctions.flatMap((A)=>[A,`$__${A}`]));function iD(A,F,B){B=B||{};let $={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},Z=B.decorateDoc?A:A.prototype;A.$appliedHooks=!0;for(let W of Object.keys(F.paths)){let G=F.paths[W],Q=null;if(G.$isSingleNested)Q=G.caster;else if(G.$isMongooseDocumentArray)Q=G.Constructor;else continue;if(Q.$appliedHooks)continue;if(iD(Q,G.schema,{...B,isChildSchema:!0}),Q.discriminators!=null){let q=Object.keys(Q.discriminators);for(let z of q)iD(Q.discriminators[z],Q.discriminators[z].schema,B)}}let D=F.s.hooks.filter((W)=>{if(W.name==="updateOne"||W.name==="deleteOne")return!!W.document;if(W.name==="remove"||W.name==="init")return W.document==null||!!W.document;if(W.query!=null||W.document!=null)return W.document!==!1;return!0}).filter((W)=>{if(F.methods[W.name])return!W.fn[$g1.builtInMiddleware];return!0});A._middleware=D,Z.$__originalValidate=Z.$__originalValidate||Z.$__validate;let X=B&&B.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let W of X){let G=W==="validate"?"$__originalValidate":`$__${W}`,Q=D.createWrapper(W,Z[G],null,$);Z[`$__${W}`]=Q}Z.$__init=D.createWrapperSync("init",Z.$__init,null,$);let J=Object.keys(F.methods),Y=Object.assign({},$,{checkForPromise:!0});for(let W of J){if(Dg1.has(W))continue;if(!D.hasHooks(W))continue;let G=Z[W];Z[W]=function(){let Q=Array.prototype.slice.call(arguments),q=Q.slice(-1).pop(),z=typeof q==="function"?Q.slice(0,Q.length-1):Q;return Zg1(q,(H)=>{return this[`$__${W}`].apply(this,z.concat([H]))},A.events)},Z[`$__${W}`]=D.createWrapper(W,G,null,Y)}}});var Vs=C((aG0,ws)=>{ws.exports=l4().Double});var tG=C((tG0,js)=>{var Xg1=hA(),Jg1=t1(),Ns=T2(),Yg1=f1().deepEqual,Wg1=I4(),Gg1=RG(),Ms=A1("util"),Qg1=bA(),ow=f6(),zg1=wG(),Rs=w1().populateModelSymbol;/*!
 * ignore
 */class M8 extends Map{constructor(A,F,B,$){if(Wg1(A)==="Object")A=Object.keys(A).reduce((Z,D)=>Z.concat([[D,A[D]]]),[]);super(A);this.$__parent=B!=null&&B.$__!=null?B:null,this.$__path=F,this.$__schemaType=$==null?new Xg1(F):$,this.$__runDeferred()}$init(A,F){if(Ps(A),super.set(A,F),F!=null&&F.$isSingleNested)F.$basePath=this.$__path+"."+A}$__set(A,F){super.set(A,F)}get(A,F){if(ow(A,"ObjectId"))A=A.toString();if(F=F||{},F.getters===!1)return super.get(A);return this.$__schemaType.applyGetters(super.get(A),this.$__parent)}set(A,F){if(ow(A,"ObjectId"))A=A.toString();if(Ps(A),F=Gg1(F),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:A,value:F});return}let B,$=this.$__parent,Z=$!=null&&$.$__&&$.$__.populated?$.$populated(X.call(this),!0)||$.$populated(this.$__path,!0):null,D=this.get(A);if(Z!=null){if(this.$__schemaType.$isSingleNested)throw new Jg1(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(F)&&this.$__schemaType.$isMongooseArray)F=F.map((J)=>{if(J.$__==null)J=new Z.options[Rs](J);return J.$__.wasPopulated={value:J._doc._id},J});else if(F!=null){if(F.$__==null)F=new Z.options[Rs](F);F.$__.wasPopulated={value:F._doc._id}}}else try{let J=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap?{path:X.call(this)}:null;F=this.$__schemaType.applySetters(F,this.$__parent,!1,this.get(A),J)}catch(J){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(X.call(this),J);return}throw J}if(super.set(A,F),$!=null&&$.$__!=null&&!Yg1(F,D)){let J=X.call(this);if($.markModified(J),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)zg1($,J)}function X(){if(B)return B;return B=this.$__path+"."+A,B}}clear(){super.clear();let A=this.$__parent;if(A!=null)A.markModified(this.$__path)}delete(A){if(ow(A,"ObjectId"))A=A.toString();return this.set(A,void 0),super.delete(A)}toBSON(){return new Map(this)}toObject(A){if(A&&A.flattenMaps){let F={},B=this.keys();for(let $ of B)F[$]=Ns(this.get($),A);return F}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(A){if(typeof(A&&A.flattenMaps)==="boolean"?A.flattenMaps:!0){let F={},B=this.keys();for(let $ of B)F[$]=Ns(this.get($),A);return F}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let A of this.$__deferred)this.set(A.key,A.value);this.$__deferred=null}}if(Ms.inspect.custom)Object.defineProperty(M8.prototype,Ms.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:M8.prototype.inspect});Object.defineProperty(M8.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(M8.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(M8.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(M8.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(M8.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(M8.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function Ps(A){let F=typeof A;if(F!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${F}`);if(A.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${A}"`);if(A.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${A}"`);if(Qg1.has(A))throw new Error(`Mongoose maps do not support reserved key name "${A}"`)}js.exports=M8});var Ts=C((rG0,Is)=>{Is.exports=l4().UUID});var A$=C((qg1)=>{/*!
 * Module exports.
 */qg1.Array=Uw();qg1.Buffer=iB();qg1.Document=qg1.Embedded=rB();qg1.DocumentArray=mA();qg1.Double=Vs();qg1.Decimal128=ZG();qg1.ObjectId=U3();qg1.Map=tG();qg1.Subdocument=jG();qg1.UUID=Ts()});var Ss=C((AQ0,Os)=>{var Rg1=T9();class nD extends Rg1{}var ew=$7();Object.defineProperty(nD.prototype,"enum",ew);Object.defineProperty(nD.prototype,"of",ew);Object.defineProperty(nD.prototype,"castNonArrays",ew);/*!
 * ignore
 */Os.exports=nD});var _s=C((FQ0,ks)=>{ks.exports=AV;function AV(A){if(!Array.isArray(A))return{min:0,max:0,containsNonArrayItem:!0};if(A.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(A.length===1&&!Array.isArray(A[0]))return{min:1,max:1,containsNonArrayItem:!1};let F=AV(A[0]);for(let B=1;B<A.length;++B){let $=AV(A[B]);if($.min<F.min)F.min=$.min;if($.max>F.max)F.max=$.max;F.containsNonArrayItem=F.containsNonArrayItem||$.containsNonArrayItem}return F.min=F.min+1,F.max=F.max+1,F}});var sD=C((BQ0,bs)=>{var xs=A1("assert");bs.exports=function A(F){if(F==null)return F;if(F==="")return null;if(typeof F==="string"||typeof F==="boolean")F=Number(F);if(xs.ok(!isNaN(F)),F instanceof Number)return F.valueOf();if(typeof F==="number")return F;if(!Array.isArray(F)&&typeof F.valueOf==="function")return Number(F.valueOf());if(F.toString&&!Array.isArray(F)&&F.toString()==Number(F))return Number(F);xs.ok(!1)}});var FV=C(($Q0,fs)=>{fs.exports=function A(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let B=F.length-1;B>=0;--B)if(F[B]===void 0)F.splice(B,1)}for(let B of Object.keys(F))if(F[B]===void 0)delete F[B];return F}});var ys=C((ZQ0,us)=>{var F$=D4(),gs=T5(),rG=sD(),Pg1=FV(),jg1=new Set(["$and","$or"]),Ig1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),Tg1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),Og1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),Sg1=new Set(["$arrayElemAt","$first","$last"]),kg1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),_g1=new Set(["$not"]);us.exports=function A(F,B,$){if(typeof F==="boolean")return F;if(typeof F!=="object"||F===null)throw new Error("`$expr` must be an object or boolean literal");return Y7(F,B,$)};function Y7(A,F,B){if(aD(A)||A===null)return A;if(A.$cond!=null)if(Array.isArray(A.$cond))A.$cond=A.$cond.map((Z)=>Y7(Z,F,B));else A.$cond.if=Y7(A.$cond.if,F,B),A.$cond.then=Y7(A.$cond.then,F,B),A.$cond.else=Y7(A.$cond.else,F,B);else if(A.$ifNull!=null)A.$ifNull.map((Z)=>Y7(Z,F,B));else if(A.$switch!=null){if(Array.isArray(A.$switch.branches))A.$switch.branches=A.$switch.branches.map((Z)=>Y7(Z,F,B));if("default"in A.$switch)A.$switch.default=Y7(A.$switch.default,F,B)}let $=Object.keys(A);for(let Z of $)if(jg1.has(Z))A[Z]=A[Z].map((D)=>Y7(D,F,B));else if(Ig1.has(Z))A[Z]=fg1(A[Z],F,B);else if(Tg1.has(Z))A[Z]=bg1(A[Z],F,B);else if(Og1.has(Z))A[Z]=BV(A[Z],F,B);else if(_g1.has(Z))A[Z]=Y7(A[Z],F,B);if(A.$in)A.$in=xg1(A.$in,F,B);if(A.$size)A.$size=BV(A.$size,F,B);if(A.$round){let Z=A.$round;if(!Array.isArray(Z)||Z.length<1||Z.length>2)throw new F$("Array",Z,"$round");A.$round=Z.map((D)=>BV(D,F,B))}return Pg1(A),A}function BV(A){if(!oG(A))return A;try{return rG(A)}catch(F){throw new F$("Number",A)}}function xg1(A,F,B){let $=A[1];if(!aD($))return A;let Z=A[0],D=F.path($.slice(1));if(D===null){if(B===!1)return A;else if(B==="throw")throw new gs("$in");return}if(!D.$isMongooseArray)throw new Error("Path must be an array for $in");return[D.$isMongooseDocumentArray?D.$embeddedSchemaType.cast(Z):D.caster.cast(Z),$]}function bg1(A){if(!Array.isArray(A)){if(!oG(A))return A;try{return rG(A)}catch(F){throw new F$("Number",A)}}return A.map((F)=>{if(!oG(F))return F;try{return rG(F)}catch(B){throw new F$("Number",F)}})}function fg1(A,F,B){if(!Array.isArray(A)||A.length!==2)throw new Error("Comparison operator must be an array of length 2");A[0]=Y7(A[0],F,B);let $=A[0];if(oG(A[1])){let Z=null,D=null,X=null;if(aD($))Z=$.slice(1),D=F.path(Z);else if(typeof $==="object"&&$!=null){for(let Y of Object.keys($))if(kg1.has(Y)&&aD($[Y]))Z=$[Y].slice(1)+"."+Y,X=rG;else if(Sg1.has(Y)&&aD($[Y])){if(Z=$[Y].slice(1)+"."+Y,D=F.path($[Y].slice(1)),D!=null){if(D.$isMongooseDocumentArray)D=D.$embeddedSchemaType;else if(D.$isMongooseArray)D=D.caster}}}let J=typeof A[1]==="object"&&A[1]!=null&&A[1].$literal!=null;if(D!=null)if(J)A[1]={$literal:D.cast(A[1].$literal)};else A[1]=D.cast(A[1]);else if(X!=null)if(J)try{A[1]={$literal:X(A[1].$literal)}}catch(Y){throw new F$(X.name.replace(/^cast/,""),A[1],Z+".$literal")}else try{A[1]=X(A[1])}catch(Y){throw new F$(X.name.replace(/^cast/,""),A[1],Z)}else if(Z!=null&&B===!0)return;else if(Z!=null&&B==="throw")throw new gs(Z)}else A[1]=Y7(A[1]);return A}function aD(A){return typeof A==="string"&&A[0]==="$"}function oG(A){if(typeof A==="string"&&A[0]==="$")return!1;if(typeof A==="object"&&A!==null&&Object.keys(A).find((F)=>F[0]==="$"))return A.$literal!=null;return!0}});var eG=C((DQ0,vs)=>{var gg1=D4();vs.exports=function A(F,B){if(F==null)return F;if(F._id&&typeof F._id==="string")return F._id;if(F.toString&&F.toString!==Object.prototype.toString&&!Array.isArray(F))return F.toString();throw new gg1("string",F,B)}});var cs=C((XQ0,ms)=>{var ug1=D4(),hs=GG(),ds=eG();ms.exports=function A(F,B){if(F==null||typeof F!=="object")throw new ug1("$text",F,B);if(F.$search!=null)F.$search=ds(F.$search,B+".$search");if(F.$language!=null)F.$language=ds(F.$language,B+".$language");if(F.$caseSensitive!=null)F.$caseSensitive=hs(F.$caseSensitive,B+".$castSensitive");if(F.$diacriticSensitive!=null)F.$diacriticSensitive=hs(F.$diacriticSensitive,B+".$diacriticSensitive");return F}});var tD=C((JQ0,ls)=>{var yg1=new Set(["$ref","$id","$db"]);ls.exports=function A(F){return F[0]==="$"&&!yg1.has(F)}});var iA=C((YQ0,as)=>{/*!
 * Module dependencies.
 */var ps=D4(),$V=T5(),vg1=rD(),hg1=ys(),dg1=eG(),mg1=cs(),cg1=f2(),is=MG(),ns=tD(),lg1=A1("util"),DV=I5(),ZV=kD(),ss=f1(),pg1=["Polygon","MultiPolygon"];as.exports=function A(F,B,$,Z){if(Array.isArray(B))throw new Error("Query filter must be an object, got an array ",lg1.inspect(B));if(B==null)return B;if(F!=null&&F.discriminators!=null&&B[F.options.discriminatorKey]!=null)F=is(F,B[F.options.discriminatorKey])||F;let D=Object.keys(B),X=D.length,J,Y,W,G,Q,q,z;$=$||{};while(X--)if(Q=D[X],z=B[Q],Q==="$or"||Q==="$nor"||Q==="$and"){if(!Array.isArray(z))throw new ps("Array",z,Q);for(let H=z.length-1;H>=0;H--){if(z[H]==null||typeof z[H]!=="object")throw new ps("Object",z[H],Q+"."+H);let U=Object.keys(z[H]).length,K=z[H][F.options.discriminatorKey];if(K==null)z[H]=A(F,z[H],$,Z);else{let E=is(Z.schema,K);z[H]=A(E?E:F,z[H],$,Z)}if(Object.keys(z[H]).length===0&&U!==0)z.splice(H,1)}if(z.length===0)delete B[Q]}else if(Q==="$where"){if(q=typeof z,q!=="string"&&q!=="function")throw new Error("Must have a string or function for $where");if(q==="function")B[Q]=z.toString();continue}else if(Q==="$expr"){z=hg1(z,F);continue}else if(Q==="$elemMatch")z=A(F,z,$,Z);else if(Q==="$text")z=mg1(z,Q);else if(Q==="$comment"&&!F.paths.hasOwnProperty("$comment"))z=dg1(z,Q),B[Q]=z;else{if(!F)continue;if(W=F.path(Q),!W){let H=Q.split("."),U=H.length;while(U--){let K=H.slice(0,U).join("."),E=H.slice(U).join("."),L=F.path(K),V=L&&L.schema&&L.schema.options&&L.schema.options.discriminatorKey;if(L!=null&&(L.schema&&L.schema.discriminators)!=null&&V!=null&&E!==V){let M=cg1(B,K+"."+V),O=L.schema.discriminators;if(typeof M==="string"&&O[M]!=null)W=O[M].path(E);else if(M!=null&&Object.keys(M).length===1&&Array.isArray(M.$in)&&M.$in.length===1&&typeof M.$in[0]==="string"&&O[M.$in[0]]!=null)W=O[M.$in[0]].path(E)}}}if(!W){let H=Q.split("."),U=H.length,K,E,L;while(U--)if(K=H.slice(0,U).join("."),W=F.path(K),W)break;if(W){if(W.caster&&W.caster.schema){L={},E=H.slice(U).join("."),L[E]=z;let O=A(W.caster.schema,L,$,Z)[E];if(O===void 0)delete B[Q];else B[Q]=O}else B[Q]=z;continue}if(DV(z)){let O="";if(z.$near)O="$near";else if(z.$nearSphere)O="$nearSphere";else if(z.$within)O="$within";else if(z.$geoIntersects)O="$geoIntersects";else if(z.$geoWithin)O="$geoWithin";if(O){let R=new vg1.Number("__QueryCasting__"),_=z[O];if(z.$maxDistance!=null)z.$maxDistance=R.castForQuery(null,z.$maxDistance,Z);if(z.$minDistance!=null)z.$minDistance=R.castForQuery(null,z.$minDistance,Z);if(O==="$within"){let P=_.$center||_.$centerSphere||_.$box||_.$polygon;if(!P)throw new Error("Bad $within parameter: "+JSON.stringify(z));_=P}else if(O==="$near"&&typeof _.type==="string"&&Array.isArray(_.coordinates))_=_.coordinates;else if((O==="$near"||O==="$nearSphere"||O==="$geoIntersects")&&_.$geometry&&typeof _.$geometry.type==="string"&&Array.isArray(_.$geometry.coordinates)){if(_.$maxDistance!=null)_.$maxDistance=R.castForQuery(null,_.$maxDistance,Z);if(_.$minDistance!=null)_.$minDistance=R.castForQuery(null,_.$minDistance,Z);if(ZV(_.$geometry))_.$geometry=_.$geometry.toObject({transform:!1,virtuals:!1});_=_.$geometry.coordinates}else if(O==="$geoWithin"){if(_.$geometry){if(ZV(_.$geometry))_.$geometry=_.$geometry.toObject({virtuals:!1});let P=_.$geometry.type;if(pg1.indexOf(P)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+P+'", must be "Polygon" or "MultiPolygon"');_=_.$geometry.coordinates}else if(_=_.$box||_.$polygon||_.$center||_.$centerSphere,ZV(_))_=_.toObject({virtuals:!1})}XV(_,R,Z);continue}}if(F.nested[Q])continue;let V="strict"in $?$.strict:F.options.strict,M=ig1($,F._userProvidedOptions,F.options,Z);if($.upsert&&V){if(V==="throw")throw new $V(Q);throw new $V(Q,'Path "'+Q+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(M==="throw")throw new $V(Q,'Path "'+Q+`" is not in schema and strictQuery is 'throw'.`);else if(M)delete B[Q]}else if(z==null)continue;else if(ss.isPOJO(z))if(Y=Object.keys(z).some(ns),!Y)B[Q]=W.castForQuery(null,z,Z);else{let H=Object.keys(z),U,K=H.length;while(K--)if(U=H[K],G=z[U],U==="$elemMatch"){if(G&&W!=null&&W.schema!=null)A(W.schema,G,$,Z);else if(G&&W!=null&&W.$isMongooseArray)if(ss.isPOJO(G)&&G.$not!=null)A(F,G,$,Z);else z[U]=W.castForQuery(U,G,Z)}else if(U==="$not"){if(G&&W){if(J=Object.keys(G),J.length&&ns(J[0]))for(let E in G)G[E]=W.castForQuery(E,G[E],Z);else z[U]=W.castForQuery(U,G,Z);continue}}else z[U]=W.castForQuery(U,G,Z)}else if(Array.isArray(z)&&["Buffer","Array"].indexOf(W.instance)===-1&&!$.sanitizeFilter){let H=[],U=z;for(let K of U)H.push(W.castForQuery(null,K,Z));B[Q]={$in:H}}else B[Q]=W.castForQuery(null,z,Z)}return B};function XV(A,F,B){if(Array.isArray(A))A.forEach(function($,Z){if(Array.isArray($)||DV($))return XV($,F,B);A[Z]=F.castForQuery(null,$,B)});else{let $=Object.keys(A),Z=$.length;while(Z--){let D=$[Z],X=A[D];if(Array.isArray(X)||DV(X))XV(X,F,B),A[D]=X;else A[D]=F.castForQuery({val:X,context:B})}}}function ig1(A,F,B,$){if("strictQuery"in A)return A.strictQuery;if("strictQuery"in F)return F.strictQuery;let Z=$&&$.mongooseCollection&&$.mongooseCollection.conn&&$.mongooseCollection.conn.base&&$.mongooseCollection.conn.base.options;if(Z){if("strictQuery"in Z)return Z.strictQuery}return B.strictQuery}});var os=C((WQ0,ts)=>{var ng1=T9();class B$ extends ng1{}var AQ=$7();Object.defineProperty(B$.prototype,"min",AQ);Object.defineProperty(B$.prototype,"max",AQ);Object.defineProperty(B$.prototype,"enum",AQ);Object.defineProperty(B$.prototype,"populate",AQ);/*!
 * ignore
 */ts.exports=B$});var Y4=C((GQ0,es)=>{es.exports=function A(F,B,$,Z){if($){if(Z)return{bsonType:B};return{bsonType:[B,"null"]}}else{if(Z)return{type:F};return{type:[F,"null"]}}}});var oD=C((QQ0,Fa)=>{/*!
 * Module requirements.
 */var sg1=D4();/*!
 * ignore
 */function ag1(A){let F=this;if(Array.isArray(A))return A.map(function(B){return Aa(F.path,B)});else if(Buffer.isBuffer(A))return A;return Aa(F.path,A)}/*!
 * ignore
 */function Aa(A,F){let B=Number(F);if(isNaN(B))throw new sg1("number",F,A);return B}Fa.exports=ag1});var WV=C((zQ0,Ba)=>{/*!
 * Module requirements.
 */var $Q=r4(),tg1=os(),N3=B6(),rg1=sD(),og1=Y4(),FQ=oD(),JV=f1(),YV=N3.CastError;function q2(A,F){N3.call(this,A,F,"Number")}q2.get=N3.get;q2.set=N3.set;q2.setters=[];/*!
 * ignore
 */q2._cast=rg1;q2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */q2._defaultCaster=(A)=>{if(typeof A!=="number")throw new Error;return A};q2.schemaName="Number";q2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */q2.prototype=Object.create(N3.prototype);q2.prototype.constructor=q2;q2.prototype.OptionsConstructor=tg1;/*!
 * ignore
 */q2._checkRequired=(A)=>typeof A==="number"||A instanceof Number;q2.checkRequired=N3.checkRequired;q2.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&N3._isRef(this,F,B,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():q2.checkRequired())(F)};q2.prototype.min=function(A,F){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(A!==null&&A!==void 0){let B=F||$Q.messages.Number.min;B=B.replace(/{MIN}/,A),this.validators.push({validator:this.minValidator=function($){return $==null||$>=A},message:B,type:"min",min:A})}return this};q2.prototype.max=function(A,F){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(A!==null&&A!==void 0){let B=F||$Q.messages.Number.max;B=B.replace(/{MAX}/,A),this.validators.push({validator:this.maxValidator=function($){return $==null||$<=A},message:B,type:"max",max:A})}return this};q2.prototype.enum=function(A,F){if(this.enumValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.enumValidator},this);if(!Array.isArray(A)){if(JV.isPOJO(A)&&A.values!=null)F=A.message,A=A.values;else if(typeof A==="number")A=Array.prototype.slice.call(arguments),F=null;if(JV.isPOJO(A))A=Object.values(A);F=F||$Q.messages.Number.enum}return F=F==null?$Q.messages.Number.enum:F,this.enumValidator=(B)=>B==null||A.indexOf(B)!==-1,this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:A}),this};q2.prototype.cast=function(A,F,B,$,Z){if(typeof A!=="number"&&N3._isRef(this,A,F,B)){if(A==null||JV.isNonBuiltinObject(A))return this._castRef(A,F,B,Z)}let D=A&&typeof A._id!=="undefined"?A._id:A,X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=q2.cast();try{return X(D)}catch(J){throw new YV("Number",D,this.path,J,this)}};/*!
 * ignore
 */function BQ(A){return this.cast(A)}function eg1(A){let F=this;if(!Array.isArray(A))return[this.cast(A)];return A.map(function(B){return F.cast(B)})}var Au1={...N3.prototype.$conditionalHandlers,$bitsAllClear:FQ,$bitsAnyClear:FQ,$bitsAllSet:FQ,$bitsAnySet:FQ,$gt:BQ,$gte:BQ,$lt:BQ,$lte:BQ,$mod:eg1};Object.defineProperty(q2.prototype,"$conditionalHandlers",{enumerable:!1,value:Au1});q2.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new YV("number",F,this.path,null,this);return $.call(this,F,B)}try{F=this.applySetters(F,B)}catch(Z){if(Z instanceof YV&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}return F};q2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return og1("number","number",F?.useBsonType,B)};/*!
 * Module exports.
 */Ba.exports=q2});var eD=C((Bu1)=>{/*!
 * Module requirements.
 */var Fu1=WV();/*!
 * ignore
 */Bu1.castToNumber=$a;Bu1.castArraysOfNumbers=Za;/*!
 * ignore
 */function $a(A){return Fu1.cast()(A)}function Za(A,F){A.forEach(function(B,$){if(Array.isArray(B))Za(B,F);else A[$]=$a.call(F,B)})}});var zV=C((Yu1)=>{/*!
 * Module requirements.
 */var Da=eD().castArraysOfNumbers,AX=eD().castToNumber;/*!
 * ignore
 */Yu1.cast$geoIntersects=Ju1;Yu1.cast$near=Du1;Yu1.cast$within=Xu1;function Du1(A){let F=ZQ();if(Array.isArray(A))return Da(A,this),A;if(QV(this,A),A&&A.$geometry)return GV(A,this);if(!Array.isArray(A))throw new TypeError("$near must be either an array or an object with a $geometry property");return F.prototype.castForQuery.call(this,null,A)}function GV(A,F){switch(A.$geometry.type){case"Polygon":case"LineString":case"Point":Da(A.$geometry.coordinates,F);break;default:break}return QV(F,A),A}function Xu1(A){if(QV(this,A),A.$box||A.$polygon){let F=A.$box?"$box":"$polygon";A[F].forEach((B)=>{if(!Array.isArray(B)){let $="Invalid $within $box argument. Expected an array, received "+B;throw new TypeError($)}B.forEach(($,Z)=>{B[Z]=AX.call(this,$)})})}else if(A.$center||A.$centerSphere){let F=A.$center?"$center":"$centerSphere";A[F].forEach((B,$)=>{if(Array.isArray(B))B.forEach((Z,D)=>{B[D]=AX.call(this,Z)});else A[F][$]=AX.call(this,B)})}else if(A.$geometry)GV(A,this);return A}function Ju1(A){if(!A.$geometry)return;return GV(A,this),A}function QV(A,F){if(F.$maxDistance)F.$maxDistance=AX.call(A,F.$maxDistance);if(F.$minDistance)F.$minDistance=AX.call(A,F.$minDistance)}});var ZQ=C((UQ0,Wa)=>{/*!
 * Module dependencies.
 */var zu1=QG(),qu1=aL(),Ja=t1(),Hu1=Ss(),W7=B6(),XQ=W7.CastError,JQ=hA(),Uu1=cw(),Xa=iG(),Cu1=_s(),qV=iA(),Ku1=T2(),Eu1=I4(),Lu1=tD(),YQ=A1("util"),k5=f1(),wu1=eD().castToNumber,Vu1=Y4(),HV=zV(),Nu1=J7(),FX,DQ,Ya=Symbol("mongoose#isNestedArray"),Mu1=Object.freeze({});function z0(A,F,B,$){DQ||(DQ=A$().Embedded);let Z="type";if($&&$.typeKey)Z=$.typeKey;if(this.schemaOptions=$,F){let J={};if(k5.isPOJO(F))if(F[Z])J=Ku1(F),delete J[Z],F=F[Z];else F=JQ;if(B!=null&&B.ref!=null&&J.ref==null)J.ref=B.ref;if(F===Object)F=JQ;let Y=typeof F==="string"?F:k5.getFunctionName(F),W=rD(),G=W.hasOwnProperty(Y)?W[Y]:F;if(this.casterConstructor=G,this.casterConstructor instanceof z0)this.casterConstructor[Ya]=!0;if(typeof G==="function"&&!G.$isArraySubdocument&&!G.$isSchemaMap){let Q=this.caster instanceof DQ?null:A;this.caster=new G(Q,J)}else if(this.caster=G,!(this.caster instanceof DQ))this.caster.path=A;this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,W7.call(this,A,B,"Array");let D,X;if(this.defaultValue!=null)D=this.defaultValue,X=typeof D==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let J=function(){return X?D.call(this):D!=null?[].concat(D):[]};J.$runBeforeSetters=!X,this.default(J)}}z0.schemaName="Array";z0.options={castNonArrays:!0};/*!
 * ignore
 */z0.defaultOptions={};z0.set=W7.set;z0.setters=[];z0.get=W7.get;/*!
 * Inherits from SchemaType.
 */z0.prototype=Object.create(W7.prototype);z0.prototype.constructor=z0;z0.prototype.OptionsConstructor=Hu1;/*!
 * ignore
 */z0._checkRequired=W7.prototype.checkRequired;z0.checkRequired=W7.checkRequired;/*!
 * Virtuals defined on this array itself.
 */z0.prototype.virtuals=null;z0.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&W7._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():z0.checkRequired())(F)};z0.prototype.enum=function(){let A=this;while(!0){let B=A&&A.caster&&A.caster.instance;if(B==="Array"){A=A.caster;continue}if(B!=="String"&&B!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+B);break}let F=arguments;if(!Array.isArray(arguments)&&k5.isObject(arguments))F=k5.object.vals(F);return A.caster.enum.apply(A.caster,F),this};z0.prototype.applyGetters=function(A,F){if(F!=null&&F.$__!=null&&F.$populated(this.path))return A;return W7.prototype.applyGetters.call(this,A,F)};z0.prototype._applySetters=function(A,F,B,$){if(this.casterConstructor.$isMongooseArray&&z0.options.castNonArrays&&!this[Ya]){let Z=0,D=this;while(D!=null&&D.$isMongooseArray&&!D.$isMongooseDocumentArray)++Z,D=D.casterConstructor;if(A!=null&&A.length!==0){let X=Cu1(A);if(X.min===X.max&&X.max<Z&&X.containsNonArrayItem)for(let J=X.max;J<Z;++J)A=[A]}}return W7.prototype._applySetters.call(this,A,F,B,$)};z0.prototype.cast=function(A,F,B,$,Z){FX||(FX=A$().Array);let D,X;if(Array.isArray(A)){if(!A.length&&F){let z=F.schema.indexedPaths(),H=this.path;for(D=0,X=z.length;D<X;++D){let K=z[D][0][H];if(K==="2dsphere"||K==="2d")return}let U=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(U!=null){for(D=0,X=z.length;D<X;++D)if(z[D][0][U]==="2dsphere")return}}Z=Z||Mu1;let W=k5.isMongooseArray(A)?A.__array:A,G=Z.path||this.path;if(Z.arrayPathIndex!=null)G+="."+Z.arrayPathIndex;if(A=FX(W,G,F,this),W=A.__array,B&&F!=null&&F.$__!=null&&F.$populated(this.path))return A;let Q=this.caster,q=Q.$isMongooseArray;if(Q&&this.casterConstructor!==JQ)try{let z=W.length;for(D=0;D<z;D++){let H={};if(q){if(Z.arrayPath!=null)H.arrayPathIndex=D;else if(Q._arrayParentPath!=null)H.arrayPathIndex=D}if(Z.hydratedPopulatedDocs)H.hydratedPopulatedDocs=Z.hydratedPopulatedDocs;W[D]=Q.applySetters(W[D],F,B,void 0,H)}}catch(z){throw new XQ("["+z.kind+"]",YQ.inspect(A),this.path+"."+D,z,this)}return A}let J=this.options.castNonArrays!=null?this.options.castNonArrays:z0.options.castNonArrays;if(B||J){if(!!F&&!!B)F.markModified(this.path);return this.cast([A],F,B)}throw new XQ("Array",YQ.inspect(A),this.path,null,this)};/*!
 * ignore
 */z0.prototype._castForPopulate=function A(F,B){if(FX||(FX=A$().Array),Array.isArray(F)){let $,Z=F.__array?F.__array:F,D=Z.length,X=this.caster;if(X&&this.casterConstructor!==JQ)try{for($=0;$<D;$++){let J={};if(X.$isMongooseArray&&X._arrayParentPath!=null)J.arrayPathIndex=$;Z[$]=X.cast(Z[$],B,!1,void 0,J)}}catch(J){throw new XQ("["+J.kind+"]",YQ.inspect(F),this.path+"."+$,J,this)}return F}throw new XQ("Array",YQ.inspect(F),this.path,null,this)};z0.prototype.$toObject=z0.prototype.toObject;/*!
 * ignore
 */z0.prototype.discriminator=function(...A){let F=this;while(F.$isMongooseArray&&!F.$isMongooseDocumentArray)if(F=F.casterConstructor,F==null||typeof F==="function")throw new Ja("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return F.discriminator(...A)};/*!
 * ignore
 */z0.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,this.caster,A,this.schemaOptions);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F};z0.prototype._castForQuery=function(A,F){let B=this.casterConstructor;if(A&&B.discriminators&&B.schema&&B.schema.options&&B.schema.options.discriminatorKey)if(typeof A[B.schema.options.discriminatorKey]==="string"&&B.discriminators[A[B.schema.options.discriminatorKey]])B=B.discriminators[A[B.schema.options.discriminatorKey]];else{let Y=Nu1(B.discriminators,A[B.schema.options.discriminatorKey]);if(Y)B=Y}let $=this.casterConstructor.prototype,Z=$&&$.castForQuery,D=$&&$.cast,X=B.castForQuery,J=this.caster;if(Array.isArray(A))this.setters.reverse().forEach((Y)=>{A=Y.call(this,A,this)}),A=A.map(function(Y){if(k5.isObject(Y)&&Y.$elemMatch)return Y;if(Z)return Y=Z.call(J,null,Y,F),Y;else if(D)return Y=D.call(J,Y),Y;else if(X)return Y=X.call(J,null,Y,F),Y;if(Y!=null)return Y=new B(Y),Y;return Y});else if(Z)A=Z.call(J,null,A,F);else if(D)A=D.call(J,A);else if(X)A=X.call(J,null,A,F);else if(A!=null)A=new B(A);return A};z0.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A+" with Array.");return $.call(this,F,B)}else return this._castForQuery(F,B)};z0.prototype.virtual=function A(F,B){if(F instanceof Xa||Eu1(F)==="VirtualType")return this.virtual(F.path,F.options);if(B=new Uu1(B),k5.hasUserDefinedProperty(B,["ref","refPath"]))throw new Ja("Cannot set populate virtual as a property of an array");let $=new Xa(B,F);if(this.virtuals===null)this.virtuals={};return this.virtuals[F]=$,$};function Ru1(A,F){if(!Array.isArray(A))A=[A];return A=A.map((B)=>{if(!k5.isObject(B))return B;if(B.$elemMatch!=null)return{$elemMatch:qV(this.casterConstructor.schema,B.$elemMatch,null,this&&this.$$context)};let $={};return $[this.path]=B,qV(this.casterConstructor.schema,$,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,A,F)}function Pu1(A,F){let B=Object.keys(A),$=B.length;for(let Z=0;Z<$;++Z){let D=B[Z],X=A[D];if(Lu1(D)&&X!=null)A[D]=this.castForQuery(D,X,F)}return A}var B2=z0.prototype.$conditionalHandlers={};B2.$all=Ru1;B2.$options=String;B2.$elemMatch=Pu1;B2.$geoIntersects=HV.cast$geoIntersects;B2.$or=UV("$or");B2.$and=UV("$and");B2.$nor=UV("$nor");function UV(A){return function F(B,$){if(!Array.isArray(B))throw new TypeError("conditional "+A+" requires an array");let Z=[];for(let D of B)Z.push(qV(this.casterConstructor.schema??$.schema,D,null,this&&this.$$context));return Z}}B2.$near=B2.$nearSphere=HV.cast$near;B2.$within=B2.$geoWithin=HV.cast$within;B2.$size=B2.$minDistance=B2.$maxDistance=wu1;B2.$exists=zu1;B2.$type=qu1;B2.$eq=B2.$gt=B2.$gte=B2.$lt=B2.$lte=B2.$not=B2.$regex=B2.$ne=z0.prototype._castForQuery;B2.$nin=W7.prototype.$conditionalHandlers.$nin;B2.$in=W7.prototype.$conditionalHandlers.$in;z0.prototype.toJSONSchema=function A(F){let B=this.getEmbeddedSchemaType(),$=this.options.required&&typeof this.options.required!=="function";return{...Vu1("array","array",F?.useBsonType,$),items:B.toJSONSchema(F)}};z0.prototype.autoEncryptionType=function A(){return"array"};/*!
 * Module exports.
 */Wa.exports=z0});var za=C((CQ0,Qa)=>{var{Long:ju1}=l4(),CV=9223372036854775807n,KV=-9223372036854775808n,Ga=`Mongoose only supports BigInts between ${KV} and ${CV} because MongoDB does not support arbitrary precision integers`;Qa.exports=function A(F){if(F==null)return F;if(F==="")return null;if(typeof F==="bigint"){if(F>CV||F<KV)throw new Error(Ga);return F}if(F instanceof ju1)return F.toBigInt();if(typeof F==="string"||typeof F==="number"){if(F=BigInt(F),F>CV||F<KV)throw new Error(Ga);return F}throw new Error(`Cannot convert value to BigInt: "${F}"`)}});var Ua=C((KQ0,Ha)=>{/*!
 * Module dependencies.
 */var qa=D4(),$$=B6(),Iu1=za(),Tu1=Y4();function g2(A,F){$$.call(this,A,F,"BigInt")}g2.schemaName="BigInt";g2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */g2.prototype=Object.create($$.prototype);g2.prototype.constructor=g2;/*!
 * ignore
 */g2._cast=Iu1;g2.set=$$.set;g2.setters=[];g2.get=$$.get;g2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */g2._checkRequired=(A)=>A!=null;g2.checkRequired=$$.checkRequired;g2.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};g2.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=g2.cast();try{return F(A)}catch(B){throw new qa("BigInt",A,this.path,B,this)}};/*!
 * ignore
 */var Ou1={...$$.prototype.$conditionalHandlers,$gt:WQ,$gte:WQ,$lt:WQ,$lte:WQ};Object.defineProperty(g2.prototype,"$conditionalHandlers",{enumerable:!1,value:Ou1});/*!
 * ignore
 */function WQ(A,F){return this.castForQuery(null,A,F)}g2.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],$)return $.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch(Z){if(Z instanceof qa&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};g2.prototype._castNullish=function A(F){if(typeof F==="undefined")return F;if((typeof this.constructor.cast==="function"?this.constructor.cast():g2.cast())==null)return F;return F};g2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Tu1("string","long",F?.useBsonType,B)};g2.prototype.autoEncryptionType=function A(){return"long"};/*!
 * Module exports.
 */Ha.exports=g2});var Ea=C((EQ0,Ka)=>{/*!
 * Module dependencies.
 */var Ca=D4(),Z$=B6(),BX=GG(),Su1=Y4();function H2(A,F){Z$.call(this,A,F,"Boolean")}H2.schemaName="Boolean";H2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */H2.prototype=Object.create(Z$.prototype);H2.prototype.constructor=H2;/*!
 * ignore
 */H2._cast=BX;H2.set=Z$.set;H2.setters=[];H2.get=Z$.get;H2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */H2._defaultCaster=(A)=>{if(A!=null&&typeof A!=="boolean")throw new Error;return A};/*!
 * ignore
 */H2._checkRequired=(A)=>A===!0||A===!1;H2.checkRequired=Z$.checkRequired;H2.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};Object.defineProperty(H2,"convertToTrue",{get:()=>BX.convertToTrue,set:(A)=>{BX.convertToTrue=A}});Object.defineProperty(H2,"convertToFalse",{get:()=>BX.convertToFalse,set:(A)=>{BX.convertToFalse=A}});H2.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=H2.cast();try{return F(A)}catch(B){throw new Ca("Boolean",A,this.path,B,this)}};var ku1={...Z$.prototype.$conditionalHandlers};Object.defineProperty(H2.prototype,"$conditionalHandlers",{enumerable:!1,value:ku1});H2.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],$)return $.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch(Z){if(Z instanceof Ca&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};H2.prototype._castNullish=function A(F){if(typeof F==="undefined")return F;let B=typeof this.constructor.cast==="function"?this.constructor.cast():H2.cast();if(B==null)return F;if(B.convertToFalse instanceof Set&&B.convertToFalse.has(F))return!1;if(B.convertToTrue instanceof Set&&B.convertToTrue.has(F))return!0;return F};H2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Su1("boolean","bool",F?.useBsonType,B)};H2.prototype.autoEncryptionType=function A(){return"bool"};/*!
 * Module exports.
 */Ka.exports=H2});var wa=C((LQ0,La)=>{var _u1=T9();class EV extends _u1{}var xu1=$7();Object.defineProperty(EV.prototype,"subtype",xu1);/*!
 * ignore
 */La.exports=EV});var Ma=C((wQ0,Na)=>{/*!
 * Module dependencies.
 */var D$=iB(),bu1=wa(),M3=B6(),fu1=Y4(),GQ=oD(),Va=f1(),LV=D$.Binary,zQ=M3.CastError;function q6(A,F){M3.call(this,A,F,"Buffer")}q6.schemaName="Buffer";q6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */q6.prototype=Object.create(M3.prototype);q6.prototype.constructor=q6;q6.prototype.OptionsConstructor=bu1;/*!
 * ignore
 */q6._checkRequired=(A)=>!!(A&&A.length);q6.set=M3.set;q6.setters=[];q6.get=M3.get;q6.checkRequired=M3.checkRequired;q6.prototype.checkRequired=function(A,F){if(M3._isRef(this,A,F,!0))return!!A;return this.constructor._checkRequired(A)};q6.prototype.cast=function(A,F,B,$,Z){let D;if(M3._isRef(this,A,F,B)){if(A&&A.isMongooseBuffer)return A;if(Buffer.isBuffer(A)){if(!A||!A.isMongooseBuffer){if(A=new D$(A,[this.path,F]),this.options.subtype!=null)A._subtype=this.options.subtype}return A}if(A instanceof LV){if(D=new D$(A.value(!0),[this.path,F]),typeof A.sub_type!=="number")throw new zQ("Buffer",A,this.path,null,this);return D._subtype=A.sub_type,D}if(A==null||Va.isNonBuiltinObject(A))return this._castRef(A,F,B,Z)}if(A&&A._id)A=A._id;if(A&&A.isMongooseBuffer)return A;if(Buffer.isBuffer(A)){if(!A||!A.isMongooseBuffer){if(A=new D$(A,[this.path,F]),this.options.subtype!=null)A._subtype=this.options.subtype}return A}if(A instanceof LV){if(D=new D$(A.value(!0),[this.path,F]),typeof A.sub_type!=="number")throw new zQ("Buffer",A,this.path,null,this);return D._subtype=A.sub_type,D}if(A===null)return A;let X=typeof A;if(X==="string"||X==="number"||Array.isArray(A)||X==="object"&&A.type==="Buffer"&&Array.isArray(A.data)){if(X==="number")A=[A];if(D=new D$(A,[this.path,F]),this.options.subtype!=null)D._subtype=this.options.subtype;return D}if(Va.isPOJO(A)&&(A.$binary instanceof LV||typeof A.$binary==="string")){let J=this.cast(Buffer.from(A.$binary,"base64"));if(A.$type!=null)return J._subtype=A.$type,J}throw new zQ("Buffer",A,this.path,null,this)};q6.prototype.subtype=function(A){return this.options.subtype=A,this};/*!
 * ignore
 */function QQ(A,F){return this.castForQuery(null,A,F)}var gu1={...M3.prototype.$conditionalHandlers,$bitsAllClear:GQ,$bitsAnyClear:GQ,$bitsAllSet:GQ,$bitsAnySet:GQ,$gt:QQ,$gte:QQ,$lt:QQ,$lte:QQ};Object.defineProperty(q6.prototype,"$conditionalHandlers",{enumerable:!1,value:gu1});q6.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A+" with Buffer.");return $.call(this,F)}let Z;try{Z=this.applySetters(F,B)}catch(D){if(D instanceof zQ&&D.path===this.path&&this.$fullPath!=null)D.path=this.$fullPath;throw D}return Z?Z.toObject({transform:!1,virtuals:!1}):Z};q6.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return fu1("string","binData",F?.useBsonType,B)};q6.prototype.autoEncryptionType=function A(){return"binData"};/*!
 * Module exports.
 */Na.exports=q6});var Pa=C((VQ0,Ra)=>{var uu1=T9();class $X extends uu1{}var wV=$7();Object.defineProperty($X.prototype,"min",wV);Object.defineProperty($X.prototype,"max",wV);Object.defineProperty($X.prototype,"expires",wV);/*!
 * ignore
 */Ra.exports=$X});var Ia=C((NQ0,ja)=>{var VV=A1("assert");ja.exports=function A(F){if(F==null||F==="")return null;if(F instanceof Date)return VV.ok(!isNaN(F.valueOf())),F;let B;if(VV.ok(typeof F!=="boolean"),F instanceof Number||typeof F==="number")B=new Date(F);else if(typeof F==="string"&&!isNaN(Number(F))&&(Number(F)>=275761||Number(F)<-271820))B=new Date(Number(F));else if(typeof F.valueOf==="function")B=new Date(F.valueOf());else B=new Date(F);if(!isNaN(B.valueOf()))return B;VV.ok(!1)}});var ka=C((MQ0,Sa)=>{/*!
 * Module requirements.
 */var Ta=r4(),yu1=Pa(),_5=B6(),vu1=Ia(),hu1=Y4(),du1=I4(),mu1=f1(),Oa=_5.CastError;function $2(A,F){_5.call(this,A,F,"Date")}$2.schemaName="Date";$2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */$2.prototype=Object.create(_5.prototype);$2.prototype.constructor=$2;$2.prototype.OptionsConstructor=yu1;/*!
 * ignore
 */$2._cast=vu1;$2.set=_5.set;$2.setters=[];$2.get=_5.get;$2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */$2._defaultCaster=(A)=>{if(A!=null&&!(A instanceof Date))throw new Error;return A};$2.prototype.expires=function(A){if(du1(this._index)!=="Object")this._index={};return this._index.expires=A,mu1.expires(this._index),this};/*!
 * ignore
 */$2._checkRequired=(A)=>A instanceof Date;$2.checkRequired=_5.checkRequired;$2.prototype.checkRequired=function(A,F){if(typeof A==="object"&&_5._isRef(this,A,F,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():$2.checkRequired())(A)};$2.prototype.min=function(A,F){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(A){let B=F||Ta.messages.Date.min;if(typeof B==="string")B=B.replace(/{MIN}/,A===Date.now?"Date.now()":A.toString());let $=this;this.validators.push({validator:this.minValidator=function(Z){let D=A;if(typeof A==="function"&&A!==Date.now)D=D.call(this);let X=D===Date.now?D():$.cast(D);return Z===null||Z.valueOf()>=X.valueOf()},message:B,type:"min",min:A})}return this};$2.prototype.max=function(A,F){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(A){let B=F||Ta.messages.Date.max;if(typeof B==="string")B=B.replace(/{MAX}/,A===Date.now?"Date.now()":A.toString());let $=this;this.validators.push({validator:this.maxValidator=function(Z){let D=A;if(typeof D==="function"&&D!==Date.now)D=D.call(this);let X=D===Date.now?D():$.cast(D);return Z===null||Z.valueOf()<=X.valueOf()},message:B,type:"max",max:A})}return this};$2.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=$2.cast();try{return F(A)}catch(B){throw new Oa("date",A,this.path,B,this)}};function qQ(A){return this.cast(A)}var cu1={..._5.prototype.$conditionalHandlers,$gt:qQ,$gte:qQ,$lt:qQ,$lte:qQ};Object.defineProperty($2.prototype,"$conditionalHandlers",{enumerable:!1,value:cu1});$2.prototype.castForQuery=function(A,F,B){if(A==null)try{return this.applySetters(F,B)}catch(Z){if(Z instanceof Oa&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}let $=this.$conditionalHandlers[A];if(!$)throw new Error("Can't use "+A+" with Date.");return $.call(this,F)};$2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return hu1("string","date",F?.useBsonType,B)};$2.prototype.autoEncryptionType=function A(){return"date"};/*!
 * Module exports.
 */Sa.exports=$2});var xa=C((RQ0,_a)=>{var nA=ZG(),lu1=A1("assert");_a.exports=function A(F){if(F==null)return F;if(typeof F==="object"&&typeof F.$numberDecimal==="string")return nA.fromString(F.$numberDecimal);if(F instanceof nA)return F;if(typeof F==="string")return nA.fromString(F);if(typeof Buffer==="function"&&Buffer.isBuffer(F))return new nA(F);if(typeof Uint8Array==="function"&&F instanceof Uint8Array)return new nA(F);if(typeof F==="number")return nA.fromString(String(F));if(typeof F.valueOf==="function"&&typeof F.valueOf()==="string")return nA.fromString(F.valueOf());lu1.ok(!1)}});var fa=C((PQ0,ba)=>{/*!
 * Module dependencies.
 */var R3=B6(),pu1=R3.CastError,iu1=xa(),nu1=Y4(),NV=f6();function i2(A,F){R3.call(this,A,F,"Decimal128")}i2.schemaName="Decimal128";i2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */i2.prototype=Object.create(R3.prototype);i2.prototype.constructor=i2;/*!
 * ignore
 */i2._cast=iu1;i2.set=R3.set;i2.setters=[];i2.get=R3.get;i2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */i2._defaultCaster=(A)=>{if(A!=null&&!NV(A,"Decimal128"))throw new Error;return A};/*!
 * ignore
 */i2._checkRequired=(A)=>NV(A,"Decimal128");i2.checkRequired=R3.checkRequired;i2.prototype.checkRequired=function A(F,B){if(R3._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():i2.checkRequired())(F)};i2.prototype.cast=function(A,F,B,$,Z){if(R3._isRef(this,A,F,B)){if(NV(A,"Decimal128"))return A;return this._castRef(A,F,B,Z)}let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=i2.cast();try{return D(A)}catch(X){throw new pu1("Decimal128",A,this.path,X,this)}};/*!
 * ignore
 */function HQ(A){return this.cast(A)}var su1={...R3.prototype.$conditionalHandlers,$gt:HQ,$gte:HQ,$lt:HQ,$lte:HQ};Object.defineProperty(i2.prototype,"$conditionalHandlers",{enumerable:!1,value:su1});i2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return nu1("string","decimal",F?.useBsonType,B)};i2.prototype.autoEncryptionType=function A(){return"decimal"};/*!
 * Module exports.
 */ba.exports=i2});var ya=C((jQ0,ua)=>{var au1=T9();class UQ extends au1{}var ga=$7();Object.defineProperty(UQ.prototype,"_id",ga);Object.defineProperty(UQ.prototype,"minimize",ga);ua.exports=UQ});var MV=C((IQ0,va)=>{va.exports=function A(F,B,$){if(F.length===0)return $();let Z=F.length,D=null;for(let X of F)B(X,function(J){if(D!=null)return;if(J!=null)return D=J,$(D);if(--Z<=0)return $()})}});var da=C((TQ0,ha)=>{var tu1=MV();/*!
 * ignore
 */ha.exports=function A(F){F.s.hooks.pre("save",!1,function $(Z){if(this.$isSubdocument){Z();return}let D=this,X=this.$getAllSubdocs({useCache:!0});if(!X.length){Z();return}tu1(X,function(J,Y){J.$__schema.s.hooks.execPre("save",J,function(W){Y(W)})},function(J){if(D.$__.saveOptions)D.$__.saveOptions.__subdocs=null;if(J)return D.$__schema.s.hooks.execPost("save:error",D,[D],{error:J},function(Y){Z(Y)});Z()})},null,!0),F.s.hooks.post("save",async function $(){let Z=this.$__.removedSubdocs;if(!Z||!Z.length)return;let D=[];for(let X of Z)D.push(new Promise((J,Y)=>{X.$__schema.s.hooks.execPost("deleteOne",X,[X],function(W){if(W)return Y(W);J()})}));this.$__.removedSubdocs=null,await Promise.all(D)}),F.s.hooks.post("save",async function $(){if(this.$isSubdocument)return;let Z=this,D=this.$getAllSubdocs({useCache:!0});if(!D.length)return;let X=[];for(let J of D)X.push(new Promise((Y,W)=>{J.$__schema.s.hooks.execPost("save",J,[J],function(G){if(G)return W(G);Y()})}));try{await Promise.all(X)}catch(J){await new Promise((Y,W)=>{this.$__schema.s.hooks.execPost("save:error",Z,[Z],{error:J},function(G){if(G)return W(G);Y()})})}},null,!0)}});var la=C((OQ0,PV)=>{var ru1=w1().objectIdSymbol,ma=f1();/*!
 * ignore
 */PV.exports=function A(F){F.post("init",function B(){return RV.call(this),this}),F.pre("save",function B($){ca.call(this),$()}),F.pre("remove",function B($){ca.call(this),$()}),F.post("save",function B(){RV.call(this)})};/*!
 * ignore
 */function ca(){let A,F;if(this.$__.shardval){A=Object.keys(this.$__.shardval),F=A.length,this.$where=this.$where||{};for(let B=0;B<F;++B)this.$where[A[B]]=this.$__.shardval[A[B]]}}/*!
 * ignore
 */PV.exports.storeShard=RV;/*!
 * ignore
 */function RV(){let A=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!ma.isPOJO(A))return;let F=this.$__.shardval={},B=Object.keys(A),$=B.length,Z;for(let D=0;D<$;++D)if(Z=this.$__getValue(B[D]),Z==null)F[B[D]]=Z;else if(ma.isMongooseObject(Z))F[B[D]]=Z.toObject({depopulate:!0,_isNested:!0});else if(Z instanceof Date||Z[ru1])F[B[D]]=Z;else if(typeof Z.valueOf==="function")F[B[D]]=Z.valueOf();else F[B[D]]=Z}});var na=C((SQ0,ia)=>{var X$=w1().arrayAtomicsSymbol,jV=w1().sessionNewDocuments,ou1=f1();ia.exports=function A(F){F.pre("save",function B(){let $=this.$session();if($==null)return;if($.transaction==null||$[jV]==null)return;if(!$[jV].has(this)){let Z={};if(this.isNew)Z.isNew=!0;if(this.$__schema.options.versionKey)Z.versionKey=this.get(this.$__schema.options.versionKey);Z.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),Z.atomics=eu1(this),$[jV].set(this,Z)}})};function eu1(A,F){let B=new Map;F=F||new Map;let $=Object.keys(A.$__.activePaths.init).concat(Object.keys(A.$__.activePaths.modify));for(let D of $){let X=A.$__getValue(D);if(X!=null&&Array.isArray(X)&&ou1.isMongooseDocumentArray(X)&&X.length&&X[X$]!=null&&Object.keys(X[X$]).length!==0){let J=F.get(D)||{};B.set(D,pa(J,X[X$]))}}let Z=A.$__dirty();for(let D of Z){let{path:X,value:J}=D;if(J!=null&&J[X$]!=null&&Object.keys(J[X$]).length!==0){let Y=F.get(X)||{};B.set(X,pa(Y,J[X$]))}}return B}function pa(A,F){if(A=A||{},F.$pullAll!=null)A.$pullAll=(A.$pullAll||[]).concat(F.$pullAll);if(F.$push!=null)A.$push=A.$push||{},A.$push.$each=(A.$push.$each||[]).concat(F.$push.$each);if(F.$addToSet!=null)A.$addToSet=(A.$addToSet||[]).concat(F.$addToSet);if(F.$set!=null)A.$set=Array.isArray(F.$set)?[...F.$set]:Object.assign({},F.$set);return A}});var aa=C((kQ0,sa)=>{/*!
 * ignore
 */sa.exports=function A(F){F.pre("save",!1,function $(Z,D){let X=this;if(this.$isSubdocument)return Z();let J=D&&typeof D==="object"&&"validateBeforeSave"in D,Y;if(J)Y=!!D.validateBeforeSave;else Y=this.$__schema.options.validateBeforeSave;if(Y){let G=D&&typeof D==="object"&&"validateModifiedOnly"in D?{validateModifiedOnly:D.validateModifiedOnly}:null;this.$validate(G).then(()=>{this.$op="save",Z()},(Q)=>{X.$__schema.s.hooks.execPost("save:error",X,[X],{error:Q},function(q){X.$op="save",Z(q)})})}else Z()},null,!0)}});var IV=C((Ay1)=>{Ay1.saveSubdocs=da();Ay1.sharding=la();Ay1.trackTransaction=na();Ay1.validateBeforeSave=aa()});var oa=C((xQ0,ra)=>{var ta=IV();ra.exports=function A(F){for(let B of Object.values(ta))B(F,{deduplicate:!0});F.plugins=Object.values(ta).map((B)=>({fn:B,opts:{deduplicate:!0}})).concat(F.plugins)}});var Ft=C((bQ0,At)=>{var Dy1=UG(),Xy1=bA(),Jy1=f6(),Yy1=U3(),ea=I5();At.exports=function A(F,B,$,Z){let D=Object.keys(B),X=0,J=D.length,Y;if($=$||"",Z=Z||new WeakSet,Z.has(B))return;Z.add(B);while(X<J){if(Y=D[X++],!$){if(Y==="discriminators"||Y==="base"||Y==="_applyDiscriminators"||Y==="_userProvidedOptions"||Y==="options"||Y==="tree")continue}if($==="tree"&&B!=null&&B.instanceOfSchema)continue;if(Xy1.has(Y))continue;if(F[Y]==null)F[Y]=B[Y];else if(ea(B[Y])){if(!ea(F[Y]))F[Y]={};if(B[Y]!=null){if(B[Y].$isSingleNested&&F[Y].$isMongooseDocumentArray||B[Y].$isMongooseDocumentArray&&F[Y].$isSingleNested||B[Y].$isMongooseDocumentArrayElement&&F[Y].$isMongooseDocumentArrayElement)continue;else if(B[Y].instanceOfSchema){if(F[Y].instanceOfSchema)Dy1(F[Y],B[Y].clone(),!0);else F[Y]=B[Y].clone();continue}else if(Jy1(B[Y],"ObjectId")){F[Y]=new Yy1(B[Y]);continue}}A(F[Y],B[Y],$?$+"."+Y:Y,Z)}}if(B!=null&&B.instanceOfSchema)F.tree=Object.assign({},B.tree,F.tree)}});var CQ=C((fQ0,Zt)=>{var Bt=hA(),Wy1=oa(),Gy1=T2(),Qy1=NG().defineKey,zy1=f2(),TV=f1(),qy1=Ft(),$t={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};function Hy1(A,F){if(A.encryptionType()==null&&F.encryptionType()==null)return;let B=Z($(A),$(F));for(let D of B){if(A._hasEncryptedField(D)&&F._hasEncryptedField(D))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${D}`);if(A._hasEncryptedField(D)||F._hasEncryptedField(D))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${D}`)}function $(D){return[...Object.keys(D.paths),...Object.keys(D.singleNestedPaths)]}function*Z(D,X){let J=new Set(D);for(let Y of X)if(J.has(Y))yield Y}}/*!
 * ignore
 */Zt.exports=function A(F,B,$,Z,D,X,J){if(!($&&$.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(X=X==null?!0:X,F.schema.discriminatorMapping&&!F.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+B+'" can only be a discriminator of the root model');if(D){let q=zy1(F.base,"options.applyPluginsToDiscriminators",!1)||!X;F.base._applyPlugins($,{skipTopLevel:!q})}else if(!X)Wy1($);let Y=F.schema.options.discriminatorKey,W=F.schema.path(Y);if(W!=null){if(!TV.hasUserDefinedProperty(W.options,"select"))W.options.select=!0;W.options.$skipDiscriminatorCheck=!0}else{let q={};q[Y]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},q[Y][F.schema.options.typeKey]=String,F.schema.add(q),Qy1({prop:Y,prototype:F.prototype,options:F.schema.options})}if($.path(Y)&&$.path(Y).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+B+'" cannot have field with name "'+Y+'"');let G=B;if(typeof Z==="string"&&Z.length||Z!=null)G=Z;Hy1(F.schema,$);function Q(q,z){if(q._baseSchema=z,z.paths._id&&z.paths._id.options&&!z.paths._id.options.auto)q.remove("_id");let H=Object.keys(z.paths),U=[];for(let _ of H){if(q.nested[_]){U.push(_);continue}if(_.indexOf(".")===-1)continue;let P=_.split(".").slice(0,-1),T="";for(let N of P)if(T+=(T.length?".":"")+N,q.paths[T]instanceof Bt||q.singleNestedPaths[T]instanceof Bt)U.push(_)}q.obj={...q.obj},qy1(q,z),q._gatherChildSchemas();for(let _ of U)delete q.paths[_];q.childSchemas.forEach((_)=>{_.model.prototype.$__setSchema(_.schema)});let K={};if(K[Y]={default:G,select:!0,set:function(_){if(_===G||Array.isArray(G)&&TV.deepEqual(_,G))return G;throw new Error(`Can't set discriminator key "`+Y+'"')},$skipDiscriminatorCheck:!0},K[Y][q.options.typeKey]=W?W.options[q.options.typeKey]:String,q.add(K),q.discriminatorMapping={key:Y,value:G,isRoot:!1},z.options.collection)q.options.collection=z.options.collection;let E=q.options.toJSON,L=q.options.toObject,V=q.options._id,M=q.options.id,O=Object.keys(q.options);q.options.discriminatorKey=z.options.discriminatorKey;let R=q._userProvidedOptions;for(let _ of O)if(!$t[_]){if(_ in R&&!TV.deepEqual(q.options[_],z.options[_]))throw new Error("Can't customize discriminator option "+_+" (can only modify "+Object.keys($t).join(", ")+")")}q.options=Gy1(z.options);for(let _ of Object.keys(R))q.options[_]=R[_];if(E)q.options.toJSON=E;if(L)q.options.toObject=L;if(typeof V!=="undefined")q.options._id=V;if(q.options.id=M,X)q.s.hooks=F.schema.s.hooks.merge(q.s.hooks);if(D)q.plugins=Array.prototype.slice.call(z.plugins);q.callQueue=z.callQueue.concat(q.callQueue),delete q._requiredpaths}if(Q($,F.schema),!F.discriminators)F.discriminators={};if(!F.schema.discriminatorMapping)F.schema.discriminatorMapping={key:Y,value:null,isRoot:!0};if(!F.schema.discriminators)F.schema.discriminators={};if(F.schema.discriminators[B]=$,F.discriminators[B]&&!$.options.overwriteModels&&!J)throw new Error('Discriminator with name "'+B+'" already exists');return $}});var KQ=C((gQ0,Dt)=>{var Uy1=J7();Dt.exports=function A(F,B,$){let Z=F.schema.options.discriminatorKey,D=B!=null&&B[Z];if(D==null)D=$;if(F.discriminators&&D!=null)if(F.discriminators[D])F=F.discriminators[D];else{let X=Uy1(F.discriminators,D);if(X)F=X}return F}});var OV=C((uQ0,Xt)=>{var Cy1=pw();Xt.exports=function A(F,B){if(B==null||B._id==null)return F;if(F=F.clone(),!B._id)F.remove("_id"),F.options._id=!1;else if(!F.paths._id)Cy1(F),F.options._id=!0;return F}});var kV=C((yQ0,Jt)=>{/*!
 * Module dependencies.
 */var Ky1=t1();class SV extends Ky1{constructor(A,F){let B=`Cannot create use schema for property "${A}" because the schema has the ${F} option enabled.`;super(B)}}Object.defineProperty(SV.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */Jt.exports=SV});var fV=C((vQ0,Qt)=>{/*!
 * Module dependencies.
 */var Yt=D4(),_V=A1("events").EventEmitter,Ey1=KG(),Ly1=ya(),sA=B6(),wy1=LG(),Vy1=QG(),Wt=eD().castToNumber,Ny1=Y4(),My1=CQ(),xV=zV(),bV=KQ(),Ry1=OV(),Py1=t7().internalToObjectOptions,jy1=tB(),Iy1=f1(),Ty1=kV(),EQ;Qt.exports=$6;function $6(A,F,B){if(A.options.timeseries)throw new Ty1(F,"timeseries");let $=$6.defaultOptions&&$6.defaultOptions._id;if($!=null)B=B||{},B._id=$;A=Ry1(A,B),this.caster=Gt(A,null,B),this.caster.path=F,this.caster.prototype.$basePath=F,this.schema=A,this.$isSingleNested=!0,this.base=A.base,sA.call(this,F,B,"Embedded")}/*!
 * ignore
 */$6.prototype=Object.create(sA.prototype);$6.prototype.constructor=$6;$6.prototype.OptionsConstructor=Ly1;/*!
 * ignore
 */function Gt(A,F,B){EQ||(EQ=jG());let $=function D(X,J,Y){if(this.$__parent=Y,EQ.apply(this,arguments),Y==null)return;this.$session(Y.$session())};A._preCompile();let Z=F!=null?F.prototype:EQ.prototype;$.prototype=Object.create(Z),$.prototype.$__setSchema(A),$.prototype.constructor=$,$.prototype.$__schemaTypeOptions=B,$.$__required=B?.required,$.base=A.base,$.schema=A,$.$isSingleNested=!0,$.events=new _V,$.prototype.toBSON=function(){return this.toObject(Py1)};for(let D in A.methods)$.prototype[D]=A.methods[D];for(let D in A.statics)$[D]=A.statics[D];for(let D in _V.prototype)$[D]=_V.prototype[D];return $}/*!
 * ignore
 */var R8={...sA.prototype.$conditionalHandlers};R8.$geoWithin=function A(F,B){return{$geometry:this.castForQuery(null,F.$geometry,B)}};/*!
 * ignore
 */R8.$near=R8.$nearSphere=xV.cast$near;R8.$within=R8.$geoWithin=xV.cast$within;R8.$geoIntersects=xV.cast$geoIntersects;R8.$minDistance=Wt;R8.$maxDistance=Wt;R8.$exists=Vy1;Object.defineProperty($6.prototype,"$conditionalHandlers",{enumerable:!1,value:R8});$6.prototype.cast=function(A,F,B,$,Z){if(A&&A.$isSingleNested&&A.parent===F)return A;if(A!=null&&(typeof A!=="object"||Array.isArray(A)))throw new Ey1(this.path,A);let D=this.schema.path(this.schema.options.discriminatorKey),X=D==null?null:D.getDefault(F),J=bV(this.caster,A,X),Y,W=F&&F.$__&&F.$__.selected,G=this.path,Q=W==null?null:Object.keys(W).reduce((q,z)=>{if(z.startsWith(G+"."))q=q||{},q[z.substring(G.length+1)]=W[z];return q},null);if(B){Y=new J(void 0,Q,F,!1,{defaults:!1}),delete Y.$__.defaults,Y.$init(A);let q=jy1(Q);wy1(Y,Q,q)}else{if(Z=Object.assign({},Z,{priorDoc:$}),Object.keys(A).length===0)return new J({},Q,F,void 0,Z);return new J(A,Q,F,void 0,Z)}return Y};$6.prototype.castForQuery=function(A,F,B,$){let Z;if(A!=null){if(Z=this.$conditionalHandlers[A],!Z)throw new Error("Can't use "+A);return Z.call(this,F)}if(F==null)return F;let D=bV(this.caster,F);if(F instanceof D)return F;if(this.options.runSetters)F=this._applySetters(F,B);let X=$!=null&&$.strict!=null?$.strict:void 0;try{F=new D(F,X)}catch(J){if(!(J instanceof Yt))throw new Yt("Embedded",F,this.path,J,this);throw J}return F};$6.prototype.doValidate=function(A,F,B,$){let Z=bV(this.caster,A);if(A&&!(A instanceof Z))A=new Z(A,null,B!=null&&B.$__!=null?B:null);if($&&$.skipSchemaValidators){if(!A)return F(null);return A.validate().then(()=>F(null),(D)=>F(D))}sA.prototype.doValidate.call(this,A,function(D){if(D)return F(D);if(!A)return F(null);A.validate().then(()=>F(null),(X)=>F(X))},B,$)};$6.prototype.doValidateSync=function(A,F,B){if(!B||!B.skipSchemaValidators){let $=sA.prototype.doValidateSync.call(this,A,F);if($)return $}if(!A)return;return A.validateSync()};$6.prototype.discriminator=function(A,F,B){B=B||{};let $=Iy1.isPOJO(B)?B.value:B,Z=typeof B.clone==="boolean"?B.clone:!0;if(F.instanceOfSchema&&Z)F=F.clone();return F=My1(this.caster,A,F,$,null,null,B.overwriteExisting),this.caster.discriminators[A]=Gt(F,this.caster),this.caster.discriminators[A]};/*!
 * ignore
 */$6.defaultOptions={};$6.set=sA.set;$6.setters=[];$6.get=sA.get;/*!
 * ignore
 */$6.prototype.toJSON=function A(){return{path:this.path,options:this.options}};/*!
 * ignore
 */$6.prototype.clone=function(){let A=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.caster.discriminators=Object.assign({},this.caster.discriminators),A._appliedDiscriminators=this._appliedDiscriminators,A};$6.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(F),...Ny1("object","object",F?.useBsonType,B)}}});var qt=C((hQ0,zt)=>{/*!
 * Module dependencies.
 */var Oy1=t1(),gV=B6(),Sy1=fV(),ky1=KQ();function P3(A,F){if(this.$parentSchemaType=F&&F.$parentSchemaType,!this.$parentSchemaType)throw new Oy1("Cannot create DocumentArrayElement schematype without a parent");delete F.$parentSchemaType,gV.call(this,A,F,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}P3.schemaName="DocumentArrayElement";P3.defaultOptions={};/*!
 * Inherits from SchemaType.
 */P3.prototype=Object.create(gV.prototype);P3.prototype.constructor=P3;P3.prototype.cast=function(...A){return this.$parentSchemaType.cast(...A)[0]};P3.prototype.doValidate=function(A,F,B,$){let Z=ky1(this.caster,A);if(A&&!(A instanceof Z))A=new Z(A,B,null,null,$&&$.index!=null?$.index:null);return Sy1.prototype.doValidate.call(this,A,F,B,$)};P3.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let A=gV.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,A.caster=this.caster,A.schema=this.schema,A};/*!
 * Module exports.
 */zt.exports=P3});var Ct=C((dQ0,Ut)=>{var _y1=T9();class LQ extends _y1{}var Ht=$7();Object.defineProperty(LQ.prototype,"excludeIndexes",Ht);Object.defineProperty(LQ.prototype,"_id",Ht);/*!
 * ignore
 */Ut.exports=LQ});var Pt=C((mQ0,Rt)=>{/*!
 * Module dependencies.
 */var Kt=D4(),xy1=qt(),uV=A1("events").EventEmitter,vV=ZQ(),by1=Ct(),ZX=B6(),Et=iA(),Lt=Y4(),fy1=CQ(),wt=OV(),gy1=RG(),uy1=tD(),J$=f1(),wQ=KQ(),yy1=kV(),Vt=w1().arrayAtomicsSymbol,yV=w1().arrayPathSymbol,vy1=w1().documentArrayParent,j3,aA;function w2(A,F,B,$){if(F.options&&F.options.timeseries)throw new yy1(A,"timeseries");let Z=w2.defaultOptions&&w2.defaultOptions._id;if(Z!=null)$=$||{},$._id=Z;if($!=null&&$._id!=null)F=wt(F,$);else if(B!=null&&B._id!=null)F=wt(F,B);let D=Mt(F,B);D.prototype.$basePath=A,vV.call(this,A,D,B),this.schema=F,this.schemaOptions=$||{},this.$isMongooseDocumentArray=!0,this.Constructor=D,D.base=F.base;let X=this.defaultValue;if(!("defaultValue"in this)||X!=null)this.default(function(){let Y=X.call(this);if(Y!=null&&!Array.isArray(Y))Y=[Y];return Y});let J=this;this.$embeddedSchemaType=new xy1(A+".$",{...$||{},$parentSchemaType:J}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}w2.schemaName="DocumentArray";w2.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */w2.prototype=Object.create(vV.prototype);w2.prototype.constructor=w2;w2.prototype.OptionsConstructor=by1;Object.defineProperty(w2.prototype,"$conditionalHandlers",{enumerable:!1,value:{...vV.prototype.$conditionalHandlers}});/*!
 * ignore
 */function Mt(A,F,B){aA||(aA=rB());function $(){if(aA.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}A._preCompile();let Z=B!=null?B.prototype:aA.prototype;$.prototype=Object.create(Z),$.prototype.$__setSchema(A),$.schema=A,$.prototype.constructor=$,$.$isArraySubdocument=!0,$.events=new uV,$.base=A.base;for(let D in A.methods)$.prototype[D]=A.methods[D];for(let D in A.statics)$[D]=A.statics[D];for(let D in uV.prototype)$[D]=uV.prototype[D];return $.options=F,$}w2.prototype.discriminator=function(A,F,B){if(typeof A==="function")A=J$.getFunctionName(A);B=B||{};let $=J$.isPOJO(B)?B.value:B,Z=typeof B.clone==="boolean"?B.clone:!0;if(F.instanceOfSchema&&Z)F=F.clone();F=fy1(this.casterConstructor,A,F,$,null,null,B?.overwriteExisting);let D=Mt(F,null,this.casterConstructor);D.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(D,"name",{value:A})}catch(X){}return this.casterConstructor.discriminators[A]=D,this.casterConstructor.discriminators[A]};w2.prototype.doValidate=function(A,F,B,$){j3||(j3=mA());let Z=this;try{ZX.prototype.doValidate.call(this,A,D,B)}catch(X){return F(X)}function D(X){if(X)return F(X);let J=A&&A.length,Y;if(!J)return F();if($&&$.updateValidator)return F();if(!J$.isMongooseDocumentArray(A))A=new j3(A,Z.path,B);function W(G){if(G!=null)Y=G;--J||F(Y)}for(let G=0,Q=J;G<Q;++G){let q=A[G];if(q==null){--J||F(Y);continue}if(!(q instanceof aA)){let z=wQ(Z.casterConstructor,A[G]);q=A[G]=new z(q,A,void 0,void 0,G)}if($!=null&&$.validateModifiedOnly&&!q.$isModified()){--J||F(Y);continue}q.$__validate(null,$,W)}}};w2.prototype.doValidateSync=function(A,F,B){let $=ZX.prototype.doValidateSync.call(this,A,F);if($!=null)return $;let Z=A&&A.length,D=null;if(!Z)return;for(let X=0,J=Z;X<J;++X){let Y=A[X];if(!Y)continue;if(!(Y instanceof aA)){let G=wQ(this.casterConstructor,A[X]);Y=A[X]=new G(Y,A,void 0,void 0,X)}if(B!=null&&B.validateModifiedOnly&&!Y.$isModified())continue;let W=Y.validateSync(B);if(W&&D==null)D=W}return D};/*!
 * ignore
 */w2.prototype.getDefault=function(A,F,B){let $=typeof this.defaultValue==="function"?this.defaultValue.call(A):this.defaultValue;if($==null)return $;if(B&&B.skipCast)return $;if(j3||(j3=mA()),!Array.isArray($))$=[$];$=new j3($,this.path,A);for(let Z=0;Z<$.length;++Z){let X=new(wQ(this.casterConstructor,$[Z]))({},$,void 0,void 0,Z);X.$init($[Z]),X.isNew=!0,Object.assign(X.$__.activePaths.default,X.$__.activePaths.init),X.$__.activePaths.init={},$[Z]=X}return $};var hy1=Object.freeze({transform:!1,virtuals:!1}),Nt=Object.freeze({skipId:!1,willInit:!0});w2.prototype.cast=function(A,F,B,$,Z){if(j3||(j3=mA()),A!=null&&A[yV]!=null&&A===$)return A;let D,X;Z=Z||{};let J=Z.path||this.path;if(!Array.isArray(A)){if(!B&&!w2.options.castNonArrays)throw new Kt("DocumentArray",A,this.path,null,this);if(!!F&&B)F.markModified(J);return this.cast([A],F,B,$,Z)}if(!Z.skipDocumentArrayCast||J$.isMongooseDocumentArray(A))A=new j3(A,J,F,this);if($!=null)A[Vt]=$[Vt]||{};if(Z.arrayPathIndex!=null)A[yV]=J+"."+Z.arrayPathIndex;let Y=J$.isMongooseDocumentArray(A)?A.__array:A,W=Y.length;for(let G=0;G<W;++G){if(!Y[G])continue;let Q=wQ(this.casterConstructor,Y[G]),q=gy1(Y[G],!0);if(Y[G]!==q)Y[G]=q;if(Y[G]instanceof aA){if(Y[G][vy1]!==F)if(B){let z=new Q(null,A,Nt,D,G);Y[G]=z.$init(Y[G])}else{let z=new Q(Y[G],A,void 0,void 0,G);Y[G]=z}if(Y[G].__index==null)Y[G].$setIndex(G)}else if(Y[G]!=null)if(B){if(F)D||(D=dy1(this,F.$__.selected,B));else D=!0;X=new Q(null,A,Nt,D,G),Y[G]=X.$init(Y[G])}else{if($&&typeof $.id==="function")X=$.id(Y[G]._id);if($&&X&&J$.deepEqual(X.toObject(hy1),Y[G]))X.set(Y[G]),Y[G]=X;else try{X=new Q(Y[G],A,void 0,void 0,G),Y[G]=X}catch(z){throw new Kt("embedded",Y[G],A[yV],z,this)}}}return A};/*!
 * ignore
 */w2.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,this.schema,A,this.schemaOptions);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};/*!
 * ignore
 */w2.prototype.applyGetters=function(A,F){return ZX.prototype.applyGetters.call(this,A,F)};function dy1(A,F,B){if(!(B&&F))return;let $=A.path+".",Z=Object.keys(F),D=Z.length,X={},J,Y,W;while(D--)if(Y=Z[D],Y.startsWith($)){if(W=Y.substring($.length),W==="$")continue;if(W.startsWith("$."))W=W.substring(2);J||(J=!0),X[W]=F[Y]}return J&&X||void 0}/*!
 * ignore
 */w2.defaultOptions={};w2.set=ZX.set;w2.setters=[];w2.get=ZX.get;/*!
 * Handle casting $elemMatch operators
 */w2.prototype.$conditionalHandlers.$elemMatch=my1;function my1(A,F){let B=Object.keys(A),$=B.length;for(let J=0;J<$;++J){let Y=B[J],W=A[Y];if(uy1(Y)&&W!=null)A[Y]=this.castForQuery(Y,W,F)}let Z=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,D=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(Z!=null&&A[Z]!=null&&D[A[Z]]!=null)return Et(D[A[Z]],A,null,this&&this.$$context);let X=this.casterConstructor.schema??F.schema;return Et(X,A,null,this&&this.$$context)}w2.prototype.toJSONSchema=function A(F){let B=Lt("object","object",F?.useBsonType,!1),$=this.options.required&&typeof this.options.required!=="function";return{...Lt("array","array",F?.useBsonType,$),items:{...B,...this.schema.toJSONSchema(F)}}};/*!
 * Module exports.
 */Rt.exports=w2});var It=C((cQ0,jt)=>{var cy1=T9();class hV extends cy1{}var ly1=$7();Object.defineProperty(hV.prototype,"of",ly1);jt.exports=hV});var St=C((lQ0,Ot)=>{/*!
 * ignore
 */var dV=tG(),py1=It(),Tt=B6(),iy1=Y4();/*!
 * ignore
 */class DX extends Tt{constructor(A,F){super(A,F,"Map");this.$isSchemaMap=!0}set(A,F){return Tt.set(A,F)}cast(A,F,B,$,Z){if(A instanceof dV)return A;let D=Z?.path??this.path;if(B){let X=new dV({},D,F,this.$__schemaType);if(A instanceof global.Map)for(let J of A.keys()){let Y=A.get(J);if(Y==null)Y=X.$__schemaType._castNullish(Y);else Y=X.$__schemaType.cast(Y,F,!0,null,{path:D+"."+J});X.$init(J,Y)}else for(let J of Object.keys(A)){let Y=A[J];if(Y==null)Y=X.$__schemaType._castNullish(Y);else Y=X.$__schemaType.cast(Y,F,!0,null,{path:D+"."+J});X.$init(J,Y)}return X}return new dV(A,D,F,this.$__schemaType)}clone(){let A=super.clone();if(this.$__schemaType!=null)A.$__schemaType=this.$__schemaType.clone();return A}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(A){let F=A?.useBsonType,B=this.getEmbeddedSchemaType(),$=this.options.required&&typeof this.options.required!=="function",Z=iy1("object","object",F,$);return Z.additionalProperties=B.toJSONSchema(A),Z}autoEncryptionType(){return"object"}}DX.schemaName="Map";DX.prototype.OptionsConstructor=py1;DX.defaultOptions={};Ot.exports=DX});var xt=C((pQ0,_t)=>{var ny1=T9();class VQ extends ny1{}var kt=$7();Object.defineProperty(VQ.prototype,"auto",kt);Object.defineProperty(VQ.prototype,"populate",kt);/*!
 * ignore
 */_t.exports=VQ});var ut=C((iQ0,gt)=>{/*!
 * Module dependencies.
 */var sy1=xt(),I3=B6(),ay1=Kw(),ty1=Y4(),ry1=I4(),cV=U3(),lV=f6(),bt=f1(),oy1=I3.CastError,mV;function O2(A,F){let B=typeof A==="string"&&A.length===24&&/^[a-f0-9]+$/i.test(A),$=F&&F.suppressWarning;if((B||typeof A==="undefined")&&!$)bt.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");I3.call(this,A,F,"ObjectId")}O2.schemaName="ObjectId";O2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */O2.prototype=Object.create(I3.prototype);O2.prototype.constructor=O2;O2.prototype.OptionsConstructor=sy1;O2.get=I3.get;O2.set=I3.set;O2.setters=[];O2.prototype.auto=function(A){if(A)this.default(ft),this.set(Av1);return this};/*!
 * ignore
 */O2._checkRequired=(A)=>lV(A,"ObjectId");/*!
 * ignore
 */O2._cast=ay1;O2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */O2._defaultCaster=(A)=>{if(!lV(A,"ObjectId"))throw new Error(A+" is not an instance of ObjectId");return A};O2.checkRequired=I3.checkRequired;O2.prototype.checkRequired=function A(F,B){if(I3._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():O2.checkRequired())(F)};O2.prototype.cast=function(A,F,B,$,Z){if(!lV(A,"ObjectId")&&I3._isRef(this,A,F,B)){if((ry1(A)||"").toLowerCase()==="objectid")return new cV(A.toHexString());if(A==null||bt.isNonBuiltinObject(A))return this._castRef(A,F,B,Z)}let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=O2.cast();try{return D(A)}catch(X){throw new oy1("ObjectId",A,this.path,X,this)}};/*!
 * ignore
 */function NQ(A){return this.cast(A)}var ey1={...I3.prototype.$conditionalHandlers,$gt:NQ,$gte:NQ,$lt:NQ,$lte:NQ};Object.defineProperty(O2.prototype,"$conditionalHandlers",{enumerable:!1,value:ey1});/*!
 * ignore
 */function ft(){return new cV}ft.$runBeforeSetters=!0;function Av1(A){if(mV||(mV=X7()),this instanceof mV){if(A===void 0)return new cV}return A}O2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return ty1("string","objectId",F?.useBsonType,B)};O2.prototype.autoEncryptionType=function A(){return"objectId"};/*!
 * Module exports.
 */gt.exports=O2});var vt=C((nQ0,yt)=>{var Fv1=T9();class G7 extends Fv1{}var P8=$7();Object.defineProperty(G7.prototype,"enum",P8);Object.defineProperty(G7.prototype,"match",P8);Object.defineProperty(G7.prototype,"lowercase",P8);Object.defineProperty(G7.prototype,"trim",P8);Object.defineProperty(G7.prototype,"uppercase",P8);Object.defineProperty(G7.prototype,"minLength",P8);Object.defineProperty(G7.prototype,"minlength",P8);Object.defineProperty(G7.prototype,"maxLength",P8);Object.defineProperty(G7.prototype,"maxlength",P8);Object.defineProperty(G7.prototype,"populate",P8);/*!
 * ignore
 */yt.exports=G7});var pV=C((sQ0,ct)=>{/*!
 * Module dependencies.
 */var T3=B6(),JX=r4(),Bv1=vt(),$v1=eG(),Zv1=Y4(),ht=f1(),Dv1=f6(),mt=T3.CastError;function E0(A,F){this.enumValues=[],this.regExp=null,T3.call(this,A,F,"String")}E0.schemaName="String";E0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */E0.prototype=Object.create(T3.prototype);E0.prototype.constructor=E0;Object.defineProperty(E0.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:Bv1});/*!
 * ignore
 */E0._cast=$v1;E0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */E0._defaultCaster=(A)=>{if(A!=null&&typeof A!=="string")throw new Error;return A};E0.get=T3.get;E0.set=T3.set;E0.setters=[];/*!
 * ignore
 */E0._checkRequired=(A)=>(A instanceof String||typeof A==="string")&&A.length;E0.checkRequired=T3.checkRequired;E0.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function($){return $.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let A,F;if(ht.isObject(arguments[0]))if(Array.isArray(arguments[0].values))A=arguments[0].values,F=arguments[0].message;else A=ht.object.vals(arguments[0]),F=JX.messages.String.enum;else A=arguments,F=JX.messages.String.enum;for(let $ of A)if($!==void 0)this.enumValues.push(this.cast($));let B=this.enumValues;return this.enumValidator=function($){return $==null||~B.indexOf($)},this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:B}),this};E0.prototype.lowercase=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toLowerCase();return F})};E0.prototype.uppercase=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toUpperCase();return F})};E0.prototype.trim=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.trim();return F})};E0.prototype.minlength=function(A,F){if(this.minlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minlengthValidator},this);if(A!==null&&A!==void 0){let B=F||JX.messages.String.minlength;B=B.replace(/{MINLENGTH}/,A),this.validators.push({validator:this.minlengthValidator=function($){return $===null||$.length>=A},message:B,type:"minlength",minlength:A})}return this};E0.prototype.minLength=E0.prototype.minlength;E0.prototype.maxlength=function(A,F){if(this.maxlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxlengthValidator},this);if(A!==null&&A!==void 0){let B=F||JX.messages.String.maxlength;B=B.replace(/{MAXLENGTH}/,A),this.validators.push({validator:this.maxlengthValidator=function($){return $===null||$.length<=A},message:B,type:"maxlength",maxlength:A})}return this};E0.prototype.maxLength=E0.prototype.maxlength;E0.prototype.match=function A(F,B){let $=B||JX.messages.String.match,Z=function(D){if(!F)return!1;return F.lastIndex=0,D!=null&&D!==""?F.test(D):!0};return this.validators.push({validator:Z,message:$,type:"regexp",regexp:F}),this};E0.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&T3._isRef(this,F,B,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():E0.checkRequired())(F)};E0.prototype.cast=function(A,F,B,$,Z){if(typeof A!=="string"&&T3._isRef(this,A,F,B))return this._castRef(A,F,B,Z);let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=E0.cast();try{return D(A)}catch(X){throw new mt("string",A,this.path,null,this)}};/*!
 * ignore
 */function XX(A,F){return this.castForQuery(null,A,F)}/*!
 * ignore
 */function Xv1(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function($){return B.castForQuery(null,$,F)})}/*!
 * ignore
 */function dt(A){if(A==null)return this._castNullish(A);return this.cast(A,this)}var Jv1={...T3.prototype.$conditionalHandlers,$all:Xv1,$gt:XX,$gte:XX,$lt:XX,$lte:XX,$options:dt,$regex:function A(F){if(Object.prototype.toString.call(F)==="[object RegExp]")return F;return dt.call(this,F)},$not:XX};Object.defineProperty(E0.prototype,"$conditionalHandlers",{enumerable:!1,value:Jv1});E0.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A+" with String.");return $.call(this,F,B)}if(Object.prototype.toString.call(F)==="[object RegExp]"||Dv1(F,"BSONRegExp"))return F;try{return this.applySetters(F,B)}catch(Z){if(Z instanceof mt&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};E0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Zv1("string","string",F?.useBsonType,B)};E0.prototype.autoEncryptionType=function A(){return"string"};/*!
 * Module exports.
 */ct.exports=E0});var pt=C((aQ0,sV)=>{var nV=iB(),iV=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,Yv1=nV.Binary;sV.exports=function A(F){if(F==null)return F;function B($){let Z=new nV($);return Z._subtype=4,Z}if(typeof F==="string")if(iV.test(F))return lt(F);else throw new Error(`"${F}" is not a valid UUID string`);if(Buffer.isBuffer(F))return B(F);if(F instanceof Yv1)return B(F.value(!0));if(F.toString&&F.toString!==Object.prototype.toString){if(iV.test(F.toString()))return lt(F.toString())}throw new Error(`"${F}" cannot be casted to a UUID`)};sV.exports.UUID_FORMAT=iV;function Wv1(A){return A!=null&&Buffer.from(A,"hex")}function lt(A){if(typeof A!=="string")A="";let F=A.replace(/[{}-]/g,""),B=Wv1(F),$=new nV(B);return $._subtype=4,$}});var tt=C((tQ0,at)=>{/*!
 * Module dependencies.
 */var Gv1=iB(),x5=B6(),it=x5.CastError,nt=pt(),Qv1=Y4(),st=f1(),MQ=oD(),zv1=nt.UUID_FORMAT,qv1=Gv1.Binary;function RQ(A){let F;if(typeof A!=="string"&&A!=null)return F=A.toString("hex"),F.substring(0,8)+"-"+F.substring(8,12)+"-"+F.substring(12,16)+"-"+F.substring(16,20)+"-"+F.substring(20,32);return A}function n2(A,F){x5.call(this,A,F,"UUID"),this.getters.push(function(B){if(B!=null&&B.$__!=null)return B;if(Buffer.isBuffer(B))return RQ(B);else if(B instanceof qv1)return RQ(B.buffer);else if(st.isPOJO(B)&&B.type==="Buffer"&&Array.isArray(B.data))return RQ(Buffer.from(B.data));return B})}n2.schemaName="UUID";n2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */n2.prototype=Object.create(x5.prototype);n2.prototype.constructor=n2;/*!
 * ignore
 */n2._cast=nt;n2.get=x5.get;n2.set=x5.set;n2.setters=[];n2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */n2._checkRequired=(A)=>A!=null;n2.checkRequired=x5.checkRequired;n2.prototype.checkRequired=function A(F){if(Buffer.isBuffer(F))F=RQ(F);return F!=null&&zv1.test(F)};n2.prototype.cast=function(A,F,B,$,Z){if(st.isNonBuiltinObject(A)&&x5._isRef(this,A,F,B))return this._castRef(A,F,B,Z);let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=n2.cast();try{return D(A)}catch(X){throw new it(n2.schemaName,A,this.path,X,this)}};/*!
 * ignore
 */function YX(A){return this.cast(A)}/*!
 * ignore
 */function aV(A){return A.map((F)=>{return this.cast(F)})}var Hv1={...x5.prototype.$conditionalHandlers,$bitsAllClear:MQ,$bitsAnyClear:MQ,$bitsAllSet:MQ,$bitsAnySet:MQ,$all:aV,$gt:YX,$gte:YX,$in:aV,$lt:YX,$lte:YX,$ne:YX,$nin:aV};Object.defineProperty(n2.prototype,"$conditionalHandlers",{enumerable:!1,value:Hv1});n2.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A+" with UUID.");return $.call(this,F,B)}try{return this.applySetters(F,B)}catch(Z){if(Z instanceof it&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};n2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Qv1("string","binData",F?.useBsonType,B)};n2.prototype.autoEncryptionType=function A(){return"binData"};/*!
 * Module exports.
 */at.exports=n2});var et=C((rQ0,ot)=>{var rt=A1("assert"),tV=l4(),Uv1=f6();ot.exports=function A(F){if(F==null||F==="")return null;let B;if(Uv1(F,"Long"))B=F.toNumber();else if(typeof F==="string")try{return B=tV.Double.fromString(F),B}catch{rt.ok(!1)}else if(typeof F==="object"){let $=F.valueOf()??F.toString();if(typeof $==="string")try{return B=tV.Double.fromString(F),B}catch{rt.ok(!1)}else B=Number($)}else B=Number(F);return new tV.Double(B)}});var Fr=C((oQ0,Ar)=>{/*!
 * Module dependencies.
 */var Cv1=D4(),Y$=B6(),Kv1=et(),Ev1=Y4();function Z6(A,F){Y$.call(this,A,F,"Double")}Z6.schemaName="Double";Z6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */Z6.prototype=Object.create(Y$.prototype);Z6.prototype.constructor=Z6;/*!
 * ignore
 */Z6._cast=Kv1;Z6.set=Y$.set;Z6.setters=[];Z6.get=Y$.get;/*!
 * ignore
 */Z6._defaultCaster=(A)=>{if(A!=null){if(A._bsontype!=="Double")throw new Error}return A};Z6.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */Z6._checkRequired=(A)=>A!=null;Z6.checkRequired=Y$.checkRequired;Z6.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};Z6.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=Z6.cast();try{return F(A)}catch(B){throw new Cv1("Double",A,this.path,B,this)}};/*!
 * ignore
 */function PQ(A){return this.cast(A)}var Lv1={...Y$.prototype.$conditionalHandlers,$gt:PQ,$gte:PQ,$lt:PQ,$lte:PQ};Object.defineProperty(Z6.prototype,"$conditionalHandlers",{enumerable:!1,value:Lv1});Z6.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Ev1("number","double",F?.useBsonType,B)};Z6.prototype.autoEncryptionType=function A(){return"double"};/*!
 * Module exports.
 */Ar.exports=Z6});var $r=C((eQ0,Br)=>{var wv1=f6(),Vv1=A1("assert");Br.exports=function A(F){if(F==null)return F;if(F==="")return null;let B=wv1(F,"Long")?F.toNumber():Number(F),$=2147483647,Z=-2147483648;if(B===(B|0)&&B>=Z&&B<=$)return B;Vv1.ok(!1)}});var Xr=C((Az0,Dr)=>{/*!
 * Module dependencies.
 */var Zr=D4(),W$=B6(),Nv1=$r(),Mv1=Y4(),jQ=oD();function s2(A,F){W$.call(this,A,F,"Int32")}s2.schemaName="Int32";s2.defaultOptions={};/*!
 * Inherits from SchemaType.
 */s2.prototype=Object.create(W$.prototype);s2.prototype.constructor=s2;/*!
 * ignore
 */s2._cast=Nv1;s2.set=W$.set;s2.setters=[];s2.get=W$.get;/*!
 * ignore
 */s2._defaultCaster=(A)=>{if(A!=null){if(typeof A!=="number"||A!==(A|0)||A<-2147483648||A>2147483647)throw new Error}return A};s2.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */s2._checkRequired=(A)=>A!=null;s2.checkRequired=W$.checkRequired;s2.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};s2.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=s2.cast();try{return F(A)}catch(B){throw new Zr("Int32",A,this.path,B,this)}};/*!
 * ignore
 */var Rv1={...W$.prototype.$conditionalHandlers,$gt:IQ,$gte:IQ,$lt:IQ,$lte:IQ,$bitsAllClear:jQ,$bitsAnyClear:jQ,$bitsAllSet:jQ,$bitsAnySet:jQ};Object.defineProperty(s2.prototype,"$conditionalHandlers",{enumerable:!1,value:Rv1});/*!
 * ignore
 */function IQ(A,F){return this.castForQuery(null,A,F)}s2.prototype.castForQuery=function(A,F,B){let $;if(A!=null){if($=this.$conditionalHandlers[A],$)return $.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch(Z){if(Z instanceof Zr&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}};s2.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Mv1("number","int",F?.useBsonType,B)};s2.prototype.autoEncryptionType=function A(){return"int"};/*!
 * Module exports.
 */Dr.exports=s2});var rD=C((Pv1)=>{/*!
 * Module exports.
 */Pv1.Array=ZQ();Pv1.BigInt=Ua();Pv1.Boolean=Ea();Pv1.Buffer=Ma();Pv1.Date=ka();Pv1.Decimal128=Pv1.Decimal=fa();Pv1.DocumentArray=Pt();Pv1.Map=St();Pv1.Mixed=hA();Pv1.Number=WV();Pv1.ObjectId=ut();Pv1.String=pV();Pv1.Subdocument=fV();Pv1.UUID=tt();Pv1.Double=Fr();Pv1.Int32=Xr();Pv1.Oid=Pv1.ObjectId;Pv1.Object=Pv1.Mixed;Pv1.Bool=Pv1.Boolean;Pv1.ObjectID=Pv1.ObjectId});var cA=C((BN,Lr)=>{/*!
 * Module dependencies.
 */var cv1=A1("events").EventEmitter,lv1=fA(),O3=t1(),AN=B6(),Wr=T9(),pv1=cw(),FN=iG(),Gr=pw(),y6=T2(),Qr=f2(),iv1=I4(),nv1=on(),SQ=sw(),sv1=Fs(),zr=$s(),av1=UG(),TQ=O9(),tv1=Ds(),rv1=Us(),i0=f1(),ov1=Ks(),ev1=/\.\d+(\.|$)/,b5,Ah1=sG().queryMiddlewareFunctions,Fh1=aG().middlewareFunctions,qr=Ah1.concat(Fh1).reduce((A,F)=>A.add(F),new Set),oV=i0.isPOJO,Hr=0,Bh1=/^\d+$/;function G1(A,F){if(!(this instanceof G1))return new G1(A,F);if(this.obj=A,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=F&&F.methods||{},this.methodOptions={},this.statics=F&&F.statics||{},this.tree={},this.query=F&&F.query||{},this.childSchemas=[],this.plugins=[],this.$id=++Hr,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new lv1},this.options=this.defaultOptions(F),Array.isArray(A))for(let Z of A)this.add(Z);else if(A)this.add(A);if(F&&F.virtuals){let Z=F.virtuals,D=Object.keys(Z);for(let X of D){let J=Z[X].options?Z[X].options:void 0,Y=this.virtual(X,J);if(Z[X].get)Y.get(Z[X].get);if(Z[X].set)Y.set(Z[X].set)}}let B=A&&A._id&&i0.isObject(A._id);if(!this.paths._id&&this.options._id&&!B)Gr(this);this.setupTimestamp(this.options.timestamps)}function Ur(A,F){for(let B of Object.keys(F)){let $=null;if(F[B]!=null)$=F[B];else{let D=Qr(A.paths[B],"options");if(D==null)continue;$=D.alias}if(!$)continue;let Z=A.paths[B].path;if(Array.isArray($)){for(let D of $){if(typeof D!=="string")throw new Error("Invalid value for alias option on "+Z+", got "+D);A.aliases[D]=Z,A.virtual(D).get(function(X){return function(){if(typeof this.get==="function")return this.get(X);return this[X]}}(Z)).set(function(X){return function(J){return this.$set(X,J)}}(Z))}continue}if(typeof $!=="string")throw new Error("Invalid value for alias option on "+Z+", got "+$);A.aliases[$]=Z,A.virtual($).get(function(D){return function(){if(typeof this.get==="function")return this.get(D);return this[D]}}(Z)).set(function(D){return function(X){return this.$set(D,X)}}(Z))}}/*!
 * Inherit from EventEmitter.
 */G1.prototype=Object.create(cv1.prototype);G1.prototype.constructor=G1;G1.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(G1.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(G1.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(G1.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});G1.prototype.obj;G1.prototype.paths;G1.prototype.tree;G1.prototype.clone=function(){let A=this._clone();return A.on("init",(F)=>this.emit("init",F)),A};/*!
 * ignore
 */G1.prototype._clone=function A(F){F=F||(this.base==null?G1:this.base.Schema);let B=new F({},this._userProvidedOptions);B.base=this.base,B.obj=this.obj,B.options=y6(this.options),B.callQueue=this.callQueue.map(function($){return $}),B.methods=y6(this.methods),B.methodOptions=y6(this.methodOptions),B.statics=y6(this.statics),B.query=y6(this.query),B.plugins=Array.prototype.slice.call(this.plugins),B._indexes=y6(this._indexes),B._searchIndexes=y6(this._searchIndexes),B.s.hooks=this.s.hooks.clone(),B.tree=y6(this.tree),B.paths=Object.fromEntries(Object.entries(this.paths).map(([$,Z])=>[$,Z.clone()])),B.nested=y6(this.nested),B.subpaths=y6(this.subpaths);for(let $ of Object.values(B.paths))if($.$isSingleNested){let Z=$.path;for(let D of Object.keys($.schema.paths))B.singleNestedPaths[Z+"."+D]=$.schema.paths[D];for(let D of Object.keys($.schema.singleNestedPaths))B.singleNestedPaths[Z+"."+D]=$.schema.singleNestedPaths[D];for(let D of Object.keys($.schema.subpaths))B.singleNestedPaths[Z+"."+D]=$.schema.subpaths[D];for(let D of Object.keys($.schema.nested))B.singleNestedPaths[Z+"."+D]="nested"}if(B._gatherChildSchemas(),B.virtuals=y6(this.virtuals),B.$globalPluginsApplied=this.$globalPluginsApplied,B.$isRootDiscriminator=this.$isRootDiscriminator,B.$implicitlyCreated=this.$implicitlyCreated,B.$id=++Hr,B.$originalSchemaId=this.$id,B.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)B.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)B.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)B._applyDiscriminators=new Map(this._applyDiscriminators);return B.aliases=Object.assign({},this.aliases),B.encryptedFields=y6(this.encryptedFields),B};G1.prototype.pick=function(A,F){let B=new G1({},F||this.options);if(!Array.isArray(A))throw new O3('Schema#pick() only accepts an array argument, got "'+typeof A+'"');for(let $ of A)if(this._hasEncryptedField($)){let Z=this.encryptedFields[$],D=this.path($);B.add({[$]:{encrypt:Z,[this.options.typeKey]:D}})}else if(this.nested[$])B.add({[$]:Qr(this.tree,$)});else{let Z=this.path($);if(Z==null)throw new O3("Path `"+$+"` is not in the schema");B.add({[$]:Z})}if(!this._hasEncryptedFields())B.options.encryptionType=null;return B};G1.prototype.omit=function(A,F){let B=new G1(this,F||this.options);if(!Array.isArray(A))throw new O3('Schema#omit() only accepts an array argument, got "'+typeof A+'"');B.remove(A);for(let $ in B.singleNestedPaths)if(A.includes($))delete B.singleNestedPaths[$];return B};G1.prototype.defaultOptions=function(A){this._userProvidedOptions=A==null?{}:y6(A);let F=this.base&&this.base.options||{},B="strict"in F?F.strict:!0,$="strictQuery"in F?F.strictQuery:!1,Z="id"in F?F.id:!0;if(A={strict:B,strictQuery:$,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:Z,typeKey:"type",...A},A.versionKey&&typeof A.versionKey!=="string")throw new O3("`versionKey` must be falsy or string, got `"+typeof A.versionKey+"`");if(typeof A.read==="string")A.read=SQ(A.read);else if(Array.isArray(A.read)&&typeof A.read[0]==="string")A.read={mode:SQ(A.read[0]),tags:A.read[1]};if(A.optimisticConcurrency&&!A.versionKey)throw new O3("Must set `versionKey` if using `optimisticConcurrency`");return A};G1.prototype.discriminator=function(A,F,B){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(A,{schema:F,options:B}),this};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */G1.prototype._defaultToObjectOptions=function(A){let F=A?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[F])return this._defaultToObjectOptionsMap[F];let B=this.base&&this.base.options&&this.base.options[F]||{},$=this.options[F]||{},Z=Object.assign({},B,$);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[F]=Z,Z};G1.prototype.encryptionType=function A(A){if(arguments.length===0)return this.options.encryptionType;if(!(typeof A==="string"||A===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=A};G1.prototype.add=function A(F,B){if(F instanceof G1||F!=null&&F.instanceOfSchema)return av1(this,F),this;if(F._id===!1&&B==null)this.options._id=!1;if(B=B||"",B==="__proto__."||B==="constructor."||B==="prototype.")return this;let $=Object.keys(F),Z=this.options.typeKey;for(let X of $){if(i0.specialProperties.has(X))continue;let J=B+X,Y=F[X];if(Y==null)throw new TypeError("Invalid value for schema path `"+J+'`, got value "'+Y+'"');if(X==="_id"&&Y===!1)continue;let W=!1;if(typeof Y==="string"){let G=this.base!=null?this.base.Schema.Types:G1.Types,Q=Y.charAt(0).toUpperCase()+Y.substring(1);W=G[Q]!=null}if(X!=="_id"&&(typeof Y!=="object"&&typeof Y!=="function"&&!W||Y==null))throw new TypeError(`Invalid schema configuration: \`${Y}\` is not a valid type at path \`${X}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(Y instanceof FN||(Y.constructor&&Y.constructor.name||null)==="VirtualType"){this.virtual(Y);continue}if(Array.isArray(Y)&&Y.length===1&&Y[0]==null)throw new TypeError("Invalid value for schema Array path `"+J+'`, got value "'+Y[0]+'"');if(!(oV(Y)||Y instanceof Wr)){if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,Y),Y[0]!=null&&!Y[0].instanceOfSchema&&i0.isPOJO(Y[0].discriminators)){let G=this.path(B+X);for(let Q in Y[0].discriminators)G.discriminator(Q,Y[0].discriminators[Q])}}else if(Object.keys(Y).length<1){if(B)this.nested[B.substring(0,B.length-1)]=!0;this.path(J,Y)}else if(!Y[Z]||Z==="type"&&oV(Y.type)&&Y.type.type)this.nested[J]=!0,this.add(Y,J+".");else{let G=Y[Z];if(oV(G)&&Object.keys(G).length>0){if(B)this.nested[B.substring(0,B.length-1)]=!0;let Q={};if(this._userProvidedOptions.typeKey)Q.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)Q.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)Q.toObject=i0.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)Q.toJSON=i0.omit(this._userProvidedOptions.toJSON,["transform"]);let q=new G1(G,Q);q.$implicitlyCreated=!0;let z=Object.assign({},Y,{[Z]:q});this.path(B+X,z)}else{if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,Y),Y!=null&&!Y.instanceOfSchema&&i0.isPOJO(Y.discriminators)){let Q=this.path(B+X);for(let q in Y.discriminators)Q.discriminator(q,Y.discriminators[q])}}}if(Y.instanceOfSchema&&Y.encryptionType()!=null){if(this.encryptionType()!=Y.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[G,Q]of Object.entries(Y.encryptedFields)){let q=J+"."+G;this._addEncryptedField(q,Q)}}else if(typeof Y==="object"&&"encrypt"in Y){let{encrypt:G}=Y;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(J,G)}else this._removeEncryptedField(J)}let D=Object.fromEntries(Object.entries(F).map(([X])=>[B+X,null]));return Ur(this,D),this};G1.prototype._addEncryptedField=function A(F,B){if(this.path(F).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${F}'`);this.encryptedFields[F]=y6(B)};G1.prototype._removeEncryptedField=function A(F){delete this.encryptedFields[F]};G1.prototype._hasEncryptedFields=function A(){return Object.keys(this.encryptedFields).length>0};G1.prototype._hasEncryptedField=function A(F){return F in this.encryptedFields};G1.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([F,B])=>{let $=this.path(F).autoEncryptionType();return{path:F,bsonType:$,...B}})}};G1.prototype._buildSchemaMap=function(){function A($,Z,D){let X=0,J=$[X];for(;X<$.length-1;++X,J=$[X])Z[J]=Z[J]==null?{bsonType:"object",properties:{}}:Z[J],Z=Z[J].properties;Z[J]=D}let F=($,[Z,D])=>{let X=this.path(Z).autoEncryptionType(),J=Z.split("."),Y={encrypt:{...D,bsonType:X}};return A(J,$,Y),$};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(F,{})}};G1.prototype.alias=function F(A,F){return Ur(this,{[A]:F}),this};G1.prototype.removeIndex=function A(F){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof F!=="object"&&typeof F!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof F==="object"){for(let B=this._indexes.length-1;B>=0;--B)if(zr(this._indexes[B][0],F))this._indexes.splice(B,1)}else for(let B=this._indexes.length-1;B>=0;--B)if(this._indexes[B][1]!=null&&this._indexes[B][1].name===F)this._indexes.splice(B,1);return this};G1.prototype.clearIndexes=function A(){return this._indexes.length=0,this};G1.prototype.searchIndex=function A(F){return this._searchIndexes.push(F),this};G1.reserved=Object.create(null);G1.prototype.reserved=G1.reserved;var u6=G1.reserved;u6.prototype=u6.emit=u6.listeners=u6.removeListener=u6.collection=u6.errors=u6.get=u6.init=u6.isModified=u6.isNew=u6.populated=u6.remove=u6.save=u6.toObject=u6.validate=1;u6.collection=1;G1.prototype.path=function(A,F){if(F===void 0){if(this.paths[A]!=null)return this.paths[A];let Y=Cr(A),W=$h1(this,A,Y);if(W!=null)return W;let G=Kr(this,A);if(G!=null)return G;if(W=this.hasMixedParent(Y),W!=null)return W;return ev1.test(A)?Dh1(this,A,Y):void 0}let B=A.split(".")[0];if(u6[B]&&!this.options.suppressReservedKeysWarning){let Y=`\`${B}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;i0.warn(Y)}if(typeof F==="object"&&i0.hasUserDefinedProperty(F,"ref"))ov1(F.ref,A);let $=A.split(/\./),Z=$.pop(),D=this.tree,X="";for(let Y of $){if(i0.specialProperties.has(Y))throw new Error("Cannot set special property `"+Y+"` on a schema");if(X=X+=(X.length>0?".":"")+Y,!D[Y])this.nested[X]=!0,D[Y]={};if(typeof D[Y]!=="object"){let W="Cannot set nested path `"+A+"`. Parent path `"+X+"` already set to type "+D[Y].name+".";throw new Error(W)}D=D[Y]}D[Z]=y6(F),this.paths[A]=this.interpretAsType(A,F,this.options);let J=this.paths[A];if(this.childSchemas=this.childSchemas.filter((Y)=>Y.path!==A),J.$isSchemaMap){let Y=A+".$*";if(this.paths[Y]=J.$__schemaType,this.mapPaths.push(this.paths[Y]),J.$__schemaType.$isSingleNested)this.childSchemas.push({schema:J.$__schemaType.schema,model:J.$__schemaType.caster,path:A})}if(J.$isSingleNested){for(let Y of Object.keys(J.schema.paths))this.singleNestedPaths[A+"."+Y]=J.schema.paths[Y];for(let Y of Object.keys(J.schema.singleNestedPaths))this.singleNestedPaths[A+"."+Y]=J.schema.singleNestedPaths[Y];for(let Y of Object.keys(J.schema.subpaths))this.singleNestedPaths[A+"."+Y]=J.schema.subpaths[Y];for(let Y of Object.keys(J.schema.nested))this.singleNestedPaths[A+"."+Y]="nested";Object.defineProperty(J.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),J.caster.base=this.base,this.childSchemas.push({schema:J.schema,model:J.caster,path:A})}else if(J.$isMongooseDocumentArray)Object.defineProperty(J.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),J.casterConstructor.base=this.base,this.childSchemas.push({schema:J.schema,model:J.casterConstructor,path:A});if(J.$isMongooseArray&&J.caster instanceof AN){let Y=A,W=J,G=[];while(W.$isMongooseArray){if(Y=Y+".$",W.$isMongooseDocumentArray)W.$embeddedSchemaType._arrayPath=Y,W.$embeddedSchemaType._arrayParentPath=A,W=W.$embeddedSchemaType;else W.caster._arrayPath=Y,W.caster._arrayParentPath=A,W=W.caster;this.subpaths[Y]=W}for(let Q of G)this.subpaths[Q.path]=Q}if(J.$isMongooseDocumentArray){for(let Y of Object.keys(J.schema.paths)){let W=J.schema.paths[Y];if(this.subpaths[A+"."+Y]=W,typeof W==="object"&&W!=null&&W.$parentSchemaDocArray==null)W.$parentSchemaDocArray=J}for(let Y of Object.keys(J.schema.subpaths)){let W=J.schema.subpaths[Y];if(this.subpaths[A+"."+Y]=W,typeof W==="object"&&W!=null&&W.$parentSchemaDocArray==null)W.$parentSchemaDocArray=J}for(let Y of Object.keys(J.schema.singleNestedPaths)){let W=J.schema.singleNestedPaths[Y];if(this.subpaths[A+"."+Y]=W,typeof W==="object"&&W!=null&&W.$parentSchemaDocArray==null)W.$parentSchemaDocArray=J}}return this};/*!
 * ignore
 */G1.prototype._gatherChildSchemas=function A(){let F=[];for(let B of Object.keys(this.paths)){if(typeof B!=="string")continue;let $=this.paths[B];if($.$isMongooseDocumentArray||$.$isSingleNested)F.push({schema:$.schema,model:$.caster,path:B});else if($.$isSchemaMap&&$.$__schemaType.$isSingleNested)F.push({schema:$.$__schemaType.schema,model:$.$__schemaType.caster,path:B})}return this.childSchemas=F,F};/*!
 * ignore
 */function $h1(A,F,B){if(A.paths.hasOwnProperty(F))return A.paths[F];if(A.subpaths.hasOwnProperty(B)){let $=A.subpaths[B];if($==="nested")return;return $}if(A.singleNestedPaths.hasOwnProperty(B)&&typeof A.singleNestedPaths[B]==="object"){let $=A.singleNestedPaths[B];if($==="nested")return;return $}return null}/*!
 * ignore
 */function Cr(A){if(!/\.\d+/.test(A))return A;return A.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function Kr(A,F){if(A.mapPaths.length===0)return null;for(let B of A.mapPaths){let $=B.path.replace(/\.\$\*/g,"");if(F===$||F.startsWith($+".")&&F.slice($.length+1).indexOf(".")===-1)return B;else if(B.schema&&F.startsWith($+".")){let Z=F.slice($.length+1);return Z=Z.slice(Z.indexOf(".")+1),B.schema.paths[Z]}else if(B.$isSchemaMap&&F.startsWith($+".")){let Z=F.slice($.length+1);Z=Z.slice(Z.indexOf(".")+1);let D=B.$__schemaType._presplitPath;if(Z.indexOf(".")===-1&&D[D.length-1]==="$*")return B.$__schemaType;else if(Z.indexOf(".")!==-1&&B.$__schemaType.schema&&D[D.length-1]==="$*")return B.$__schemaType.schema.path(Z.slice(Z.indexOf(".")+1))}}return null}Object.defineProperty(G1.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});G1.prototype.interpretAsType=function(A,F,B){if(F instanceof AN){if(F.path===A)return F;let Y=F.clone();return Y.path=A,Y}let $=this.base!=null?this.base.Schema.Types:G1.Types,Z=this.base!=null?this.base.Types:A$();if(!i0.isPOJO(F)&&!(F instanceof Wr)){if(i0.getFunctionName(F.constructor)!=="Object"){let W=F;F={},F[B.typeKey]=W}}let D=F[B.typeKey]&&(F[B.typeKey]instanceof Function||B.typeKey!=="type"||!F.type.type)?F[B.typeKey]:{};if(D instanceof AN){if(D.path===A)return D;let Y=D.clone();return Y.path=A,Y}let X;if(i0.isPOJO(D)||D==="mixed")return new $.Mixed(A,F);if(Array.isArray(D)||D===Array||D==="array"||D===$.Array){let Y=D===Array||D==="array"?F.cast||F.of:D[0];if(Y&&Y.instanceOfSchema){if(!(Y instanceof G1))if(this.options._isMerging)Y=new G1(Y);else throw new TypeError("Schema for array path `"+A+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${A}: new Schema(...)`);return new $.DocumentArray(A,Y,F)}if(Y&&Y[B.typeKey]&&Y[B.typeKey].instanceOfSchema){if(!(Y[B.typeKey]instanceof G1))if(this.options._isMerging)Y[B.typeKey]=new G1(Y[B.typeKey]);else throw new TypeError("Schema for array path `"+A+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${A}: new Schema(...)`);return new $.DocumentArray(A,Y[B.typeKey],F,Y)}if(typeof Y!=="undefined"){if(Array.isArray(Y)||Y.type===Array||Y.type=="Array"){if(Y&&Y.type=="Array")Y.type=Array;return new $.Array(A,this.interpretAsType(A,Y,B),F)}}let W=Y!=null&&Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y;if(typeof Y==="string")Y=$[Y.charAt(0).toUpperCase()+Y.substring(1)];else if(i0.isPOJO(W))if(Object.keys(W).length){let G={minimize:B.minimize};if(B.typeKey)G.typeKey=B.typeKey;if(B.hasOwnProperty("strict"))G.strict=B.strict;if(B.hasOwnProperty("strictQuery"))G.strictQuery=B.strictQuery;if(B.hasOwnProperty("toObject"))G.toObject=i0.omit(B.toObject,["transform"]);if(B.hasOwnProperty("toJSON"))G.toJSON=i0.omit(B.toJSON,["transform"]);if(this._userProvidedOptions.hasOwnProperty("_id"))G._id=this._userProvidedOptions._id;else if(G1.Types.DocumentArray.defaultOptions._id!=null)G._id=G1.Types.DocumentArray.defaultOptions._id;let Q=new G1(W,G);return Q.$implicitlyCreated=!0,new $.DocumentArray(A,Q,F)}else return new $.Array(A,$.Mixed,F);if(Y){if(D=Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y,Array.isArray(D))return new $.Array(A,this.interpretAsType(A,D,B),F);if(X=typeof D==="string"?D:D.schemaName||i0.getFunctionName(D),X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${A}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!$.hasOwnProperty(X))throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type within the array \`${A}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new $.Array(A,Y||$.Mixed,F,B)}if(D&&D.instanceOfSchema)return new $.Subdocument(D,A,F);if(Buffer.isBuffer(D))X="Buffer";else if(typeof D==="function"||typeof D==="object")X=D.schemaName||i0.getFunctionName(D);else if(D===Z.ObjectId)X="ObjectId";else if(D===Z.Decimal128)X="Decimal128";else X=D==null?""+D:D.toString();if(X)X=X.charAt(0).toUpperCase()+X.substring(1);if(X==="ObjectID")X="ObjectId";if(X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: \`${A}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if($[X]==null)throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type at path \`${A}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);let J=new $[X](A,F);if(J.$isSchemaMap)Zh1(this,J,A,F,B);return J};/*!
 * ignore
 */function Zh1(A,F,B,$,Z){let D=B+".$*",X={type:{}};if(i0.hasUserDefinedProperty($,"of")){if(i0.isPOJO($.of)&&Object.keys($.of).length>0&&!i0.hasUserDefinedProperty($.of,A.options.typeKey))X={[A.options.typeKey]:new G1($.of)};else if(i0.isPOJO($.of))X=Object.assign({},$.of);else X={[A.options.typeKey]:$.of};if(X[A.options.typeKey]&&X[A.options.typeKey].instanceOfSchema)X[A.options.typeKey].eachPath((W,G)=>{if(G.options.select===!0||G.options.select===!1)throw new O3('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+B+"."+W+'"')});if(i0.hasUserDefinedProperty($,"ref"))X.ref=$.ref}F.$__schemaType=A.interpretAsType(D,X,Z)}G1.prototype.eachPath=function(A){let F=Object.keys(this.paths),B=F.length;for(let $=0;$<B;++$)A(F[$],this.paths[F[$]]);return this};G1.prototype.requiredPaths=function A(F){if(this._requiredpaths&&!F)return this._requiredpaths;let B=Object.keys(this.paths),$=B.length,Z=[];while($--){let D=B[$];if(this.paths[D].isRequired)Z.push(D)}return this._requiredpaths=Z,this._requiredpaths};G1.prototype.indexedPaths=function A(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};G1.prototype.pathType=function(A){if(this.paths.hasOwnProperty(A))return"real";if(this.virtuals.hasOwnProperty(A))return"virtual";if(this.nested.hasOwnProperty(A))return"nested";let F=Cr(A);if(this.subpaths.hasOwnProperty(F)||this.subpaths.hasOwnProperty(A))return"real";let B=this.singleNestedPaths.hasOwnProperty(F)||this.singleNestedPaths.hasOwnProperty(A);if(B)return B==="nested"?"nested":"real";if(Kr(this,A)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(A))return Er(this,A,F);return"adhocOrUndefined"};G1.prototype.hasMixedParent=function(A){let F=A.split(/\./g);A="";for(let B=0;B<F.length;++B)if(A=B>0?A+"."+F[B]:F[B],this.paths.hasOwnProperty(A)&&this.paths[A]instanceof b5.Mixed)return this.paths[A];return null};G1.prototype.setupTimestamp=function(A){return rv1(this,A)};function Er(A,F,B){let $=F.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if($.length<2)return A.paths.hasOwnProperty($[0])?A.paths[$[0]]:"adhocOrUndefined";let Z=A.path($[0]),D=!1;if(!Z)return"adhocOrUndefined";let X=$.length-1;for(let J=1;J<$.length;++J){D=!1;let Y=$[J];if(J===X&&Z&&!/\D/.test(Y)){if(Z.$isMongooseDocumentArray)Z=Z.$embeddedSchemaType;else if(Z instanceof b5.Array)Z=Z.caster;else Z=void 0;break}if(!/\D/.test(Y)){if(Z instanceof b5.Array&&J!==X)Z=Z.caster;continue}if(!(Z&&Z.schema)){Z=void 0;break}D=Z.schema.pathType(Y)==="nested",Z=Z.schema.path(Y)}if(A.subpaths[B]=Z,Z)return"real";if(D)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function Dh1(A,F,B){return Er(A,F,B),A.subpaths[B]}G1.prototype.queue=function(A,F){return this.callQueue.push([A,F]),this};G1.prototype.pre=function(A){if(A instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let B of qr)if(A.test(B))this.pre.apply(this,[B].concat(F));return this}if(Array.isArray(A)){let F=Array.prototype.slice.call(arguments,1);for(let B of A)this.pre.apply(this,[B].concat(F));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};G1.prototype.post=function(A){if(A instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let B of qr)if(A.test(B))this.post.apply(this,[B].concat(F));return this}if(Array.isArray(A)){let F=Array.prototype.slice.call(arguments,1);for(let B of A)this.post.apply(this,[B].concat(F));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};G1.prototype.plugin=function(A,F){if(typeof A!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof A+'"');if(F&&F.deduplicate){for(let B of this.plugins)if(B.fn===A)return this}return this.plugins.push({fn:A,opts:F}),A(this,F),this};G1.prototype.method=function(A,F,B){if(typeof A!=="string")for(let $ in A)this.methods[$]=A[$],this.methodOptions[$]=y6(B);else this.methods[A]=F,this.methodOptions[A]=y6(B);return this};G1.prototype.static=function(A,F){if(typeof A!=="string")for(let B in A)this.statics[B]=A[B];else this.statics[A]=F;return this};G1.prototype.index=function(A,F){if(A||(A={}),F||(F={}),F.expires)i0.expires(F);for(let B in A)if(this.aliases[B])A=i0.renameObjKey(A,B,this.aliases[B]);for(let B of Object.keys(A))if(A[B]==="ascending"||A[B]==="asc")A[B]=1;else if(A[B]==="descending"||A[B]==="desc")A[B]=-1;for(let B of this.indexes())if(F.name==null&&B[1].name==null&&zr(B[0],A))i0.warn(`Duplicate schema index on ${JSON.stringify(A)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([A,F]),this};G1.prototype.set=function(A,F,B){if(arguments.length===1)return this.options[A];switch(A){case"read":if(typeof F==="string")this.options[A]={mode:SQ(F),tags:B};else if(Array.isArray(F)&&typeof F[0]==="string")this.options[A]={mode:SQ(F[0]),tags:F[1]};else this.options[A]=F;this._userProvidedOptions[A]=this.options[A];break;case"timestamps":this.setupTimestamp(F),this.options[A]=F,this._userProvidedOptions[A]=this.options[A];break;case"_id":if(this.options[A]=F,this._userProvidedOptions[A]=this.options[A],F&&!this.paths._id)Gr(this);else if(!F&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[A]=F,this._userProvidedOptions[A]=this.options[A];break}if(A==="strict")WX(this,{strict:F});if(A==="strictQuery")WX(this,{strictQuery:F});if(A==="toObject")F={...F},delete F.transform,WX(this,{toObject:F});if(A==="toJSON")F={...F},delete F.transform,WX(this,{toJSON:F});return this};/*!
 * Recursively set options on implicitly created schemas
 */function WX(A,F){for(let{schema:B}of A.childSchemas){if(!B.$implicitlyCreated)continue;Object.assign(B.options,F),WX(B,F)}}G1.prototype.get=function(A){return this.options[A]};var Xh1="2d 2dsphere hashed text".split(" ");Object.defineProperty(G1,"indexTypes",{get:function(){return Xh1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});G1.prototype.indexes=function(){return nv1(this)};G1.prototype.virtual=function(A,F){if(A instanceof FN||iv1(A)==="VirtualType")return this.virtual(A.path,A.options);if(F=new pv1(F),i0.hasUserDefinedProperty(F,["ref","refPath"])){if(F.localField==null)throw new Error("Reference virtuals require `localField` option");if(F.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let Z=this.virtual(A);if(Z.options=F,this.pre("init",function J(Y,W){if(TQ.has(A,Y)){let G=TQ.get(A,Y);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(F.justOne||F.count)this.$$populatedVirtuals[A]=Array.isArray(G)?G[0]:G;else this.$$populatedVirtuals[A]=Array.isArray(G)?G:G==null?[]:[G];if(W?.hydratedPopulatedDocs&&!F.count){let Q=Z._getModelNamesForPopulate(this),q=this.$$populatedVirtuals[A];if(!Array.isArray(q)&&!q.$__&&Q?.length===1){let z=this.db.model(Q[0]);this.$$populatedVirtuals[A]=z.hydrate(q)}else if(Array.isArray(q)&&Q?.length===1){let z=this.db.model(Q[0]);for(let U=0;U<q.length;++U)if(!q[U].$__)q[U]=z.hydrate(q[U],null,{hydratedPopulatedDocs:!0});let H=F.foreignField;this.$populated(A,q.map((U)=>U==null?U:U.get(typeof H==="function"?H.call(U,U):H)),{populateModelSymbol:z})}}TQ.unset(A,Y)}}),Z.set(function(J){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return tv1(this.$$populatedVirtuals,A,J,F)}),typeof F.get==="function")Z.get(F.get);let D=A.split("."),X=D[0];for(let J=0;J<D.length-1;++J){if(this.paths[X]==null)continue;if(this.paths[X].$isMongooseDocumentArray||this.paths[X].$isSingleNested){let Y=D.slice(J+1).join(".");this.paths[X].schema.virtual(Y,F);break}else if(this.paths[X].$isSchemaMap){let Y=D.slice(J+2).join(".");this.paths[X].$__schemaType.schema.virtual(Y,F);break}X+="."+D[J+1]}return Z}let B=this.virtuals,$=A.split(".");if(this.pathType(A)==="real")throw new Error('Virtual path "'+A+'" conflicts with a real path in the schema');if(B[A]=$.reduce(function(Z,D,X){return Z[D]||(Z[D]=X===$.length-1?new FN(F,A):{}),Z[D]},this.tree),F&&F.applyToArray&&$.length>1){let Z=this.path($.slice(0,-1).join("."));if(Z&&Z.$isMongooseArray)return Z.virtual($[$.length-1],F);else throw new O3(`Path "${Z}" is not an array`)}return B[A]};G1.prototype.virtualpath=function(A){return this.virtuals.hasOwnProperty(A)?this.virtuals[A]:null};G1.prototype.remove=function(A){if(typeof A==="string")A=[A];if(Array.isArray(A))A.forEach(function(F){if(this.path(F)==null&&!this.nested[F])return;if(this.nested[F]){let B=Object.keys(this.paths).concat(Object.keys(this.nested));for(let $ of B)if($.startsWith(F+"."))delete this.paths[$],delete this.nested[$],eV(this,$);delete this.nested[F],eV(this,F);return}delete this.paths[F],eV(this,F),this._removeEncryptedField(F)},this);return this};/*!
 * ignore
 */function eV(A,F){let B=F.split("."),$=B.pop(),Z=A.tree;for(let D of B)Z=Z[D];delete Z[$]}G1.prototype.removeVirtual=function(A){if(typeof A==="string")A=[A];if(Array.isArray(A)){for(let F of A)if(this.virtuals[F]==null)throw new O3(`Attempting to remove virtual "${F}" that does not exist.`);for(let F of A)if(delete this.paths[F],delete this.virtuals[F],F.indexOf(".")!==-1)TQ.unset(F,this.tree);else delete this.tree[F]}return this};G1.prototype.loadClass=function(A,F){if(A===Object.prototype||A===Function.prototype||A.prototype.hasOwnProperty("$isMongooseModelPrototype")||A.prototype.hasOwnProperty("$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(A),F),!F)Object.getOwnPropertyNames(A).forEach(function(B){if(B.match(/^(length|name|prototype|constructor|__proto__)$/))return;let $=Object.getOwnPropertyDescriptor(A,B);if($.hasOwnProperty("value"))this.static(B,$.value)},this);return Object.getOwnPropertyNames(A.prototype).forEach(function(B){if(B.match(/^(constructor)$/))return;let $=Object.getOwnPropertyDescriptor(A.prototype,B);if(!F){if(typeof $.value==="function")this.method(B,$.value)}if(typeof $.get==="function"){if(this.virtuals[B])this.virtuals[B].getters=[];this.virtual(B).get($.get)}if(typeof $.set==="function"){if(this.virtuals[B])this.virtuals[B].setters=[];this.virtual(B).set($.set)}},this),this};/*!
 * ignore
 */G1.prototype._getSchema=function(A){let F=this,B=F.path(A),$=[];if(B)return B.$fullPath=A,B;function Z(X,J){let Y=X.length+1,W,G;while(Y--)if(G=X.slice(0,Y).join("."),W=J.path(G),W){if($.push(G),W.caster){if(W.caster instanceof b5.Mixed)return W.caster.$fullPath=$.join("."),W.caster;if(Y!==X.length){if(Y+1===X.length&&W.$embeddedSchemaType&&(X[Y]==="$"||OQ(X[Y])))return W.$embeddedSchemaType;if(W.schema){let Q;if(X[Y]==="$"||OQ(X[Y])){if(Y+1===X.length)return W.$embeddedSchemaType;if(Q=Z(X.slice(Y+1),W.schema),Q)Q.$parentSchemaDocArray=Q.$parentSchemaDocArray||(W.schema.$isSingleNested?null:W);return Q}if(Q=Z(X.slice(Y),W.schema),Q)Q.$parentSchemaDocArray=Q.$parentSchemaDocArray||(W.schema.$isSingleNested?null:W);return Q}}}else if(W.$isSchemaMap){if(Y>=X.length)return W;if(Y+1>=X.length)return W.$__schemaType;if(W.$__schemaType instanceof b5.Mixed)return W.$__schemaType;if(W.$__schemaType.schema!=null)return Z(X.slice(Y+1),W.$__schemaType.schema)}return W.$fullPath=$.join("."),W}}let D=A.split(".");for(let X=0;X<D.length;++X){if(D[X]==="$"||OQ(D[X]))D[X]="0";if(Bh1.test(D[X]))D[X]="$"}return Z(D,F)};/*!
 * ignore
 */G1.prototype._getPathType=function(A){let F=this;if(F.path(A))return"real";function $(Z,D){let X=Z.length+1,J,Y;while(X--)if(Y=Z.slice(0,X).join("."),J=D.path(Y),J){if(J.caster){if(J.caster instanceof b5.Mixed)return{schema:J,pathType:"mixed"};if(X!==Z.length&&J.schema){if(Z[X]==="$"||OQ(Z[X])){if(X===Z.length-1)return{schema:J,pathType:"nested"};return $(Z.slice(X+1),J.schema)}return $(Z.slice(X),J.schema)}return{schema:J,pathType:J.$isSingleNested?"nested":"array"}}return{schema:J,pathType:"real"}}else if(X===Z.length&&D.nested[Y])return{schema:D,pathType:"nested"};return{schema:J||D,pathType:"undefined"}}return $(A.split("."),F)};G1.prototype._transformDuplicateKeyError=function A(F){if(!this._duplicateKeyErrorMessagesByPath)return F;if(F.code!==11000&&F.code!==11001)return F;if(F.keyPattern!=null){let B=F.keyPattern,$=Object.keys(B);if($.length!==1)return F;let Z=$[0];if(!this._duplicateKeyErrorMessagesByPath.hasOwnProperty(Z))return F;return new O3(this._duplicateKeyErrorMessagesByPath[Z],{cause:F})}return F};/*!
 * ignore
 */function OQ(A){return A.startsWith("$[")&&A.endsWith("]")}G1.prototype._preCompile=function A(){this.plugin(sv1,{deduplicate:!0})};G1.prototype.toJSONSchema=function A(F){let B=F?.useBsonType??!1,$=B?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let Z of Object.keys(this.paths)){let D=this.paths[Z];if(D._presplitPath.indexOf("$*")!==-1)continue;let X=D._presplitPath.length>1,J=$;if(X)for(let G=0;G<D._presplitPath.length-1;++G){let Q=D._presplitPath[G];if(J.properties[Q]==null)J.properties[Q]=B?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};J=J.properties[Q]}let Y=D._presplitPath[D._presplitPath.length-1],W=!1;if(Z==="_id"){if(!J.required)J.required=[];J.required.push("_id"),W=!0}else if(D.options.required&&typeof D.options.required!=="function"){if(!J.required)J.required=[];J.required.push(Y),W=!0}if(J.properties[Y]=D.toJSONSchema(F),D.options.enum)J.properties[Y].enum=W?D.options.enum:[...D.options.enum,null]}if($.required.length===0)delete $.required;return $};/*!
 * Module exports.
 */Lr.exports=BN=G1;G1.Types=b5=rD();/*!
 * ignore
 */BN.ObjectId=b5.ObjectId});var ZN=C(($z0,wr)=>{/*!
 * Module dependencies.
 */var Jh1=r4();class $N extends Jh1{constructor(A,F,B,$){let Z=A.map((D)=>D.message).join(", ");if(Z.length>200)Z=Z.slice(0,200)+"...";super(`${$} failed with ${A.length} Mongoose validation errors: ${Z}`);this.validationErrors=A,this.results=F,this.rawResult=B,this.operation=$}}Object.defineProperty($N.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */wr.exports=$N});var Nr=C((Zz0,Vr)=>{/*!
 * Module dependencies.
 */var Yh1=t1();class DN extends Yh1{constructor(A,F){super(A);this.errors=F}}Object.defineProperty(DN.prototype,"name",{value:"SyncIndexesError"});Vr.exports=DN});var XN=C((Dz0,Mr)=>{Mr.exports=function A(F,B,$,Z){if(F[Z])return;if(F[Z]=!0,!$||!$.skipTopLevel){let Y=null;for(let W of B){let G=W[1]==null?null:W[1].tags;if(!Array.isArray(G)){F.plugin(W[0],W[1]);continue}if(Y=Y||new Set(F.options.pluginTags||[]),!G.find((Q)=>Y.has(Q)))continue;F.plugin(W[0],W[1])}}if($=Object.assign({},$),delete $.skipTopLevel,$.applyPluginsToChildSchemas!==!1)for(let Y of Object.keys(F.paths)){let W=F.paths[Y];if(W.schema!=null)A(W.schema,B,$,Z),W.caster.prototype.$__setSchema(W.schema)}let D=F.discriminators;if(D==null)return;let X=$.applyPluginsToDiscriminators,J=Object.keys(D);for(let Y of J){let W=D[Y];A(W,B,{skipTopLevel:!X},Z)}}});var kQ=C((Wh1,JN)=>{/*!
 * ignore
 */var Rr=null;Wh1.get=function(){return Rr};Wh1.set=function(A){Rr=A}});var YN=C((Xz0,Pr)=>{function zh1(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}Pr.exports=zh1});var Ir=C((Jz0,jr)=>{var qh1=t1();class WN extends qh1{constructor(A,F){super(A);this.errors=F}}Object.defineProperty(WN.prototype,"name",{value:"CreateCollectionsError"});jr.exports=WN});var GN=C((Yz0,Or)=>{var Tr=sB().modifiedPaths;Or.exports=function A(F){let B=Object.keys(F),$={},Z={};for(let D of B){if(D.startsWith("$")){Tr(F[D],"",$);continue}Z[D]=F[D]}return Tr(Z,"",$),$}});var QN=C((Wz0,Sr)=>{var Hh1=GN();Sr.exports=function A(F){if(F==null)return{};let B=Hh1(F);return Object.keys(B).reduce(($,Z)=>{let D=Z.match(/\$\[[^\]]+\]/g);if(D==null)return $;for(let X of D){let J=Z.indexOf(X);if(J!==Z.lastIndexOf(X))throw new Error(`Path '${Z}' contains the same array filter multiple times`);$[X.substring(2,X.length-1)]=Z.substring(0,J-1).replace(/\$\[[^\]]+\]/g,"0")}return $},{})}});var xr=C((Gz0,_r)=>{var Uh1=pD(),kr=f2(),Ch1=J7(),Kh1=QN();_r.exports=function A(F,B,$,Z,D){let X=Z.indexOf(".")===-1?[Z]:Z.split("."),J=null,Y="adhocOrUndefined";$=$||{},B=B||{};let W=D!=null&&Array.isArray(D.arrayFilters)?D.arrayFilters:[],G=Kh1(B),Q=0;for(let q=0;q<X.length;++q){let z=X.slice(Q,q+1).join("."),H=Uh1(z);if(J=F.path(H),J==null)continue;if(Y=F.pathType(H),(J.$isSingleNested||J.$isMongooseDocumentArrayElement)&&J.schema.discriminators!=null){let U=kr(J,"schema.options.discriminatorKey"),K=H+"."+U,E=K.replace(/\.\d+\./,"."),L=null;if(K in $)L=$[K];if(E in $)L=$[E];let V=H.replace(/\.\d+$/,"");if(J.$isMongooseDocumentArrayElement&&kr($[V],"$elemMatch."+U)!=null)L=$[V].$elemMatch[U];let M=z+"."+U;if(M in B)L=B[M];if(K in B)L=B[K];for(let P of Object.keys(G)){let T=G[P]+"."+U,N=P+"."+U;if(T===E){let y=W.find((S)=>S.hasOwnProperty(N));if(y!=null)L=y[N]}}if(L==null)continue;let O=Ch1(J.caster.discriminators,L),R=O&&O.schema;if(R==null)continue;let _=X.slice(q+1).join(".");if(J=R.path(_),F=R,Q=q+1,J!=null){Y=R._getPathType(_);break}}}return{type:Y,schematype:J}}});var fr=C((Qz0,br)=>{var Eh1=T5();br.exports=function A(F,B,$,Z,D,X,J){if(F==null||!F.options||!F.options.immutable)return!1;let Y=F.options.immutable;if(typeof Y==="function")Y=Y.call(J,J);if(!Y)return!1;if(X&&X.overwriteImmutable)return!1;if(B===!1)return!1;if(B==="throw")throw new Eh1(null,`Field ${D} is immutable and strict = 'throw'`);return delete $[Z],!0}});var yr=C((zz0,ur)=>{var Lh1=f2();ur.exports=function A(F,B,$){if(B==null)return;let Z=Object.keys(B);for(let D of Z){let X=D.startsWith("$");if(D==="$set"){let J=Object.keys(B[D]);for(let Y of J)gr(F,B[D],Y,B,$)}else if(!X)gr(F,B,D,B,$)}};function gr(A,F,B,$,Z){let D=A.path(B);if(D==null)return;let X=Lh1(D,"options.immutable",null);if(X==null)return;if(typeof X==="function")X=X.call(Z,Z);if(!X)return;$.$setOnInsert=$.$setOnInsert||{},$.$setOnInsert[B]=F[B],delete F[B]}});var qN=C((qz0,vr)=>{var zN=bA();vr.exports=function A(F,B,$){if(B.indexOf(".")===-1){if(zN.has(B))return;F[B]=$;return}let Z=B.split("."),D=Z.pop(),X=F;for(let J of Z){if(zN.has(J))continue;if(X[J]==null)X[J]={};X=X[J]}if(!zN.has(D))X[D]=$}});var LN=C((Hz0,nr)=>{var _Q=D4(),GX=t1(),hr=pV(),dr=T5(),wh1=uA(),CN=sD(),Vh1=iA(),Nh1=I4(),HN=J7(),UN=xr(),mr=fr(),Mh1=yr(),pr=vA().schemaMixedSymbol,Rh1=qN(),Q$=f1(),{internalToObjectOptions:Ph1}=t7(),KN=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);nr.exports=function A(F,B,$,Z,D){if(B==null)return;if($=$||{},Array.isArray(B)){let Q=B.length;for(let q=0;q<Q;++q){let z=Object.keys(B[q]);for(let H of z)B[q][H]=jh1(H,B[q][H])}return B}if(F!=null&&D!=null&&Q$.hasUserDefinedProperty(D,F.options.discriminatorKey)&&typeof D[F.options.discriminatorKey]!=="object"&&F.discriminators!=null){let Q=D[F.options.discriminatorKey],q=HN(Z.model.discriminators,Q);F=F.discriminators[Q]||q&&q.schema||F}else if(F!=null&&$.overwriteDiscriminatorKey&&Q$.hasUserDefinedProperty(B,F.options.discriminatorKey)&&F.discriminators!=null){let Q=B[F.options.discriminatorKey],q=HN(Z.model.discriminators,Q);F=F.discriminators[Q]||q&&q.schema||F}else if(F!=null&&$.overwriteDiscriminatorKey&&B.$set!=null&&Q$.hasUserDefinedProperty(B.$set,F.options.discriminatorKey)&&F.discriminators!=null){let Q=B.$set[F.options.discriminatorKey],q=HN(Z.model.discriminators,Q);F=F.discriminators[Q]||q&&q.schema||F}if($.upsert)Mh1(F,B,Z);let X=Object.keys(B),J=X.length,Y={},W,G=!1;D=D||{};while(J--){let Q=X[J];if(!KN.has(Q)){if(!Y.$set)if(B.$set)Y.$set=B.$set;else Y.$set={};if(Y.$set[Q]=B[Q],X.splice(J,1),!~X.indexOf("$set"))X.push("$set")}else if(Q==="$set"){if(!Y.$set)Y[Q]=B[Q]}else Y[Q]=B[Q]}J=X.length;while(J--){let Q=X[J];if(W=Y[Q],G=G||Q.startsWith("$"),W!=null&&W.$__)W=W.toObject(Ph1),Y[Q]=W;if(W&&typeof W==="object"&&!Buffer.isBuffer(W)&&KN.has(Q))ir(F,W,Q,$,Z,D);else{let q="Invalid atomic update value for "+Q+". Expected an object, received "+typeof W;throw new Error(q)}if(Q.startsWith("$")&&Q$.isEmptyObject(W))delete Y[Q]}if(Object.keys(Y).length===0&&$.upsert&&Object.keys(D).length>0)return{$setOnInsert:{...D}};return Y};/*!
 * ignore
 */function jh1(A,F){if(A==="$unset"){if(typeof F!=="string"&&(!Array.isArray(F)||F.find((B)=>typeof B!=="string")))throw new GX("Invalid $unset in pipeline, must be  a string or an array of strings");return F}if(A==="$project"){if(F==null||typeof F!=="object")throw new GX("Invalid $project in pipeline, must be an object");return F}if(A==="$addFields"||A==="$set"){if(F==null||typeof F!=="object")throw new GX("Invalid "+A+" in pipeline, must be an object");return F}else if(A==="$replaceRoot"||A==="$replaceWith"){if(F==null||typeof F!=="object")throw new GX("Invalid "+A+" in pipeline, must be an object");return F}throw new GX('Invalid update pipeline operator: "'+A+'"')}function ir(A,F,B,$,Z,D,X){let J=$.strict,Y=X?X+".":"",W=Object.keys(F),G=W.length,Q=!1,q,z,H,U=null,K=J!=null?J:A.options.strict;while(G--){if(z=W[G],H=F[z],B==="$pull"){if(q=A._getSchema(Y+z),q==null){let L=UN(A,F,D,Y+z,$);if(L.schematype!=null)q=L.schematype}if(q!=null&&q.schema!=null){F[z]=Vh1(q.schema,F[z],$,Z),Q=!0;continue}}let E=Y?Y+z:z;if(A.discriminatorMapping!=null&&E===A.options.discriminatorKey&&A.discriminatorMapping.value!==F[z]&&!$.overwriteDiscriminatorKey){if(K==="throw"){let L=new Error(`Can't modify discriminator key "`+E+'" on discriminator model');U=tA(L,Z,E,U);continue}else if(K){delete F[z];continue}}if(Nh1(H)==="Object"){if(q=A._getSchema(Y+z),q==null){let L=UN(A,F,D,Y+z,$);if(L.schematype!=null)q=L.schematype}if(B!=="$setOnInsert"&&mr(q,J,F,z,Y+z,$,Z))continue;if(q&&q.caster&&B in EN)if("$each"in H){Q=!0;try{F[z]={$each:G$(q,H.$each,B,z,Z,Y+z)}}catch(L){U=tA(L,Z,z,U)}if(H.$slice!=null)F[z].$slice=H.$slice|0;if(H.$sort)F[z].$sort=H.$sort;if(H.$position!=null)F[z].$position=CN(H.$position)}else{if(q!=null&&q.$isSingleNested){let L=J==null?q.schema.options.strict:J;try{F[z]=q.castForQuery(null,H,Z,{strict:L})}catch(V){U=tA(V,Z,z,U)}}else try{F[z]=G$(q,H,B,z,Z,Y+z)}catch(L){U=tA(L,Z,z,U)}if(F[z]===void 0){delete F[z];continue}Q=!0}else if(B==="$currentDate"||B in EN&&q){try{F[z]=G$(q,H,B,z,Z,Y+z)}catch(L){U=tA(L,Z,z,U)}if(F[z]===void 0){delete F[z];continue}Q=!0}else if(B==="$rename"){let L=new hr(`${Y}${z}.$rename`);try{F[z]=G$(L,H,B,z,Z,Y+z)}catch(V){U=tA(V,Z,z,U)}if(F[z]===void 0){delete F[z];continue}Q=!0}else{let L=Y+z,V=A._getPathType(L),M=J;if(V&&V.schema&&M==null)M=V.schema.options.strict;if(V.pathType==="undefined"){if(M==="throw")throw new dr(L);else if(M){delete F[z];continue}}Q|=ir(A,H,B,$,Z,D,Y+z)||Q$.isObject(H)&&Object.keys(H).length===0}}else{let L=z==="$each"||z==="$or"||z==="$and"||z==="$in"?X:Y+z;if(q=A._getSchema(L),B!=="$setOnInsert"&&mr(q,J,F,z,Y+z,$,Z))continue;let V=A._getPathType(L);if(q==null){let R=UN(A,F,D,L,$);if(R.schematype!=null)q=R.schematype,V=R.type}let M=J;if(V&&V.schema&&J==null)M=V.schema.options.strict;if(M&&!q&&!/real|nested/.test(V.pathType))if(M==="throw"&&A.virtuals[L]==null)throw new dr(Y+z);else delete F[z];else{if(B==="$rename"){if(F[z]==null)throw new _Q("String",F[z],`${Y}${z}.$rename`);let R=new hr(`${Y}${z}.$rename`);F[z]=R.castForQuery(null,F[z],Z);continue}try{if(Y.length===0||z.indexOf(".")===-1)F[z]=G$(q,H,B,z,Z,Y+z);else if(M!==!1||q!=null)Rh1(F,z,G$(q,H,B,z,Z,Y+z)),delete F[z]}catch(R){U=tA(R,Z,z,U)}if(Array.isArray(F[z])&&(B==="$addToSet"||B==="$push")&&z!=="$each"){if(q&&q.caster&&!q.caster.$isMongooseArray&&!q.caster[pr])F[z]={$each:F[z]}}if(F[z]===void 0){delete F[z];continue}Q=!0}}}if(U!=null)throw U;return Q}/*!
 * ignore
 */function tA(A,F,B,$){if(typeof F!=="object"||!F.options.multipleCastError)throw A;return $=$||new wh1,$.addError(B,A),$}var cr={$pop:1,$inc:1},Ih1={$unset:1},EN={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var lr={$set:1,$setOnInsert:1};function G$(A,F,B,$,Z,D){if(!A){if(B in cr)try{return CN(F)}catch(J){throw new _Q("number",F,D)}return F}if(A.caster&&B in EN&&(Q$.isObject(F)||Array.isArray(F))&&!lr[B]){let J=0,Y=A;while(Y.$isMongooseArray)++J,Y=Y.caster;let W=0,G=F;while(Array.isArray(G))++W,G=G[0];let Q=J-W;while(W<J)F=[F],++W;let q=A.applySetters(Array.isArray(F)?F:[F],Z);for(let z=0;z<Q;++z)q=q[0];return q}if(B in Ih1)return F;if(B in cr){if(F==null)throw new _Q("number",F,A.path);if(B==="$inc")return A.castForQuery(null,F,Z);try{return CN(F)}catch(J){throw new _Q("number",F,A.path)}}if(B==="$currentDate"){if(typeof F==="object")return{$type:F.$type};return Boolean(F)}if(KN.has($))return A.castForQuery($,F,Z);if(lr[B]){let J=F!=null&&A.$isMongooseArray&&A.$fullPath!=null&&!A.$fullPath.match(/\d+$/),Y=A[pr]!=null;if(J||Y)return A.applySetters(F,Z);return A.castForQuery(null,F,Z)}return A.castForQuery(null,F,Z)}});var wN=C((Uz0,sr)=>{var Th1=GN();sr.exports=function A(F,B,$){if(!$||!(B&&B.upsert))return;if(!Th1(F)[$])if(B.overwrite)F[$]=0;else{if(!F.$setOnInsert)F.$setOnInsert={};F.$setOnInsert[$]=0}}});var VN=C((Cz0,tr)=>{var ar=sB().modifiedPaths,Oh1=f2();tr.exports=function(A,F,B,$){$=$||{};let Z=$.setDefaultsOnInsert!=null?$.setDefaultsOnInsert:F.base.options.setDefaultsOnInsert;if(!$.upsert||Z===!1)return B;let D=Object.keys(B||{}),X={},J={},Y=D.length,W={},G=!1;for(let z=0;z<Y;++z)if(D[z].startsWith("$"))ar(B[D[z]],"",W),G=!0;if(!G)ar(B,"",W);let Q=Object.keys(A),q=Q.length;for(let z=0;z<q;++z){let H=Q[z],U=A[H];if(U&&typeof U==="object"){let K=Object.keys(U),E=K.length,L=!1;for(let V=0;V<E;++V)if(K[V].startsWith("$")){L=!0;break}if(L)continue}X[H]=!0,W[H]=!0}if($&&$.overwrite&&!G)return B;return F.eachPath(function(z,H){if(H.path==="_id"&&H.options.auto)return;let U=H.getDefault(null,!0);if(Sh1(W,z))return;if(typeof U==="undefined")return;if(H.splitPath().includes("$*"))return;if(B=B||{},B.$setOnInsert=B.$setOnInsert||{},Oh1(B,z)==null)B.$setOnInsert[z]=U;J[z]=U}),B};function Sh1(A,F){if(A[F])return!0;let B=F.split("."),$=B[0];for(let D=1;D<B.length;++D){if(A[$])return!0;$+="."+B[D]}let Z=Object.keys(A);if(Z.length){let D=F+".";for(let X of Z)if(X.slice(0,F.length+1)===D)return!0}return!1}});var NN=C((Kz0,a2)=>{var kh1=t1(),_h1=J7(),rr=tw(),or=rw(),QX=iA(),er=LN(),xh1=T2(),Ao=wN(),{inspect:bh1}=A1("util"),Fo=VN();a2.exports=function A(F,B,$){let Z=F.base.now();if(B.insertOne)return(D)=>a2.exports.castInsertOne(F,B.insertOne,$).then(()=>D(null),(X)=>D(X));else if(B.updateOne)return(D)=>{try{a2.exports.castUpdateOne(F,B.updateOne,$,Z),D(null)}catch(X){D(X)}};else if(B.updateMany)return(D)=>{try{a2.exports.castUpdateMany(F,B.updateMany,$,Z),D(null)}catch(X){D(X)}};else if(B.replaceOne)return(D)=>{a2.exports.castReplaceOne(F,B.replaceOne,$).then(()=>D(null),(X)=>D(X))};else if(B.deleteOne)return(D)=>{try{a2.exports.castDeleteOne(F,B.deleteOne),D(null)}catch(X){D(X)}};else if(B.deleteMany)return(D)=>{try{a2.exports.castDeleteMany(F,B.deleteMany),D(null)}catch(X){D(X)}};else return(D)=>{let X=new kh1(`Invalid op passed to \`bulkWrite()\`: ${bh1(B)}`);D(X,null)}};a2.exports.castInsertOne=async function A(F,B,$){let Z=z$(F,B.document),D=new Z(B.document);if(Z.schema.options.timestamps&&xQ(B,$))D.initializeTimestamps();if($.session!=null)D.$session($.session);let X=Z?.schema?.options?.versionKey;if(X&&D[X]==null)D[X]=0;if(B.document=D,$.skipValidation||B.skipValidation)return B;return await B.document.$validate(),B};a2.exports.castUpdateOne=function A(F,B,$,Z){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let D=z$(F,B.filter),X=D.schema,J=$.strict!=null?$.strict:D.schema.options.strict,Y=xh1(B.update);zX(X,B.filter);let W=xQ(B,$);if(D.schema.$timestamps!=null&&W){let q=D.schema.$timestamps.createdAt,z=D.schema.$timestamps.updatedAt;or(Z,q,z,Y,{})}if(W)rr(Z,Y,D.schema);let G=F.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert==null?G:B.setDefaultsOnInsert)!==!1)Fo(B.filter,D.schema,Y,{setDefaultsOnInsert:!0,upsert:B.upsert});return Ao(Y,B,D.schema.options.versionKey),B.filter=QX(D.schema,B.filter,{strict:J,upsert:B.upsert}),B.update=er(D.schema,Y,{strict:J,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey},D,B.filter),B};a2.exports.castUpdateMany=function A(F,B,$,Z){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let D=z$(F,B.filter),X=D.schema,J=$.strict!=null?$.strict:D.schema.options.strict,Y=F.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert==null?Y:B.setDefaultsOnInsert)!==!1)Fo(B.filter,D.schema,B.update,{setDefaultsOnInsert:!0,upsert:B.upsert});let G=xQ(B,$);if(D.schema.$timestamps!=null&&G){let Q=D.schema.$timestamps.createdAt,q=D.schema.$timestamps.updatedAt;or(Z,Q,q,B.update,{})}if(G)rr(Z,B.update,D.schema);zX(X,B.filter),Ao(B.update,B,D.schema.options.versionKey),B.filter=QX(D.schema,B.filter,{strict:J,upsert:B.upsert}),B.update=er(D.schema,B.update,{strict:J,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey},D,B.filter)};a2.exports.castReplaceOne=async function A(F,B,$){let Z=z$(F,B.filter),D=Z.schema,X=$.strict!=null?$.strict:Z.schema.options.strict;zX(D,B.filter),B.filter=QX(Z.schema,B.filter,{strict:X,upsert:B.upsert});let J=new Z(B.replacement,X,!0);if(Z.schema.options.timestamps&&xQ(B,$))J.initializeTimestamps();if($.session!=null)J.$session($.session);let Y=Z?.schema?.options?.versionKey;if(Y&&J[Y]==null)J[Y]=0;if(B.replacement=J,$.skipValidation||B.skipValidation){B.replacement=B.replacement.toBSON();return}await B.replacement.$validate(),B.replacement=B.replacement.toBSON()};a2.exports.castDeleteOne=function A(F,B){let $=z$(F,B.filter),Z=$.schema;zX(Z,B.filter),B.filter=QX($.schema,B.filter)};a2.exports.castDeleteMany=function A(F,B){let $=z$(F,B.filter),Z=$.schema;zX(Z,B.filter),B.filter=QX($.schema,B.filter)};a2.exports.cast={insertOne:a2.exports.castInsertOne,updateOne:a2.exports.castUpdateOne,updateMany:a2.exports.castUpdateMany,replaceOne:a2.exports.castReplaceOne,deleteOne:a2.exports.castDeleteOne,deleteMany:a2.exports.castDeleteMany};function zX(A,F){if(A==null)return;if(A.discriminatorMapping&&!A.discriminatorMapping.isRoot)F[A.discriminatorMapping.key]=A.discriminatorMapping.value}function z$(A,F){let B=A.schema.options.discriminatorKey;if(F!=null&&F.hasOwnProperty(B))A=_h1(A.discriminators,F[B])||A;return A}function xQ(A,F){let B=A.timestamps,$=F.timestamps;if(B!=null)return B;else if($!=null)return $;return!0}});var MN=C((Ez0,Bo)=>{Bo.exports=function A(F,B,$){return F.mongoose=F.mongoose||{},F.mongoose.validationErrors=B,F.mongoose.results=$,F}});var IN=C((Lz0,Xo)=>{/*!
 * Module dependencies.
 */var fh1=jL(),PN=A1("events").EventEmitter,gh1=cA(),t2=OD(),$o=ZN(),u2=r4(),uh1=cL(),yh1=Nr(),vh1=XN(),hh1=T2(),dh1=kQ(),mh1=f2(),ch1=YN(),Zo=B7(),jN=f1(),lh1=Ir(),bQ=NN(),{modelSymbol:fQ}=w1(),ph1=Gw(),RN=MN(),ih1=w1().arrayAtomicsSymbol,qX=w1().sessionNewDocuments,nh1=["MONGODB-X509"];function R1(A){if(this.base=A,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=t2,this._readyState=t2.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof A==="undefined"||!A.connections.length)this.id=0;else this.id=A.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(R1.prototype,PN.prototype);Object.defineProperty(R1.prototype,"readyState",{get:function(){if(this._readyState===t2.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&Date.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return t2.disconnected;return this._readyState},set:function(A){if(!(A in t2))throw new Error("Invalid connection state: "+A);if(this._readyState!==A){this._readyState=A;for(let F of this.otherDbs)F.readyState=A;if(t2.connected===A)this._hasOpened=!0;this.emit(t2[A])}}});R1.prototype.get=function A(F){if(this.config.hasOwnProperty(F))return this.config[F];return mh1(this.options,F)};R1.prototype.set=function A(F,B){if(this.config.hasOwnProperty(F))return this.config[F]=B,B;return this.options=this.options||{},this.options[F]=B,B};R1.prototype.collections;R1.prototype.name;R1.prototype.models;R1.prototype.id;Object.defineProperty(R1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(R1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(R1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(R1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(R1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});R1.prototype.db;R1.prototype.client;R1.prototype.config;R1.prototype.createCollection=async function A(F,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new u2("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(F,B)};R1.prototype.bulkWrite=async function A(F,B){await this._waitForConnect(),B=B||{};let $=B.ordered==null?!0:B.ordered,Z=this.base.transactionAsyncLocalStorage?.getStore();if((!B||!B.hasOwnProperty("session"))&&Z?.session!=null)B={...B,session:Z.session};let D=this.base.now(),X=null;if($){let J=[];for(let Y of F){if(typeof Y.model!=="string"&&!Y.model?.[fQ])throw new u2("Must specify model in Connection.prototype.bulkWrite() operations");let W=Y.model[fQ]?Y.model:this.model(Y.model);if(Y.name==null)throw new u2("Must specify operation name in Connection.prototype.bulkWrite()");if(!bQ.cast.hasOwnProperty(Y.name))throw new u2(`Unrecognized bulkWrite() operation name ${Y.name}`);await bQ.cast[Y.name](W,Y,B,D),J.push({...Y,namespace:W.namespace()})}X=await this.client.bulkWrite(J,B)}else{let J=[],Y=[],W=[],G=[],Q=[];for(let z=0;z<F.length;++z){let H=F[z];if(typeof H.model!=="string"&&!H.model?.[fQ]){let E=new u2("Must specify model in Connection.prototype.bulkWrite() operations");W.push({index:z,error:E}),Q[z]=E;continue}let U;try{U=H.model[fQ]?H.model:this.model(H.model)}catch(E){W.push({index:z,error:E});continue}if(H.name==null){let E=new u2("Must specify operation name in Connection.prototype.bulkWrite()");W.push({index:z,error:E}),Q[z]=E;continue}if(!bQ.cast.hasOwnProperty(H.name)){let E=new u2(`Unrecognized bulkWrite() operation name ${H.name}`);W.push({index:z,error:E}),Q[z]=E;continue}let K=null;try{K=bQ.cast[H.name](U,H,B,D)}catch(E){W.push({index:z,error:E}),Q[z]=E;continue}if(ph1(K))G.push(K.then(()=>{J.push({...H,namespace:U.namespace()}),Y.push(z)},(E)=>{W.push({index:z,error:E}),Q[z]=E}));else J.push({...H,namespace:U.namespace()}),Y.push(z)}if(G.length>0)await Promise.all(G);if(W=W.sort((z,H)=>z.index-H.index).map((z)=>z.error),J.length===0){if(B.throwOnValidationError&&W.length)throw new $o(W,Q,H,"bulkWrite");let H=new(this.base.driver.get()).BulkWriteResult(ch1(),!1);return RN(H,W,Q)}let q;[X,q]=await this.client.bulkWrite(J,B).then((z)=>[z,null]).catch((z)=>[null,z]);for(let z=0;z<Y.length;++z)Q[Y[z]]=null;if(q){if(W.length>0)RN(q,W,Q),q.mongoose=q.mongoose||{},q.mongoose.validationErrors=W}if(W.length>0)if(B.throwOnValidationError)throw new $o(W,Q,X,"bulkWrite");else RN(X,W,Q)}return X};R1.prototype.createCollections=async function A(F={}){let B={},$={},{continueOnError:Z}=F;delete F.continueOnError;for(let D of Object.values(this.models))try{B[D.modelName]=await D.createCollection({})}catch(X){if(!Z){$[D.modelName]=X;break}else B[D.modelName]=X}if(!Z&&Object.keys($).length){let D=Object.entries($).map(([J,Y])=>`${J}: ${Y.message}`).join(", ");throw new lh1(D,$)}return B};R1.prototype.withSession=async function A(F){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(F)};R1.prototype.startSession=async function A(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new u2("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(F)};R1.prototype.transaction=function A(F,B){return this.startSession().then(($)=>{return $[qX]=new Map,$.withTransaction(()=>sh1(F,$,this.base),B).then((Z)=>{return delete $[qX],Z}).catch((Z)=>{throw delete $[qX],Z}).finally(()=>{$.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function sh1(A,F,B){try{return B.transactionAsyncLocalStorage==null?await A(F):await new Promise((Z)=>{B.transactionAsyncLocalStorage.run({session:F},()=>Z(A(F)))})}catch($){throw ah1(F),$}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function ah1(A){for(let F of A[qX].keys()){let B=A[qX].get(F);if(B.hasOwnProperty("isNew"))F.$isNew=B.isNew;if(B.hasOwnProperty("versionKey"))F.set(F.schema.options.versionKey,B.versionKey);if(B.modifiedPaths.length>0&&F.$__.activePaths.states.modify==null)F.$__.activePaths.states.modify={};for(let $ of B.modifiedPaths){let Z=F.$__.activePaths.paths[$];if(Z!=null)delete F.$__.activePaths[Z][$];F.$__.activePaths.paths[$]="modify",F.$__.activePaths.states.modify[$]=!0}for(let $ of B.atomics.keys()){let Z=F.$__getValue($);if(Z==null)continue;Z[ih1]=B.atomics.get($)}}}R1.prototype.dropCollection=async function A(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new u2("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(F)};R1.prototype._waitForConnect=async function A(F){if((this.readyState===t2.connecting||this.readyState===t2.disconnected)&&this._shouldBufferCommands()){let B=this._getBufferTimeoutMS(),$=null,Z=!1,D={},X=new Promise((J)=>{D.fn=J,this._queue.push(D)});if(F)await X;else await Promise.race([X,new Promise((J)=>{$=setTimeout(()=>{Z=!0,J()},B)})]);if(Z){let J=this._queue.indexOf(D);if(J!==-1)this._queue.splice(J,1);let Y="Connection operation buffering timed out after "+B+"ms";throw new u2(Y)}else if($!=null)clearTimeout($)}};/*!
 * Get the default buffer timeout for this connection
 */R1.prototype._getBufferTimeoutMS=function A(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base!=null&&this.base.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};R1.prototype.listCollections=async function A(){return await this._waitForConnect(),await this.db.listCollections().toArray()};R1.prototype.listDatabases=async function A(){throw new u2("listDatabases() not implemented by driver")};R1.prototype.dropDatabase=async function A(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new u2("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let F of Object.values(this.models))delete F.$init;return this.db.dropDatabase()};/*!
 * ignore
 */R1.prototype._shouldBufferCommands=function A(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};R1.prototype.error=function A(F,B){if(B)return B(F),null;if(this.listeners("error").length>0)this.emit("error",F);return Promise.reject(F)};R1.prototype.onOpen=function(){this.readyState=t2.connected;for(let A of this._queue)A.fn.apply(A.ctx,A.args);this._queue=[];for(let A in this.collections)if(jN.object.hasOwnProperty(this.collections,A))this.collections[A].onOpen();this.emit("open")};R1.prototype.openUri=async function A(F,B){if(this.readyState===t2.connecting||this.readyState===t2.connected){if(this._connectionString===F)return this}this._closeCalled=!1;let $=!1;if(B&&"_fireAndForget"in B)$=B._fireAndForget,delete B._fireAndForget;try{th1.apply(arguments)}catch(Z){if($)throw Z;throw this.$initialConnection=Promise.reject(Z),Z}this.$initialConnection=this.createClient(F,B).then(()=>this).catch((Z)=>{if(this.readyState=t2.disconnected,this.listeners("error").length>0)Zo(()=>this.emit("error",Z));throw Z});for(let Z of Object.values(this.models))Z.init().catch(function D(){});if($)return this;try{await this.$initialConnection}catch(Z){throw Do(Z)}return this};R1.prototype.on=function A(F,B){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return PN.prototype.on.call(this,F,B)};R1.prototype.once=function A(F,B){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return PN.prototype.once.call(this,F,B)};/*!
 * ignore
 */function th1(A,F,B){if(typeof F==="function"&&B==null)throw new u2("Connection.prototype.openUri() no longer accepts a callback");else if(typeof B==="function")throw new u2("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function Do(A){if(A?.name==="MongoServerSelectionError"){let F=A;A=new uh1,A.assimilateError(F)}return A}R1.prototype.destroy=async function A(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new u2("Connection.prototype.destroy() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;return this._close(F,!0)};R1.prototype.close=async function A(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new u2("Connection.prototype.close() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let B of Object.values(this.models))delete B.$init;return this._close(F,!1)};R1.prototype._close=async function A(F,B){let $=this,Z=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=B,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=B;let D=this;switch(this.readyState){case t2.disconnected:if(B&&this.base.connections.indexOf(D)!==-1)this.base.connections.splice(this.base.connections.indexOf(D),1);if(!Z)await this.doClose(F),this.onClose(F);break;case t2.connected:if(this.readyState=t2.disconnecting,await this.doClose(F),B&&$.base.connections.indexOf(D)!==-1)this.base.connections.splice(this.base.connections.indexOf(D),1);this.onClose(F);break;case t2.connecting:return new Promise((X,J)=>{let Y=()=>{if(this.removeListener("open",Y),this.removeListener("error",Y),B)this.destroy(F).then(X,J);else this.close(F).then(X,J)};this.once("open",Y),this.once("error",Y)});case t2.disconnecting:return new Promise((X)=>{this.once("close",()=>{if(B&&this.base.connections.indexOf(D)!==-1)this.base.connections.splice(this.base.connections.indexOf(D),1);X()})})}return this};R1.prototype.doClose=function A(){throw new Error("Connection#doClose unimplemented by driver")};R1.prototype.onClose=function A(F){this.readyState=t2.disconnected;for(let $ in this.collections)if(jN.object.hasOwnProperty(this.collections,$))this.collections[$].onClose(F);this.emit("close",F);let B=typeof F==="object"&&F!==null?F.force:F;for(let $ of this.otherDbs)this._destroyCalled?$.destroy({force:B,skipCloseClient:!0}):$.close({force:B,skipCloseClient:!0})};R1.prototype.collection=function(A,F){let B={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};F=Object.assign({},B,F?hh1(F):{}),F.$wasForceClosed=this.$wasForceClosed;let $=this.base&&this.base.__driver&&this.base.__driver.Collection||dh1.get().Collection;if(!(A in this.collections))this.collections[A]=new $(A,this,F);return this.collections[A]};R1.prototype.plugin=function(A,F){return this.plugins.push([A,F]),this};R1.prototype.model=function A(F,B,$,Z){if(!(this instanceof R1))throw new u2("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let D;if(typeof F==="function")D=F,F=D.name;if(typeof B==="string")$=B,B=!1;if(jN.isObject(B)){if(!B.instanceOfSchema)B=new gh1(B);else if(!(B instanceof this.base.Schema))B=B._clone(this.base.Schema)}if(B&&!B.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let X={cache:!1,overwriteModels:this.base.options.overwriteModels},J=Object.assign(X,Z,{connection:this});if(this.models[F]&&!$&&J.overwriteModels!==!0){if(B&&B.instanceOfSchema&&B!==this.models[F].schema)throw new u2.OverwriteModelError(F);return this.models[F]}let Y;if(B&&B.instanceOfSchema){if(vh1(B,this.plugins,null,"$connectionPluginsApplied"),Y=this.base._model(D||F,B,$,J),!this.models[F])this.models[F]=Y;return Y.init().catch(function W(){}),Y}if(this.models[F]&&$)return Y=this.models[F],B=Y.prototype.schema,Y.__subclass(this,B,$);if(arguments.length===1){if(Y=this.models[F],!Y)throw new u2.MissingSchemaError(F);return Y}if(!Y)throw new u2.MissingSchemaError(F);if(this===Y.prototype.db&&(!$||$===Y.collection.name)){if(!this.models[F])this.models[F]=Y;return Y}return this.models[F]=Y.__subclass(this,B,$),this.models[F]};R1.prototype.deleteModel=function A(F){if(typeof F==="string"){let B=this.model(F);if(B==null)return this;let $=B.collection.name;delete this.models[F],delete this.collections[$],this.emit("deleteModel",B)}else if(F instanceof RegExp){let B=F,$=this.modelNames();for(let Z of $)if(B.test(Z))this.deleteModel(Z)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+F+'"');return this};R1.prototype.watch=function A(F,B){return new fh1((D)=>{Zo(()=>{if(this.readyState===t2.connecting)this.once("open",function(){let X=this.db.watch(F,B);D(null,X)});else{let X=this.db.watch(F,B);D(null,X)}})},F,B)};R1.prototype.asPromise=async function A(){try{return await this.$initialConnection,this}catch(F){throw Do(F)}};R1.prototype.modelNames=function A(){return Object.keys(this.models)};R1.prototype.shouldAuthenticate=function A(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};R1.prototype.authMechanismDoesNotRequirePassword=function A(){if(this.options&&this.options.auth)return nh1.indexOf(this.options.auth.authMechanism)>=0;return!0};R1.prototype.optionsProvideAuthenticationData=function A(F){return F&&F.user&&(F.pass||this.authMechanismDoesNotRequirePassword())};R1.prototype.getClient=function A(){return this.client};R1.prototype.setClient=function A(){throw new u2("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */R1.prototype.createClient=function A(){throw new u2("Connection#createClient not implemented by driver")};R1.prototype.syncIndexes=async function A(F={}){let B={},$={},{continueOnError:Z}=F;delete F.continueOnError;for(let D of Object.values(this.models))try{B[D.modelName]=await D.syncIndexes(F)}catch(X){if(!Z){$[D.modelName]=X;break}else B[D.modelName]=X}if(!Z&&Object.keys($).length){let D=Object.entries($).map(([J,Y])=>`${J}: ${Y.message}`).join(", ");throw new yh1(D,$)}return B};/*!
 * Module exports.
 */R1.STATES=t2;Xo.exports=R1});var TN=C((wz0,rh1)=>{rh1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.17.0",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.18.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@babel/core":"7.27.7","@babel/preset-env":"7.27.2","@mongodb-js/mongodb-downloader":"^0.4.2","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.1.0","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.0.12",mkdirp:"^3.0.1",mocha:"11.7.1",moment:"2.30.1","mongodb-memory-server":"10.1.4","mongodb-runner":"^5.8.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"21.0.0","stream-browserify":"3.0.0",tsd:"0.32.0",typescript:"5.8.3",uuid:"11.1.0",webpack:"5.99.9"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}},__npminstall_done:!0,_from:"mongoose@8.17.0",_resolved:"https://registry.npmmirror.com/mongoose/-/mongoose-8.17.0.tgz"}});var Yo=C((Vz0,Jo)=>{var oh1=T2(),eh1=r4();function Ad1(A,F){let B=F?F:{},$=B.readPreference?B.readPreference:Zd1(A),Z=oh1(B);return $&&$!=="primary"&&$!=="primaryPreferred"?Fd1($,Z):Z}function Fd1(A,F){if(Bd1(F)&&$d1(A))Xd1();else return Dd1(F)}function Bd1(A){let F=A.config&&A.config.autoIndex,{autoCreate:B,autoIndex:$}=A;return!!(F||B||$)}function $d1(A){return A==="secondary"||A==="secondaryPreferred"}function Zd1(A){let B=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(A);return B?B[1]:null}function Dd1(A){return A.config={autoIndex:!1},A.autoCreate=!1,A.autoIndex=!1,A}function Xd1(){throw new eh1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}Jo.exports=Ad1});var Wo=C((Jd1)=>{Jd1.setTimeout=setTimeout});var Ho=C((Mz0,qo)=>{/*!
 * Module dependencies.
 */var Go=IN(),rA=r4(),B9=OD(),Qo=kA(),Wd1=TN(),Gd1=Yo(),Qd1=Wo().setTimeout,zo=f1(),zd1=cA();function A8(){Go.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}A8.STATES=B9;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(A8.prototype,Go.prototype);A8.prototype.useDb=function(A,F){if(F=F||{},F.useCache&&this.relatedDbs[A])return this.relatedDbs[A];let B=new this.constructor;B.name=A,B.base=this.base,B.collections={},B.models={},B.replica=this.replica,B.config=Object.assign({},this.config,B.config),B.name=this.name,B.options=this.options,B._readyState=this._readyState,B._closeCalled=this._closeCalled,B._hasOpened=this._hasOpened,B._listening=!1,B._parent=this,B.host=this.host,B.port=this.port,B.user=this.user,B.pass=this.pass;let $=this;if(B.client=$.client,this.db&&this._readyState===B9.connected)Z();else this._queue.push({fn:Z});function Z(){B.client=$.client;let D={};if(F.hasOwnProperty("noListener"))D.noListener=F.noListener;B.db=$.client.db(A,D),B._lastHeartbeatAt=$._lastHeartbeatAt,B.onOpen()}if(B.name=A,F.noListener!==!0)this.otherDbs.push(B);if(B.otherDbs.push(this),F&&F.useCache)this.relatedDbs[B.name]=B,B.relatedDbs=this.relatedDbs;return B};A8.prototype.aggregate=function A(F,B){return new this.base.Aggregate(null,this).append(F).option(B??{})};A8.prototype.removeDb=function A(F){let B=this.otherDbs.filter(($)=>$.name===F);if(!B.length)throw new rA(`No connections to database "${F}" found`);for(let $ of B)$._closeCalled=!0,$._destroyCalled=!0,$._readyState=B9.disconnected,$.$wasForceClosed=!0;delete this.relatedDbs[F],this.otherDbs=this.otherDbs.filter(($)=>$.name!==F)};A8.prototype.doClose=async function A(F){if(this.client==null)return this;let B=!1;if(F!=null&&typeof F==="object")B=F.skipCloseClient,F=F.force;if(B)return this;return await this.client.close(F),await new Promise(($)=>Qd1($,1)),this};A8.prototype.listDatabases=async function A(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */A8.prototype.createClient=async function A(F,B){if(typeof F!=="string")throw new rA(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof F}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new rA("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===B9.connecting||this.readyState===B9.connected){if(this._connectionString!==F)throw new rA("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(B=Gd1(F,B),B){let J=B.config&&B.config.autoIndex!=null?B.config.autoIndex:B.autoIndex;if(J!=null)this.config.autoIndex=J!==!1,delete B.config,delete B.autoIndex;if("autoCreate"in B)this.config.autoCreate=!!B.autoCreate,delete B.autoCreate;if("sanitizeFilter"in B)this.config.sanitizeFilter=B.sanitizeFilter,delete B.sanitizeFilter;if("autoSearchIndex"in B)this.config.autoSearchIndex=B.autoSearchIndex,delete B.autoSearchIndex;if("bufferTimeoutMS"in B)this.config.bufferTimeoutMS=B.bufferTimeoutMS,delete B.bufferTimeoutMS;if(B.user||B.pass)B.auth=B.auth||{},B.auth.username=B.user,B.auth.password=B.pass,this.user=B.user,this.pass=B.pass;if(delete B.user,delete B.pass,B.bufferCommands!=null)this.config.bufferCommands=B.bufferCommands,delete B.bufferCommands}else B={};this._connectionOptions=B;let $=B.dbName;if($!=null)this.$dbName=$;if(delete B.dbName,!zo.hasUserDefinedProperty(B,"driverInfo"))B.driverInfo={name:"Mongoose",version:Wd1.version};let{schemaMap:Z,encryptedFieldsMap:D}=this._buildEncryptionSchemas();if((Object.keys(Z).length>0||Object.keys(D).length)&&!B.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(Object.keys(Z).length>0)B.autoEncryption.schemaMap=Z;if(Object.keys(D).length>0)B.autoEncryption.encryptedFieldsMap=D;this.readyState=B9.connecting,this._connectionString=F;let X;try{X=new Qo.MongoClient(F,B)}catch(J){throw this.readyState=B9.disconnected,J}this.client=X,X.setMaxListeners(0),await X.connect(),ON(this,X,B,$);for(let J of this.otherDbs)ON(J,X,{},J.name);return this};A8.prototype._buildEncryptionSchemas=function(){let A={},F={},B=Object.values(this.models).filter((D)=>D.schema._hasEncryptedFields());for(let D of B){let{schema:X,collection:{collectionName:J}}=D,Y=`${this.$dbName}.${J}`,W=X.encryptionType()==="csfle"?F:A;if(W[Y]??=new zd1({},{encryptionType:X.encryptionType()}),X.discriminatorMapping&&!X.discriminatorMapping.isRoot){let Q=X._baseSchema;X.eachPath((q)=>{if(Q.path(q))return;if(!W[Y]._hasEncryptedField(q))return;throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${q}`)})}W[Y].add(X)}let $=Object.fromEntries(Object.entries(F).map(([D,X])=>[D,X._buildSchemaMap()])),Z=Object.fromEntries(Object.entries(A).map(([D,X])=>[D,X._buildEncryptedFields()]));return{schemaMap:$,encryptedFieldsMap:Z}};/*!
 * ignore
 */A8.prototype.setClient=function A(F){if(!(F instanceof Qo.MongoClient))throw new rA("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==B9.disconnected)throw new rA("Cannot call `setClient()` on a connection that is already connected.");if(F.topology==null)throw new rA("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=F.s.url,ON(this,F,{},F.s.options.dbName);for(let B of Object.values(this.models))B.init().catch(function $(){});return this};/*!
 * ignore
 */function ON(A,F,B,$){let Z=$!=null?F.db($):F.db();A.db=Z,A.client=F,A.host=F&&F.s&&F.s.options&&F.s.options.hosts&&F.s.options.hosts[0]&&F.s.options.hosts[0].host||void 0,A.port=F&&F.s&&F.s.options&&F.s.options.hosts&&F.s.options.hosts[0]&&F.s.options.hosts[0].port||void 0,A.name=$!=null?$:Z.databaseName,A._closeCalled=F._closeCalled;let D=()=>{if(A.readyState!==B9.connected)A.readyState=B9.connected,A.emit("reconnect"),A.emit("reconnected"),A.onOpen()},X=F&&F.topology&&F.topology.description&&F.topology.description.type||"";if(X==="Single")F.on("serverDescriptionChanged",(J)=>{if(J.newDescription.type==="Unknown")A.readyState=B9.disconnected;else D()});else if(X.startsWith("ReplicaSet"))F.on("topologyDescriptionChanged",(J)=>{let Y=J.newDescription;if(A.readyState===B9.connected&&Y.type!=="ReplicaSetWithPrimary")A.readyState=B9.disconnected;else if(A.readyState===B9.disconnected&&Y.type==="ReplicaSetWithPrimary")D()});if(A._lastHeartbeatAt=null,F.on("serverHeartbeatSucceeded",()=>{A._lastHeartbeatAt=Date.now()}),B.monitorCommands)F.on("commandStarted",(J)=>A.emit("commandStarted",J)),F.on("commandFailed",(J)=>A.emit("commandFailed",J)),F.on("commandSucceeded",(J)=>A.emit("commandSucceeded",J));A.onOpen();for(let J in A.collections)if(zo.object.hasOwnProperty(A.collections,J))A.collections[J].onOpen()}/*!
 * Module exports.
 */qo.exports=A8});var Uo=C((qd1)=>{/*!
 * Module exports.
 */qd1.BulkWriteResult=nc();qd1.Collection=ql();qd1.Connection=Ho();qd1.ClientEncryption=kA().ClientEncryption});var Ko=C((Pz0,Co)=>{/*!
 * Valid mongoose options
 */var Ed1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);Co.exports=Ed1});var Lo=C((jz0,Eo)=>{/*!
 * Module dependencies.
 */var Ld1=t1();class SN extends Ld1{constructor(A){let F=A.map((B)=>B.message).join(", ");if(F.length>50)F=F.slice(0,50)+"...";super(`eachAsync() finished with ${A.length} errors: ${F}`);this.errors=A}}Object.defineProperty(SN.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */Eo.exports=SN});var _N=C((Iz0,Vo)=>{/*!
 * Module dependencies.
 */var wd1=Lo(),kN=B7();Vo.exports=async function A(F,B,$){let Z=$.parallel||1,D=$.batchSize,X=$.signal,J=$.continueOnError,Y=[],W=Vd1(),G=!1;return new Promise((z,H)=>{if(X!=null){if(X.aborted)return z(null);X.addEventListener("abort",()=>{return G=!0,z(null)},{once:!0})}if(D!=null){if(typeof D!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(D))throw new TypeError("batchSize must be an integer");else if(D<1)throw new TypeError("batchSize must be at least 1")}Q((U,K)=>{if(U!=null)return H(U);z(K)})});function Q(z){let H=0,U=0,K=null;for(let L=0;L<Z;++L)W(E());function E(){let L=[],V=!1;return M;function M(O){if(V||G)return O();else if(K)return O();F(function(R,_){if(K!=null)return O();if(R!=null)if(R.name==="MongoCursorExhaustedError")_=null;else if(J)Y.push(R);else return K=R,z(R),O();if(_==null){if(V=!0,H<=0){let N=J?wo(Y):K;z(N)}else if(D&&L.length)q(L,U++,T);return O()}if(++H,kN(()=>O()),D)L.push(_);if(D&&L.length!==D){kN(()=>W(M));return}let P=D?L:_;function T(N){if(D)H-=L.length,L=[];else--H;if(N!=null)if(J)Y.push(N);else return K=N,z(N);if((V||G)&&H<=0){let y=J?wo(Y):K;return z(y)}kN(()=>W(M))}q(P,U++,T)})}}}function q(z,H,U){let K;try{K=B(z,H)}catch(E){return U(E)}if(K&&typeof K.then==="function")K.then(function(){U(null)},function(E){U(E||new Error("`eachAsync()` promise rejected without error"))});else U(null)}};function Vd1(){let A=[],F=null,B=0;return function Z(D){if(F===null&&A.length===0)return F=B++,D($);A.push(D)};function $(){if(A.length!==0)F=B++,A.shift()($);else F=null}}function wo(A){if(A.length===0)return null;return new wd1(A)}});var Oo=C((Tz0,To)=>{/*!
 * Module dependencies.
 */var HX=t1(),Ro=A1("stream").Readable,Nd1=_N(),Po=yD(),Md1=fA(),xN=B7(),{once:Rd1}=A1("events"),jo=A1("util");function $9(A){Ro.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=A,this._closed=!1;let F=A.model;this._mongooseOptions={},this._transforms=[],this.model=F,this.options={},F.hooks.execPre("find",A,(B)=>{if(B!=null){if(B instanceof Md1.skipWrappedFunction){let $=B.args[0];if($!=null&&(!Array.isArray($)||$.length)){let Z=new HX('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+jo.inspect($)+'".');this._markError(Z),this.listeners("error").length>0&&this.emit("error",Z);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(B),this.listeners("error").length>0&&this.emit("error",B);return}if(Object.assign(this.options,A._optionsForExec()),this._transforms=this._transforms.concat(A._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(A._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(F.collection._shouldBufferCommands()&&F.collection.buffer)F.collection.queue.push([()=>No(A,this)]);else No(A,this)})}jo.inherits($9,Ro);/*!
 * ignore
 */function No(A,F){try{let B=A.model.collection.find(A._conditions,F.options);F.cursor=B,F.emit("cursor",B)}catch(B){F._markError(B),F.listeners("error").length>0&&F.emit("error",F._error)}}$9.prototype._read=function(){yQ(this,(A,F)=>{if(A)return this.emit("error",A);if(!F){this.push(null),this.cursor.close(function(B){if(B)return this.emit("error",B)});return}this.push(F)})};$9.prototype.getDriverCursor=async function A(){if(this.cursor)return this.cursor;return await Rd1(this,"cursor"),this.cursor};Object.defineProperty($9.prototype,"map",{value:function(A){return this._transforms.push(A),this},enumerable:!0,configurable:!0,writable:!0});$9.prototype._markError=function(A){return this._error=A,this};$9.prototype.close=async function A(){if(typeof arguments[0]==="function")throw new HX("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}};$9.prototype._destroy=function A(F,B){let $=null;if(!this.cursor)$=new Promise((Z)=>{this.once("cursor",Z)});else $=Promise.resolve();return $.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,B()}).catch((Z)=>{B(Z)}),this};$9.prototype.rewind=function(){return Io(this,()=>{this.cursor.rewind()}),this};$9.prototype.next=async function A(){if(typeof arguments[0]==="function")throw new HX("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new HX("Cannot call `next()` on a closed cursor");return new Promise((F,B)=>{yQ(this,function($,Z){if($)return B($);F(Z)})})};$9.prototype.eachAsync=function(A,F){if(typeof arguments[2]==="function")throw new HX("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof F==="function")F={};return F=F||{},Nd1((B)=>yQ(this,B),A,F)};$9.prototype.options;$9.prototype.addCursorFlag=function(A,F){return Io(this,()=>{this.cursor.addCursorFlag(A,F)}),this};if(Symbol.asyncIterator!=null)$9.prototype[Symbol.asyncIterator]=function A(){return this._mongooseOptions._asyncIterator=!0,this};function yQ(A,F){let B=F;if(B=function($,Z){if($)return F($);if(Z===null)if(A._mongooseOptions._asyncIterator)return F(null,{done:!0});else return F(null,null);if(A._transforms.length&&Z!==null)Z=A._transforms.reduce(function(D,X){return X.call(A,D)},Z);if(A._mongooseOptions._asyncIterator)return F(null,{value:Z,done:!1});return F(null,Z)},A._error)return xN(function(){B(A._error)});if(A.skipped)return xN(()=>B(null,null));if(A.cursor){if(A.query._mongooseOptions.populate&&!A._pop)A._pop=Po.preparePopulationOptionsMQ(A.query,A.query._mongooseOptions),A._pop.__noPromise=!0;if(A.query._mongooseOptions.populate&&A.options._populateBatchSize>1)if(A._batchDocs&&A._batchDocs.length)return gQ(A,A._batchDocs.shift(),A._pop,B);else if(A._batchExhausted)return B(null,null);else{A._batchDocs=[],A.cursor.next().then(($)=>{uQ.call({ctx:A,callback:B},null,$)},($)=>{uQ.call({ctx:A,callback:B},$)});return}else return A.cursor.next().then(($)=>{if(!$){B(null,null);return}if(!A.query._mongooseOptions.populate)return gQ(A,$,null,B);gQ(A,$,A._pop,(Z,D)=>{if(Z!=null)return B(Z);A.query.model.populate(D,A._pop).then((X)=>B(null,X),(X)=>B(X))})},($)=>{B($)})}else A.once("error",F),A.once("cursor",function($){if(A.removeListener("error",F),$==null){if(A.skipped)return F(null,null);return}yQ(A,F)})}/*!
 * ignore
 */function uQ(A,F){if(A)return this.callback(A);if(!F)return this.ctx._batchExhausted=!0,Mo.call(this);if(this.ctx._batchDocs.push(F),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)xN(()=>this.ctx.cursor.next().then((B)=>{uQ.call(this,null,B)},(B)=>{uQ.call(this,B)}));else Mo.call(this)}/*!
 * ignore
 */function Mo(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{gQ(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(A)=>{this.callback(A)})}/*!
 * ignore
 */function gQ(A,F,B,$){if(A.query._mongooseOptions.lean)return A.model.hooks.execPost("find",A.query,[[F]],(Y)=>{if(Y!=null)return $(Y);$(null,F)});let{model:Z,_fields:D,_userProvidedFields:X,options:J}=A.query;Po.createModelAndInit(Z,F,D,X,J,B,(Y,W)=>{if(Y!=null)return $(Y);A.model.hooks.execPost("find",A.query,[[W]],(G)=>{if(G!=null)return $(G);$(null,W)})})}/*!
 * ignore
 */function Io(A,F){if(A.cursor)return F();A.once("cursor",function(B){if(B==null)return;F()})}To.exports=$9});var fN=C((Oz0,ko)=>{var bN=f1();function Pd1(A,F,B){So(A,F,B,"maxTimeMS")}function jd1(A,F,B){So(A,F,B,"allowDiskUse")}ko.exports={applyGlobalMaxTimeMS:Pd1,applyGlobalDiskUse:jd1};function So(A,F,B,$){if(bN.hasUserDefinedProperty(A,$))return;if(bN.hasUserDefinedProperty(F,$))A[$]=F[$];else if(bN.hasUserDefinedProperty(B,$))A[$]=B[$]}});var gN=C((Sz0,_o)=>{_o.exports=function A(F,B){if(B.readConcern!==void 0)return;if(B&&B.session&&B.session.transaction)return;let $=F.options?.readConcern?.level;if($!=null)B.readConcern={level:$}}});var uN=C((kz0,xo)=>{xo.exports=function A(F,B){if(B.writeConcern!=null)return;if(B&&B.session&&B.session.transaction)return;let $=F.options.writeConcern??{};if(Object.keys($).length!=0){if(B.writeConcern={},!("w"in B)&&$.w!=null)B.writeConcern.w=$.w;if(!("j"in B)&&$.j!=null)B.writeConcern.j=$.j;if(!("wtimeout"in B)&&$.wtimeout!=null)B.writeConcern.wtimeout=$.wtimeout}else{if(!("w"in B)&&$.w!=null)B.w=$.w;if(!("j"in B)&&$.j!=null)B.j=$.j;if(!("wtimeout"in B)&&$.wtimeout!=null)B.wtimeout=$.wtimeout}}});var go=C((_z0,fo)=>{var bo=tD();fo.exports=function A(F,B,$){if(!Object.keys($).some(bo))return B.castForQuery(null,$,F);let D=Object.keys($),X=D.length;while(X--){let J=D[X],Y=$[J];if(J==="$not"){if(Y&&B&&!B.caster){let W=Object.keys(Y);if(W.length&&bo(W[0]))for(let G of Object.keys(Y))Y[G]=B.castForQuery(G,Y[G],F);else $[J]=B.castForQuery(J,Y,F);continue}}else $[J]=B.castForQuery(J,Y,F)}return $}});var yo=C((xz0,uo)=>{var Id1=/^\d+$/;uo.exports=function A(F,B,$){let Z=F.path(B);if(Z!=null)return Z;let D=B.split("."),X="",J=!1;for(let Y of D){if(J&&Id1.test(Y))continue;if(X=X.length===0?Y:X+"."+Y,Z=F.path(X),Z!=null&&Z.schema){if(F=Z.schema,!J&&Z.$isMongooseDocumentArray)J=!0;if($&&$[X])F=F.discriminators[$[X]]??F;X=""}}return Z}});var lo=C((bz0,co)=>{var Td1=go(),vo=pD(),ho=yo(),Od1=QN();co.exports=function A(F){let B=F.options.arrayFilters,$=F.getUpdate(),Z=F.schema,D=Od1($),X=Z.options.strict;if(F._mongooseOptions.strict!=null)X=F._mongooseOptions.strict;if(F.model&&F.model.base.options.strictQuery!=null)X=F.model.base.options.strictQuery;if(Z._userProvidedOptions.strictQuery!=null)X=Z._userProvidedOptions.strictQuery;if(F._mongooseOptions.strictQuery!=null)X=F._mongooseOptions.strictQuery;mo(B,Z,X,D,F)};function mo(A,F,B,$,Z){if(!Array.isArray(A))return;let D={};for(let X of A){if(X==null)throw new Error(`Got null array filter in ${A}`);let J=Object.keys(X).filter((H)=>X[H]!=null);if(J.length===0)continue;let Y=J[0];if(Y==="$and"||Y==="$or"){for(let H of J)mo(X[H],F,B,$,Z);continue}let W=Y.indexOf("."),G=W===-1?Y:Y.substring(0,W);if($[G]==null)continue;let Q=vo($[G]),q=ho(F,Q,D),z=q!=null?q.schema:null;if(z!=null&&z.discriminators!=null&&X[G+"."+z.options.discriminatorKey])z=z.discriminators[X[G+"."+z.options.discriminatorKey]]||z,D[Q]=X[G+"."+z.options.discriminatorKey];for(let H of J){if($[H]===null)continue;if(Object.keys($).length===0)continue;let U=H.indexOf("."),K=U===-1?null:H.substring(U),E;if(K==null||z==null)E=q;else K=vo(K),E=ho(z,K,D);if(E==null){if(!B)return;let L=K==null?Q+".0":Q+".0"+K;throw new Error(`Could not find path "${L}" in schema`)}if(typeof X[H]==="object")X[H]=Td1(Z,E,X[H]);else X[H]=E.castForQuery(null,X[H])}}}});var vQ=C((fz0,po)=>{var Sd1=aB(),kd1=yB();/*!
 * ignore
 */po.exports=function A(F){if(F==null)return!1;let B=Object.keys(F),$=B.length;if($===0)return!1;for(let Z=0;Z<$;++Z){let D=B[Z];if(D.startsWith("+"))continue;if(Sd1(F[D])&&!!F[D])if(kd1(F[D]))return A(F[D]);else return!!F[D]}return!1}});var no=C((gz0,io)=>{io.exports=function A(F,B){return F===B||B.startsWith(F+".")}});var ro=C((fd1)=>{/*!
 * Module dependencies.
 */var yN=["__proto__","constructor","prototype"],hQ=fd1.clone=function A(F,B){if(F===void 0||F===null)return F;if(Array.isArray(F))return fd1.cloneArray(F,B);if(F.constructor){if(/ObjectI[dD]$/.test(F.constructor.name))return typeof F.clone=="function"?F.clone():new F.constructor(F.id);if(F.constructor.name==="ReadPreference")return new F.constructor(F.mode,A(F.tags,B));if(F._bsontype=="Binary"&&F.buffer&&F.value)return typeof F.clone=="function"?F.clone():new F.constructor(F.value(!0),F.sub_type);if(F.constructor.name==="Date"||F.constructor.name==="Function")return new F.constructor(+F);if(F.constructor.name==="RegExp")return new RegExp(F);if(F.constructor.name==="Buffer")return Buffer.from(F)}if(xd1(F))return fd1.cloneObject(F,B);if(F.valueOf)return F.valueOf()};/*!
 * ignore
 */fd1.cloneObject=function A(F,B){let $=B&&B.minimize,Z={},D=Object.keys(F),X=D.length,J=!1,Y,W="",G=0;for(G=0;G<X;++G){if(W=D[G],yN.indexOf(W)!==-1)continue;if(Y=hQ(F[W],B),!$||typeof Y!=="undefined")J||(J=!0),Z[W]=Y}return $?J&&Z:Z};fd1.cloneArray=function A(F,B){let $=[],Z=F.length,D=0;for(;D<Z;D++)$.push(hQ(F[D],B));return $};fd1.merge=function A(F,B){let $=Object.keys(B);for(let Z of $){if(yN.indexOf(Z)!==-1)continue;if(typeof F[Z]==="undefined")F[Z]=B[Z];else if(fd1.isObject(B[Z]))A(F[Z],B[Z]);else F[Z]=B[Z]}};fd1.mergeClone=function A(F,B){let $=Object.keys(B);for(let Z of $){if(yN.indexOf(Z)!==-1)continue;if(typeof F[Z]==="undefined")F[Z]=hQ(B[Z]);else if(fd1.isObject(B[Z]))A(F[Z],B[Z]);else F[Z]=hQ(B[Z])}};fd1.readPref=function A(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F};fd1.readConcern=function A(F){if(typeof F==="string"){switch(F){case"l":F="local";break;case"a":F="available";break;case"m":F="majority";break;case"lz":F="linearizable";break;case"s":F="snapshot";break}F={level:F}}return F};var _d1=Object.prototype.toString;fd1.toString=function(A){return _d1.call(A)};var xd1=fd1.isObject=function(A){return fd1.toString(A)=="[object Object]"};fd1.keys=Object.keys;fd1.create=typeof Object.create=="function"?Object.create:bd1;function bd1(A){if(arguments.length>1)throw new Error("Adding properties is not supported");function F(){}return F.prototype=A,new F}fd1.inherits=function(A,F){A.prototype=fd1.create(F.prototype),A.prototype.constructor=A};fd1.isArgumentsObject=function(A){return Object.prototype.toString.call(A)==="[object Arguments]"}});var vN=C((vz0,oo)=>{function pd1(A){B.debug=B,B.default=B,B.coerce=Y,B.disable=X,B.enable=Z,B.enabled=J,B.humanize=qG(),B.destroy=W,Object.keys(A).forEach((G)=>{B[G]=A[G]}),B.names=[],B.skips=[],B.formatters={};function F(G){let Q=0;for(let q=0;q<G.length;q++)Q=(Q<<5)-Q+G.charCodeAt(q),Q|=0;return B.colors[Math.abs(Q)%B.colors.length]}B.selectColor=F;function B(G){let Q,q=null,z,H;function U(...K){if(!U.enabled)return;let E=U,L=Number(new Date),V=L-(Q||L);if(E.diff=V,E.prev=Q,E.curr=L,Q=L,K[0]=B.coerce(K[0]),typeof K[0]!=="string")K.unshift("%O");let M=0;K[0]=K[0].replace(/%([a-zA-Z%])/g,(R,_)=>{if(R==="%%")return"%";M++;let P=B.formatters[_];if(typeof P==="function"){let T=K[M];R=P.call(E,T),K.splice(M,1),M--}return R}),B.formatArgs.call(E,K),(E.log||B.log).apply(E,K)}if(U.namespace=G,U.useColors=B.useColors(),U.color=B.selectColor(G),U.extend=$,U.destroy=B.destroy,Object.defineProperty(U,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(q!==null)return q;if(z!==B.namespaces)z=B.namespaces,H=B.enabled(G);return H},set:(K)=>{q=K}}),typeof B.init==="function")B.init(U);return U}function $(G,Q){let q=B(this.namespace+(typeof Q==="undefined"?":":Q)+G);return q.log=this.log,q}function Z(G){B.save(G),B.namespaces=G,B.names=[],B.skips=[];let Q=(typeof G==="string"?G:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let q of Q)if(q[0]==="-")B.skips.push(q.slice(1));else B.names.push(q)}function D(G,Q){let q=0,z=0,H=-1,U=0;while(q<G.length)if(z<Q.length&&(Q[z]===G[q]||Q[z]==="*"))if(Q[z]==="*")H=z,U=q,z++;else q++,z++;else if(H!==-1)z=H+1,U++,q=U;else return!1;while(z<Q.length&&Q[z]==="*")z++;return z===Q.length}function X(){let G=[...B.names,...B.skips.map((Q)=>"-"+Q)].join(",");return B.enable(""),G}function J(G){for(let Q of B.skips)if(D(G,Q))return!1;for(let Q of B.names)if(D(G,Q))return!0;return!1}function Y(G){if(G instanceof Error)return G.stack||G.message;return G}function W(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return B.enable(B.load()),B}oo.exports=pd1});var Ae=C((eo,dQ)=>{eo.formatArgs=nd1;eo.save=sd1;eo.load=ad1;eo.useColors=id1;eo.storage=td1();eo.destroy=(()=>{let A=!1;return()=>{if(!A)A=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();eo.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function id1(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let A;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(A=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(A[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function nd1(A){if(A[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+A[0]+(this.useColors?"%c ":" ")+"+"+dQ.exports.humanize(this.diff),!this.useColors)return;let F="color: "+this.color;A.splice(1,0,F,"color: inherit");let B=0,$=0;A[0].replace(/%[a-zA-Z%]/g,(Z)=>{if(Z==="%%")return;if(B++,Z==="%c")$=B}),A.splice($,0,F)}eo.log=console.debug||console.log||(()=>{});function sd1(A){try{if(A)eo.storage.setItem("debug",A);else eo.storage.removeItem("debug")}catch(F){}}function ad1(){let A;try{A=eo.storage.getItem("debug")||eo.storage.getItem("DEBUG")}catch(F){}if(!A&&typeof process!=="undefined"&&"env"in process)A=process.env.DEBUG;return A}function td1(){try{return localStorage}catch(A){}}dQ.exports=vN()(eo);var{formatters:rd1}=dQ.exports;rd1.j=function(A){try{return JSON.stringify(A)}catch(F){return"[UnexpectedJSONParseError]: "+F.message}}});var Ze=C((Be,cQ)=>{var Dm1=A1("tty"),mQ=A1("util");Be.init=zm1;Be.log=Wm1;Be.formatArgs=Jm1;Be.save=Gm1;Be.load=Qm1;Be.useColors=Xm1;Be.destroy=mQ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Be.colors=[6,2,3,4,5,1];try{let A=(()=>{throw new Error("Cannot require module "+"supports-color");})();if(A&&(A.stderr||A).level>=2)Be.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(A){}Be.inspectOpts=Object.keys(process.env).filter((A)=>{return/^debug_/i.test(A)}).reduce((A,F)=>{let B=F.substring(6).toLowerCase().replace(/_([a-z])/g,(Z,D)=>{return D.toUpperCase()}),$=process.env[F];if(/^(yes|on|true|enabled)$/i.test($))$=!0;else if(/^(no|off|false|disabled)$/i.test($))$=!1;else if($==="null")$=null;else $=Number($);return A[B]=$,A},{});function Xm1(){return"colors"in Be.inspectOpts?Boolean(Be.inspectOpts.colors):Dm1.isatty(process.stderr.fd)}function Jm1(A){let{namespace:F,useColors:B}=this;if(B){let $=this.color,Z="\x1B[3"+($<8?$:"8;5;"+$),D=`  ${Z};1m${F} \x1B[0m`;A[0]=D+A[0].split(`
`).join(`
`+D),A.push(Z+"m+"+cQ.exports.humanize(this.diff)+"\x1B[0m")}else A[0]=Ym1()+F+" "+A[0]}function Ym1(){if(Be.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function Wm1(...A){return process.stderr.write(mQ.formatWithOptions(Be.inspectOpts,...A)+`
`)}function Gm1(A){if(A)process.env.DEBUG=A;else delete process.env.DEBUG}function Qm1(){return process.env.DEBUG}function zm1(A){A.inspectOpts={};let F=Object.keys(Be.inspectOpts);for(let B=0;B<F.length;B++)A.inspectOpts[F[B]]=Be.inspectOpts[F[B]]}cQ.exports=vN()(Be);var{formatters:Fe}=cQ.exports;Fe.o=function(A){return this.inspectOpts.colors=this.useColors,mQ.inspect(A,this.inspectOpts).split(`
`).map((F)=>F.trim()).join(" ")};Fe.O=function(A){return this.inspectOpts.colors=this.useColors,mQ.inspect(A,this.inspectOpts)}});var De=C((mz0,hN)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)hN.exports=Ae();else hN.exports=Ze()});var Je=C((Xe)=>{var y2=Xe;y2.distinct=function(A){if(A._fields&&Object.keys(A._fields).length>0)return"field selection and slice";let F=Object.keys(y2.distinct),B;return F.every(function($){if(A.options[$])return B=$,!1;return!0}),B};y2.distinct.select=y2.distinct.slice=y2.distinct.sort=y2.distinct.limit=y2.distinct.skip=y2.distinct.batchSize=y2.distinct.hint=y2.distinct.tailable=!0;y2.findOneAndUpdate=y2.findOneAndRemove=function(A){let F=Object.keys(y2.findOneAndUpdate),B;return F.every(function($){if(A.options[$])return B=$,!1;return!0}),B};y2.findOneAndUpdate.limit=y2.findOneAndUpdate.skip=y2.findOneAndUpdate.batchSize=y2.findOneAndUpdate.tailable=!0;y2.count=function(A){if(A._fields&&Object.keys(A._fields).length>0)return"field selection and slice";let F=Object.keys(y2.count),B;return F.every(function($){if(A.options[$])return B=$,!1;return!0}),B};y2.count.slice=y2.count.batchSize=y2.count.tailable=!0});var mN=C((wm1,Ye)=>{wm1.isNode=typeof process!="undefined"&&typeof Ye=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;wm1.isMongo=!wm1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";wm1.isBrowser=!wm1.isNode&&!wm1.isMongo&&typeof window!="undefined";wm1.type=wm1.isNode?"node":wm1.isMongo?"mongo":wm1.isBrowser?"browser":"unknown"});var CX=C((Ge,Qe)=>{var cN=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function lN(){}for(let A=0,F=cN.length;A<F;++A){let B=cN[A];lN.prototype[B]=Nm1(B)}Qe.exports=Ge=lN;lN.methods=cN;function Nm1(A){return function(){throw new Error("collection."+A+" not implemented")}}});var Ue=C((qe,He)=>{var Mm1=CX();class ze extends Mm1{constructor(A){super();this.collection=A,this.collectionName=A.collectionName}async find(A,F){return this.collection.find(A,F).toArray()}async findOne(A,F){return this.collection.findOne(A,F)}async count(A,F){return this.collection.count(A,F)}async distinct(A,F,B){return this.collection.distinct(A,F,B)}async updateMany(A,F,B){return this.collection.updateMany(A,F,B)}async updateOne(A,F,B){return this.collection.updateOne(A,F,B)}async replaceOne(A,F,B){return this.collection.replaceOne(A,F,B)}async deleteOne(A,F){return this.collection.deleteOne(A,F)}async deleteMany(A,F){return this.collection.deleteMany(A,F)}async findOneAndDelete(A,F){return this.collection.findOneAndDelete(A,F)}async findOneAndUpdate(A,F,B){return this.collection.findOneAndUpdate(A,F,B)}findCursor(A,F){return this.collection.find(A,F)}}He.exports=qe=ze});var Ke=C((lz0,Ce)=>{var pN=mN();if(pN.type=="unknown")throw new Error("Unknown environment");Ce.exports=pN.isNode?Ue():pN.isMongo?CX():CX()});var aN=C((Le,we)=>{var Rm1=A1("assert"),Pm1=A1("util"),R0=ro(),S3=De()("mquery");function o(A,F){if(!(this instanceof o))return new o(A,F);let B=this.constructor.prototype;if(this.op=B.op||void 0,this.options=Object.assign({},B.options),this._conditions=B._conditions?R0.clone(B._conditions):{},this._fields=B._fields?R0.clone(B._fields):void 0,this._updateDoc=B._updateDoc?R0.clone(B._updateDoc):void 0,this._path=B._path||void 0,this._distinctDoc=B._distinctDoc||void 0,this._collection=B._collection||void 0,this._traceFunction=B._traceFunction||void 0,F)this.setOptions(F);if(A)this.find(A)}var eA="$geoWithin";Object.defineProperty(o,"use$geoWithin",{get:function(){return eA=="$geoWithin"},set:function(A){if(A===!0)eA="$geoWithin";else eA="$within"}});o.prototype.toConstructor=function A(){function F($,Z){if(!(this instanceof F))return new F($,Z);o.call(this,$,Z)}R0.inherits(F,o);let B=F.prototype;return B.options={},B.setOptions(this.options),B.op=this.op,B._conditions=R0.clone(this._conditions),B._fields=R0.clone(this._fields),B._updateDoc=R0.clone(this._updateDoc),B._path=this._path,B._distinctDoc=this._distinctDoc,B._collection=this._collection,B._traceFunction=this._traceFunction,F};o.prototype.setOptions=function(A){if(!(A&&R0.isObject(A)))return this;let F=R0.keys(A),B;for(let $=0;$<F.length;++$)if(B=F[$],typeof this[B]=="function"){let Z=Array.isArray(A[B])?A[B]:[A[B]];this[B].apply(this,Z)}else this.options[B]=A[B];return this};o.prototype.collection=function A(F){return this._collection=new o.Collection(F),this};o.prototype.collation=function(A){return this.options.collation=A,this};o.prototype.$where=function(A){return this._conditions.$where=A,this};o.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let A=typeof arguments[0];if(A=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(A=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};o.prototype.equals=function A(F){this._ensurePath("equals");let B=this._path;return this._conditions[B]=F,this};o.prototype.eq=function A(F){this._ensurePath("eq");let B=this._path;return this._conditions[B]=F,this};o.prototype.or=function A(F){let B=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};o.prototype.nor=function A(F){let B=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};o.prototype.and=function A(F){let B=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(A){o.prototype[A]=function(){let F,B;if(arguments.length===1)this._ensurePath(A),B=arguments[0],F=this._path;else B=arguments[1],F=arguments[0];let $=this._conditions[F]===null||typeof this._conditions[F]==="object"?this._conditions[F]:this._conditions[F]={};return $["$"+A]=B,this}});o.prototype.mod=function(){let A,F;if(arguments.length===1)this._ensurePath("mod"),A=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),A=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)A=[arguments[1],arguments[2]],F=arguments[0];else A=arguments[1],F=arguments[0];let B=this._conditions[F]||(this._conditions[F]={});return B.$mod=A,this};o.prototype.exists=function(){let A,F;if(arguments.length===0)this._ensurePath("exists"),A=this._path,F=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),A=this._path,F=arguments[0];else A=arguments[0],F=!0;else if(arguments.length===2)A=arguments[0],F=arguments[1];let B=this._conditions[A]||(this._conditions[A]={});return B.$exists=F,this};o.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let A,F,B;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),F=this._path,A=arguments[0];else if(R0.isObject(arguments[0]))this._ensurePath("elemMatch"),F=this._path,B=arguments[0];else if(typeof arguments[1]==="function")F=arguments[0],A=arguments[1];else if(arguments[1]&&R0.isObject(arguments[1]))F=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(A)B=new o,A(B),B=B._conditions;let $=this._conditions[F]||(this._conditions[F]={});return $.$elemMatch=B,this};o.prototype.within=function A(){if(this._ensurePath("within"),this._geoComparison=eA,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let F=arguments[0];if(!F)throw new TypeError("Invalid argument");if(F.center)return this.circle(F);if(F.box)return this.box.apply(this,F.box);if(F.polygon)return this.polygon.apply(this,F.polygon);if(F.type&&F.coordinates)return this.geometry(F);throw new TypeError("Invalid argument")};o.prototype.box=function(){let A,F;if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),A=this._path,F=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let B=this._conditions[A]||(this._conditions[A]={});return B[this._geoComparison||eA]={$box:F},this};o.prototype.polygon=function(){let A,F;if(typeof arguments[0]=="string")A=Array.from(arguments),F=A.shift();else this._ensurePath("polygon"),F=this._path,A=Array.from(arguments);let B=this._conditions[F]||(this._conditions[F]={});return B[this._geoComparison||eA]={$polygon:A},this};o.prototype.circle=function(){let A,F;if(arguments.length===1)this._ensurePath("circle"),A=this._path,F=arguments[0];else if(arguments.length===2)A=arguments[0],F=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in F)&&F.center))throw new Error("center and radius are required");let B=this._conditions[A]||(this._conditions[A]={}),$=F.spherical?"$centerSphere":"$center",Z=this._geoComparison||eA;if(B[Z]={},B[Z][$]=[F.center,F.radius],"unique"in F)B[Z].$uniqueDocs=!!F.unique;return this};o.prototype.near=function A(){let F,B;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),F=this._path,B=arguments[0];else if(arguments.length===2)F=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(!B.center)throw new Error("center is required");let $=this._conditions[F]||(this._conditions[F]={}),Z=B.spherical?"$nearSphere":"$near";if(Array.isArray(B.center)){$[Z]=B.center;let D="maxDistance"in B?B.maxDistance:null;if(D!=null)$.$maxDistance=D;if(B.minDistance!=null)$.$minDistance=B.minDistance}else{if(B.center.type!="Point"||!Array.isArray(B.center.coordinates))throw new Error(Pm1.format("Invalid GeoJSON specified for %s",Z));if($[Z]={$geometry:B.center},"maxDistance"in B)$[Z].$maxDistance=B.maxDistance;if("minDistance"in B)$[Z].$minDistance=B.minDistance}return this};o.prototype.intersects=function A(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let F=arguments[0];if(F!=null&&F.type&&F.coordinates)return this.geometry(F);throw new TypeError("Invalid argument")};o.prototype.geometry=function A(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let F,B;if(arguments.length===1)this._ensurePath("geometry"),B=this._path,F=arguments[0];else throw new TypeError("Invalid argument");if(!(F.type&&Array.isArray(F.coordinates)))throw new TypeError("Invalid argument");let $=this._conditions[B]||(this._conditions[B]={});return $[this._geoComparison]={$geometry:F},this};o.prototype.select=function A(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),$=typeof F,Z,D;if(($=="string"||R0.isArgumentsObject(F))&&typeof F.length=="number"||Array.isArray(F)){if($=="string")F=F.split(/\s+/);for(Z=0,D=F.length;Z<D;++Z){let X=F[Z];if(!X)continue;let J=X[0]=="-"?0:1;if(J===0)X=X.substring(1);B[X]=J}return this}if(R0.isObject(F)){let X=R0.keys(F);for(Z=0;Z<X.length;++Z)B[X[Z]]=F[X[Z]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};o.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let A,F;if(arguments.length===1){let $=arguments[0];if(typeof $==="object"&&!Array.isArray($)){let Z=Object.keys($),D=Z.length;for(let X=0;X<D;++X)this.slice(Z[X],$[Z[X]]);return this}this._ensurePath("slice"),A=this._path,F=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),A=this._path,F=[arguments[0],arguments[1]];else A=arguments[0],F=arguments[1];else if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];let B=this._fields||(this._fields={});return B[A]={$slice:F},this};o.prototype.sort=function(A){if(!A)return this;let F,B,$;this._validate("sort");let Z=typeof A;if(Array.isArray(A)){B=A.length;for(F=0;F<A.length;++F){if(!Array.isArray(A[F]))throw new Error("Invalid sort() argument, must be array of arrays");jm1(this.options,A[F][0],A[F][1])}return this}if(arguments.length===1&&Z=="string"){A=A.split(/\s+/),B=A.length;for(F=0;F<B;++F){if($=A[F],!$)continue;let D=$[0]=="-"?-1:1;if(D===-1)$=$.substring(1);Ee(this.options,$,D)}return this}if(R0.isObject(A)){let D=R0.keys(A);for(F=0;F<D.length;++F)$=D[F],Ee(this.options,$,A[$]);return this}if(typeof Map!=="undefined"&&A instanceof Map)return Im1(this.options,A),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var iN={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function Ee(A,F,B){if(Array.isArray(A.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let $;if(B&&B.$meta){$=A.sort||(A.sort={}),$[F]={$meta:B.$meta};return}$=A.sort||(A.sort={});let Z=String(B||1).toLowerCase();if(Z=iN[Z],!Z)throw new TypeError("Invalid sort value: { "+F+": "+B+" }");$[F]=Z}function jm1(A,F,B){if(A.sort=A.sort||[],!Array.isArray(A.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let $=String(B||1).toLowerCase();if($=iN[$],!$)throw new TypeError("Invalid sort value: [ "+F+", "+B+" ]");A.sort.push([F,$])}function Im1(A,F){if(A.sort=A.sort||new Map,!(A.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");F.forEach(function(B,$){let Z=String(B||1).toLowerCase();if(Z=iN[Z],!Z)throw new TypeError("Invalid sort value: < "+$+": "+B+" >");A.sort.set($,Z)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(A){o.prototype[A]=function(F){return this._validate(A),this.options[A]=F,this}});o.prototype.maxTime=o.prototype.maxTimeMS=function(A){return this._validate("maxTime"),this.options.maxTimeMS=A,this};o.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let A=arguments[0];if(R0.isObject(A)){let F=this.options.hint||(this.options.hint={});for(let B in A)F[B]=A[B];return this}if(typeof A==="string")return this.options.hint=A,this;throw new TypeError("Invalid hint. "+A)};o.prototype.j=function A(F){return this.options.j=F,this};o.prototype.slaveOk=function(A){return this.options.slaveOk=arguments.length?!!A:!0,this};o.prototype.read=o.prototype.setReadPreference=function(A){if(arguments.length>1&&!o.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),o.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=R0.readPref(A),this};o.prototype.readConcern=o.prototype.r=function(A){return this.options.readConcern=R0.readConcern(A),this};o.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};o.prototype.writeConcern=o.prototype.w=function A(F){if(typeof F==="object"){if(typeof F.j!=="undefined")this.options.j=F.j;if(typeof F.w!=="undefined")this.options.w=F.w;if(typeof F.wtimeout!=="undefined")this.options.wtimeout=F.wtimeout}else this.options.w=F==="m"?"majority":F;return this};o.prototype.wtimeout=o.prototype.wTimeout=function A(F){return this.options.wtimeout=F,this};o.prototype.merge=function(A){if(!A)return this;if(!o.canMerge(A))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(A instanceof o){if(A._conditions)R0.merge(this._conditions,A._conditions);if(A._fields)this._fields||(this._fields={}),R0.merge(this._fields,A._fields);if(A.options)this.options||(this.options={}),R0.merge(this.options,A.options);if(A._updateDoc)this._updateDoc||(this._updateDoc={}),R0.mergeClone(this._updateDoc,A._updateDoc);if(A._distinctDoc)this._distinctDoc=A._distinctDoc;return this}return R0.merge(this._conditions,A),this};o.prototype.find=function(A){if(this.op="find",o.canMerge(A))this.merge(A);return this};o.prototype._find=async function A(){let F=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return S3("_find",this._collection.collectionName,F,B),this._collection.find(F,B)};o.prototype.cursor=function A(F){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(F);let B=this._conditions,$=this._optionsForExec();if(this.$useProjection)$.projection=this._fieldsForExec();else $.fields=this._fieldsForExec();return S3("findCursor",this._collection.collectionName,B,$),this._collection.findCursor(B,$)};o.prototype.findOne=function(A){if(this.op="findOne",o.canMerge(A))this.merge(A);return this};o.prototype._findOne=async function A(){let F=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return S3("findOne",this._collection.collectionName,F,B),this._collection.findOne(F,B)};o.prototype.count=function(A){if(this.op="count",this._validate(),o.canMerge(A))this.merge(A);return this};o.prototype._count=async function A(){let F=this._conditions,B=this._optionsForExec();return S3("count",this._collection.collectionName,F,B),this._collection.count(F,B)};o.prototype.distinct=function(A,F){if(this.op="distinct",this._validate(),!F&&typeof A==="string")F=A,A=void 0;if(typeof F=="string")this._distinctDoc=F;if(o.canMerge(A))this.merge(A);return this};o.prototype._distinct=async function A(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let F=this._conditions,B=this._optionsForExec();return S3("distinct",this._collection.collectionName,F,B),this._collection.distinct(this._distinctDoc,F,B)};o.prototype.updateMany=function A(F,B,$){if(arguments.length===1)B=F,F=$=void 0;return nN(this,"updateMany",F,B,$)};o.prototype._updateMany=async function(){return sN(this,"updateMany")};o.prototype.updateOne=function A(F,B,$){if(arguments.length===1)B=F,F=$=void 0;return nN(this,"updateOne",F,B,$)};o.prototype._updateOne=async function(){return sN(this,"updateOne")};o.prototype.replaceOne=function A(F,B,$){if(arguments.length===1)B=F,F=$=void 0;return this.setOptions({overwrite:!0}),nN(this,"replaceOne",F,B,$)};o.prototype._replaceOne=async function(){return sN(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function nN(A,F,B,$,Z){if(A.op=F,o.canMerge(B))A.merge(B);if($)A._mergeUpdate($);if(R0.isObject(Z))A.setOptions(Z);return A}async function sN(A,F){let B=A._optionsForExec(),$=A._conditions,Z=A._updateForExec();return S3("update",A._collection.collectionName,$,Z,B),A._collection[F]($,Z,B)}o.prototype.deleteOne=function(A){if(this.op="deleteOne",o.canMerge(A))this.merge(A);return this};o.prototype._deleteOne=async function(){let A=this._optionsForExec();delete A.justOne;let F=this._conditions;return S3("deleteOne",this._collection.collectionName,F,A),this._collection.deleteOne(F,A)};o.prototype.deleteMany=function(A){if(this.op="deleteMany",o.canMerge(A))this.merge(A);return this};o.prototype._deleteMany=async function(){let A=this._optionsForExec();delete A.justOne;let F=this._conditions;return S3("deleteOne",this._collection.collectionName,F,A),this._collection.deleteMany(F,A)};o.prototype.findOneAndUpdate=function(A,F,B){if(this.op="findOneAndUpdate",this._validate(),arguments.length===1)F=A,A=B=void 0;if(o.canMerge(A))this.merge(A);if(F)this._mergeUpdate(F);return B&&this.setOptions(B),this};o.prototype._findOneAndUpdate=async function(){let A=this._conditions,F=this._updateForExec(),B=this._optionsForExec();return this._collection.findOneAndUpdate(A,F,B)};o.prototype.findOneAndRemove=o.prototype.findOneAndDelete=function(A,F){if(this.op="findOneAndRemove",this._validate(),o.canMerge(A))this.merge(A);return F&&this.setOptions(F),this};o.prototype._findOneAndRemove=async function(){let A=this._optionsForExec(),F=this._conditions;return this._collection.findOneAndDelete(F,A)};o.prototype.setTraceFunction=function(A){return this._traceFunction=A,this};o.prototype.exec=async function A(F){if(typeof F==="string")this.op=F;Rm1.ok(this.op,"Missing query type: (find, etc)");let B="_"+this.op;if(typeof this[B]!=="function")throw new TypeError(`this[${B}] is not a function`);return this[B]()};o.prototype.then=async function(A,F){return this.exec().then(A,F)};o.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let A=this._conditions,F=this._optionsForExec();if(this.$useProjection)F.projection=this._fieldsForExec();else F.fields=this._fieldsForExec();return S3("cursor",this._collection.collectionName,A,F),this._collection.findCursor(A,F)};o.prototype.selected=function A(){return!!(this._fields&&Object.keys(this._fields).length>0)};o.prototype.selectedInclusively=function A(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let B=0;B<F.length;++B){let $=F[B];if(this._fields[$]===0)return!1;if(this._fields[$]&&typeof this._fields[$]==="object"&&this._fields[$].$meta)return!1}return!0};o.prototype.selectedExclusively=function A(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let B=0;B<F.length;++B){let $=F[B];if(this._fields[$]===0)return!0}return!1};o.prototype._mergeUpdate=function(A){if(!this._updateDoc)this._updateDoc={};if(A instanceof o){if(A._updateDoc)R0.mergeClone(this._updateDoc,A._updateDoc)}else R0.mergeClone(this._updateDoc,A)};o.prototype._optionsForExec=function(){return R0.clone(this.options)};o.prototype._fieldsForExec=function(){return R0.clone(this._fields)};o.prototype._updateForExec=function(){let A=R0.clone(this._updateDoc),F=R0.keys(A),B={};for(let $ of F){if(this.options.overwrite){B[$]=A[$];continue}if($[0]!=="$"){if(!B.$set)if(A.$set)B.$set=A.$set;else B.$set={};if(B.$set[$]=A[$],!~F.indexOf("$set"))F.push("$set")}else if($==="$set"){if(!B.$set)B[$]=A[$]}else B[$]=A[$]}return this._compiledUpdate=B,B};o.prototype._ensurePath=function(A){if(!this._path){let F=A+"() must be used after where() when called with these arguments";throw new Error(F)}};/*!
 * Permissions
 */o.permissions=Je();o._isPermitted=function(A,F){let B=o.permissions[F];if(!B)return!0;return B[A]!==!0};o.prototype._validate=function(A){let F,B;if(A===void 0){if(B=o.permissions[this.op],typeof B!="function")return!0;F=B(this)}else if(!o._isPermitted(A,this.op))F=A;if(F)throw new Error(F+" cannot be used with "+this.op)};o.canMerge=function(A){return A instanceof o||R0.isObject(A)};o.setGlobalTraceFunction=function(A){o.traceFunction=A};/*!
 * Exports.
 */o.utils=R0;o.env=mN();o.Collection=Ke();o.BaseCollection=CX();we.exports=Le=o});var tN=C((pz0,Ve)=>{Ve.exports=function A(F,B){if(typeof F==="string")F=F.split(/\s+/);if(!Array.isArray(F)&&Object.prototype.toString.call(F)!=="[object Arguments]")return F;let Z=F.length,D={};for(let X=0;X<Z;++X){let J=F[X];if(!J)continue;let Y=J[0]=="-"?0:1;if(!B&&Y===0)J=J.substring(1);D[J]=Y}return D}});var Re=C((iz0,Me)=>{Me.exports=function A(F,B){let $=Object.keys(F).map((Z)=>Object.keys(F[Z])).reduce((Z,D)=>Z.concat(D),[]);return B.filter((Z)=>{return Ne(Z,$)})};function Ne(A,F){let B=Object.keys(A)[0];if(B==="$and"||B==="$or"){if(!Array.isArray(A[B]))return!1;return A[B].find((D)=>Ne(D,F))!=null}let $=B.indexOf("."),Z=$===-1?B:B.slice(0,$);return F.find((D)=>D.includes("$["+Z+"]"))!=null}});var pQ=C((nz0,Pe)=>{/*!
 * ignore
 */Pe.exports=function A(F){if(typeof F!=="object"||F===null)return!1;let B=Object.keys(F),$=B.length;for(let Z=0;Z<$;++Z)if(B[Z][0]==="$")return!0;return!1}});var rN=C((sz0,je)=>{var Tm1=pQ(),{trustedSymbol:Om1}=vB();je.exports=function A(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let $ of F)A($);return F}let B=Object.keys(F);for(let $ of B){let Z=F[$];if(Z!=null&&Z[Om1])continue;if($==="$and"||$==="$or"){A(Z);continue}if(Tm1(Z)){let D=Object.keys(Z);if(D.length===1&&D[0]==="$eq")continue;F[$]={$eq:F[$]}}}return F}});var Te=C((az0,Ie)=>{Ie.exports=function A(F){if(F==null)return;let B=Object.keys(F);for(let $=0;$<B.length;++$)if(typeof F[B[$]]==="string")F[B[$]]=1}});var ke=C((tz0,Se)=>{var Sm1=tB(),km1=vQ();/*!
 * ignore
 */Se.exports=function A(F,B,$){if($==null)return;let Z=Object.keys($);if(B=B||{},km1(F))for(let D of Z){if(!Oe(B,D))F[D]=1;else if(B[D]===0)delete F[D];let X=$[D]?.refPath;if(typeof X==="string"){if(!Oe(B,X))F[X]=1;else if(B[X]===0)delete F[X]}}else if(Sm1(F))for(let D of Z){if(B[D]==null)delete F[D];let X=$[D]?.refPath;if(typeof X==="string"&&B[X]==null)delete F[X]}};/*!
 * ignore
 */function Oe(A,F){let B=F.split("."),$=B.length,Z=B[0];for(let D=1;D<$;++D){if(A[Z]!=null||A[Z+".$"]!=null)return!0;Z+="."+B[D]}return A[Z]!=null||A[Z+".$"]!=null}});var ge=C((rz0,fe)=>{/*!
 * Module dependencies.
 */var _e=uA(),_m1=pD(),xe=sB().flatten,be=sB().modifiedPaths;fe.exports=function(A,F,B,$,Z){let D=Object.keys(B||{}),X={},J={},Y={},W={},G=D.length,Q=!1,q={},z,H,U;for(U=0;U<G;++U)if(D[U].startsWith("$")){if(Q=!0,D[U]==="$push"||D[U]==="$addToSet"){let k=Object.keys(B[D[U]]);for(let v=0;v<k.length;++v)if(z=B[D[U]][k[v]],z&&z.$each)W[k[v]]=(W[k[v]]||[]).concat(z.$each);else W[k[v]]=(W[k[v]]||[]).concat([z]);continue}be(B[D[U]],"",q);let N=xe(B[D[U]],null,null,F),y=Object.keys(N),S=y.length;for(let k=0;k<S;++k){let v=_m1(y[k]);if(H=D[U],v.includes("$"))continue;if(H==="$set"||H==="$setOnInsert"||H==="$pull"||H==="$pullAll")J[v]=N[y[k]],Y[v]=H==="$pull"||H==="$pullAll";else if(H==="$unset")J[v]=void 0;X[v]=!0}}if(!Q)be(B,"",q),J=xe(B,null,null,F),X=Object.keys(J);let K=Object.keys(J),E=K.length,L=[],V=[],M=[],O=A;function R(N,y){let S=F._getSchema(K[N]);if(S==null)return;if(S.instance==="Mixed"&&S.path!==K[N])return;if(y&&Array.isArray(y.$in))y.$in.forEach((k,v)=>{L.push(function(J1){S.doValidate(k,function(r){if(r)r.path=K[v]+".$in."+v,V.push(r);J1(null)},O,{updateValidator:!0})})});else{if(Y[K[N]]&&S.$isMongooseArray)return;if(S.$isMongooseDocumentArrayElement&&y!=null&&y.$__!=null)M.push(K[N]),L.push(function(k){S.doValidate(y,function(v){if(v)if(v.errors)for(let J1 of Object.keys(v.errors)){let r=v.errors[J1];r.path=K[N]+"."+J1,V.push(r)}else v.path=K[N],V.push(v);return k(null)},O,{updateValidator:!0})});else L.push(function(k){for(let v of M)if(K[N].startsWith(v+"."))return k(null);if(S.$isSingleNested)M.push(K[N]);S.doValidate(y,function(v){if(S.schema!=null&&S.schema.options.storeSubdocValidationError===!1&&v instanceof _e)return k(null);if(v)v.path=K[N],V.push(v);k(null)},O,{updateValidator:!0})})}}for(U=0;U<E;++U)R(U,J[K[U]]);let _=Object.keys(W);for(let N of _){let y=F._getSchema(N);if(y&&y.$isMongooseDocumentArray)L.push(function(S){y.doValidate(W[N],T(N,V,S),$&&$.context==="query"?A:null)});else{y=F._getSchema(N+".0");for(let S of W[N])L.push(function(k){y.doValidate(S,T(N,V,k),$&&$.context==="query"?A:null,{updateValidator:!0})})}}if(Z!=null){let N=L.length;if(N===0)return P(Z);for(let y of L)y(function(){if(--N<=0)P(Z)});return}return function(N){let y=L.length;if(y===0)return P(N);for(let S of L)S(function(){if(--y<=0)P(N)})};function P(N){if(V.length){let y=new _e(null);for(let S of V)y.addError(S.path,S);return N(y)}N(null)}function T(N,y,S){return function(k){if(k)k.path=N,y.push(k);S(null)}}}});var sQ=C((oz0,te)=>{/*!
 * Module dependencies.
 */var EX=D4(),xm1=WG(),eN=fA(),W4=t1(),f5=EG(),ue=Oo(),ye=uA(),{applyGlobalMaxTimeMS:LX,applyGlobalDiskUse:wX}=fN(),bm1=sw(),fm1=gN(),gm1=uN(),um1=iA(),ym1=lo(),nQ=sD(),vm1=LN(),Z9=T2(),hm1=J7(),VX=yD(),dm1=t7().internalToObjectOptions,mm1=tB(),cm1=vQ(),lm1=PG(),ve=no(),de=O9(),k9=aN(),pm1=tN(),im1=Re(),nm1=rN(),sm1=Te(),am1=ke(),me=VN(),iQ=bA(),tm1=ge(),KX=A1("util"),Z2=f1(),rm1=sG().queryMiddlewareFunctions,om1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),em1=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function t(A,F,B,$){if(!this._mongooseOptions)this._mongooseOptions={};F=F||{},this._transforms=[],this._hooks=new eN,this._executionStack=null;let Z=Object.keys(F);for(let X of Z)this._mongooseOptions[X]=F[X];if($)this.mongooseCollection=$;if(B)this.model=B,this.schema=B.schema;if(this.model&&this.model._mapreduce)this.lean();if(k9.call(this,null,F),$)this.collection($);if(A)this.find(A);this.options=this.options||{},this.$useProjection=!0;let D=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;if(D!=null)this.options.collation=D}function ce(A){if(A==null)return!0;if(typeof A!=="object")return!0;if(Object.keys(A).length===0)return!0;for(let F of["$and","$or","$nor"])if(Array.isArray(A[F])){if(A[F].length===0||A[F].every((B)=>ce(B)))return!0}return!1}function H$(A,F){if(F&&F.requireFilter&&ce(A))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */t.prototype=new k9;t.prototype.constructor=t;t.prototype.count=void 0;t.prototype.findOneAndRemove=void 0;t.base=k9.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(t.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});t.use$geoWithin=k9.use$geoWithin;t.prototype.toConstructor=function A(){let F=this.model,B=this.mongooseCollection,$=function(X,J){if(!(this instanceof $))return new $(X,J);this._mongooseOptions=Z9(Z._mongooseOptions),t.call(this,X,J||null,F,B)};KX.inherits($,F.Query);let Z=$.prototype;Z.options={};let D=Object.assign({},this.options);if(D.sort!=null)Z.sort(D.sort),delete D.sort;return Z.setOptions(D),Z.op=this.op,Z._validateOp(),Z._conditions=Z9(this._conditions),Z._fields=Z9(this._fields),Z._update=Z9(this._update,{flattenDecimals:!1}),Z._path=this._path,Z._distinct=this._distinct,Z._collection=this._collection,Z._mongooseOptions=this._mongooseOptions,$};t.prototype.clone=function(){let A=this.model,F=this.mongooseCollection,B=new this.model.Query({},{},A,F),$=Object.assign({},this.options);if($.sort!=null)B.sort($.sort),delete $.sort;return B.setOptions($),B.op=this.op,B._validateOp(),B._conditions=Z9(this._conditions),B._fields=Z9(this._fields),B._update=Z9(this._update,{flattenDecimals:!1}),B._path=this._path,B._distinct=this._distinct,B._collection=this._collection,B._mongooseOptions=this._mongooseOptions,B};t.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let A,F;if(arguments.length===1){let $=arguments[0];if(typeof $==="object"&&!Array.isArray($)){let Z=Object.keys($),D=Z.length;for(let X=0;X<D;++X)this.slice(Z[X],$[Z[X]]);return this}this._ensurePath("slice"),A=this._path,F=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),A=this._path,F=[arguments[0],arguments[1]];else A=arguments[0],F=arguments[1];else if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];let B={};return B[A]={$slice:F},this.select(B),this};/*!
 * ignore
 */var Ac1=new Set(rm1);t.prototype._validateOp=function(){if(this.op!=null&&!Ac1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};t.prototype.mod=function(){let A,F;if(arguments.length===1)this._ensurePath("mod"),A=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),A=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)A=[arguments[1],arguments[2]],F=arguments[0];else A=arguments[1],F=arguments[0];let B=this._conditions[F]||(this._conditions[F]={});return B.$mod=A,this};t.prototype.limit=function A(F){if(this._validate("limit"),typeof F==="string")try{F=nQ(F)}catch(B){throw new EX("Number",F,"limit")}return this.options.limit=F,this};t.prototype.skip=function A(F){if(this._validate("skip"),typeof F==="string")try{F=nQ(F)}catch(B){throw new EX("Number",F,"skip")}return this.options.skip=F,this};t.prototype.projection=function(A){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(A),this._fields};t.prototype.select=function A(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),$=this._userProvidedFields||(this._userProvidedFields={}),Z=void 0;if(this.model!=null&&Z2.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))Z=this.model.db.options.sanitizeProjection;else if(this.model!=null&&Z2.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))Z=this.model.base.options.sanitizeProjection;else Z=this._mongooseOptions.sanitizeProjection;function D(X){return typeof X==="string"&&Z?X=1:X}if(F=pm1(F,!0),Z2.isObject(F)){if(this.selectedInclusively())Object.entries(F).forEach(([X,J])=>{if(J){if(B["-"+X]!=null)delete B["-"+X];B[X]=$[X]=D(J)}else Object.keys($).forEach((Y)=>{if(ve(X,Y))delete B[Y],delete $[Y]})});else if(this.selectedExclusively())Object.entries(F).forEach(([X,J])=>{if(!J){if(B["+"+X]!=null)delete B["+"+X];B[X]=$[X]=D(J)}else Object.keys($).forEach((Y)=>{if(ve(X,Y))delete B[Y],delete $[Y]})});else{let X=Object.keys(F);for(let J=0;J<X.length;++J){let Y=F[X[J]],W=X[J];B[W]=D(Y),$[W]=D(Y)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};t.prototype.schemaLevelProjections=function A(F){return this._mongooseOptions.schemaLevelProjections=F,this};t.prototype.sanitizeProjection=function A(F){return this._mongooseOptions.sanitizeProjection=F,this};t.prototype.read=function A(F,B){if(typeof F==="string")F=bm1(F),this.options.readPreference={mode:F,tags:B};else this.options.readPreference=F;return this};t.prototype.toString=function A(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${KX.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${KX.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${KX.inspect(this._conditions)}, ${KX.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};t.prototype.session=function A(F){if(F==null)delete this.options.session;return this.options.session=F,this};t.prototype.writeConcern=function A(F){if(F==null)return delete this.options.writeConcern,this;return this.options.writeConcern=F,this};t.prototype.w=function A(F){if(F==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=F;else this.options.w=F;return this};t.prototype.j=function A(F){if(F==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=F;else this.options.j=F;return this};t.prototype.wtimeout=function A(F){if(F==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=F;else this.options.wtimeout=F;return this};t.prototype.getOptions=function(){return this.options};t.prototype.setOptions=function(A,F){if(F){if(this._mongooseOptions=A&&Z9(A)||{},this.options=A||{},"populate"in A)this.populate(this._mongooseOptions);return this}if(A==null)return this;if(typeof A!=="object")throw new Error('Options must be an object, got "'+A+'"');if(A=Object.assign({},A),Array.isArray(A.populate)){let B=A.populate;delete A.populate;let $=B.length;for(let Z=0;Z<$;++Z)this.populate(B[Z])}if("setDefaultsOnInsert"in A)this._mongooseOptions.setDefaultsOnInsert=A.setDefaultsOnInsert,delete A.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in A)this._mongooseOptions.overwriteDiscriminatorKey=A.overwriteDiscriminatorKey,delete A.overwriteDiscriminatorKey;if("overwriteImmutable"in A)this._mongooseOptions.overwriteImmutable=A.overwriteImmutable,delete A.overwriteImmutable;if("sanitizeProjection"in A){if(A.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)sm1(this._fields);this._mongooseOptions.sanitizeProjection=A.sanitizeProjection,delete A.sanitizeProjection}if("sanitizeFilter"in A)this._mongooseOptions.sanitizeFilter=A.sanitizeFilter,delete A.sanitizeFilter;if("timestamps"in A)this._mongooseOptions.timestamps=A.timestamps,delete A.timestamps;if("defaults"in A)this._mongooseOptions.defaults=A.defaults;if("translateAliases"in A)this._mongooseOptions.translateAliases=A.translateAliases,delete A.translateAliases;if("schemaLevelProjections"in A)this._mongooseOptions.schemaLevelProjections=A.schemaLevelProjections,delete A.schemaLevelProjections;if(A.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof A.limit==="string")try{A.limit=nQ(A.limit)}catch(B){throw new EX("Number",A.limit,"limit")}if(typeof A.skip==="string")try{A.skip=nQ(A.skip)}catch(B){throw new EX("Number",A.skip,"skip")}for(let B of Object.keys(A))if(om1.has(B)){let $=Array.isArray(A[B])?A[B]:[A[B]];this[B].apply(this,$)}else this.options[B]=A[B];return this};t.prototype.explain=function A(F){if(arguments.length===0)this.options.explain=!0;else if(F===!1)delete this.options.explain;else this.options.explain=F;return this};t.prototype.allowDiskUse=function(A){if(arguments.length===0)this.options.allowDiskUse=!0;else if(A===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=A;return this};t.prototype.maxTimeMS=function(A){return this.options.maxTimeMS=A,this};t.prototype.getFilter=function(){return this._conditions};t.prototype.getQuery=function(){return this._conditions};t.prototype.setQuery=function(A){this._conditions=A};t.prototype.getUpdate=function(){return this._update};t.prototype.setUpdate=function(A){this._update=A};t.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(Object.keys(this._fields).length===0)return null;return Z9(this._fields)};t.prototype._updateForExec=function(){let A=Z9(this._update,{transform:!1,depopulate:!0}),F=Object.keys(A),B=F.length,$={};while(B--){let Z=F[B];if(Z[0]!=="$"){if(!$.$set)if(A.$set)$.$set=A.$set;else $.$set={};if($.$set[Z]=A[Z],F.splice(B,1),!~F.indexOf("$set"))F.push("$set")}else if(Z==="$set"){if(!$.$set)$[Z]=A[Z]}else $[Z]=A[Z]}return $};t.prototype._optionsForExec=function(A){let F=Z9(this.options);if(delete F.populate,A=A||this.model,!A)return F;fm1(A.schema,F),gm1(A.schema,F);let B=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!this.options.hasOwnProperty("session")&&B?.session!=null)F.session=B.session;let $=A&&A.schema&&A.schema.options&&A.schema.options.read;if(!("readPreference"in F)&&$)F.readPreference=$;if(F.upsert!==void 0)F.upsert=!!F.upsert;if(F.writeConcern){if(F.j)F.writeConcern.j=F.j,delete F.j;if(F.w)F.writeConcern.w=F.w,delete F.w;if(F.wtimeout)F.writeConcern.wtimeout=F.wtimeout,delete F.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let Z=this._fieldsForExec();if(Z!=null)F.projection=Z}return F};t.prototype.lean=function(A){return this._mongooseOptions.lean=arguments.length?A:!0,this};t.prototype.set=function(A,F){if(typeof A==="object"){let B=Object.keys(A);for(let $ of B)this.set($,A[$]);return this}if(this._update=this._update||{},A in this._update)delete this._update[A];return this._update.$set=this._update.$set||{},this._update.$set[A]=F,this};t.prototype.get=function A(F){let B=this._update;if(B==null)return;let $=B.$set;if($==null)return B[F];if(Z2.hasUserDefinedProperty(B,F))return B[F];if(Z2.hasUserDefinedProperty($,F))return $[F];return};t.prototype.error=function A(F){if(arguments.length===0)return this._error;return this._error=F,this};t.prototype._unsetCastError=function A(){if(this._error==null||!(this._error instanceof EX))return;return this.error(null)};t.prototype.mongooseOptions=function(A){if(arguments.length>0)this._mongooseOptions=A;return this._mongooseOptions};t.prototype._castConditions=function(){let A=void 0;if(this.model?.db.options?.sanitizeFilter!=null)A=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)A=this.model.base.options.sanitizeFilter;else A=this._mongooseOptions.sanitizeFilter;if(A)nm1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(F){this.error(F)}};/*!
 * ignore
 */function le(A){try{ym1(A)}catch(F){A.error(F)}}t.prototype._find=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let F=this._mongooseOptions,B=this._userProvidedFields||{};LX(this.options,this.model.db.options,this.model.base.options),wX(this.options,this.model.db.options,this.model.base.options);let $={session:this&&this.options&&this.options.session||null,lean:F.lean||null},Z=this._optionsForExec(),D=this._conditions,X=Z.projection,J=await this.mongooseCollection.find(D,Z);if(Z.explain)return J.explain();let Y=await J.toArray();if(Y.length===0)return Y;if(!F.populate){let G=this.schema.options.versionKey;if(F.lean&&F.lean.versionKey===!1&&G)Y.forEach((Q)=>{if(G in Q)delete Q[G]});return F.lean?ie(this.model.schema,Y,null,$):this._completeMany(Y,X,B,$)}let W=VX.preparePopulationOptionsMQ(this,F);if(F.lean)return this.model.populate(Y,W);return Y=await this._completeMany(Y,X,B,$),await this.model.populate(Y,W),Y};t.prototype.find=function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W4("Query.prototype.find() no longer accepts a callback");if(this.op="find",k9.canMerge(A))this.merge(A),NX(this);else if(A!=null)this.error(new f5(A,"filter","find"));return this};t.prototype.merge=function(A){if(!A)return this;let F={overwrite:!0};if(A instanceof t){if(A._conditions){if(F.omit={},this._conditions&&this._conditions.$and&&A._conditions.$and)F.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(A._conditions.$and);if(this._conditions&&this._conditions.$or&&A._conditions.$or)F.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(A._conditions.$or);Z2.merge(this._conditions,A._conditions,F)}if(A._fields)this._fields||(this._fields={}),Z2.merge(this._fields,A._fields,F);if(A.options)this.options||(this.options={}),Z2.merge(this.options,A.options,F);if(A._update)this._update||(this._update={}),Z2.mergeClone(this._update,A._update);if(A._distinct)this._distinct=A._distinct;return Z2.merge(this._mongooseOptions,A._mongooseOptions),this}else if(this.model!=null&&A instanceof this.model.base.Types.ObjectId)return Z2.merge(this._conditions,{_id:A},F),this;else if(A&&A.$__)A=A.toObject(dm1);if(F.omit={},Array.isArray(A.$and)){if(F.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(A.$and.map((B)=>Z2.isPOJO(B)?Z2.merge({},B):B))}if(Array.isArray(A.$or)){if(F.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(A.$or.map((B)=>Z2.isPOJO(B)?Z2.merge({},B):B))}return Z2.merge(this._conditions,A,F),this};t.prototype.collation=function(A){if(this.options==null)this.options={};return this.options.collation=A,this};t.prototype._completeOne=function(A,F,B,$){if(!A&&!this.options.includeResultMetadata)return $(null,null);let Z=this.model,D=this._userProvidedFields||{},X=this._mongooseOptions,J=this.options;if(!J.lean&&X.lean)J.lean=X.lean;if(J.explain)return $(null,A);if(!X.populate){let W=this.schema.options.versionKey;if(X.lean&&X.lean.versionKey===!1&&W){if(W in A)delete A[W]}return X.lean?AM(Z.schema,A,null,F,J,$):he(Z,A,F,J,B,D,null,$)}let Y=VX.preparePopulationOptionsMQ(this,this._mongooseOptions);if(X.lean)return Z.populate(A,Y).then((W)=>{AM(Z.schema,W,null,F,J,$)},(W)=>{$(W)});he(Z,A,F,J,B,D,[],(W,G)=>{if(W!=null)return $(W);Z.populate(G,Y).then((Q)=>{$(null,Q)},(Q)=>{$(Q)})})};t.prototype._completeMany=async function A(F,B,$,Z){let D=this.model;return Promise.all(F.map((X)=>new Promise((J,Y)=>{let W=X;if(X=VX.createModel(D,X,B,$),Z.session!=null)X.$session(Z.session);X.$init(W,Z,(G)=>{if(G!=null)return Y(G);J(X)})})))};t.prototype._findOne=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();LX(this.options,this.model.db.options,this.model.base.options),wX(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec(),B=await this.mongooseCollection.findOne(this._conditions,F);return new Promise(($,Z)=>{this._completeOne(B,null,F.projection,(D,X)=>{if(D)return Z(D);$(X)})})};t.prototype.findOne=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new W4("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",this._validateOp(),B)this.setOptions(B);if(F)this.select(F);if(k9.canMerge(A))this.merge(A),NX(this);else if(A!=null)this.error(new f5(A,"filter","findOne"));return this};t.prototype._countDocuments=async function A(){this._applyTranslateAliases();try{this.cast(this.model)}catch($){this.error($)}if(this.error())throw this.error();LX(this.options,this.model.db.options,this.model.base.options),wX(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec(),B=this._conditions;return this.mongooseCollection.countDocuments(B,F)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */t.prototype._applyTranslateAliases=function A(){let F=!1;if("translateAliases"in this._mongooseOptions)F=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)F=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)F=this.model.base.options.translateAliases;if(!F)return;if(this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};t.prototype._estimatedDocumentCount=async function A(){if(this.error())throw this.error();let F=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(F)};t.prototype.estimatedDocumentCount=function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W4("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",this._validateOp(),A!=null)this.setOptions(A);return this};t.prototype.countDocuments=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new W4("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",this._validateOp(),k9.canMerge(A))this.merge(A);if(F!=null)this.setOptions(F);return this};t.prototype.__distinct=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();LX(this.options,this.model.db.options,this.model.base.options),wX(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,F)};t.prototype.distinct=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new W4("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",this._validateOp(),k9.canMerge(F))this.merge(F),NX(this);else if(F!=null)this.error(new f5(F,"filter","distinct"));if(A!=null)this._distinct=A;if(B!=null)this.setOptions(B);return this};t.prototype.sort=function(A,F){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(F!=null&&typeof F!=="object")throw new Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(F&&F.override)this.options.sort={};let B=this.options.sort;if(typeof A==="string"){let $=A.indexOf(" ")===-1?[A]:A.split(" ");for(let Z of $){let D=Z[0]=="-"?-1:1;if(D===-1)Z=Z.slice(1);if(iQ.has(Z))continue;B[Z]=D}}else if(Array.isArray(A))for(let $ of A){if(!Array.isArray($))throw new TypeError("Invalid sort() argument, must be array of arrays");let Z=""+$[0];if(iQ.has(Z))continue;B[Z]=oN($[1],Z)}else if(typeof A==="object"&&A!=null&&!(A instanceof Map))for(let $ of Object.keys(A)){if(iQ.has($))continue;B[$]=oN(A[$],$)}else if(A instanceof Map)for(let $ of A.keys()){if($=""+$,iQ.has($))continue;B[$]=oN(A.get($),$)}else if(A!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function oN(A,F){if(A===1||A==="asc"||A==="ascending")return 1;if(A===-1||A==="desc"||A==="descending")return-1;if(A?.$meta!=null)return{$meta:A.$meta};throw new TypeError("Invalid sort value: { "+F+": "+A+" }")}t.prototype.deleteOne=function A(F,B){if(typeof F==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new W4("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(B),k9.canMerge(F))this.merge(F),NX(this);else if(F!=null)this.error(new f5(F,"filter","deleteOne"));return this};t.prototype._deleteOne=async function A(){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,F)};t.prototype.deleteMany=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new W4("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(F),this.op="deleteMany",k9.canMerge(A))this.merge(A),NX(this);else if(A!=null)this.error(new f5(A,"filter","deleteMany"));return this};t.prototype._deleteMany=async function A(){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,F)};function he(A,F,B,$,Z,D,X,J){if($.includeResultMetadata&&F==null)return Y(null),null;VX.createModelAndInit(A,F,Z,D,$,X,Y);function Y(W,G){if(W)return J(W);if($.includeResultMetadata){if(F&&G){if($.session!=null)G.$session($.session);B.value=G}else B.value=null;return J(null,B)}if($.session!=null)G.$session($.session);J(null,G)}}function NX(A){if(!A||!A.model||!A.model.schema)return;let F=A.model.schema;if(F&&F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A._conditions[F.discriminatorMapping.key]=F.discriminatorMapping.value}t.prototype.findOneAndUpdate=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new W4("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:B=void 0;break;case 1:F=A,A=B=void 0;break}if(k9.canMerge(A))this.merge(A);else if(A!=null)this.error(new f5(A,"filter","findOneAndUpdate"));if(F)this._mergeUpdate(F);if(B=B?Z9(B):{},B.projection)this.select(B.projection),delete B.projection;if(B.fields)this.select(B.fields),delete B.fields;let $=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&$!=null)B.returnOriginal=$;return this.setOptions(B),this};t.prototype._findOneAndUpdate=async function A(){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),le(this),this.error())throw this.error();if(LX(this.options,this.model.db.options,this.model.base.options),wX(this.options,this.model.db.options,this.model.base.options),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let F=this._optionsForExec(this.model);pe(F),this._update=this._castUpdate(this._update);let B=Object.assign({},F,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=me(this._conditions,this.model.schema,this._update,B),!this._update||Object.keys(this._update).length===0)if(F.upsert){let X=Z9(this._update);delete X._id,this._update={$set:X}}else return this._executionStack=null,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&Object.keys(this._update.$set).length===0)delete this._update.$set;if(FM(this,"runValidators",!1))await this.validate(this._update,F,!1);if(this._update.toBSON)this._update=this._update.toBSON();let Z=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,F);for(let X of this._transforms)Z=X(Z);let D=!F.includeResultMetadata?Z:Z.value;return new Promise((X,J)=>{this._completeOne(D,Z,F.projection,(Y,W)=>{if(Y)return J(Y);X(W)})})};t.prototype.findOneAndDelete=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new W4("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validateOp(),this._validate(),k9.canMerge(A))this.merge(A);return F&&this.setOptions(F),this};t.prototype._findOneAndDelete=async function A(){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),this.error()!=null)throw this.error();let F=this.options.includeResultMetadata,B=this._conditions,$=this._optionsForExec(this.model),Z=await this.mongooseCollection.findOneAndDelete(B,$);for(let X of this._transforms)Z=X(Z);let D=!F?Z:Z.value;return new Promise((X,J)=>{this._completeOne(D,Z,$.projection,(Y,W)=>{if(Y)return J(Y);X(W)})})};t.prototype.findOneAndReplace=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[4]==="function")throw new W4("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validateOp(),this._validate(),k9.canMerge(A))this.merge(A);else if(A!=null)this.error(new f5(A,"filter","findOneAndReplace"));if(F!=null)this._mergeUpdate(F);B=B||{};let $=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&$!=null)B.returnOriginal=$;return this.setOptions(B),this};t.prototype._findOneAndReplace=async function A(){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let F=this._conditions,B=this._optionsForExec();pe(B);let $=this.options.includeResultMetadata,Z={skipId:!0};if("strict"in this._mongooseOptions)Z.strict=this._mongooseOptions.strict;let D=FM(this,"runValidators",!1);try{let Y=new this.model(this._update,null,Z);if(D)await Y.validate();else if(Y.$__.validationError)throw Y.$__.validationError;this._update=Y.toBSON()}catch(Y){if(Y instanceof ye)throw Y;let W=new ye;throw W.errors[Y.path]=Y,W}let X=await this.mongooseCollection.findOneAndReplace(F,this._update,B);for(let Y of this._transforms)X=Y(X);let J=!$?X:X.value;return new Promise((Y,W)=>{this._completeOne(J,X,B.projection,(G,Q)=>{if(G)return W(G);Y(Q)})})};t.prototype.findById=function(A,F,B){return this.findOne({_id:A},F,B)};t.prototype.findByIdAndUpdate=function(A,F,B){return this.findOneAndUpdate({_id:A},F,B)};t.prototype.findByIdAndDelete=function(A,F){return this.findOneAndDelete({_id:A},F)};function pe(A){if("new"in A)A.returnDocument=A.new?"after":"before",delete A.new;if("returnOriginal"in A)A.returnDocument=A.returnOriginal?"before":"after",delete A.returnOriginal;if(typeof A.returnDocument==="string")A.returnOriginal=A.returnDocument==="before"}function FM(A,F,B){let $=A._optionsForExec(A.model);if(F in $)return $[F];if(F in A.model.base.options)return A.model.base.options[F];return B}/*!
 * ignore
 */function AM(A,F,B,$,Z,D){if(Z.lean&&typeof Z.lean.transform==="function"){Z.lean.transform(F);for(let X=0;X<A.childSchemas.length;X++){let J=B?B+"."+A.childSchemas[X].model.path:A.childSchemas[X].model.path,Y=A.childSchemas[X].schema,W=de.get(J,F);if(W==null)continue;if(Array.isArray(W))for(let G=0;G<W.length;G++)Z.lean.transform(W[G]);else Z.lean.transform(W);AM(Y,W,J,$,Z)}if(D)return D(null,F);else return}if(Z.includeResultMetadata)return D(null,$);return D(null,F)}/*!
 * ignore
 */function ie(A,F,B,$){if($.lean&&typeof $.lean.transform==="function"){for(let Z of F)$.lean.transform(Z);for(let Z=0;Z<A.childSchemas.length;Z++){let D=B?B+"."+A.childSchemas[Z].model.path:A.childSchemas[Z].model.path,X=A.childSchemas[Z].schema,J=de.get(D,F);if(J==null)continue;J=J.flat();for(let Y=0;Y<J.length;Y++)$.lean.transform(J[Y]);ie(X,J,D,$)}}return F}t.prototype._mergeUpdate=function(A){if(!this._update)this._update=Array.isArray(A)?[]:{};if(A==null||typeof A==="object"&&Object.keys(A).length===0)return;if(A instanceof t){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");if(A._update)Z2.mergeClone(this._update,A._update)}else if(Array.isArray(A)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(A)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");Z2.mergeClone(this._update,A)}};/*!
 * ignore
 */async function BM(A){if(this._applyTranslateAliases(),this._castConditions(),H$(this._conditions,this.options),le(this),this.error()!=null)throw this.error();let F=this._conditions,B=this._optionsForExec(this.model);this._update=Z9(this._update,B);let $=A==="replaceOne";if($)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let D=Object.assign({},B,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=me(this._conditions,this.model.schema,this._update,D)}if(Array.isArray(B.arrayFilters))B.arrayFilters=im1(this._update,B.arrayFilters);if(FM(this,"runValidators",!1))await this.validate(this._update,B,$);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[A](F,this._update,B)}t.prototype.validate=async function A(F,B,$){if(typeof arguments[3]==="function")throw new W4("Query.prototype.validate() no longer accepts a callback");if(await se(this,"validate"),$)await F.$validate();else await new Promise((Z,D)=>{tm1(this,this.model.schema,F,B,(X)=>{if(X!=null)return D(X);Z()})});await ne(this,null,null,"validate")};t.prototype._updateMany=async function A(){return BM.call(this,"updateMany")};t.prototype._updateOne=async function A(){return BM.call(this,"updateOne")};t.prototype._replaceOne=async function A(){return BM.call(this,"replaceOne")};t.prototype.updateMany=function(A,F,B,$){if(typeof B==="function")$=B,B=null;else if(typeof F==="function")$=F,F=A,A={},B=null;else if(typeof A==="function")$=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!$)F=A,A=void 0,B=void 0,$=void 0;return $M(this,"updateMany",A,F,B,$)};t.prototype.updateOne=function(A,F,B,$){if(typeof B==="function")$=B,B=null;else if(typeof F==="function")$=F,F=A,A={},B=null;else if(typeof A==="function")$=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!$)F=A,A=void 0,B=void 0,$=void 0;return $M(this,"updateOne",A,F,B,$)};t.prototype.replaceOne=function(A,F,B,$){if(typeof B==="function")$=B,B=null;else if(typeof F==="function")$=F,F=A,A={},B=null;else if(typeof A==="function")$=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!$)F=A,A=void 0,B=void 0,$=void 0;return $M(this,"replaceOne",A,F,B,$)};function $M(A,F,B,$,Z,D){if(A.op=F,A._validateOp(),$=$||{},Z!=null){if("strict"in Z)A._mongooseOptions.strict=Z.strict}if(!(B instanceof t)&&B!=null&&B.toString()!=="[object Object]")A.error(new f5(B,"filter",F));else A.merge(B);if(Z2.isObject(Z))A.setOptions(Z);if(A._mergeUpdate($),D)return A.exec(D),A;return A}t.prototype.transform=function(A){return this._transforms.push(A),this};t.prototype.orFail=function(A){return this.transform((F)=>{switch(this.op){case"find":if(F.length===0)throw q$(A,this);break;case"findOne":if(F==null)throw q$(A,this);break;case"replaceOne":case"updateMany":case"updateOne":if(F&&F.matchedCount===0)throw q$(A,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&F!=null&&F.value==null)throw q$(A,this);if(!this.options.includeResultMetadata&&F==null)throw q$(A,this);break;case"deleteMany":case"deleteOne":if(F.deletedCount===0)throw q$(A,this);break;default:break}return F}),this};function q$(A,F){if(typeof A==="function")A=A.call(F);if(A==null)A=new xm1(F.getQuery(),F.model.modelName);return A}t.prototype.isPathSelectedInclusive=function(A){return lm1(this._fields,A)};t.prototype.exec=async function A(F){if(typeof F==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new W4("Query.prototype.exec() no longer accepts a callback");if(typeof F==="string")this.op=F;if(this.op==null)throw new W4("Query must have `op` before executing");if(this.model==null)throw new W4("Query must have an associated model before executing");let B=em1.get(this.op);if(!B)throw new W4('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort==="object"&&this.options.sort.hasOwnProperty(""))throw new Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let X=this.toString();if(X.length>60)X=X.slice(0,60)+"...";let J=new W4("Query was already executed: "+X);if(!this.model.base.options.skipOriginalStackTraces)J.originalStack=this._executionStack;throw J}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:new Error().stack;let $=null;try{await Bc1(this)}catch(X){if(X instanceof eN.skipWrappedFunction)$=X;else throw X}let Z,D=null;try{await se(this),Z=$?$.args[0]:await this[B]();for(let X of this._transforms)Z=X(Z)}catch(X){if(X instanceof eN.skipWrappedFunction)Z=X.args[0];else D=X;D=this.model.schema._transformDuplicateKeyError(D)}return Z=await ne(this,Z,D),await Fc1(this),Z};/*!
 * ignore
 */function Fc1(A){return new Promise((F,B)=>{A._hooks.execPost("exec",A,[],{},($)=>{if($)return B($);F()})})}/*!
 * ignore
 */function ne(A,F,B,$){if(A._queryMiddleware==null){if(B!=null)throw B;return F}return new Promise((Z,D)=>{let X=B?{error:B}:{};A._queryMiddleware.execPost($||A.op,A,[F],X,(J,Y)=>{if(J)return D(J);Z(Y)})})}/*!
 * ignore
 */function Bc1(A){return new Promise((F,B)=>{A._hooks.execPre("exec",A,[],($)=>{if($!=null)return B($);F()})})}/*!
 * ignore
 */function se(A,F){if(A._queryMiddleware==null)return;return new Promise((B,$)=>{A._queryMiddleware.execPre(F||A.op,A,[],(Z)=>{if(Z!=null)return $(Z);B()})})}t.prototype.then=function(A,F){return this.exec().then(A,F)};t.prototype.catch=function(A){return this.exec().then(null,A)};t.prototype.finally=function(A){return this.exec().finally(A)};t.prototype[Symbol.toStringTag]=function A(){return`Query { ${this.op} }`};t.prototype.pre=function(A){return this._hooks.pre("exec",A),this};t.prototype.post=function(A){return this._hooks.post("exec",A),this};t.prototype._castUpdate=function A(F){let B=this.schema,$=B.options.discriminatorKey,Z=B._baseSchema?B._baseSchema:B;if(this._mongooseOptions.overwriteDiscriminatorKey&&F[$]!=null&&Z.discriminators){let X=Object.values(Z.discriminators).find((J)=>J.discriminatorMapping.value===F[$]);if(X!=null)B=X}let D;if("upsert"in this.options)D=this.options.upsert;return vm1(B,F,{strict:this._mongooseOptions.strict,upsert:D,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};t.prototype.populate=function(){let A=Array.from(arguments);if(!A.some(Boolean))return this;let F=Z2.populate.apply(null,A);if(this.options!=null){let Z=this.options.readConcern,D=this.options.readPreference;for(let X of F){if(Z!=null&&(X&&X.options&&X.options.readConcern)==null)X.options=X.options||{},X.options.readConcern=Z;if(D!=null&&(X&&X.options&&X.options.readPreference)==null)X.options=X.options||{},X.options.readPreference=D}}let B=this._mongooseOptions;if(B.lean!=null){let Z=B.lean;for(let D of F)if((D&&D.options&&D.options.lean)==null)D.options=D.options||{},D.options.lean=Z}if(!Z2.isObject(B.populate))B.populate={};let $=B.populate;for(let Z of F){let D=Z.path;if($[D]&&$[D].populate&&Z.populate)Z.populate=$[D].populate.concat(Z.populate);$[Z.path]=Z}return this};t.prototype.getPopulatedPaths=function A(){let F=this._mongooseOptions.populate||{},B=Object.keys(F);for(let $ of Object.keys(F)){let Z=F[$];if(!Array.isArray(Z.populate))continue;ae(B,Z.populate,$+".")}return B};/*!
 * ignore
 */function ae(A,F,B){for(let $ of F){if(A.push(B+$.path),!Array.isArray($.populate))continue;ae(A,$.populate,B+$.path+".")}}t.prototype.cast=function(A,F){F||(F=this._conditions),A=A||this.model;let B=A.schema.options.discriminatorKey;if(F!=null&&F.hasOwnProperty(B))A=hm1(A.discriminators,F[B])||A;let $={upsert:this.options&&this.options.upsert};if(this.options){if("strict"in this.options)$.strict=this.options.strict;if("strictQuery"in this.options)$.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)$.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return um1(A.schema,F,$,this)}catch(Z){if(typeof Z.setModel==="function")Z.setModel(A);throw Z}};t.prototype._castFields=function A(F){let B,$,Z,D,X;if(F){Z=Object.keys(F),$=[];for(let J=0;J<Z.length;++J)if(D=Z[J],F[D].$elemMatch)B||(B={}),B[D]=F[D],$.push(D)}if(B){try{X=this.cast(this.model,B)}catch(J){return J}for(let J=0;J<$.length;++J)D=$[J],F[D]=X[D]}return F};t.prototype._applyPaths=function A(){if(!this.model)return;this._fields=this._fields||{};let F=void 0;if(this.model!=null&&Z2.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))F=this.model.db.options.sanitizeProjection;else if(this.model!=null&&Z2.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))F=this.model.base.options.sanitizeProjection;else F=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)VX.applyPaths(this._fields,this.model.schema,F);let $=!0;if("selectPopulatedPaths"in this.model.base.options)$=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)$=this.model.schema.options.selectPopulatedPaths;if($)am1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};t.prototype.cursor=function A(F){if(F)this.setOptions(F);try{this.cast(this.model)}catch(B){return new ue(this)._markError(B)}return new ue(this)};t.prototype.tailable=function(A,F){if(A!=null&&typeof A.constructor==="function"&&A.constructor.name==="Object")F=A,A=!0;if(A===void 0)A=!0;if(F&&typeof F==="object")for(let B of Object.keys(F))if(B==="awaitData"||B==="awaitdata")this.options.awaitData=!!F[B];else this.options[B]=F[B];return this.options.tailable=arguments.length?!!A:!0,this};t.prototype.near=function(){let A=[],F=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))A.push({center:arguments[0],spherical:F});else if(typeof arguments[0]==="string")A.push(arguments[0]);else if(Z2.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=F;A.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")A.push({center:[arguments[0],arguments[1]],spherical:F});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))A.push(arguments[0]),A.push({center:arguments[1],spherical:F});else if(typeof arguments[0]==="string"&&Z2.isObject(arguments[1])){if(A.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=F;A.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")A.push(arguments[0]),A.push({center:[arguments[1],arguments[2]],spherical:F});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return t.base.near.apply(this,A)};t.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};if(Symbol.asyncIterator!=null)t.prototype[Symbol.asyncIterator]=function A(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};t.prototype.box=function(A,F){if(!Array.isArray(A)&&Z2.isObject(A))F=A.ur,A=A.ll;return t.base.box.call(this,A,F)};t.prototype.center=t.base.circle;t.prototype.centerSphere=function(){if(arguments[0]!=null&&typeof arguments[0].constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(arguments[1]!=null&&typeof arguments[1].constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;t.base.circle.apply(this,arguments)};t.prototype.selectedInclusively=function A(){return cm1(this._fields)};t.prototype.selectedExclusively=function A(){return mm1(this._fields)};t.prototype.model;/*!
 * Export
 */te.exports=t});var B11=C((ez0,F11)=>{/*!
 * Module dependencies.
 */var MX=t1(),ee=A1("stream").Readable,$c1=_N(),Zc1=B7(),Dc1=fA(),A11=A1("util");function D9(A){ee.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=A,this._transforms=[];let{_connection:F,_model:B}=A;if(delete A.options.cursor.useMongooseAggCursor,this._mongooseOptions={},F)this.cursor=F.db.aggregate(A._pipeline,A.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else Xc1(B,this,A)}A11.inherits(D9,ee);/*!
 * ignore
 */function Xc1(A,F,B){if(!A.collection.buffer)A.hooks.execPre("aggregate",B,function($){if($!=null){re(F,$);return}if(typeof B.options?.cursor?.transform==="function")F._transforms.push(B.options.cursor.transform);F.cursor=A.collection.aggregate(B._pipeline,B.options||{}),F.emit("cursor",F.cursor)});else A.collection.emitter.once("queue",function(){A.hooks.execPre("aggregate",B,function($){if($!=null){re(F,$);return}if(typeof B.options?.cursor?.transform==="function")F._transforms.push(B.options.cursor.transform);F.cursor=A.collection.aggregate(B._pipeline,B.options||{}),F.emit("cursor",F.cursor)})})}function re(A,F){if(F instanceof Dc1.skipWrappedFunction){let B=F.args[0];if(B!=null&&(!Array.isArray(B)||B.length)){let $=new MX('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+A11.inspect(B)+'".');A._markError($),A.listeners("error").length>0&&A.emit("error",$);return}A.emit("cursor",null);return}A._markError(F),A.listeners("error").length>0&&A.emit("error",F)}D9.prototype._read=function(){let A=this;aQ(this,function(F,B){if(F)return A.emit("error",F);if(!B){A.push(null),A.cursor.close(function($){if($)return A.emit("error",$)});return}A.push(B)})};if(Symbol.asyncIterator!=null){let A="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";D9.prototype[Symbol.asyncIterator]=function(){throw new MX(A)}}Object.defineProperty(D9.prototype,"map",{value:function(A){return this._transforms.push(A),this},enumerable:!0,configurable:!0,writable:!0});D9.prototype._markError=function(A){return this._error=A,this};D9.prototype.close=async function A(){if(typeof arguments[0]==="function")throw new MX("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}this.emit("close")};D9.prototype._destroy=function A(F,B){let $=null;if(!this.cursor)$=new Promise((Z)=>{this.once("cursor",Z)});else $=Promise.resolve();return $.then(()=>this.cursor.close()).then(()=>{this._closed=!0,B()}).catch((Z)=>{B(Z)}),this};D9.prototype.next=async function A(){if(typeof arguments[0]==="function")throw new MX("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((F,B)=>{aQ(this,($,Z)=>{if($!=null)return B($);F(Z)})})};D9.prototype.eachAsync=function(A,F){if(typeof arguments[2]==="function")throw new MX("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let B=this;if(typeof F==="function")F={};return F=F||{},$c1(function($){return aQ(B,$)},A,F)};if(Symbol.asyncIterator!=null)D9.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */D9.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(oe)===-1)this.map(oe);return this};/*!
 * ignore
 */D9.prototype.transformNull=function(A){if(arguments.length===0)A=!0;return this._mongooseOptions.transformNull=A,this};/*!
 * ignore
 */function oe(A){return A==null?{done:!0}:{value:A,done:!1}}D9.prototype.addCursorFlag=function(A,F){let B=this;return Jc1(this,function(){B.cursor.addCursorFlag(A,F)}),this};/*!
 * ignore
 */function Jc1(A,F){if(A.cursor)return F();A.once("cursor",function(){F()})}function aQ(A,F){let B=F;if(A._transforms.length)B=function($,Z){if($||Z===null&&!A._mongooseOptions.transformNull)return F($,Z);F($,A._transforms.reduce(function(D,X){return X(D)},Z))};if(A._error)return Zc1(function(){B(A._error)});if(A.cursor)return A.cursor.next().then(($)=>{if(!$)return B(null,null);B(null,$)},($)=>B($));else A.once("error",F),A.once("cursor",function(){aQ(A,F)})}F11.exports=D9});var ZM=C((Aq0,$11)=>{$11.exports=function A(F,B,$){let Z=B&&B.discriminatorMapping;if($=$||"",Z&&!Z.isRoot){let D=F,X=($.length>0?$+".":$)+Z.key,J=Z.value;if(D[0]!=null&&D[0].$match&&(D[0].$match[X]===void 0||D[0].$match[X]===J))D[0].$match[X]=J;else if(D[0]!=null&&D[0].$geoNear)D[0].$geoNear.query=D[0].$geoNear.query||{},D[0].$geoNear.query[X]=J;else if(D[0]!=null&&D[0].$search)if(D[1]&&D[1].$match!=null)D[1].$match[X]=D[1].$match[X]||J;else{let Y={};Y[X]=J,D.splice(1,0,{$match:Y})}else{let Y={};Y[X]=J,D.unshift({$match:Y})}}}});var D11=C((Fq0,Z11)=>{Z11.exports=function A(F){if(!Array.isArray(F))return;for(let B of F){if(B==null)continue;let $=B.$group||B.$bucket||B.$bucketAuto;if($!=null)for(let D of Object.keys($))Yc1($[D]);let Z=Object.keys(B)[0];if(Z&&typeof B[Z]==="object"){let D=B[Z];for(let X of Object.keys(D))if(D[X]!=null&&D[X].$function!=null&&typeof D[X].$function.body==="function")D[X].$function.body=D[X].$function.body.toString()}if(B.$facet!=null)for(let D of Object.keys(B.$facet))A(B.$facet[D])}};function Yc1(A){if(A==null||A.$accumulator==null)return;for(let F of["init","accumulate","merge","finalize"])if(typeof A.$accumulator[F]==="function")A.$accumulator[F]=String(A.$accumulator[F])}});var XM=C((Bq0,G11)=>{/*!
 * Module dependencies
 */var Y11=B11(),AF=t1(),W11=sQ(),{applyGlobalMaxTimeMS:Wc1,applyGlobalDiskUse:Gc1}=fN(),Qc1=T2(),zc1=I4(),DM=ZM(),qc1=D11(),X11=f1(),{modelSymbol:Hc1}=w1(),Uc1=W11.prototype.read,Cc1=W11.prototype.readConcern,J11=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function F0(A,F){if(this._pipeline=[],F==null||F[Hc1])this._model=F;else this._connection=F;if(this.options={},arguments.length===1&&Array.isArray(A))this.append.apply(this,A)}F0.prototype.options;F0.prototype._optionsForExec=function(){let A=this.options||{},F=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!A.hasOwnProperty("session")&&F?.session!=null)A.session=F.session;return A};F0.prototype.model=function(A){if(arguments.length===0)return this._model;if(this._model=A,A.schema!=null){if(this.options.readPreference==null&&A.schema.options.read!=null)this.options.readPreference=A.schema.options.read;if(this.options.collation==null&&A.schema.options.collation!=null)this.options.collation=A.schema.options.collation}return A};F0.prototype.append=function(){let A=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!A.every(Kc1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(A),this};F0.prototype.addFields=function(A){if(typeof A!=="object"||A===null||Array.isArray(A))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},A)})};F0.prototype.project=function(A){let F={};if(typeof A==="object"&&!Array.isArray(A))Object.keys(A).forEach(function(B){F[B]=A[B]});else if(arguments.length===1&&typeof A==="string")A.split(/\s+/).forEach(function(B){if(!B)return;let $=B[0]==="-"?0:1;if($===0)B=B.substring(1);F[B]=$});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:F})};F0.prototype.near=function(A){if(A==null)throw new AF("Aggregate `near()` must be called with non-nullish argument");if(A.near==null)throw new AF("Aggregate `near()` argument must have a `near` property");let F=Array.isArray(A.near)?A.near:A.near.coordinates;if(typeof A.near==="object"&&(!Array.isArray(F)||F.length<2||F.find(($)=>typeof $!=="number")))throw new AF(`Aggregate \`near()\` argument has invalid coordinates, got "${F}"`);let B={};return B.$geoNear=A,this.append(B)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(A){F0.prototype[A]=function(F){let B={};return B["$"+A]=F,this.append(B)}});F0.prototype.unwind=function(){let A=[...arguments],F=[];for(let B of A)if(B&&typeof B==="object")F.push({$unwind:B});else if(typeof B==="string")F.push({$unwind:B[0]==="$"?B:"$"+B});else throw new Error('Invalid arg "'+B+'" to unwind(), must be string or object');return this.append.apply(this,F)};F0.prototype.replaceRoot=function(A){let F;if(typeof A==="string")F=A.startsWith("$")?A:"$"+A;else F=A;return this.append({$replaceRoot:{newRoot:F}})};F0.prototype.count=function(A){return this.append({$count:A})};F0.prototype.sortByCount=function(A){if(A&&typeof A==="object")return this.append({$sortByCount:A});else if(typeof A==="string")return this.append({$sortByCount:A[0]==="$"?A:"$"+A});else throw new TypeError('Invalid arg "'+A+'" to sortByCount(), must be string or object')};F0.prototype.lookup=function(A){return this.append({$lookup:A})};F0.prototype.graphLookup=function(A){let F={};if(A){if(!X11.isObject(A))throw new TypeError("Invalid graphLookup() argument. Must be an object.");X11.mergeClone(F,A);let B=F.startWith;if(B&&typeof B==="string")F.startWith=F.startWith.startsWith("$")?F.startWith:"$"+F.startWith}return this.append({$graphLookup:F})};F0.prototype.sample=function(A){return this.append({$sample:{size:A}})};F0.prototype.sort=function(A){let F={};if(zc1(A)==="Object"){let B=["desc","descending",-1];Object.keys(A).forEach(function($){if(A[$]instanceof Object&&A[$].$meta){F[$]=A[$];return}F[$]=B.indexOf(A[$])===-1?1:-1})}else if(arguments.length===1&&typeof A==="string")A.split(/\s+/).forEach(function(B){if(!B)return;let $=B[0]==="-"?-1:1;if($===-1)B=B.substring(1);F[B]=$});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:F})};F0.prototype.unionWith=function(A){return this.append({$unionWith:A})};F0.prototype.read=function(A,F){return Uc1.call(this,A,F),this};F0.prototype.readConcern=function(A){return Cc1.call(this,A),this};F0.prototype.redact=function(A,F,B){if(arguments.length===3){if(typeof F==="string"&&!J11.has(F)||typeof B==="string"&&!J11.has(B))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");A={$cond:{if:A,then:F,else:B}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:A})};F0.prototype.explain=async function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new AF("Aggregate.prototype.explain() no longer accepts a callback");let B=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");DM(this._pipeline,this._model.schema),await new Promise((X,J)=>{B.hooks.execPre("aggregate",this,(Y)=>{if(Y){let W={error:Y};return B.hooks.execPost("aggregate",this,[null],W,(G)=>{J(G)})}else X()})});let $=B.collection.aggregate(this._pipeline,this.options);if(F==null)F=!0;let Z=null;try{Z=await $.explain(F)}catch(X){await new Promise((J,Y)=>{let W={error:X};B.hooks.execPost("aggregate",this,[null],W,(G)=>{if(G)return Y(G);return J()})})}let D={error:null};return await new Promise((X,J)=>{B.hooks.execPost("aggregate",this,[Z],D,(Y)=>{if(Y)return J(Y);return X()})}),Z};F0.prototype.allowDiskUse=function(A){return this.options.allowDiskUse=A,this};F0.prototype.hint=function(A){return this.options.hint=A,this};F0.prototype.session=function(A){if(A==null)delete this.options.session;else this.options.session=A;return this};F0.prototype.option=function(A){for(let F in A)this.options[F]=A[F];return this};F0.prototype.cursor=function(A){return this._optionsForExec(),this.options.cursor=A||{},new Y11(this)};F0.prototype.collation=function(A){return this.options.collation=A,this};F0.prototype.facet=function(A){return this.append({$facet:A})};F0.prototype.search=function(A){return this.append({$search:A})};F0.prototype.pipeline=function(){return this._pipeline};F0.prototype.exec=async function A(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new AF("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new AF("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let F=this._model,B=this._model.collection;if(Wc1(this.options,F.db.options,F.base.options),Gc1(this.options,F.db.options,F.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new Y11(this);if(DM(this._pipeline,this._model.schema),qc1(this._pipeline),await new Promise((X,J)=>{F.hooks.execPre("aggregate",this,(Y)=>{if(Y){let W={error:Y};return F.hooks.execPost("aggregate",this,[null],W,(G)=>{J(G)})}else X()})}),!this._pipeline.length)throw new AF("Aggregate has empty pipeline");let $=Qc1(this.options||{}),Z;try{Z=await(await B.aggregate(this._pipeline,$)).toArray()}catch(X){await new Promise((J,Y)=>{let W={error:X};F.hooks.execPost("aggregate",this,[null],W,(G)=>{if(G)return Y(G);J()})})}let D={error:null};return await new Promise((X,J)=>{F.hooks.execPost("aggregate",this,[Z],D,(Y)=>{if(Y)return J(Y);return X()})}),Z};F0.prototype.then=function(A,F){return this.exec().then(A,F)};F0.prototype.catch=function(A){return this.exec().then(null,A)};F0.prototype.finally=function(A){return this.exec().finally(A)};if(Symbol.asyncIterator!=null)F0.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function Kc1(A){if(typeof A!=="object"||A===null)return!1;let F=Object.keys(A);return F.length===1&&F[0][0]==="$"}F0._prepareDiscriminatorPipeline=DM;/*!
 * Exports
 */G11.exports=F0});var z11=C(($q0,Q11)=>{var Ec1=T2();class JM{constructor(A){if(A==null)return;Object.assign(this,Ec1(A))}}JM.prototype.__subdocs=null;Q11.exports=JM});var H11=C((Zq0,q11)=>{q11.exports=function A(F,B){let $=Object.keys(B.paths),Z=$.length;for(let D=0;D<Z;++D){let X="",J=$[D],Y=B.paths[J],W=Y.splitPath(),G=W.length,Q=F;for(let q=0;q<G;++q){if(Q==null)break;let z=W[q];if(X+=(!X.length?"":".")+z,q===G-1){if(typeof Q[z]!=="undefined"){if(Y.$isSingleNested)A(Q[z],Y.caster.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(Q[z]))Q[z].forEach((U)=>A(U,Y.schema));break}let H=Y.getDefault(F,!1,{skipCast:!0});if(typeof H!=="undefined"){if(Q[z]=H,Y.$isSingleNested)A(H,Y.caster.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(H))H.forEach((U)=>A(U,Y.schema))}}else{if(Q[z]==null)Q[z]={};Q=Q[z]}}}}});var WM=C((Dq0,U11)=>{U11.exports=YM;function YM(A,F=new WeakSet,B=!1){if(F.has(A))return;F.add(A);for(let $ of Object.keys(A.paths)){let Z=A.paths[$];if(!Z.schema)continue;if(YM(Z.schema,F),!Z.schema._applyDiscriminators)continue;if(Z._appliedDiscriminators&&!B)continue;for(let D of Z.schema._applyDiscriminators.keys()){let{schema:X,options:J}=Z.schema._applyDiscriminators.get(D);YM(X,F),Z.discriminator(D,X,B?{...J,overwriteExisting:!0}:J)}Z._appliedDiscriminators=!0}}});var K11=C((Xq0,C11)=>{var Lc1=f2(),wc1=f1();C11.exports=function A(F,B){let $=GM();function Z(D,X){Object.defineProperty(F.prototype,D,{get:function(){let J={};for(let Y in X.methods[D])J[Y]=X.methods[D][Y].bind(this);return J},configurable:!0})}for(let D of Object.keys(B.methods)){let X=B.methods[D];if(B.tree.hasOwnProperty(D))throw new Error('You have a method and a property in your schema both named "'+D+'"');if(typeof X==="function"&&$.prototype[D]===X){delete B.methods[D];continue}if(B.reserved[D]&&!Lc1(B,`methodOptions.${D}.suppressWarning`,!1))wc1.warn(`mongoose: the method name "${D}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${D}', fn, { suppressWarning: true })\`.`);if(typeof X==="function")F.prototype[D]=X;else Z(D,B)}F.$appliedMethods=!0;for(let D of Object.keys(B.paths)){let X=B.paths[D];if(X.$isSingleNested&&!X.caster.$appliedMethods)A(X.caster,X.schema);if(X.$isMongooseDocumentArray&&!X.Constructor.$appliedMethods)A(X.Constructor,X.schema)}}});var w11=C((Jq0,L11)=>{var E11=Bw(),Vc1=tB(),Nc1=vQ(),oQ=f1().isPOJO;L11.exports=function A(F,B,$){if(B==null)return F;if(F==null)return F;let Z=null;if(Nc1(B))Z=!1;else if(Vc1(B))Z=!0;if(Z==null)return F;else if(Z)return $=$||E11(B),tQ(F,B,$);else return $=$||E11(B),rQ(F,B,$)};function tQ(A,F,B,$,Z){if(A==null||typeof A!=="object")return A;if(Array.isArray(A))return A.map((X)=>tQ(X,F,B,$,Z));let D={...A};$=Z?$||{}:F;for(let X of Object.keys(D)){let J=Z?Z+"."+X:X;if(F.hasOwnProperty(J)||$.hasOwnProperty(X))if(oQ(F[J])||oQ($[X]))D[X]=tQ(D[X],F,B,$[X],J);else delete D[X];else if(B[J])D[X]=tQ(D[X],F,B,$[X],J)}return D}function rQ(A,F,B,$,Z){if(A==null||typeof A!=="object")return A;if(Array.isArray(A))return A.map((X)=>rQ(X,F,B,$,Z));let D={...A};$=Z?$||{}:F;for(let X of Object.keys(D)){let J=Z?Z+"."+X:X;if(F.hasOwnProperty(J)||$.hasOwnProperty(X)){if(oQ(F[J])||oQ($[X]))D[X]=rQ(D[X],F,B,$[X],J);continue}else if(B[J])D[X]=rQ(D[X],F,B,$[X],J);else delete D[X]}return D}});var N11=C((Yq0,V11)=>{V11.exports=function A(F){let B=!1;for(let $ of Object.keys(F))if(F[$]==="text")B=!0;return B}});var R11=C((Wq0,M11)=>{var Mc1=N11();M11.exports=function A(F,B,$){if(Mc1(F))return;if($.hasOwnProperty("collation")&&!B.hasOwnProperty("collation"))B.collation=$.collation}});var j11=C((Gq0,P11)=>{var Rc1=HG(),{queryMiddlewareFunctions:Pc1,aggregateMiddlewareFunctions:jc1,modelMiddlewareFunctions:Ic1,documentMiddlewareFunctions:Tc1}=sG(),Oc1=Array.from(new Set([...Pc1,...jc1,...Ic1,...Tc1]));P11.exports=function A(F,B,$){let Z={useErrorHandlers:!0,numCallbackParams:1};F.$__insertMany=B.createWrapper("insertMany",F.$__insertMany,F,Z),B=B.filter((D)=>{if(Oc1.indexOf(D.name)!==-1)return!!D.model;return D.model!==!1});for(let D of Object.keys($))if(B.hasHooks(D)){let X=F[D];F[D]=function(){let J=arguments.length,Y=J>0?arguments[J-1]:null,W=typeof Y==="function"?Y:null,G=Array.prototype.slice.call(arguments,0,W==null?J:J-1);return Rc1(W,(Q)=>{B.execPre(D,F,G,function(q){if(q!=null)return Q(q);let z=0,H=X.apply(F,G.concat(U));if(H!=null&&typeof H.then==="function")H.then((K)=>U(null,K),(K)=>U(K));function U(K,E){if(z++>0)return;if(K!=null)return Q(K);B.execPost(D,F,[E],function(L){if(L!=null)return Q(L);Q(null,E)})}})},F.events)}}}});var T11=C((Qq0,I11)=>{I11.exports=function A(F,B){for(let $ in B.statics)F[$]=B.statics[$]}});var x11=C((zq0,_11)=>{var O11=nG(),Sc1=O9();_11.exports=S11;function S11(A,F,B){if(F==null)return F;return kc1(A,F,B),k11(A,F,B)}function kc1(A,F,B){for(let $ of A.childSchemas){let Z=$.model.path,D=$.schema;if(!Z)continue;let X=Sc1.get(Z,F);if(X==null||Array.isArray(X)&&X.flat(1/0).length===0)continue;S11(D,X,B)}}function k11(A,F,B){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let J of F)k11(A,J,B);return}if(A.discriminators&&Object.keys(A.discriminators).length>0)for(let J of Object.keys(A.discriminators)){let Y=A.discriminators[J],W=Y.discriminatorMapping.key,G=Y.discriminatorMapping.value;if(F[W]==G){A=Y;break}}let $=O11(A.options.timestamps,"createdAt"),Z=O11(A.options.timestamps,"updatedAt"),D=B?.currentTime,X=null;if(D!=null)X=D();else if(A.base?.now)X=A.base.now();else X=new Date;if($&&F[$]==null&&!B?.isUpdate)F[$]=X;if(Z)F[Z]=X}});var g11=C((qq0,f11)=>{var _c1=O9();f11.exports=b11;function b11(A,F,B){if(F==null)return F;let $=B,Z=null;if(Array.isArray(B)){$=[],Z=[];for(let D of B)if(D.length===1)Z.push(D[0]);else $.push(D)}return xc1(A,F,$),QM(A,F,Z)}function xc1(A,F,B){let $=!1;for(let Z of A.childSchemas){let D=Z.model.path,X=Z.schema;if(!D)continue;let J=_c1.get(D,F);if(J==null||Array.isArray(J)&&J.flat(1/0).length===0)continue;let Y=null;if(Array.isArray(B)){Y=[];for(let W of B)if(W[0]==D)Y.push(W.slice(1));if(Y.length===0)continue}b11(X,J,Y),$=!0}if(B&&B.length&&!$)QM(A,F,B)}function QM(A,F,B){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let $ of F)QM(A,$,B);return}if(A.discriminators&&Object.keys(A.discriminators).length>0)for(let $ of Object.keys(A.discriminators)){let Z=A.discriminators[$],D=Z.discriminatorMapping.key,X=Z.discriminatorMapping.value;if(F[D]==X){A=Z;break}}if(B==null)B=Object.keys(A.virtuals);for(let $ of B){if(A.virtuals[$]==null)continue;let Z=A.virtuals[$],D=Array.isArray($)?$:$.indexOf(".")===-1?[$]:$.split("."),X=F;for(let W=0;W<D.length-1;++W)X[D[W]]=D[W]in X?X[D[W]]:{},X=X[D[W]];let J=Z.applyGetters(X[D[D.length-1]],F);if(Z.options&&(Z.options.ref||Z.options.refPath)&&J===void 0)if(Z.options.justOne)J=null;else J=[];X[D[D.length-1]]=J}}});var eQ=C((Hq0,u11)=>{u11.exports=function A(F){if(!(this instanceof A))return new A(F);return this.val=F,this}});var RX=C((Uq0,y11)=>{/*!
 * ignore
 */y11.exports=new WeakMap});var m11=C((Cq0,d11)=>{var bc1=T2(),v11=RX(),fc1=w1().modelSymbol,gc1=f1();d11.exports=h11;var Az=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function h11(A,F,B,$,Z){let D=[],X=$.isVirtual&&$.justOne&&A.length>1?!1:$.sort&&A.length>1,J=$.$nullIfNotFound,Y,W,G;if(gc1.isMongooseArray(A))A=A.__array;let Q=0,q=A.length;if(X&&Z&&$[Az]===void 0){$[Az]=!1;for(let z in B)if(Array.isArray(B[z])){$[Az]=!0;break}}for(Q=0;Q<q;++Q){if(G=A[Q],Array.isArray(G)){h11(G,F,B,$,!0),D.push(G);continue}if(G===null&&X===!1){D.push(G);continue}if(G?.constructor?.name==="Binary"&&G.sub_type===4&&typeof G.toUUID==="function")W=String(G.toUUID());else if(G?.constructor?.name==="Buffer"&&G._subtype===4&&typeof G.toUUID==="function")W=String(G.toUUID());else W=String(G);if(Y=F[W],$.clone&&Y!=null)if($.lean){let z=v11.get(Y);Y=bc1(Y),v11.set(Y,z)}else Y=Y.constructor.hydrate(Y._doc);if(Z)if(Y)if(X){let z=B[W];if($[Az])D.push(Y);else D[z]=Y}else D.push(Y);else if(G!=null&&G[fc1]!=null)D.push(G);else D.push($.retainNullValues||J?null:G);else D[Q]=Y||null}if(A.length=0,D.length)D.forEach(function(z,H){A[H]=z})}});var zM=C((Kq0,c11)=>{c11.exports=Fz;/*!
 * ignore
 */function Fz(A,F){if(A.virtuals[F])return{virtual:A.virtuals[F],path:void 0};let B=F.split("."),$="",Z="";for(let D=0;D<B.length;++D){if($+=($.length>0?".":"")+B[D],A.virtuals[$]){if(D===B.length-1)return{virtual:A.virtuals[$],path:Z};continue}if(A.nested[$])continue;if(A.paths[$]&&A.paths[$].schema){A=A.paths[$].schema;let X=B.slice(D+1).join(".");if(A.virtuals[X]){if(D===B.length-2)return{virtual:A.virtuals[X],nestedSchemaPath:[Z,$].filter((J)=>!!J).join(".")};continue}if(D+1<B.length&&A.discriminators)for(let J of Object.keys(A.discriminators)){let Y=Fz(A.discriminators[J],X);if(Y!=null){let W=[Z,$,Y.nestedSchemaPath].filter((G)=>!!G).join(".");return{virtual:Y.virtual,nestedSchemaPath:W}}}Z+=(Z.length>0?".":"")+$,$="";continue}else if(A.paths[$]?.$isSchemaMap&&A.paths[$].$__schemaType?.schema){A=A.paths[$].$__schemaType.schema,++D;let X=B.slice(D+1).join(".");if(A.virtuals[X]){if(D===B.length-2)return{virtual:A.virtuals[X],nestedSchemaPath:[Z,$,"$*"].filter((J)=>!!J).join(".")};continue}if(D+1<B.length&&A.discriminators)for(let J of Object.keys(A.discriminators)){let Y=Fz(A.discriminators[J],X);if(Y!=null){let W=[Z,$,Y.nestedSchemaPath,"$*"].filter((G)=>!!G).join(".");return{virtual:Y.virtual,nestedSchemaPath:W}}}Z+=(Z.length>0?".":"")+"$*"+$,$=""}if(A.discriminators)for(let X of Object.keys(A.discriminators)){let J=Fz(A.discriminators[X],F);if(J)return J}return null}}});var p11=C((Bz,l11)=>{(function(A,F){typeof Bz==="object"&&typeof l11!=="undefined"?F(Bz):typeof define==="function"&&define.amd?define(["exports"],F):(A=typeof globalThis!=="undefined"?globalThis:A||self,F(A.sift={}))})(Bz,function(A){var F=function(j,x){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var W1 in p)if(Object.prototype.hasOwnProperty.call(p,W1))u[W1]=p[W1]},F(j,x)};function B(j,x){if(typeof x!=="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");F(j,x);function u(){this.constructor=j}j.prototype=x===null?Object.create(x):(u.prototype=x.prototype,new u)}typeof SuppressedError==="function"&&SuppressedError;var $=function(j){var x="[object "+j+"]";return function(u){return Z(u)===x}},Z=function(j){return Object.prototype.toString.call(j)},D=function(j){if(j instanceof Date)return j.getTime();else if(J(j))return j.map(D);else if(j&&typeof j.toJSON==="function")return j.toJSON();return j},X=function(j){return j==null?null:j},J=$("Array"),Y=$("Object"),W=$("Function"),G=function(j,x){return j.hasOwnProperty(x)&&!W(j[x])},Q=function(j){return j&&(j.constructor===Object||j.constructor===Array||j.constructor.toString()==="function Object() { [native code] }"||j.constructor.toString()==="function Array() { [native code] }")&&!j.toJSON},q=function(j,x){if(j==null&&j==x)return!0;if(j===x)return!0;if(Object.prototype.toString.call(j)!==Object.prototype.toString.call(x))return!1;if(J(j)){if(j.length!==x.length)return!1;for(var u=0,p=j.length;u<p;u++)if(!q(j[u],x[u]))return!1;return!0}else if(Y(j)){if(Object.keys(j).length!==Object.keys(x).length)return!1;for(var W1 in j)if(!q(j[W1],x[W1]))return!1;return!0}return!1},z=function(j,x,u,p,W1,M1){var u1=x[p];if(J(j)&&isNaN(Number(u1))&&!G(j,u1)){for(var B0=0,d6=j.length;B0<d6;B0++)if(!z(j[B0],x,u,p,B0,j))return!1}if(p===x.length||j==null)return u(j,W1,M1,p===0,p===x.length);return z(j[u1],x,u,p+1,u1,j)},H=function(){function j(x,u,p,W1){this.params=x,this.owneryQuery=u,this.options=p,this.name=W1,this.init()}return j.prototype.init=function(){},j.prototype.reset=function(){this.done=!1,this.keep=!1},j}(),U=function(j){B(x,j);function x(u,p,W1,M1){var u1=j.call(this,u,p,W1)||this;return u1.children=M1,u1}return x.prototype.reset=function(){this.keep=!1,this.done=!1;for(var u=0,p=this.children.length;u<p;u++)this.children[u].reset()},x.prototype.childrenNext=function(u,p,W1,M1,u1){var B0=!0,d6=!0;for(var J9=0,$8=this.children.length;J9<$8;J9++){var d5=this.children[J9];if(!d5.done)d5.next(u,p,W1,M1,u1);if(!d5.keep)d6=!1;if(d5.done){if(!d5.keep)break}else B0=!1}this.done=B0,this.keep=d6},x}(H),K=function(j){B(x,j);function x(u,p,W1,M1,u1){var B0=j.call(this,u,p,W1,M1)||this;return B0.name=u1,B0}return x}(U),E=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.next=function(u,p,W1,M1){this.childrenNext(u,p,W1,M1)},x}(U),L=function(j){B(x,j);function x(u,p,W1,M1,u1){var B0=j.call(this,p,W1,M1,u1)||this;return B0.keyPath=u,B0.propop=!0,B0._nextNestedValue=function(d6,J9,$8,d5,j71){return B0.childrenNext(d6,J9,$8,d5,j71),!B0.done},B0}return x.prototype.next=function(u,p,W1){z(u,this.keyPath,this._nextNestedValue,0,p,W1)},x}(U),V=function(j,x){if(j instanceof Function)return j;if(j instanceof RegExp)return function(p){var W1=typeof p==="string"&&j.test(p);return j.lastIndex=0,W1};var u=D(j);return function(p){return x(u,D(p))}},M=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){this._test=V(this.params,this.options.compare)},x.prototype.next=function(u,p,W1){if(!Array.isArray(W1)||W1.hasOwnProperty(p)){if(this._test(u,p,W1))this.done=!0,this.keep=!0}},x}(H),O=function(j,x,u){return new M(j,x,u)},R=function(j){return function(x,u,p,W1){return j(x,u,p,W1)}},_=function(j){return R(function(x,u,p,W1){var M1=typeof D(x),u1=j(x);return new M(function(B0){var d6=X(B0);return typeof D(d6)===M1&&u1(d6)},u,p,W1)})},P=function(j,x,u,p){var W1=p.operations[j];if(!W1)T(j);return W1(x,u,p,j)},T=function(j){throw new Error("Unsupported operation: ".concat(j))},N=function(j,x){for(var u in j)if(x.operations.hasOwnProperty(u)||u.charAt(0)==="$")return!0;return!1},y=function(j,x,u,p,W1){if(N(x,W1)){var M1=k(x,u,W1),u1=M1[0],B0=M1[1];if(B0.length)throw new Error("Property queries must contain only operations, or exact objects.");return new L(j,x,p,W1,u1)}return new L(j,x,p,W1,[new M(x,p,W1)])},S=function(j,x,u){if(x===void 0)x=null;var p=u===void 0?{}:u,W1=p.compare,M1=p.operations,u1={compare:W1||q,operations:Object.assign({},M1||{})},B0=k(j,null,u1),d6=B0[0],J9=B0[1],$8=[];if(d6.length)$8.push(new L([],j,x,u1,d6));if($8.push.apply($8,J9),$8.length===1)return $8[0];return new E(j,x,u1,$8)},k=function(j,x,u){var p=[],W1=[];if(!Q(j))return p.push(new M(j,j,u)),[p,W1];for(var M1 in j)if(u.operations.hasOwnProperty(M1)){var u1=P(M1,j[M1],j,u);if(u1){if(!u1.propop&&x&&!u.operations[x])throw new Error("Malformed query. ".concat(M1," cannot be matched against property."))}if(u1!=null)p.push(u1)}else if(M1.charAt(0)==="$")T(M1);else W1.push(y(M1.split("."),j[M1],M1,j,u));return[p,W1]},v=function(j){return function(x,u,p){return j.reset(),j.next(x,u,p),j.keep}},J1=function(j,x){if(x===void 0)x={};return v(S(j,null,x))},r=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){this._test=V(this.params,this.options.compare)},x.prototype.reset=function(){j.prototype.reset.call(this),this.keep=!0},x.prototype.next=function(u){if(this._test(u))this.done=!0,this.keep=!1},x}(H),q1=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=S(this.params,this.owneryQuery,this.options)},x.prototype.reset=function(){j.prototype.reset.call(this),this._queryOperation.reset()},x.prototype.next=function(u){if(J(u)){for(var p=0,W1=u.length;p<W1;p++){this._queryOperation.reset();var M1=u[p];this._queryOperation.next(M1,p,u,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},x}(H),C1=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){this._queryOperation=S(this.params,this.owneryQuery,this.options)},x.prototype.reset=function(){j.prototype.reset.call(this),this._queryOperation.reset()},x.prototype.next=function(u,p,W1,M1){this._queryOperation.next(u,p,W1,M1),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},x}(H),b1=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){},x.prototype.next=function(u){if(J(u)&&u.length===this.params)this.done=!0,this.keep=!0},x}(H),_1=function(j){if(j.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},O1=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!1,u}return x.prototype.init=function(){var u=this;_1(this.params),this._ops=this.params.map(function(p){return S(p,null,u.options)})},x.prototype.reset=function(){this.done=!1,this.keep=!1;for(var u=0,p=this._ops.length;u<p;u++)this._ops[u].reset()},x.prototype.next=function(u,p,W1){var M1=!1,u1=!1;for(var B0=0,d6=this._ops.length;B0<d6;B0++){var J9=this._ops[B0];if(J9.next(u,p,W1),J9.keep){M1=!0,u1=J9.keep;break}}this.keep=u1,this.done=M1},x}(H),J0=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!1,u}return x.prototype.next=function(u,p,W1){j.prototype.next.call(this,u,p,W1),this.keep=!this.keep},x}(O1),s0=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.init=function(){var u=this,p=Array.isArray(this.params)?this.params:[this.params];this._testers=p.map(function(W1){if(N(W1,u.options))throw new Error("cannot nest $ under ".concat(u.name.toLowerCase()));return V(W1,u.options.compare)})},x.prototype.next=function(u,p,W1){var M1=!1,u1=!1;for(var B0=0,d6=this._testers.length;B0<d6;B0++){var J9=this._testers[B0];if(J9(u)){M1=!0,u1=!0;break}}this.keep=u1,this.done=M1},x}(H),N6=function(j){B(x,j);function x(u,p,W1,M1){var u1=j.call(this,u,p,W1,M1)||this;return u1.propop=!0,u1._in=new s0(u,p,W1,M1),u1}return x.prototype.next=function(u,p,W1,M1){if(this._in.next(u,p,W1),J(W1)&&!M1){if(this._in.keep)this.keep=!1,this.done=!0;else if(p==W1.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},x.prototype.reset=function(){j.prototype.reset.call(this),this._in.reset()},x}(H),D6=function(j){B(x,j);function x(){var u=j!==null&&j.apply(this,arguments)||this;return u.propop=!0,u}return x.prototype.next=function(u,p,W1,M1,u1){if(!u1)this.done=!0,this.keep=!this.params;else if(W1.hasOwnProperty(p)===this.params)this.done=!0,this.keep=!0},x}(H),v6=function(j){B(x,j);function x(u,p,W1,M1){var u1=j.call(this,u,p,W1,u.map(function(B0){return S(B0,p,W1)}),M1)||this;return u1.propop=!1,_1(u),u1}return x.prototype.next=function(u,p,W1,M1){this.childrenNext(u,p,W1,M1)},x}(K),_4=function(j){B(x,j);function x(u,p,W1,M1){var u1=j.call(this,u,p,W1,u.map(function(B0){return S(B0,p,W1)}),M1)||this;return u1.propop=!0,u1}return x.prototype.next=function(u,p,W1,M1){this.childrenNext(u,p,W1,M1)},x}(K),a0=function(j,x,u){return new M(j,x,u)},Y1=function(j,x,u,p){return new r(j,x,u,p)},a=function(j,x,u,p){return new O1(j,x,u,p)},w=function(j,x,u,p){return new J0(j,x,u,p)},h=function(j,x,u,p){return new q1(j,x,u,p)},I=function(j,x,u,p){return new N6(j,x,u,p)},$1=function(j,x,u,p){return new s0(j,x,u,p)},e=_(function(j){return function(x){return x!=null&&x<j}}),D1=_(function(j){return function(x){return x===j||x<=j}}),E1=_(function(j){return function(x){return x!=null&&x>j}}),I0=_(function(j){return function(x){return x===j||x>=j}}),X6=function(j,x,u){var p=j[0],W1=j[1];return new M(function(M1){return D(M1)%p===W1},x,u)},r2=function(j,x,u,p){return new D6(j,x,u,p)},h6=function(j,x,u){return new M(new RegExp(j,x.$options),x,u)},_9=function(j,x,u,p){return new C1(j,x,u,p)},aX={number:function(j){return typeof j==="number"},string:function(j){return typeof j==="string"},bool:function(j){return typeof j==="boolean"},array:function(j){return Array.isArray(j)},null:function(j){return j===null},timestamp:function(j){return j instanceof Date}},tX=function(j,x,u){return new M(function(p){if(typeof j==="string"){if(!aX[j])throw new Error("Type alias does not exist");return aX[j](p)}return p!=null?p instanceof j||p.constructor===j:!1},x,u)},_R=function(j,x,u,p){return new v6(j,x,u,p)},xR=function(j,x,u,p){return new _4(j,x,u,p)},bR=function(j,x,u){return new b1(j,x,u,"$size")},fR=function(){return null},gR=function(j,x,u){var p;if(W(j))p=j;else if(!process.env.CSP_ENABLED)p=new Function("obj","return "+j);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new M(function(W1){return p.bind(W1)(W1)},x,u)},R71=Object.freeze({__proto__:null,$Size:b1,$all:xR,$and:_R,$elemMatch:h,$eq:a0,$exists:r2,$gt:E1,$gte:I0,$in:$1,$lt:e,$lte:D1,$mod:X6,$ne:Y1,$nin:I,$nor:w,$not:_9,$options:fR,$or:a,$regex:h6,$size:bR,$type:tX,$where:gR}),uR=function(j,x,u){var p=u===void 0?{}:u,W1=p.compare,M1=p.operations;return S(j,x,{compare:W1,operations:Object.assign({},R71,M1||{})})},P71=function(j,x){if(x===void 0)x={};var u=uR(j,null,x);return v(u)};A.$Size=b1,A.$all=xR,A.$and=_R,A.$elemMatch=h,A.$eq=a0,A.$exists=r2,A.$gt=E1,A.$gte=I0,A.$in=$1,A.$lt=e,A.$lte=D1,A.$mod=X6,A.$ne=Y1,A.$nin=I,A.$nor=w,A.$not=_9,A.$options=fR,A.$or=a,A.$regex=h6,A.$size=bR,A.$type=tX,A.$where=gR,A.EqualsOperation=M,A.createDefaultQueryOperation=uR,A.createEqualsOperation=O,A.createOperationTester=v,A.createQueryOperation=S,A.createQueryTester=J1,A.default=P71,Object.defineProperty(A,"__esModule",{value:!0})})});var n11=C((Eq0,qM)=>{var i11=p11();qM.exports=i11.default;Object.assign(qM.exports,i11)});var e11=C((Lq0,o11)=>{var uc1=tG(),yc1=eQ(),vc1=m11(),$z=f2(),hc1=zM(),r11=RX(),s11=pG(),dc1=Jw(),HM=O9(),a11=n11().default,Zz=f1(),{populateModelSymbol:mc1}=w1();o11.exports=function A(F){let B=Object.assign({},$z(F,"allOptions.options.options"),$z(F,"allOptions.options")),$=Object.assign({},F.options,B,{justOne:F.justOne,isVirtual:F.isVirtual});$.$nullIfNotFound=F.isVirtual;let Z=F.populatedModel,D=[].concat(F.rawIds);F.allIds=[].concat(F.allIds),vc1(F.rawIds,F.rawDocs,F.rawOrder,$);let{docs:X,rawIds:J,options:Y}=F,W=F.count&&F.isVirtual,G,Q=0;function q(z){if(++Q,W)return z;if(z instanceof yc1)return z.val;if(z===void 0)return z;let H=F.allIds[G];if(F.path.endsWith(".$*"))return PX(z,Y,$,H);if(F.justOne===!0&&Array.isArray(z)){let U=[];for(let K of z){let E=r11.get(K);if(E==null||E===Z)U.push(K)}while(z.length>U.length)Array.prototype.pop.apply(z,[]);for(let K=0;K<U.length;++K)z[K]=U[K];return PX(z[0],Y,$,H)}else if(F.justOne===!1&&!Array.isArray(z))return PX([z],Y,$,H);else if(F.justOne===!0&&!Array.isArray(z)&&Array.isArray(H))return PX(z,Y,$,z==null?z:H[Q-1]);return PX(z,Y,$,H)}for(G=0;G<X.length;++G){Q=0;let z=F.path.endsWith(".$*")?F.path.slice(0,-3):F.path,H=HM.get(z,X[G],s11);if(H==null&&!hc1(F.originalModel.schema,z))continue;let U;if(W)U=cc1(J[G]);else if(Array.isArray(F.match))U=Array.isArray(J[G])?J[G].filter((O)=>O==null||a11(F.match[G])(O)):[J[G]].filter((O)=>O==null||a11(F.match[G])(O))[0];else U=J[G];let K=F.originalModel.schema,E=$z(X[G],"$__",null)!=null,L=E?H instanceof Map:Zz.isPOJO(H);if(L=L&&$z(K._getSchema(z),"$isSchemaMap"),!F.isVirtual&&L){let O=H instanceof Map?Array.from(H.keys()):Object.keys(H);U=U.reduce((R,_,P)=>{return R.set(O[P],_),R},new Map)}if(E&&Array.isArray(U)){for(let O of U)if(O!=null&&O.$__!=null)O.$__.parent=X[G]}else if(E&&U!=null&&U.$__!=null)U.$__.parent=X[G];if(F.isVirtual&&E){if(X[G].$populated(z,F.justOne?D[0]:D,F.allOptions),Array.isArray(U))U=U.map((O)=>O==null?void 0:O);HM.set(z,U,X[G],function O(R,_,P){if(arguments.length>=3)return R[_]=P,R[_];if(R instanceof Map&&_==="$*")return[...R.values()];return R[_]},q,!1);continue}let V=z.split("."),M=X[G];for(let O=0;O<V.length-1;++O){if(Array.isArray(M)&&!Zz.isArrayIndex(V[O]))break;if(V[O]==="$*")break;if(M[V[O]]==null){let R=V.slice(0,O+1).join("."),_=K._getSchema(R);if(U==null&&_!=null&&_.$isMongooseArray)break;M[V[O]]={}}if(M=M[V[O]],typeof M!=="object")break}if(X[G].$__){if(F.allOptions.options[mc1]=F.allOptions.model,X[G].$populated(z,F.unpopulatedValues[G],F.allOptions.options),U!=null&&U.$__!=null)U.$__.wasPopulated={value:F.unpopulatedValues[G]};if(U instanceof Map&&!U.$isMongooseMap)U=new uc1(U,z,X[G],X[G].schema.path(z).$__schemaType)}if(HM.set(z,U,X[G],s11,q,!1),X[G].$__)dc1(X[G],[F.allOptions.options])}};function cc1(A){if(Array.isArray(A)){if(A.some((F)=>Array.isArray(F)||F===null))return A.map((F)=>{if(F==null)return 0;if(Array.isArray(F))return F.filter((B)=>B!=null).length;return 1});return A.filter((F)=>F!=null).length}return A==null?0:1}function PX(A,F,B,$){let Z=typeof B.transform==="function",D=Z?B.transform:(X)=>X;if(Array.isArray(A)){let X=[],J=A.length;for(let G=0;G<J;++G){let Q=A[G],q=Array.isArray($)?$[G]:$;if(!UM(Q)&&(!B.retainNullValues||Q!=null)&&!Z)continue;else if(!B.retainNullValues&&Q==null)continue;else if(Z)Q=D(UM(Q)?Q:null,q);if(t11(Q,F),X.push(Q),F.originalLimit&&X.length>=F.originalLimit)break}let Y=X.length;while(A.length>Y)Array.prototype.pop.apply(A,[]);let W=0;if(Zz.isMongooseArray(A))for(W=0;W<Y;++W)A.set(W,X[W],!0);else for(W=0;W<Y;++W)A[W]=X[W];return A}if(UM(A)||Zz.isPOJO(A))return t11(A,F),D(A,$);if(A instanceof Map)return A;if(B.justOne===!1)return[];return A==null?D(A,$):D(null,$)}function t11(A,F){if(A!=null&&F.excludeId)if(typeof A.$__setValue==="function")delete A._doc._id;else delete A._id}function UM(A){if(A==null)return!1;return Array.isArray(A)||A.$isMongooseMap||A.$__!=null||r11.has(A)}});var $01=C((wq0,B01)=>{var lc1=eQ(),pc1=Ww(),{trusted:Dz}=vB(),A01=pQ();B01.exports=function A(F,B,$,Z,D){let X=ic1(B);if($.size===1){let J=Array.from($)[0],Y=Z.schema.path(J);if(J!=="_id"||!X._id)F=F01(F,Y,D),X[J]=Dz({$in:F});else if(J==="_id"&&X._id){let G=A01(X[J])?X[J]:{$eq:X[J]};X[J]={...Dz({$in:F}),...G}}let W=pc1(J);for(let G=0;G<W.length-1;++G){let Q=W[G];if(X[Q]!=null&&X[Q].$elemMatch!=null){X[Q].$elemMatch[J.slice(Q.length+1)]=Dz({$in:F}),delete X[J];break}}}else{let J=[];if(Array.isArray(X.$or))X.$and=[{$or:X.$or},{$or:J}],delete X.$or;else X.$or=J;for(let Y of $)if(Y!=="_id"||!X._id){let W=Z.schema.path(Y);F=F01(F,W,D),J.push({[Y]:{$in:F}})}else if(Y==="_id"&&X._id){let W=A01(X[Y])?X[Y]:{$eq:X[Y]};X[Y]={...Dz({$in:F}),...W}}}return X};function F01(A,F,B){if(A=A.filter(($)=>!($ instanceof lc1)),!B)return A;return A.filter(($)=>{try{return F.cast($),!0}catch(Z){return!1}})}function ic1(A){if(Array.isArray(A)){if(A.length>1)return{$or:[].concat(A.map((F)=>Object.assign({},F)))};return Object.assign({},A[0])}return Object.assign({},A)}});var J01=C((Vq0,X01)=>{/*!
 * ignore
 */var Z01=hA(),nc1=f2(),sc1=J7(),D01=RX(),U$=O9(),ac1=w1().populateModelSymbol;X01.exports=function A(F,B,$,Z){let D=B.path(Z),X=$;if(D)return D;let J=B.discriminatorMapping&&B.discriminatorMapping.key;if(J&&F!=null){if($!=null&&$[J]!=null){let G=sc1(F.discriminators,$[J]);B=G?G.schema:B}else if(F.discriminators!=null)return Object.keys(F.discriminators).reduce((G,Q)=>{let q=F.discriminators[Q];return G.concat(A(q,q.schema,null,Z))},[])}function Y(G,Q,q,z){let H=G.length+1,U,K;while(H--){if(K=G.slice(0,H).join("."),U=Q.path(K),U==null)continue;if(U.caster){if(U.caster instanceof Z01)return U.caster;let V=null;if(U.schema!=null&&U.schema.discriminators!=null){let M=U.schema.discriminators,O=K+"."+U.schema.options.discriminatorKey,R=q?U$.get(O,q)||[]:[];V=Object.keys(M).reduce(function(_,P){let T=M[P].discriminatorMapping.value;if($==null||R.indexOf(P)!==-1||R.indexOf(T)!==-1)_.push(M[P]);return _},[])}if(H!==G.length&&U.schema){let M;if(G[H]==="$"){if(H+1===G.length)return U;if(M=Y(G.slice(H+1),Q,q?U$.get(K,q):null,z.concat(G.slice(0,H))),M)M.$parentSchemaDocArray=M.$parentSchemaDocArray||(U.schema.$isSingleNested?null:U);return M}if(V!=null&&V.length>0){M=[];for(let O of V){let R=Y(G.slice(H),O,q?U$.get(K,q):null,z.concat(G.slice(0,H)));if(R!=null){if(R.$parentSchemaDocArray=R.$parentSchemaDocArray||(U.schema.$isSingleNested?null:U),R.$parentSchemaDocArray)M.$parentSchemaDocArray=R.$parentSchemaDocArray;M.push(R)}}return M}else{if(M=Y(G.slice(H),U.schema,q?U$.get(K,q):null,z.concat(G.slice(0,H))),M)M.$parentSchemaDocArray=M.$parentSchemaDocArray||(U.schema.$isSingleNested?null:U);return M}}else if(H!==G.length&&U.$isMongooseArray&&U.casterConstructor.$isMongooseArray){let M=U;while(M.$isMongooseArray&&!M.$isMongooseDocumentArray)M=M.casterConstructor;let O=Y(G.slice(H),M.schema,null,z.concat(G.slice(0,H)));if(O!=null)return O;if(M.schema.discriminators){let R=[];for(let _ of Object.keys(M.schema.discriminators)){let P=M.schema.discriminators[_]||M.schema,T=Y(G.slice(H),P,null,z.concat(G.slice(0,H)));if(T!=null)R.push(T)}if(R.length>0)return R}}}else if(U.$isSchemaMap&&U.$__schemaType instanceof Z01)return U.$__schemaType;let E=z.concat([K]).join(".");if(X!=null&&X.$__&&X.$populated(E,!0)&&H<G.length){let V=X.$populated(E,!0).options[ac1];if(V!=null)return Y(G.slice(H),V.schema,q?U$.get(K,q):null,z.concat(G.slice(0,H)))}let L=nc1(X,K);if(L!=null){let V=Array.isArray(L)&&L.length>0?D01.get(L[0]):D01.get(L),M=V!=null?V.schema:null;if(M!=null){let O=Y(G.slice(H),M,q?U$.get(K,q):null,z.concat(G.slice(0,H)));if(O!=null)return O.$parentSchemaDocArray=O.$parentSchemaDocArray||(M.$isSingleNested?null:M),O}}return U}}let W=Z.split(".");for(let G=0;G<W.length;++G)if(W[G]==="$")W[G]="0";return Y(W,B,$,[])}});var q01=C((Nq0,z01)=>{var VM=r4(),tc1=eQ(),rc1=T2(),Q7=f2(),oc1=J7(),ec1=I4(),Y01=J01(),Al1=zM(),jX=pG(),FF=O9(),Xz=lw(),G4=f1(),EM=w1().modelSymbol,CM=w1().populateModelSymbol,LM=vA().schemaMixedSymbol,Fl1=sL();z01.exports=function A(F,B,$){let Z,D=B.length,X=[],J=$.model&&$.model.modelName||$.model,Y,W,G,Q={},q=F.schema;if($._localModel!=null&&$._localModel.schema.nested[$.path])return[];let z=Al1(F.schema,$.path);if((z==null?null:z.virtual)!=null)return Bl1(F,B,$,z);let U=Y01(F,q,null,$.path);if(U=Array.isArray(U)?U:[U].filter((L)=>L!=null),!($.strictPopulate===!1||$.options?.strictPopulate===!1)&&U.length===0&&$._localModel!=null)return new Fl1($._fullPath||$.path);for(let L=0;L<D;L++){Z=B[L];let V=null;if(Z.$__!=null&&Z.populated($.path)){if(($.forceRepopulate!=null?$.forceRepopulate:Z.constructor.base.options.forceRepopulate)===!1)continue}let M=Z!=null&&Z.$__!=null?Z.$__schema:q;if(Y=Y01(F,M,Z,$.path),Y!=null&&Y.$isMongooseDocumentArray&&Y.options.ref==null&&Y.options.refPath==null)continue;if(Y&&Y.$parentSchemaDocArray&&Q7($,"options.sort")!=null)return new VM("Cannot populate with `sort` on path "+$.path+" because it is a subproperty of a document array");G=null;let R=!1,_=null,P=null,T=null;if(Y!=null&&Y.instance==="Embedded"){if(Y.options.ref){let q1={localField:$.path+"._id",foreignField:"_id",justOne:!0},C1=E(Z,Y,J,F),b1=FF.get($.path,Z),_1=FF.get("_id",b1);wM(F,X,Q,C1.modelNames,$,q1,_1,Z,P,b1)}continue}if(Array.isArray(Y)){let q1=Y;for(let C1 of q1){let b1,_1;try{_1=E(Z,C1,J,F),b1=_1.modelNames,R=R||_1.isRefPath,_=_||_1.refPath,V=_1.justOne}catch(O1){return O1}if(R&&!_1.isRefPath)continue;if(!b1)continue;G=G||[];for(let O1 of b1)if(G.indexOf(O1)===-1)G.push(O1)}}else{try{let q1=E(Z,Y,J,F);if(G=q1.modelNames,R=q1.isRefPath,_=_||q1.refPath,V=q1.justOne,P=Q7(Y,"options.populate",null),R)T=G,G=Array.from(new Set(G))}catch(q1){return q1}if(!G)continue}let N={},y=$.path,S="_id";if("justOne"in $&&$.justOne!==void 0)V=$.justOne;else if(Y&&!Y[LM]){if($.path.endsWith("."+Y.path)||$.path===Y.path)V=Array.isArray(Y)?Y.every((q1)=>!q1.$isMongooseArray):!Y.$isMongooseArray}if(!G)continue;N.isVirtual=!1,N.justOne=V,N.localField=y,N.foreignField=S;let k=G01(Z,y,F,$,null,Y),v=String(G4.getValue(S,Z));$._docs[v]=Array.isArray(k)?k.slice():k;let J1=Q7($,"match",null),r=typeof J1==="function";if(r)J1=J1.call(Z,Z);if(MM(J1),N.match=J1,N.hasMatchFunction=r,N.isRefPath=R,N.modelNamesInOrder=T,R)G=$l1(Z,q,N,$,_,k)||G;try{wM(F,X,Q,G,$,N,k,Z,P)}catch(q1){return q1}}return X;function E(L,V,M,O){let R,_=!1,P=null,T=V;if(V&&V.instance==="Array")V=V.caster;if(V&&V.$isSchemaMap)V=V.$__schemaType;let N=V&&V.options&&V.options.ref;if(W=V&&V.options&&V.options.refPath,V!=null&&V[LM]&&!N&&!W&&!M)return{modelNames:null};if(M)R=[M];else if(W!=null){if(typeof W==="function"){let y=$.path.slice(0,$.path.length-V.path.length-1),S=FF.get(y,L,jX),k=Array.isArray(S)?G4.array.flatten(S):S?[S]:[];R=new Set;for(let v of k)W=W.call(v,v,$.path),Xz(W,L,$.path,q,$._queryProjection).forEach((J1)=>R.add(J1));R=Array.from(R)}else R=Xz(W,L,$.path,q,$._queryProjection);_=!0}else{let y,S,k,v,J1=O,r=O.schema.options.discriminatorKey;if(!V&&r&&(v=G4.getValue(r,L))){let q1=oc1(O.discriminators,v)||O;if(q1!=null)J1=q1;else try{J1=NM(O.db,v)}catch(C1){return C1}if(k=J1.schema._getSchema($.path),k&&k.caster)k=k.caster}else k=V;if(T&&T.path.endsWith(".$*"))P=!T.$isMongooseArray&&!T._arrayPath;else if(k!=null)P=!k.$isMongooseArray&&!k._arrayPath;if((y=Q7(k,"options.ref"))!=null)if(k!=null&&typeof y==="function"&&$.path.endsWith("."+k.path)){R=new Set;let q1=$.path.slice(0,$.path.length-k.path.length-1),C1=FF.get(q1,L,jX),b1=Array.isArray(C1)?G4.array.flatten(C1):C1?[C1]:[];for(let _1 of b1)R.add(KM(y,_1));if(b1.length===0)R=[KM(y,L)];else R=Array.from(R)}else y=KM(y,L),R=[y];else if((k=Q7(V,"options.refPath"))!=null)if(_=!0,typeof S==="function"){let q1=$.path.slice(0,$.path.length-k.path.length-1),C1=FF.get(q1,L,jX),b1=Array.isArray(C1)?G4.array.flatten(C1):C1?[C1]:[];R=new Set;for(let _1 of b1)S=S.call(_1,_1,$.path),Xz(S,L,$.path,q,$._queryProjection).forEach((O1)=>R.add(O1));R=Array.from(R)}else R=Xz(S,L,$.path,q,$._queryProjection)}if(!R)if($._localModel==null)R=[O.modelName];else return{modelNames:R,justOne:P,isRefPath:_,refPath:W};if(!Array.isArray(R))R=[R];return{modelNames:R,justOne:P,isRefPath:_,refPath:W}}};/*!
 * ignore
 */function Bl1(A,F,B,$){let Z=[],D={},X=$.virtual;for(let J of F){let Y=null,W={},G,Q=$.nestedSchemaPath?$.nestedSchemaPath+".":"";if(typeof B.localField==="string")G=B.localField;else if(typeof X.options.localField==="function")G=Q+X.options.localField.call(J,J);else if(Array.isArray(X.options.localField))G=X.options.localField.map((L)=>Q+L);else G=Q+X.options.localField;if(W.count=X.options.count,X.options.skip!=null&&!B.hasOwnProperty("skip"))B.skip=X.options.skip;if(X.options.limit!=null&&!B.hasOwnProperty("limit"))B.limit=X.options.limit;if(X.options.perDocumentLimit!=null&&!B.hasOwnProperty("perDocumentLimit"))B.perDocumentLimit=X.options.perDocumentLimit;let q=X.options.foreignField;if(!G||!q)return new VM(`Cannot populate virtual \`${B.path}\` on model \`${A.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof G==="function")G=G.call(J,J);if(typeof q==="function")q=q.call(J,J);W.isRefPath=!1;let z=null;if("justOne"in B&&B.justOne!==void 0)z=B.justOne;if(Y=X._getModelNamesForPopulate(J),X.options.refPath)z=!!X.options.justOne,W.isRefPath=!0;else if(X.options.ref)z=!!X.options.justOne;W.isVirtual=!0,W.virtual=X,W.justOne=z;let H=Q7(W,"virtual.options.match",null)||Q7(W,"virtual.options.options.match",null),U=Q7(B,"match",null)||H,K=typeof U==="function";if(K)U=U.call(J,J,W.virtual);if(Array.isArray(G)&&Array.isArray(q)&&G.length===q.length){U=Object.assign({},U);for(let L=1;L<G.length;++L)U[q[L]]=Q01(FF.get(G[L],J,jX),A.schema),K=!0;G=G[0],q=q[0]}W.localField=G,W.foreignField=q,W.match=U,W.hasMatchFunction=K,MM(U);let E=G01(J,G,A,B,X);try{wM(A,Z,D,Y,B,W,E,J)}catch(L){return L}}return Z}/*!
 * ignore
 */function wM(A,F,B,$,Z,D,X,J,Y,W){let G=Z.connection!=null?Z.connection:A.db;if(W=W===void 0?X:W,Array.isArray(W))W=G4.cloneArrays(W);if($==null)return;let Q=G4.array.flatten($),q=Q.length;while(q--){let z=Q[q];if(z==null)continue;let H;if(Z.model&&Z.model[EM])H=Z.model;else if(z[EM])H=z,z=H.modelName;else try{H=NM(G,z)}catch(L){if(X!==void 0)throw L;H=null}let U=X,K=D.modelNamesInOrder?D.modelNamesInOrder:$;if(D.isRefPath&&Array.isArray(X)&&X.length===K.length)U=W01(X,K,z);let E=Z.perDocumentLimit==null?Q7(Z,"options.perDocumentLimit",null):Z.perDocumentLimit;if(!B[z]||E!=null){let L={model:H};if(D.isVirtual&&Q7(D.virtual,"options.options"))L.options=rc1(D.virtual.options.options);else if(Y!=null)L.options=Object.assign({},Y);G4.merge(L,Z),Z[CM]=H,L[CM]=H,B[z]={model:H,options:L,match:D.hasMatchFunction?[D.match]:D.match,docs:[J],ids:[U],allIds:[X],unpopulatedValues:[W],localField:new Set([D.localField]),foreignField:new Set([D.foreignField]),justOne:D.justOne,isVirtual:D.isVirtual,virtual:D.virtual,count:D.count,[CM]:H},F.push(B[z])}else if(B[z].localField.add(D.localField),B[z].foreignField.add(D.foreignField),B[z].docs.push(J),B[z].ids.push(U),B[z].allIds.push(X),B[z].unpopulatedValues.push(W),D.hasMatchFunction)B[z].match.push(D.match)}}function NM(A,F){if(A.models[F]==null&&A._parent!=null)return NM(A._parent,F);return A.model(F)}function W01(A,F,B){if(!Array.isArray(F))return F===B?Array.isArray(A)?G4.array.flatten(A):[A]:[];if(Array.isArray(A)&&Array.isArray(F))return A.flatMap(($,Z)=>W01($,F[Z],B));return[]}/*!
 * ignore
 */function KM(A,F){if(typeof A==="function"&&!A[EM])return A.call(F,F);return A}/*!
 * ignore
 */function G01(A,F,B,$,Z,D){let X=B.schema._getPathType(F),J=X==="real"?B.schema.path(F):X.schema,Y=J&&J.getters?J.getters:[];F=J!=null&&J.instance==="Embedded"?F+"._id":F;let W=Q7($,"options",{}),G="getters"in W?W.getters:Q7(Z,"options.getters",!1);if(Y.length!==0&&G){let Q=A.$__!=null?A:B.hydrate(A),q=G4.getValue(F,A);if(Array.isArray(q)){let z=G4.getValue(F.split(".").slice(0,-1),Q);return q.map((H,U)=>J.applyGetters(H,z[U]))}else return J.applyGetters(q,Q)}else return Q01(FF.get(F,A,jX),D)}function Q01(A,F){if(A!=null&&A.$__!=null)return A._doc._id;if(A!=null&&A._id!=null&&(F==null||!F.$isSchemaMap))return A._id;if(Array.isArray(A)){let B=A.__array!=null?A.__array:A;for(let $=0;$<B.length;++$)if(B[$]!=null&&B[$].$__!=null)B[$]=B[$]._doc._id;if(G4.isMongooseArray(A)&&A.$schema())return A.$schema()._castForPopulate(A,A.$parent());return[].concat(A)}if(ec1(A)==="Object"&&(F==null||F[LM]==null)){let B=[];for(let $ of Object.keys(A))B.push(A[$]);return B}if(A instanceof Map)return Array.from(A.values());return A}/*!
 * ignore
 */function $l1(A,F,B,$,Z,D){if(!B.isRefPath||Z==null)return;let X=Z.split("."),J="",Y=void 0;for(let W=0;W<X.length;++W){let G=X[W];J=J+(J.length===0?"":".")+G;let Q=F.path(J);if(Q!=null&&Q.$isMongooseArray&&Q.caster.discriminators!=null&&Object.keys(Q.caster.discriminators).length!==0){let q=G4.getValue(J,A),z=$.path.substring(J.length+1),H=Q.caster.schema.options.discriminatorKey;Y=[];for(let U of q){let K=G4.getValue(H,U),E=Q.caster.discriminators[K],L=E&&E.schema;if(L==null)continue;let V=L.path(z);if(V==null||V.options.refPath==null){let O=G4.getValue(B.localField.substring(J.length+1),U);D.forEach((R,_)=>{if(R===O)D[_]=tc1(R)});continue}let M=G4.getValue(X.slice(W+1).join("."),U);Y.push(M)}}}return Y}function MM(A){if(A==null)return;if(typeof A!=="object")return;for(let F of Object.keys(A)){if(F==="$where")throw new VM("Cannot use $where filter with populate() match");if(A[F]!=null&&typeof A[F]==="object")MM(A[F])}}});var U01=C((Mq0,H01)=>{var Zl1=f2();H01.exports=function A(F){if(Array.isArray(F)){let $=Object.keys(F[0]);return $.length===1&&$[0]==="_id"&&F[0]._id!=="hashed"}if(typeof F!=="object")return!1;let B=Zl1(F,"key",{});return Object.keys(B).length===1&&B.hasOwnProperty("_id")}});var E01=C((Rq0,K01)=>{var Jz=f2(),C01=f1();K01.exports=function A(F,B,$){if($.textIndexVersion!=null){delete $.key._fts,delete $.key._ftsx;let J={...$.weights,...$.key};if(Object.keys(J).length!==Object.keys(F).length)return!1;for(let Y of Object.keys(J)){if(!(Y in F))return!1;let W=J[Y];if(W!==Jz(B,"weights."+Y)&&!(W===1&&Jz(B,"weights."+Y)==null))return!1}if(B.default_language!==$.default_language)return $.default_language==="english"&&B.default_language==null;return!0}let Z=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let J of Z){if(!(J in B)&&!(J in $))continue;if(J==="collation"){if(B[J]==null||$[J]==null)return B[J]==null&&$[J]==null;let Y=Object.keys(B.collation),W=B.collation,G=$.collation;for(let Q of Y)if(Jz(W,Q)!==Jz(G,Q))return!1}else if(!C01.deepEqual(B[J],$[J]))return!1}let D=Object.keys(F),X=Object.keys($.key);if(D.length!==X.length)return!1;for(let J=0;J<D.length;++J){if(D[J]!==X[J])return!1;if(!C01.deepEqual(F[D[J]],$.key[X[J]]))return!1}return!0}});var w01=C((Pq0,L01)=>{L01.exports=function A(F,B){if(B.timeseries==null)return!1;let{timeField:$,metaField:Z}=B.timeseries;if(typeof $!=="string"||typeof Z!=="string")return!1;return Object.keys(F.key).length===2&&F.key[$]===1&&F.key[Z]===1}});var R01=C((jq0,M01)=>{var Dl1=pQ();function Xl1(A,F){return N01({baseModelName:A.baseModelName,discriminatorMapping:A.schema.discriminatorMapping,indexes:F,indexesType:"schema"})}function Jl1(A,F){return N01({baseModelName:A.baseModelName,discriminatorMapping:A.schema.discriminatorMapping,indexes:F,indexesType:"db"})}M01.exports={getRelatedSchemaIndexes:Xl1,getRelatedDBIndexes:Jl1};function N01({baseModelName:A,discriminatorMapping:F,indexes:B,indexesType:$}){let Z=F&&F.key,D=F&&F.value;if(!Z)return B;if(Boolean(A))return B.filter((J)=>{let Y=V01(J,$);return Y&&Y[Z]===D});return B.filter((J)=>{let Y=V01(J,$);return!Y||!Y[Z]||Dl1(Y[Z])&&!("$eq"in Y[Z])})}function V01(A,F){if(F==="schema"){let B=A[1];return B&&B.partialFilterExpression}return A.partialFilterExpression}});var j01=C((Iq0,P01)=>{P01.exports=Yl1;/*!
 * ignore
 */function Yl1(A,F,B){let $=0,Z=0,D=null;if(F<=0)throw new Error("Limit must be positive");if(A.length===0)return B(null,[]);for(let W=0;W<A.length&&W<F;++W)X();function X(){A[Z+$](Y(Z+$)),++$}let J=[];function Y(W){return(G,Q)=>{if(--$,++Z,D!=null)return;if(G!=null)return D=G,B(D);if(J[W]=Q,Z===A.length)return B(null,J);else if(Z+$<A.length)X()}}}});var T01=C((Tq0,I01)=>{I01.exports=function A(F,B,$){if(B==null)return;for(let Z=0;Z<B.length;++Z)if(Array.isArray(B[Z]))A(F,B[Z],$+"."+Z);else F.push($+"."+Z)}});var x01=C((Oq0,_01)=>{var O01=f2(),S01=O9(),k01=tN();/*!
 * ignore
 */_01.exports=function A(F,B,$){let Z=k01(O01(B,"select",null),!0)||k01(O01(B,"options.select",null),!0);if(Z==null)return;for(let D of F){if(!Z.hasOwnProperty("-"+D))continue;for(let X of $)if(X.$__!=null)S01.unset(D,X._doc);else S01.unset(D,X)}}});var GM=C((o01,e01)=>{/*!
 * Module dependencies.
 */var Wl1=XM(),Gl1=jL(),j8=X7(),Ql1=WG(),PM=A1("events").EventEmitter,TM=fA(),Gz=ZN(),g1=r4(),zl1=EG(),ql1=yL(),Yz=sQ(),Hl1=z11(),jM=cA(),Wz=uA(),d01=bL(),b01=gL(),Ul1=LG(),Cl1=H11(),Kl1=WM(),El1=aG(),m01=K11(),Ll1=w11(),wl1=gN(),c01=R11(),Vl1=j11(),l01=T11(),Nl1=x11(),p01=uN(),Ml1=g11(),Rl1=e11(),Pl1=NN(),k3=T2(),jl1=$01(),i01=wN(),RM=YN(),n01=MG(),Il1=CQ(),IM=MV(),OX=f2(),Tl1=I4(),IX=J7(),Ol1=q01(),SX=B7(),OM=t7().internalToObjectOptions,SM=U01(),s01=E01(),Sl1=w01(),{getRelatedDBIndexes:kl1,getRelatedSchemaIndexes:_l1}=R01(),kM=iw(),xl1=PG(),bl1=RX(),fl1=j01(),gl1=ZM(),a01=T01(),ul1=x01(),yl1=qN(),f01=A1("util"),n0=f1(),vl1=Yw(),hl1=dL(),dl1=KG(),BF=MN(),$F=Symbol("mongoose#Model#collection"),ZF=Symbol("mongoose#Model#db"),t01=w1().modelSymbol,TX=Symbol("mongoose#Model#subclassed"),{VERSION_INC:Qz,VERSION_WHERE:g01,VERSION_ALL:ml1}=j8,cl1=Object.assign({},OM,{bson:!0});function B1(A,F,B){if(F instanceof jM)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof A==="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");j8.call(this,A,F,B)}Object.setPrototypeOf(B1.prototype,j8.prototype);B1.prototype.$isMongooseModelPrototype=!0;B1.prototype.db;B1.useConnection=function A(F){if(!F)throw new Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[ZF],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[$F];this.db=F;let B=F.collection(this.modelName,F.options);return this.prototype.collection=B,this.prototype.$collection=B,this.prototype[$F]=B,this.prototype.db=F,this.prototype[ZF]=F,this.collection=B,this.$__collection=B,F.models[this.modelName]=this,this};B1.prototype.collection;B1.prototype.$__collection;B1.prototype.modelName;B1.prototype.$where;B1.prototype.baseModelName;B1.events;B1._middleware;/*!
 * ignore
 */function r01(A,F){if(A.$where==null)return;for(let B of Object.keys(A.$where))F[B]=A.$where[B]}/*!
 * ignore
 */B1.prototype.$__handleSave=function(A,F){let B={};if(p01(this.$__schema,A),typeof A.writeConcern!=="undefined"){if(B.writeConcern={},"w"in A.writeConcern)B.writeConcern.w=A.writeConcern.w;if("j"in A.writeConcern)B.writeConcern.j=A.writeConcern.j;if("wtimeout"in A.writeConcern)B.writeConcern.wtimeout=A.writeConcern.wtimeout}else{if("w"in A)B.w=A.w;if("j"in A)B.j=A.j;if("wtimeout"in A)B.wtimeout=A.wtimeout}if("checkKeys"in A)B.checkKeys=A.checkKeys;let $=this.$session(),Z=this[ZF].base.transactionAsyncLocalStorage?.getStore();if($!=null)B.session=$;else if(!A.hasOwnProperty("session")&&Z?.session!=null)B.session=Z.session;if(this.$isNew){let J=this.toObject(cl1);if((J||{})._id===void 0){SX(function(){F(new g1("document must have an _id before saving"))});return}this.$__version(!0,J),this[$F].insertOne(J,B).then((Y)=>F(null,Y),(Y)=>{C$(this,!0),F(Y,null)}),this.$__reset(),C$(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let D=this.$__delta();if(A.pathsToSave)for(let J in D[1].$set)if(A.pathsToSave.includes(J))continue;else if(A.pathsToSave.some((Y)=>J.slice(0,Y.length)===Y&&J.charAt(Y.length)==="."))continue;else delete D[1].$set[J];if(D){if(D instanceof g1){F(D);return}let J=this.$__where(D[0]);if(J instanceof g1){F(J);return}r01(this,J);let Y=D[1];if(this.$__schema.options.minimize)for(let W of Object.values(Y)){if(W==null)continue;for(let G of Object.keys(W)){if(W[G]==null||typeof W[G]!=="object")continue;if(!n0.isPOJO(W[G]))continue;if(vl1(W[G]),Object.keys(W[G]).length===0)delete W[G],Y.$unset=Y.$unset||{},Y.$unset[G]=1}}this[$F].updateOne(J,Y,B).then((W)=>{if(W==null)W={$where:J};else W.$where=J;F(null,W)},(W)=>{this.$__undoReset(),F(W)})}else{X.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),C$(this,!1);function X(){let J=Object.assign({},A,B),Y=this.$__where(),W=this.$__schema.options.optimisticConcurrency;if(W&&!Array.isArray(W)){let G=this.$__schema.options.versionKey,Q=this.$__getValue(G);if(Q!=null)Y[G]=Q}wl1(this.$__schema,J),this.constructor.collection.findOne(Y,J).then((G)=>{F(null,{$where:Y,matchedCount:!G?0:1})}).catch(F)}};/*!
 * ignore
 */B1.prototype.$__save=function(A,F){this.$__handleSave(A,(B,$)=>{if(B)return B=this.$__schema._transformDuplicateKeyError(B),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},(J)=>{F(J,this)});let Z=0;if((A!=null?A.writeConcern!=null?A.writeConcern.w:A.w:0)!==0){if($!=null)if(Array.isArray($))Z=$.length;else if($.matchedCount!=null)Z=$.matchedCount;else Z=$;if(this.$__.version&&!this.$__.inserting){let J=Qz===(Qz&this.$__.version);this.$__.version=void 0;let Y=this.$__schema.options.versionKey,W=this.$__getValue(Y)||0;if(Z<=0){this.$__undoReset();let G=this.$__.$versionError||new d01(this,W,this.$__.modifiedPaths);return F(G,this)}if(J)this.$__setValue(Y,W+1)}if($!=null&&Z<=0)return this.$__undoReset(),B=new Ql1($.$where,this.constructor.modelName,Z,$),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},(Y)=>{F(Y,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,Z),this.constructor.emit("save",this,Z),F(null,this)})};/*!
 * ignore
 */function ll1(A,F,B){let $=A.$__schema.options.versionKey;if(!$)return null;let Z=A.$__getValue($)||0;return new d01(A,Z,F.concat(B))}B1.prototype.save=async function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new g1("Model.prototype.save() no longer accepts a callback");let B;if(this.$op="save",this.$__.saving)B=new b01(this);else this.$__.saving=new b01(this);if(F=new Hl1(F),F.hasOwnProperty("session"))this.$session(F.session);if(this.$__.timestamps!=null)F.timestamps=this.$__.timestamps;if(this.$__.$versionError=ll1(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),B)throw this.$__handleReject(B),B;return this.$__.saveOptions=F,await new Promise(($,Z)=>{this.$__save(F,(D)=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,D!=null)return this.$__handleReject(D),Z(D);$()})}),this};B1.prototype.$save=B1.prototype.save;B1.prototype.$__version=function(A,F){let B=this.$__schema.options.versionKey;if(A===!0){if(B)yl1(F,B,0),this.$__setValue(B,0);return}if(B===!1)return;if(!this.$__isSelected(B))return;if(g01===(g01&this.$__.version)){let $=this.$__getValue(B);if($!=null)A[B]=$}if(Qz===(Qz&this.$__.version))if(OX(F.$set,B,null)!=null)++F.$set[B];else F.$inc=F.$inc||{},F.$inc[B]=1};B1.prototype.increment=function A(){return this.$__.version=ml1,this};B1.prototype.$__where=function A(F){if(F||(F={}),!F._id)F._id=this._doc._id;if(this._doc._id===void 0)return new g1("No _id found on document!");return F};B1.prototype.deleteOne=function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new g1("Model.prototype.deleteOne() no longer accepts a callback");if(!F)F={};if(F.hasOwnProperty("session"))this.$session(F.session);let B=this,$=this.$__where();if($ instanceof Error)throw $;let Z=B.constructor.deleteOne($,F);if(this.$session()!=null){if(!("session"in Z.options))Z.options.session=this.$session()}return Z.pre(function D(X){B.constructor._middleware.execPre("deleteOne",B,[B],X)}),Z.pre(function D(X){IM(B.$getAllSubdocs(),(J,Y)=>{J.constructor._middleware.execPre("deleteOne",J,[J],Y)},X)}),Z.pre(function D(X){if(B.$__.isDeleted)return X(TM.skipWrappedFunction());return X()}),Z.post(function D(X){IM(B.$getAllSubdocs(),(J,Y)=>{J.constructor._middleware.execPost("deleteOne",J,[J],{},Y)},X)}),Z.post(function D(X){B.constructor._middleware.execPost("deleteOne",B,[B],{},X)}),Z};B1.prototype.$model=function A(F){if(arguments.length===0)return this.constructor;return this[ZF].model(F)};B1.prototype.model=B1.prototype.$model;B1.exists=function A(F,B){if(l1(this,"exists"),typeof arguments[2]==="function")throw new g1("Model.exists() no longer accepts a callback");return this.findOne(F).select({_id:1}).lean().setOptions(B)};B1.discriminator=function(A,F,B){let $;if(typeof A==="function"){if($=A,A=n0.getFunctionName($),!($.prototype instanceof B1))throw new g1("The provided class "+A+" must extend Model")}B=B||{};let Z=n0.isPOJO(B)?B.value:B,D=typeof B.clone==="boolean"?B.clone:!0,X=typeof B.mergePlugins==="boolean"?B.mergePlugins:!0,J=typeof B.overwriteModels==="boolean"?B.overwriteModels:!1;if(l1(this,"discriminator"),n0.isObject(F)&&!F.instanceOfSchema)F=new jM(F);if(F instanceof jM&&D)F=F.clone();if(F=Il1(this,A,F,Z,X,B.mergeHooks,J),this.db.models[A]&&!F.options.overwriteModels&&!J)throw new ql1(A);F.$isRootDiscriminator=!0,F.$globalPluginsApplied=!0,$=this.db.model($||A,F,this.$__collection.name),this.discriminators[A]=$;let Y=this.discriminators[A];if(Object.setPrototypeOf(Y.prototype,this.prototype),Object.defineProperty(Y,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),m01(Y,F),l01(Y,F),this[TX]!=null)for(let W of this[TX])W.discriminators=W.discriminators||{},W.discriminators[A]=$.__subclass($.db,F,W.collection.name);return Y};function l1(A,F){if(A==null||A===global)throw new g1("`Model."+F+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+F+"()` where `MyModel` is a Mongoose model.");else if(A[t01]==null)throw new g1("`Model."+F+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+F+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let A in PM.prototype)B1[A]=PM.prototype[A];B1.init=function A(){if(l1(this,"init"),typeof arguments[0]==="function")throw new g1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let F=this.db,B=async()=>{if(!n0.getOption("autoIndex",this.schema.options,F.config,F.base.options))return;return await this.ensureIndexes({_automatic:!0})},$=async()=>{if(!n0.getOption("autoSearchIndex",this.schema.options,F.config,F.base.options))return;return await this.ensureSearchIndexes()},Z=async()=>{let J=n0.getOption("autoCreate",this.schema.options,F.config);if(J==null)await F._waitForConnect(!0),J=n0.getOption("autoCreate",this.schema.options,F.config,F.base.options);if(!J)return;return await this.createCollection()};this.$init=Z().then(()=>B()).then(()=>$());let D=this.$init.catch,X=this;return this.$init.catch=function(){return X.$caught=!0,D.apply(X.$init,arguments)},this.$init};B1.createCollection=async function A(F){if(l1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.createCollection() no longer accepts a callback");let B=await new Promise((Y,W)=>{this.hooks.execPre("createCollection",this,[F],(G)=>{if(G!=null){if(G instanceof TM.skipWrappedFunction)return Y(!0);return W(G)}Y()})}),$=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;if($!=null)F=Object.assign({},$,F);let Z=this&&this.schema&&this.schema.options&&this.schema.options.collation;if(Z!=null)F=Object.assign({collation:Z},F);let D=this&&this.schema&&this.schema.options&&this.schema.options.capped;if(D!=null){if(typeof D==="number")F=Object.assign({capped:!0,size:D},F);else if(typeof D==="object")F=Object.assign({capped:!0},D,F)}let X=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;if(X!=null){if(F=Object.assign({timeseries:X},F),F.expireAfterSeconds!=null);else if(F.expires!=null)n0.expires(F);else if(this.schema.options.expireAfterSeconds!=null)F.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)F.expires=this.schema.options.expires,n0.expires(F)}let J=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;if(J!=null)F=Object.assign({clusteredIndex:{...J,unique:!0}},F);try{if(!B)await this.db.createCollection(this.$__collection.collectionName,F)}catch(Y){if(Y!=null&&(Y.name!=="MongoServerError"||Y.code!==48))await new Promise((W,G)=>{let Q={error:Y};this.hooks.execPost("createCollection",this,[null],Q,(q)=>{if(q!=null)return G(q);W()})})}return await new Promise((Y,W)=>{this.hooks.execPost("createCollection",this,[this.$__collection],(G)=>{if(G!=null)return W(G);Y()})}),this.$__collection};B1.syncIndexes=async function A(F){if(l1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.syncIndexes() no longer accepts a callback");if(F?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??!0)try{await this.createCollection()}catch(D){if(D!=null&&(D.name!=="MongoServerError"||D.code!==48))throw D}let $=await this.diffIndexes({indexOptionsToCreate:!0}),Z=await this.cleanIndexes({...F,toDrop:$.toDrop});return await this.createIndexes({...F,toCreate:$.toCreate}),Z};B1.createSearchIndex=async function A(F){return l1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(F)};B1.updateSearchIndex=async function A(F,B){return l1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(F,B)};B1.dropSearchIndex=async function A(F){return l1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(F)};B1.listSearchIndexes=async function A(F){return l1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(F)).toArray()};B1.diffIndexes=async function A(F){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.syncIndexes() no longer accepts a callback");let B=this,$=await B.listIndexes().catch((Y)=>{if(Y.codeName=="NamespaceNotFound")return;throw Y});if($===void 0)$=[];$=kl1(B,$);let Z=B.schema,D=_l1(B,Z.indexes()),X=il1(Z,D,$),J=pl1(Z,D,$,X,F);return{toDrop:X,toCreate:J}};function pl1(A,F,B,$,Z){let D=[],X=Z?.indexOptionsToCreate??!1;for(let[J,Y]of F){let W=!1,G=kM(A,k3(Y));for(let Q of B){if(SM(Q))continue;if(s01(J,G,Q)&&!$.includes(Q.name)){W=!0;break}}if(!W)if(X)D.push([J,Y]);else D.push(J)}return D}function il1(A,F,B){let $=[];for(let Z of B){let D=!1;if(SM(Z))continue;if(Sl1(Z,A.options))continue;for(let[X,J]of F){let Y=kM(A,k3(J));if(c01(X,Y,A.options),s01(X,Y,Z)){D=!0;break}}if(D)continue;$.push(Z.name)}return $}B1.cleanIndexes=async function A(F){if(l1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.cleanIndexes() no longer accepts a callback");let B=this;if(Array.isArray(F&&F.toDrop))return await u01(F.toDrop,B,F);let $=await B.diffIndexes();return await u01($.toDrop,B,F)};async function u01(A,F,B){if(A.length===0)return[];let $=F.$__collection;if(B&&B.hideIndexes)await Promise.all(A.map((Z)=>{return F.db.db.command({collMod:$.collectionName,index:{name:Z,hidden:!0}})}));else await Promise.all(A.map((Z)=>$.dropIndex(Z)));return A}B1.listIndexes=async function A(){if(l1(this,"listIndexes"),typeof arguments[0]==="function")throw new g1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((F)=>{this.$__collection.addQueue(F)});return this.$__collection.listIndexes().toArray()};B1.ensureIndexes=async function A(F){if(l1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.ensureIndexes() no longer accepts a callback");await new Promise((B,$)=>{nl1(this,F,(Z)=>{if(Z!=null)return $(Z);B()})})};B1.createIndexes=async function A(F){if(l1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new g1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(F)};/*!
 * ignore
 */function nl1(A,F,B){let $=Array.isArray(F?.toCreate)?F.toCreate:A.schema.indexes(),Z;F=F||{};let D=function(Q){if(Q&&!A.$caught)A.emit("error",Q);A.emit("index",Q||Z),B&&B(Q||Z)};for(let Q of $)if(SM(Q))n0.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+A.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!$.length){SX(function(){D()});return}let X=function(Q,q,z,H){A.emit("index-single-done",Q,q,z,H)},J=function(Q,q){A.emit("index-single-start",Q,q)},Y=A.schema._baseSchema,W=Y?Y.indexes():[];SX(function(){if(F._automatic&&!A.collection.collection)A.collection.addQueue(G,[]);else G()});function G(){if(F._automatic){if(A.schema.options.autoIndex===!1||A.schema.options.autoIndex==null&&A.db.config.autoIndex===!1)return D()}let Q=$.shift();if(!Q)return D();if(F._automatic&&Q[1]._autoIndex===!1)return G();if(W.find((U)=>n0.deepEqual(U,Q)))return G();let q=k3(Q[0]),z=k3(Q[1]);if(delete z._autoIndex,kM(A.schema,z),p01(A.schema,z),c01(q,z,A.schema.options),J(q,F),"background"in F)z.background=F.background;let H=null;try{H=A.collection.createIndex(q,z)}catch(U){if(!Z)Z=U;if(!A.$caught)A.emit("error",U);X(U,q,z),G();return}H.then((U)=>{X(null,q,z,U),G()},(U)=>{if(!Z)Z=U;if(!A.$caught)A.emit("error",U);X(U,q,z),G()})}}B1.createSearchIndexes=async function A(){l1(this,"createSearchIndexes");let F=[];for(let B of this.schema._searchIndexes)F.push(await this.createSearchIndex(B));return F};B1.schema;B1.db;B1.collection;B1.$__collection;B1.base;B1.discriminators;B1.translateAliases=function A(F,B){l1(this,"translateAliases");let $=(Z,D)=>{let X,J=[],Y=Z.split("."),W=this.schema;for(let Q in Y){let q=Y[Q];if(W&&W.aliases[q]){if(X=W.aliases[q],B&&X in F)throw new g1(`Provided object has both field "${q}" and its alias "${X}"`);J.push(X)}else X=q,J.push(q);if(W&&W.paths[X])W=W.paths[X].schema;else W=null}let G=J.join(".");if(F instanceof Map)F.set(G,D);else F[G]=D;if(G!==Z)if(F instanceof Map)F.delete(Z);else delete F[Z];return F};if(typeof F==="object"){if(F instanceof Map)for(let Z of new Map(F))F=$(Z[0],Z[1]);else for(let Z of Object.keys(F))if(F=$(Z,F[Z]),Z[0]==="$")if(Array.isArray(F[Z]))for(let D in F[Z])F[Z][D]=this.translateAliases(F[Z][D]);else this.translateAliases(F[Z]);return F}else return F};B1.deleteOne=function A(F,B){if(l1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.prototype.deleteOne() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);return $.setOptions(B),$.deleteOne(F)};B1.deleteMany=function A(F,B){if(l1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.deleteMany() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);return $.setOptions(B),$.deleteMany(F)};B1.find=function A(F,B,$){if(l1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new g1("Model.find() no longer accepts a callback");let Z=new this.Query({},{},this,this.$__collection);return Z.select(B),Z.setOptions($),Z.find(F)};B1.findById=function A(F,B,$){if(l1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.findById() no longer accepts a callback");if(typeof F==="undefined")F=null;return this.findOne({_id:F},B,$)};B1.findOne=function A(F,B,$){if(l1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.findOne() no longer accepts a callback");let Z=new this.Query({},{},this,this.$__collection);return Z.select(B),Z.setOptions($),Z.findOne(F)};B1.estimatedDocumentCount=function A(F){return l1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(F)};B1.countDocuments=function A(F,B){if(l1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.countDocuments() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);if(B!=null)$.setOptions(B);return $.countDocuments(F)};B1.distinct=function A(F,B,$){if(l1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.distinct() no longer accepts a callback");let Z=new this.Query({},{},this,this.$__collection);if($!=null)Z.setOptions($);return Z.distinct(F,B)};B1.where=function A(F,B){l1(this,"where");let $=new this.Query({},{},this,this.$__collection).find({});return $.where.apply($,arguments)};B1.$where=function A(){l1(this,"$where");let F=new this.Query({},{},this,this.$__collection).find({});return F.$where.apply(F,arguments)};B1.findOneAndUpdate=function(A,F,B){if(l1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new g1("Model.findOneAndUpdate() no longer accepts a callback");let $;if(B)$=B.fields||B.projection;F=k3(F,{depopulate:!0,_isNested:!0}),i01(F,B,this.schema.options.versionKey);let Z=new this.Query({},{},this,this.$__collection);return Z.select($),Z.findOneAndUpdate(A,F,B)};B1.findByIdAndUpdate=function(A,F,B){if(l1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new g1("Model.findByIdAndUpdate() no longer accepts a callback");if(A instanceof j8)A=A._doc._id;return this.findOneAndUpdate.call(this,{_id:A},F,B)};B1.findOneAndDelete=function(A,F){if(l1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.findOneAndDelete() no longer accepts a callback");let B;if(F)B=F.select,F.select=void 0;let $=new this.Query({},{},this,this.$__collection);return $.select(B),$.findOneAndDelete(A,F)};B1.findByIdAndDelete=function(A,F){if(l1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new g1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:A},F)};B1.findOneAndReplace=function(A,F,B){if(l1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new g1("Model.findOneAndReplace() no longer accepts a callback");let $;if(B)$=B.select,B.select=void 0;let Z=new this.Query({},{},this,this.$__collection);return Z.select($),Z.findOneAndReplace(A,F,B)};B1.create=async function A(F,B){if(typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.create() no longer accepts a callback");l1(this,"create");let $,Z=this.schema.options.discriminatorKey;if(Array.isArray(F))$=F,B=B!=null&&typeof B==="object"?B:{};else{let J=arguments[arguments.length-1];if(B={},typeof J==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.create() no longer accepts a callback");else if($=[...arguments],$.length>1&&!J)$.pop();if($.length===2&&$[0]!=null&&$[1]!=null&&$[0].session==null&&J&&Tl1(J.session)==="ClientSession"&&!this.schema.path("session"))n0.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if($.length===0)return Array.isArray(F)?[]:null;let D=[],X=typeof B.aggregateErrors==="boolean"?!B.aggregateErrors:!0;if(delete B.aggregateErrors,B.session&&!B.ordered&&$.length>1)throw new g1("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(B.ordered){for(let J=0;J<$.length;J++)try{let Y=$[J],W=this.discriminators&&Y[Z]!=null?this.discriminators[Y[Z]]||IX(this.discriminators,Y[Z]):this;if(W==null)throw new g1(`Discriminator "${Y[Z]}" not found for model "${this.modelName}"`);let G=Y;if(!(G instanceof W))G=new W(G);await G.$save(B),D.push(G)}catch(Y){if(!X)D.push(Y);else throw Y}return D}else if(!X)D=await Promise.allSettled($.map(async(J)=>{let Y=this.discriminators&&J[Z]!=null?this.discriminators[J[Z]]||IX(this.discriminators,J[Z]):this;if(Y==null)throw new g1(`Discriminator "${J[Z]}" not found for model "${this.modelName}"`);let W=J;if(!(W instanceof Y))W=new Y(W);return await W.$save(B),W})),D=D.map((J)=>J.status==="fulfilled"?J.value:J.reason);else{let J=null;if(D=await Promise.all($.map(async(Y)=>{let W=this.discriminators&&Y[Z]!=null?this.discriminators[Y[Z]]||IX(this.discriminators,Y[Z]):this;if(W==null)throw new g1(`Discriminator "${Y[Z]}" not found for model "${this.modelName}"`);try{let G=Y;if(!(G instanceof W))G=new W(G);return await G.$save(B),G}catch(G){if(!J)J=G}})),J)throw J}if(!Array.isArray(F)&&$.length===1)return D[0];return D};B1.insertOne=async function A(F,B){l1(this,"insertOne");let $=this.schema.options.discriminatorKey,Z=this.discriminators&&F[$]!=null?this.discriminators[F[$]]||IX(this.discriminators,F[$]):this;if(Z==null)throw new g1(`Discriminator "${F[$]}" not found for model "${this.modelName}"`);if(!(F instanceof Z))F=new Z(F);return await F.$save(B)};B1.watch=function(A,F){l1(this,"watch");let B=($)=>{if(A=A||[],gl1(A,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let Z=this.$__collection.watch(A,F);$(null,Z)});else{let Z=this.$__collection.watch(A,F);$(null,Z)}};return F=F||{},F.model=this,new Gl1(B,A,F)};B1.startSession=function(){return l1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};B1.insertMany=async function A(F,B){if(l1(this,"insertMany"),typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.insertMany() no longer accepts a callback");return new Promise(($,Z)=>{this.$__insertMany(F,B,(D,X)=>{if(D!=null)return Z(D);$(X)})})};B1.$__insertMany=function(A,F,B){let $=this;if(typeof F==="function")B=F,F=null;B=B||n0.noop,F=F||{};let Z=F.limit||1000,D=!!F.rawResult,X=typeof F.ordered==="boolean"?F.ordered:!0,J=typeof F.throwOnValidationError==="boolean"?F.throwOnValidationError:!1,Y=!!F.lean,W=this.db.base.transactionAsyncLocalStorage?.getStore();if((!F||!F.hasOwnProperty("session"))&&W?.session!=null)F={...F,session:W.session};if(!Array.isArray(A))A=[A];let G=[],Q=new Map,q=X?null:new Array(A.length),z=A.map((H,U)=>(K)=>{if(Y)return SX(()=>K(null,H));let E=!1;if(!(H instanceof $)){if(H!=null&&typeof H!=="object")return K(new zl1(H,"arr."+U,"insertMany"));try{H=new $(H),E=!0}catch(L){return K(L)}}if(F.session!=null)H.$session(F.session);if(Y)return SX(()=>K(null,H));H.$validate(E?{_skipParallelValidateCheck:!0}:null).then(()=>{K(null,H)},(L)=>{if(X===!1)return G.push(L),Q.set(L,U),q[U]=L,K(null,null);K(L)})});fl1(z,Z,function(H,U){if(H){B(H,null);return}let K=new Map,E=new Map;for(let M=0;M<U.length;++M)K.set(U[M],M);let L=U.filter(function(M){return M!=null});for(let M=0;M<L.length;++M)E.set(M,K.get(L[M]));if(G.length>0)G.sort((M,O)=>{return Q.get(M)-Q.get(O)});if(L.length===0){if(J)return B(new Gz(G,q,null,"insertMany"));if(D){let M={acknowledged:!0,insertedCount:0,insertedIds:{}};return BF(M,G,G),B(null,M)}B(null,[]);return}let V=Y?L:L.map(function(M){if(M.$__schema.options.versionKey)M[M.$__schema.options.versionKey]=0;if((!F||F.timestamps!==!1)&&M.initializeTimestamps&&(!M.$__||M.$__.timestamps!==!1))M.initializeTimestamps();if(M.$__hasOnlyPrimitiveValues())return M.$__toObjectShallow();return M.toObject(OM)});$.$__collection.insertMany(V,F).then((M)=>{if(!Y)for(let O of L)O.$__reset(),C$(O,!1);if(X===!1&&J&&G.length>0){for(let O=0;O<q.length;++O)if(q[O]===void 0)q[O]=U[O];return B(new Gz(G,q,M,"insertMany"))}if(D){if(X===!1){for(let O=0;O<q.length;++O)if(q[O]===void 0)q[O]=U[O];BF(M,G,q)}return B(null,M)}if(F.populate!=null)return $.populate(L,F.populate).then((O)=>{B(null,O)},(O)=>{if(O!=null)O.insertedDocs=L;throw O});B(null,L)},(M)=>{if(M.writeErrors==null&&(M.result&&M.result.result&&M.result.result.writeErrors)!=null)M.writeErrors=M.result.result.writeErrors;let O=M&&M.writeErrors,R=new Set((M&&M.writeErrors||[]).map((P)=>P.index));if(M.writeErrors!=null)for(let P=0;P<M.writeErrors.length;++P){let T=E.get(M.writeErrors[P].index);if(M.writeErrors[P]={...M.writeErrors[P],index:T},!X)q[T]=M.writeErrors[P]}if(!X){for(let P=0;P<q.length;++P)if(q[P]===void 0)q[P]=U[P];M.results=q}let _=-1;if(M.insertedDocs=L.filter((P,T)=>{let N=!O||R.has(T);if(X){if(_>-1)return T<_;if(N)_=T}return!N}).map(function P(T){if(Y)return T;return T.$__reset(),C$(T,!1),T}),D&&X===!1)BF(M,G,q);B(M,null)})})};/*!
 * ignore
 */function C$(A,F){A.$isNew=F,A.$emit("isNew",F),A.constructor.emit("isNew",F);let B=A.$getAllSubdocs({useCache:!0});for(let $ of B)$.$isNew=F,$.$emit("isNew",F)}B1.bulkWrite=async function A(F,B){if(l1(this,"bulkWrite"),typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.bulkWrite() no longer accepts a callback");B=B||{};let $=await new Promise((Y,W)=>{this.hooks.execPre("bulkWrite",this,[F,B],(G)=>{if(G!=null){if(G instanceof TM.skipWrappedFunction)return Y(G);return W(G)}Y()})});if($)return $.args[0];let Z=B.ordered==null?!0:B.ordered;if(F.length===0){let W=new(this.base.driver.get()).BulkWriteResult(RM(),!1);return W.n=0,BF(W,[],[]),W}let D=B?._skipCastBulkWrite?[]:F.map((Y)=>Pl1(this,Y,B)),X=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!B.hasOwnProperty("session"))&&X?.session!=null)B={...B,session:X.session};let J=null;if(Z){await new Promise((Y,W)=>{IM(D,(G,Q)=>G(Q),(G)=>{if(G)return W(G);Y()})});try{J=await this.$__collection.bulkWrite(F,B)}catch(Y){await new Promise((W,G)=>{let Q={error:Y};this.hooks.execPost("bulkWrite",this,[null],Q,(q)=>{if(q!=null)return G(q);W()})})}}else{let Y=[],W=[],G=[];if(D.length>0)Y=await Promise.all(F.map((H,U)=>{if(U>=D.length)return U;return new Promise((K)=>{D[U]((E)=>{if(E==null)K(U);else W.push({index:U,error:E}),G[U]=E;K()})})})),Y=Y.filter((H)=>H!=null);else Y=F.map((H,U)=>U);W=W.sort((H,U)=>H.index-U.index).map((H)=>H.error);let Q=Y.sort().map((H)=>F[H]);if(Q.length===0){if(B.throwOnValidationError&&W.length)throw new Gz(W,G,J,"bulkWrite");let U=new(this.base.driver.get()).BulkWriteResult(RM(),!1);return U.result=RM(),BF(U,W,G),U}let q;[J,q]=await this.$__collection.bulkWrite(Q,B).then((H)=>[H,null]).catch((H)=>[null,H]);let z={};if(q?.writeErrors)for(let H of q.writeErrors)z[H.err.index]=H;for(let H=0;H<Y.length;++H)G[Y[H]]=z[H]??null;if(q){if(W.length>0)BF(q,W,G);await new Promise((H,U)=>{let K={error:q};this.hooks.execPost("bulkWrite",this,[null],K,(E)=>{if(E!=null)return U(E);H()})})}if(W.length>0)if(B.throwOnValidationError)throw new Gz(W,G,J,"bulkWrite");else BF(J,W,G)}return await new Promise((Y,W)=>{this.hooks.execPost("bulkWrite",this,[J],(G)=>{if(G!=null)return W(G);Y()})}),J};B1.bulkSave=async function A(F,B){if(B=B||{},B.timestamps!=null)for(let G of F)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=B.timestamps;else for(let G of F)if(G.$__.timestamps!=null)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=G.$__.timestamps;await Promise.all(F.map((G)=>sl1(G,B)));let $=this.buildBulkWriteOperations(F,B),Z={skipValidation:!0,_skipCastBulkWrite:!0,...B},{bulkWriteResult:D,bulkWriteError:X}=await this.bulkWrite($,Z).then((G)=>({bulkWriteResult:G,bulkWriteError:null}),(G)=>({bulkWriteResult:null,bulkWriteError:G}));if(X!=null&&X.name!=="MongoBulkWriteError")throw X;let J=D?.matchedCount??0,Y=D?.insertedCount??0;if($.length>0&&J+Y<$.length&&!X)throw new hl1(this.modelName,F,D);let W=[];for(let G=0;G<F.length;G++){let Q=F[G];if((X&&X.writeErrors.find((z)=>{return(z.err.op._id||z.err.op.q._id).toString()===Q._doc._id.toString()}))==null)W.push(Q)}if(await Promise.all(W.map((G)=>al1(G))),X!=null)throw X;return D};function sl1(A,F){return new Promise((B,$)=>{A.schema.s.hooks.execPre("save",A,[F],(Z)=>{if(Z){$(Z);return}B()})})}function al1(A){return new Promise((F,B)=>{if(A.$isNew)C$(A,!1);A.$__reset(),A.schema.s.hooks.execPost("save",A,[A],{},($)=>{if($){B($);return}F()})})}B1.applyDefaults=function A(F){if(F==null)return F;if(F.$__!=null){Ul1(F,F.$__.fields,F.$__.exclude);for(let B of F.$getAllSubdocs())A(B,B.$__.fields,B.$__.exclude);return F}return Cl1(F,this.schema),F};B1.applyVirtuals=function A(F,B){if(F==null)return F;if(F.$__!=null)return F;return Ml1(this.schema,F,B),F};B1.applyTimestamps=function A(F,B){if(F==null)return F;if(F.$__!=null)return F;return Nl1(this.schema,F,B),F};B1.castObject=function A(F,B){B=B||{};let $={},Z=this.schema,D=Z.options.discriminatorKey;if(Z.discriminators!=null&&F!=null&&F[D]!=null)Z=n01(Z,F[D])||Z;let X=Object.keys(Z.paths);for(let Y of X){let W=Z.path(Y);if(!W||!W.$isMongooseArray)continue;let G=OX(F,Y);a01(X,G,Y)}let J=null;for(let Y of X){let W=Z.path(Y);if(W==null)continue;let G=OX(F,Y,void 0);if(G==null)continue;let Q=Y.indexOf(".")===-1?[Y]:Y.split("."),q=$;for(let z=0;z<Q.length-1;++z){if(q[Q[z]]==null)q[Q[z]]=isNaN(Q[z+1])?{}:[];q=q[Q[z]]}if(W.$isMongooseDocumentArray){let z=W.options?.castNonArrays??W.constructor.options.castNonArrays;if(!Array.isArray(G)){if(!z){if(!B.ignoreCastErrors)J=J||new Wz,J.addError(Y,new dl1(Y,G))}else q[Q[Q.length-1]]=[B1.castObject.call(W.caster,G)];continue}}if(W.$isSingleNested||W.$isMongooseDocumentArrayElement){try{G=B1.castObject.call(W.caster,G)}catch(z){if(!B.ignoreCastErrors)J=J||new Wz,J.addError(Y,z);continue}q[Q[Q.length-1]]=G;continue}try{G=W.cast(G),q[Q[Q.length-1]]=G}catch(z){if(!B.ignoreCastErrors)J=J||new Wz,J.addError(Y,z);continue}}if(J!=null)throw J;return $};B1.buildBulkWriteOperations=function A(F,B){if(!Array.isArray(F))throw new Error(`bulkSave expects an array of documents to be passed, received \`${F}\` instead`);return Z(),F.map((D,X)=>{if(!B.skipValidation){if(!(D instanceof j8))throw new Error(`documents.${X} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(B.validateBeforeSave==null||B.validateBeforeSave){let G=D.validateSync();if(G!=null)throw G}}if(D.isNew){let G={insertOne:{document:D}};return n0.injectTimestampsOption(G.insertOne,B.timestamps),G}let Y=D.$__delta();if(Y!=null&&!n0.isEmptyObject(Y[0])){let G=D.$__where(Y[0]),Q=Y[1];r01(D,G);let q=this.schema.options.shardKey;if(q){let H=Object.keys(q),U=H.length;for(let K=0;K<U;++K)G[H[K]]=D[H[K]]}D.$__version(G,Y);let z={updateOne:{filter:G,update:Q}};return n0.injectTimestampsOption(z.updateOne,B.timestamps),z}return null}).filter((D)=>D!==null);function Z(){if(B=B||{},B.skipValidation==null)B.skipValidation=!1}};B1.hydrate=function(A,F,B){if(l1(this,"hydrate"),F!=null){if(A!=null&&A.$__!=null)A=A.toObject(OM);A=Ll1(A,F)}let $=yD().createModel(this,A,F);return $.$init(A,B),$};B1.updateMany=function A(F,B,$){if(l1(this,"updateMany"),B==null)throw new g1("updateMany `update` parameter cannot be nullish");return _M(this,"updateMany",F,B,$)};B1.updateOne=function A(F,B,$){return l1(this,"updateOne"),_M(this,"updateOne",F,B,$)};B1.replaceOne=function A(F,B,$){l1(this,"replaceOne");let Z=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;if(Z&&!B[Z])B[Z]=0;return _M(this,"replaceOne",F,B,$)};function _M(A,F,B,$,Z){let D=new A.Query({},{},A,A.collection);if(B instanceof j8)B=B.toObject();else B=k3(B);Z=typeof Z==="function"?Z:k3(Z);let X=A&&A.schema&&A.schema.options&&A.schema.options.versionKey||null;return i01($,Z,X),D[F](B,$,Z)}B1.aggregate=function A(F,B){if(l1(this,"aggregate"),typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.aggregate() no longer accepts a callback");let $=new Wl1(F||[]);if($.model(this),B!=null)$.option(B);return $};B1.validate=async function A(F,B,$){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")$=F;if(typeof $==="function"||typeof arguments[3]==="function")throw new g1("Model.validate() no longer accepts a callback");let Z=this.schema,D=Z.options.discriminatorKey;if(Z.discriminators!=null&&F!=null&&F[D]!=null)Z=n01(Z,F[D])||Z;let X=Object.keys(Z.paths);if(B!=null){let W=typeof B==="string"?new Set(B.split(" ")):Array.isArray(B)?new Set(B):new Set(X);X=X.filter((G)=>{if(B.pathsToSkip){if(Array.isArray(B.pathsToSkip)){if(B.pathsToSkip.find((z)=>z==G))return!1}else if(typeof B.pathsToSkip=="string"){if(B.pathsToSkip.includes(G))return!1}}let Q=G.split("."),q=Q[0];for(let z of Q){if(W.has(q))return!0;q+="."+z}return W.has(G)})}for(let W of X){let G=Z.path(W);if(!G||!G.$isMongooseArray||G.$isMongooseDocumentArray)continue;let Q=OX(F,W);a01(X,Q,W)}let J=null;X=new Set(X);try{F=this.castObject(F)}catch(W){J=W;for(let G of Object.keys(J.errors||{}))X.delete(G)}let Y=X.size;return new Promise((W,G)=>{for(let q of X){let z=Z.path(q);if(z==null){Q();continue}let H=q.indexOf(".")===-1?[q]:q.split("."),U=F;for(let E=0;E<H.length-1;++E)U=U[H[E]];let K=OX(F,q,void 0);z.doValidate(K,(E)=>{if(E)J=J||new Wz,J.addError(q,E);Q()},$,{path:q})}function Q(){if(--Y<=0)if(J)G(J);else W(F)}})};B1.populate=async function A(F,B){if(l1(this,"populate"),typeof B==="function"||typeof arguments[2]==="function")throw new g1("Model.populate() no longer accepts a callback");if(B=n0.populate(B),B.length===0)return F;if(B.find(($)=>$.ordered))for(let $ of B)await y01(this,F,$);else{let $=[];for(let Z of B)$.push(y01(this,F,Z));await Promise.all($)}return F};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var tl1=/\s?-_id\s?/,rl1=/\s?-_id\s?/g;async function y01(A,F,B){if(B.strictPopulate==null){if(B._localModel!=null&&B._localModel.schema._userProvidedOptions.strictPopulate!=null)B.strictPopulate=B._localModel.schema._userProvidedOptions.strictPopulate;else if(B._localModel!=null&&A.base.options.strictPopulate!=null)B.strictPopulate=A.base.options.strictPopulate;else if(A.base.options.strictPopulate!=null)B.strictPopulate=A.base.options.strictPopulate}if(!Array.isArray(F))F=[F];if(F.length===0||F.every(n0.isNullOrUndefined))return;let $=Ol1(A,F,B);if($ instanceof g1)throw $;let Z=$.length,D=[];function X(W){return W!==void 0}let J=!1,Y=[];for(let W=0;W<Z;++W){let G=$[W],Q=G.options.select,q=n0.array.flatten(G.ids,X);q=n0.array.unique(q);let z={};if(z.sort=G&&G.options&&G.options.options&&G.options.options.sort||void 0,z.excludeId=tl1.test(Q)||Q&&Q._id===0,G.options&&G.options.options&&G.options.options.lean&&G.options.options.lean.transform)G.options.options._leanTransform=G.options.options.lean.transform,G.options.options.lean=!0;if(q.length===0||q.every(n0.isNullOrUndefined)){h01(A,[],G,z);continue}if(J=!0,typeof B.foreignField==="string")G.foreignField.clear(),G.foreignField.add(B.foreignField);let H=jl1(q,G.match,G.foreignField,G.model,G.options.skipInvalidIds);if(z.excludeId)if(typeof Q==="string")Q=Q.replace(rl1," ");else if(Array.isArray(Q))Q=Q.filter((U)=>U!=="-_id");else Q={...Q},delete Q._id;if(G.options.options&&G.options.options.limit!=null)z.originalLimit=G.options.options.limit;else if(G.options.limit!=null)z.originalLimit=G.options.limit;Y.push([G,H,Q,z])}if(!J){if($.length!==0)return;if(B.populate!=null){let W=n0.populate(B.populate).map((G)=>Object.assign({},G,{path:B.path+"."+G.path}));return A.populate(F,W)}return}if(B.ordered)for(let W of Y)await v01.apply(null,W).then((G)=>{D=D.concat(G)});else{let W=[];for(let G of Y)W.push(v01.apply(null,G).then((Q)=>{D=D.concat(Q)}));await Promise.all(W)}for(let W of Y){let G=W[0],Q=W[3];for(let q of D)G.options._childDocs.push(q);h01(A,D,G,Q)}for(let W of Y)ul1(W[0].foreignField,W[0].options,D);for(let W of Y){let G=W[0];if(G.options&&G.options.options&&G.options.options._leanTransform)for(let Q of D)G.options.options._leanTransform(Q)}}/*!
 * ignore
 */function v01(A,F,B){let $=k3(A.options.populate),Z=Object.assign({skip:A.options.skip,limit:A.options.limit,perDocumentLimit:A.options.perDocumentLimit},A.options.options);if(A.count)delete Z.skip;if(Z.perDocumentLimit!=null)Z.limit=Z.perDocumentLimit,delete Z.perDocumentLimit;else if(Z.limit!=null)Z.limit=Z.limit*A.ids.length;let D=A.model.find(F,B,Z);for(let X of A.foreignField)if(X!=="_id"&&D.selectedInclusively()&&!xl1(D._fields,X))D.select(X);if(A.count)for(let X of A.foreignField)D.select(X);if($){if(A.model.baseModelName!=null)if(Array.isArray($))$.forEach((J)=>{J.strictPopulate=!1});else if(typeof $==="string")$={path:$,strictPopulate:!1};else $.strictPopulate=!1;let X=A.options._fullPath||A.options.path;if(Array.isArray($))for(let J of $)J._fullPath=X+"."+J.path;else if(typeof $==="object")$._fullPath=X+"."+$.path;D.populate($)}return D.exec().then((X)=>{for(let J of X)bl1.set(J,A.model);return X})}/*!
 * ignore
 */function h01(A,F,B,$){let{options:Z,isVirtual:D,justOne:X}=B,J,Y=Z&&Z.options&&Z.options.lean||!1,W=F.length,G={},Q={},q,z,H=k3(B.allIds);for(let U=0;U<W;U++){if(z=F[U],z==null)continue;for(let K of B.foreignField){if(J=n0.getValue(K,z),Array.isArray(J)){J=n0.array.unique(n0.array.flatten(J));for(let E of J){if(E instanceof j8)E=E._doc._id;if(E?.constructor?.name==="Binary"&&E.sub_type===4&&typeof E.toUUID==="function")q=String(E.toUUID());else if(E?.constructor?.name==="Buffer"&&E._subtype===4&&typeof E.toUUID==="function")q=String(E.toUUID());else q=String(E);if(Q[q])if(Array.isArray(Q[q]))Q[q].push(z),G[q].push(U);else Q[q]=[Q[q],z],G[q]=[G[q],U];else if(D&&!X)Q[q]=[z],G[q]=[U];else Q[q]=z,G[q]=U}}else{if(J instanceof j8)J=J._doc._id;if(J?.constructor?.name==="Binary"&&J.sub_type===4&&typeof J.toUUID==="function")q=String(J.toUUID());else if(J?.constructor?.name==="Buffer"&&J._subtype===4&&typeof J.toUUID==="function")q=String(J.toUUID());else q=String(J);if(Q[q]){if(Array.isArray(Q[q]))Q[q].push(z),G[q].push(U);else if(D||Q[q].constructor!==z.constructor||(Q[q]instanceof j8?String(Q[q]._doc._id):String(Q[q]._id))!==(z instanceof j8?String(z._doc._id):String(z._id)))Q[q]=[Q[q],z],G[q]=[G[q],U]}else Q[q]=z,G[q]=U}if(!Y)z.$__.wasPopulated=z.$__.wasPopulated||{value:J}}}Rl1({originalModel:A,rawIds:B.isVirtual?H:B.allIds,allIds:H,unpopulatedValues:B.unpopulatedValues,foreignField:B.foreignField,rawDocs:Q,rawOrder:G,docs:B.docs,path:Z.path,options:$,justOne:B.justOne,isVirtual:B.isVirtual,allOptions:B,populatedModel:B.model,lean:Y,virtual:B.virtual,count:B.count,match:B.match})}B1.compile=function A(F,B,$,Z,D){if(B.options.versionKey!==!1&&!B.paths[B.options.versionKey]){let Q={};Q[B.options.versionKey]=Number,B.add(Q)}let J;if(typeof F==="function"&&F.prototype instanceof B1)J=F,F=J.name,B.loadClass(J,!1),J.prototype.$isMongooseModelPrototype=!0;else J=function Q(q,z,H){if(Q.hooks.execPreSync("createModel",q),!(this instanceof Q))return new Q(q,z,H);let U=Q.schema.options.discriminatorKey;if(Q.discriminators==null||q==null||q[U]==null){B1.call(this,q,z,H);return}let K=Q.discriminators[q[U]]||IX(Q.discriminators,q[U]);if(K!=null)return new K(q,z,H);B1.call(this,q,z,H)};if(J.hooks=B.s.hooks.clone(),J.base=D,J.modelName=F,!(J.prototype instanceof B1))Object.setPrototypeOf(J,B1),Object.setPrototypeOf(J.prototype,B1.prototype);J.model=function Q(q){return this.db.model(q)},J.db=Z,J.prototype.db=Z,J.prototype[ZF]=Z,J.discriminators=J.prototype.discriminators=void 0,J[t01]=!0,J.events=new PM,B._preCompile();let W={schemaUserProvidedOptions:B._userProvidedOptions||{},capped:B.options.capped,Promise:J.base.Promise,modelName:F};if(B.options.autoCreate!==void 0)W.autoCreate=B.options.autoCreate;let G=Z.collection($,W);return J.prototype.collection=G,J.prototype.$collection=G,J.prototype[$F]=G,J.prototype.$__setSchema(B),m01(J,B),l01(J,B),El1(J,B),Vl1(J,B.s.hooks,B.statics),J.schema=J.prototype.$__schema,J.collection=G,J.$__collection=G,J.Query=function(){Yz.apply(this,arguments)},Object.setPrototypeOf(J.Query.prototype,Yz.prototype),J.Query.base=Yz.base,J.Query.prototype.constructor=Yz,J._applyQueryMiddleware(),ol1(J,B.query),J};B1.clientEncryption=function A(){let F=this.base.driver.get().ClientEncryption;if(!F)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let B=this.collection?.conn?.client;if(!B)return null;let $=B.options.autoEncryption;if(!$)return null;let{keyVaultNamespace:Z,keyVaultClient:D,kmsProviders:X,credentialProviders:J,proxyOptions:Y,tlsOptions:W}=$;return new F(D??B,{keyVaultNamespace:Z,kmsProviders:X,credentialProviders:J,proxyOptions:Y,tlsOptions:W})};B1.$__updateConnection=function A(F){this.db=F,this.prototype.db=F,this.prototype[ZF]=F;let B=F.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=B,this.prototype.$collection=B,this.prototype[$F]=B,this.collection=B,this.$__collection=B};function ol1(A,F){for(let B in F)A.Query.prototype[B]=F[B]}B1.__subclass=function A(F,B,$){let Z=this,D=function G(Q,q,z){if(!(this instanceof G))return new G(Q,q,z);Z.call(this,Q,q,z)};if(Object.setPrototypeOf(D,Z),Object.setPrototypeOf(D.prototype,Z.prototype),D.db=F,D.prototype.db=F,D.prototype[ZF]=F,Z[TX]=Z[TX]||[],Z[TX].push(D),Z.discriminators!=null){D.discriminators={};for(let G of Object.keys(Z.discriminators))D.discriminators[G]=Z.discriminators[G].__subclass(Z.db,Z.discriminators[G].schema,$)}let X=B&&typeof B!=="string"?B:Z.prototype.$__schema,J=X.options||{},Y=X._userProvidedOptions||{};if(!$)$=Z.prototype.$__schema.get("collection")||n0.toCollectionName(Z.modelName,this.base.pluralize());let W={schemaUserProvidedOptions:Y,capped:X&&J.capped};return D.prototype.collection=F.collection($,W),D.prototype.$collection=D.prototype.collection,D.prototype[$F]=D.prototype.collection,D.collection=D.prototype.collection,D.$__collection=D.collection,D.init().catch(()=>{}),D};B1.recompileSchema=function A(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let F of this.schema._applyDiscriminators.keys())this.discriminator(F,this.schema._applyDiscriminators.get(F));delete this.schema._defaultToObjectOptionsMap,Kl1(this.schema,new WeakSet,!0)};B1.inspect=function(){return`Model { ${this.modelName} }`};B1.namespace=function A(){return this.db.name+"."+this.collection.collectionName};if(f01.inspect.custom)B1[f01.inspect.custom]=B1.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */B1._applyQueryMiddleware=function A(){let F=this.Query,B=this.schema.s.hooks.filter(($)=>{let Z=el1($);if($.name==="validate")return!!Z.query;if($.name==="deleteOne"||$.name==="updateOne")return!!Z.query||Object.keys(Z).length===0;if($.query!=null||$.document!=null)return!!$.query;return!0});F.prototype._queryMiddleware=B};function el1(A){let F={};if(A.hasOwnProperty("query"))F.query=A.query;if(A.hasOwnProperty("document"))F.document=A.document;return F}/*!
 * Module exports.
 */e01.exports=o01=B1});var F21=C((kX,A21)=>{A21.exports=Bp1;kX.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var Ap1=kX.pluralization;kX.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var Fp1=kX.uncountables;function Bp1(A){let F;if(A=A.toLowerCase(),!~Fp1.indexOf(A)){if(F=Ap1.filter(function(B){return A.match(B[0])}),F[0])return A.replace(F[0][0],F[0][1])}return A}});var J21=C((Sq0,X21)=>{/*!
 * Module requirements
 */var Z21=t1(),B21=A1("util"),$21=kL();class g5 extends Z21{constructor(){super("");this.errors={}}toString(){return $21(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(A,F){if(F instanceof g5){let{errors:B}=F;for(let $ of Object.keys(B))this.addError($,B[$]);return}this.errors[A]=F,this.message=$21(this)}}if(B21.inspect.custom)g5.prototype[B21.inspect.custom]=g5.prototype.inspect;Object.defineProperty(g5.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(g5.prototype,"name",{value:"SetOptionError"});class D21 extends Z21{constructor(A){super(`"${A}" is not a valid option to set`)}}g5.SetOptionInnerError=D21;/*!
 * Module exports
 */X21.exports=g5});var W21=C(()=>{var Y21=f1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")Y21.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(setTimeout.clock!=null&&typeof setTimeout.clock.Date==="function")Y21.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var U21=C((q21,H21)=>{/*!
 * Module dependencies.
 */var G21=X7(),Q21=A1("events").EventEmitter,z21=r4(),$p1=cA(),Zp1=U3(),Dp1=z21.ValidationError,Xp1=aG(),Jp1=I5();function z7(A,F,B,$,Z){if(!(this instanceof z7))return new z7(A,F,B,$,Z);if(Jp1(F)&&!F.instanceOfSchema)F=new $p1(F);if(F=this.schema||F,!this.schema&&F.options._id){if(A=A||{},A._id===void 0)A._id=new Zp1}if(!F)throw new z21.MissingSchemaError;this.$__setSchema(F),G21.call(this,A,B,$,Z),Xp1(this,F,{decorateDoc:!0});for(let D in F.methods)this[D]=F.methods[D];for(let D in F.statics)this[D]=F.statics[D]}/*!
 * Inherit from the NodeJS document
 */z7.prototype=Object.create(G21.prototype);z7.prototype.constructor=z7;/*!
 * ignore
 */z7.events=new Q21;/*!
 * Browser doc exposes the event emitter API
 */z7.$emitter=new Q21;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(A){z7[A]=function(){return z7.$emitter[A].apply(z7.$emitter,arguments)}});/*!
 * Module exports.
 */z7.ValidationError=Dp1;H21.exports=q21=z7});var K21=C((xq0,xM)=>{/*!
 * Module dependencies.
 */var Yp1=X7(),Wp1=U21(),C21=!1;xM.exports=function A(){if(C21)return Wp1;return Yp1};/*!
 * ignore
 */xM.exports.setBrowser=function(A){C21=A}});var I21=C((P21,j21)=>{/*!
 * Module dependencies.
 */var Gp1=X7(),Qp1=A1("events").EventEmitter,L21=fA(),_3=cA(),zp1=B6(),_X=rD(),qp1=iG(),qz=OD(),E21=Ko(),Hp1=A$(),Up1=sQ(),w21=GM(),Cp1=XN(),Kp1=IV(),V21=kQ(),Ep1=F21(),bM=f1(),Lp1=TN(),wp1=iA(),Vp1=XM(),Np1=vB().trusted,Mp1=rN(),Rp1=f6(),K$=t1(),zz=J21(),Pp1=WM(),N21=Symbol.for("mongoose:default"),M21=Symbol("mongoose:defaultConnection");W21();var jp1=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:R21}=A1("node:async_hooks");function Q1(A){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new Qp1,this.__driver=V21.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},A),(bM.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)fM(this);if(this.options.pluralization)this._pluralize=Ep1;if(!A||!A[N21]){let B=this;this.Schema=function(){return this.base=B,_3.apply(this,arguments)},this.Schema.prototype=Object.create(_3.prototype),Object.assign(this.Schema,_3),this.Schema.base=this,this.Schema.Types=Object.assign({},_3.Types)}else for(let B of["Schema","model"])this[B]=Q1.prototype[B];if(this.Schema.prototype.base=this,A?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new R21;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(Kp1).map((B)=>[B,{deduplicate:!0}])})}Q1.prototype.cast=wp1;Q1.prototype.STATES=qz;Q1.prototype.ConnectionStates=qz;Q1.prototype.driver=V21;Q1.prototype.setDriver=function A(F){let B=this instanceof Q1?this:Q4;if(B.__driver===F)return B;if(B.connections&&B.connections.find((X)=>X.readyState!==qz.disconnected))throw new K$("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if(B.__driver=F,Array.isArray(F.plugins)){for(let X of F.plugins)if(typeof X==="function")B.plugin(X)}if(F.SchemaTypes!=null)Object.assign(Q4.Schema.Types,F.SchemaTypes);let Z=F.Connection,D=B.connections[0];if(B.connections=[new Z(B)],B.connections[0].models=B.models,D==null)return B;for(let X of Object.values(B.models)){if(X.db!==D)continue;X.$__updateConnection(B.connections[0])}return B};Q1.prototype.set=function A(F,B){let $=this instanceof Q1?this:Q4;if(arguments.length===1&&typeof F!=="object"){if(E21.indexOf(F)===-1){let X=new zz;throw X.addError(F,new zz.SetOptionInnerError(F)),X}return $.options[F]}let Z={};if(arguments.length===2)Z={[F]:B};if(arguments.length===1&&typeof F==="object")Z=F;let D=void 0;for(let[X,J]of Object.entries(Z)){if(E21.indexOf(X)===-1){if(!D)D=new zz;D.addError(X,new zz.SetOptionInnerError(X));continue}if($.options[X]=J,X==="objectIdGetter")if(J)Object.defineProperty($.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete $.Types.ObjectId.prototype._id;else if(X==="transactionAsyncLocalStorage"){if(J&&!$.transactionAsyncLocalStorage)$.transactionAsyncLocalStorage=new R21;else if(!J&&$.transactionAsyncLocalStorage)delete $.transactionAsyncLocalStorage}else if(X==="createInitialConnection"){if(J&&!$.connection)fM($);else if(J===!1&&$.connection&&$.connection[M21]){if($.connection.readyState===qz.disconnected&&Object.keys($.connection.models).length===0)$.connections.shift()}}}if(D)throw D;return $};Q1.prototype.get=Q1.prototype.set;Q1.prototype.createConnection=function A(F,B){let $=this instanceof Q1?this:Q4,D=new $.__driver.Connection($);if($.connections.push(D),$.nextConnectionId++,$.events.emit("createConnection",D),arguments.length>0)D.openUri(F,{...B,_fireAndForget:!0});return D};Q1.prototype.connect=async function A(F,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new K$("Mongoose.prototype.connect() no longer accepts a callback");let $=this instanceof Q1?this:Q4;if($.connection==null)fM($);return $.connection.openUri(F,B).then(()=>$)};Q1.prototype.disconnect=async function A(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new K$("Mongoose.prototype.disconnect() no longer accepts a callback");let F=this instanceof Q1?this:Q4;if(F.connections.length<=0)return;await Promise.all(F.connections.map(($)=>$.close()))};Q1.prototype.startSession=function A(){let F=this instanceof Q1?this:Q4;return F.connection.startSession.apply(F.connection,arguments)};Q1.prototype.pluralize=function A(F){let B=this instanceof Q1?this:Q4;if(arguments.length>0)B._pluralize=F;return B._pluralize};Q1.prototype.model=function A(F,B,$,Z){let D=this instanceof Q1?this:Q4;if(typeof B==="string")$=B,B=!1;if(arguments.length===1){let W=D.models[F];if(!W)throw new D.Error.MissingSchemaError(F);return W}if(bM.isObject(B)&&!(B instanceof _3))B=new _3(B);if(B&&!(B instanceof _3))throw new D.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");Z=Z||{};let X=B;if(B){if(D.get("cloneSchemas"))B=B.clone();D._applyPlugins(B)}let J=D.options.hasOwnProperty("overwriteModels")?D.options.overwriteModels:Z.overwriteModels;if(D.models.hasOwnProperty(F)&&Z.cache!==!1&&J!==!0){if(X&&X.instanceOfSchema&&X!==D.models[F].schema)throw new D.Error.OverwriteModelError(F);if($&&$!==D.models[F].collection.name){let W=D.models[F];return B=W.prototype.schema,W.__subclass(D.connection,B,$)}return D.models[F]}if(B==null)throw new D.Error.MissingSchemaError(F);let Y=D._model(F,B,$,Z);return D.connection.models[F]=Y,D.models[F]=Y,Y};/*!
 * ignore
 */Q1.prototype._model=function A(F,B,$,Z){let D=this instanceof Q1?this:Q4,X;if(typeof F==="function"){if(X=F,F=X.name,!(X.prototype instanceof w21))throw new D.Error("The provided class "+F+" must extend Model")}if(B){if(D.get("cloneSchemas"))B=B.clone();D._applyPlugins(B)}if(B==null||!("pluralization"in B.options))B.options.pluralization=D.options.pluralization;if(!$)$=B.get("collection")||bM.toCollectionName(F,D.pluralize());Pp1(B);let J=Z.connection||D.connection;if(X=D.Model.compile(X||F,B,$,J,D),X.init().catch(function Y(){}),J.emit("model",X),B._applyDiscriminators!=null)for(let Y of B._applyDiscriminators.keys()){let{schema:W,options:G}=B._applyDiscriminators.get(Y);X.discriminator(Y,W,G)}return X};Q1.prototype.deleteModel=function A(F){let B=this instanceof Q1?this:Q4;return B.connection.deleteModel(F),delete B.models[F],B};Q1.prototype.modelNames=function A(){let F=this instanceof Q1?this:Q4;return Object.keys(F.models)};Q1.prototype._applyPlugins=function A(F,B){let $=this instanceof Q1?this:Q4;B=B||{},B.applyPluginsToDiscriminators=$.options&&$.options.applyPluginsToDiscriminators||!1,B.applyPluginsToChildSchemas=typeof($.options&&$.options.applyPluginsToChildSchemas)==="boolean"?$.options.applyPluginsToChildSchemas:!0,Cp1(F,$.plugins,B,"$globalPluginsApplied")};Q1.prototype.plugin=function A(F,B){let $=this instanceof Q1?this:Q4;return $.plugins.push([F,B]),$};Q1.prototype.__defineGetter__("connection",function(){return this.connections[0]});Q1.prototype.__defineSetter__("connection",function(A){if(A instanceof this.__driver.Connection)this.connections[0]=A,this.models=A.models});Q1.prototype.connections;Q1.prototype.nextConnectionId;Q1.prototype.Aggregate=Vp1;Q1.prototype.BaseCollection=UL();Object.defineProperty(Q1.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(A){this.__driver.Collection=A}});Object.defineProperty(Q1.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(A){if(A===this.__driver.Connection)return;this.__driver.Connection=A}});Q1.prototype.BaseConnection=IN();Q1.prototype.version=Lp1.version;Q1.prototype.Mongoose=Q1;Q1.prototype.Schema=_3;Q1.prototype.SchemaType=zp1;Q1.prototype.SchemaTypes=_3.Types;Q1.prototype.VirtualType=qp1;Q1.prototype.Types=Hp1;Q1.prototype.Query=Up1;Q1.prototype.Model=w21;Q1.prototype.Document=Gp1;Q1.prototype.DocumentProvider=K21();Q1.prototype.ObjectId=_X.ObjectId;Q1.prototype.isValidObjectId=function A(F){return(this instanceof Q1?this:Q4).Types.ObjectId.isValid(F)};Q1.prototype.isObjectIdOrHexString=function A(F){return Rp1(F,"ObjectId")||typeof F==="string"&&jp1.test(F)};Q1.prototype.syncIndexes=function A(F){return(this instanceof Q1?this:Q4).connection.syncIndexes(F)};Q1.prototype.Decimal128=_X.Decimal128;Q1.prototype.Mixed=_X.Mixed;Q1.prototype.Date=_X.Date;Q1.prototype.Number=_X.Number;Q1.prototype.Error=K$;Q1.prototype.MongooseError=K$;Q1.prototype.now=function A(){return new Date};Q1.prototype.CastError=K$.CastError;Q1.prototype.SchemaTypeOptions=T9();Q1.prototype.mquery=aN();Q1.prototype.sanitizeFilter=Mp1;Q1.prototype.trusted=Np1;Q1.prototype.skipMiddlewareFunction=L21.skipWrappedFunction;Q1.prototype.overwriteMiddlewareResult=L21.overwriteResult;Q1.prototype.omitUndefined=FV();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function fM(A){if(A.connection)return;let F=A.createConnection();F[M21]=!0,F.models=A.models}var Q4=j21.exports=P21=new Q1({[N21]:!0})});var S21=C((bq0,O21)=>{/*!
 * Module dependencies.
 */var T21=Uo();kQ().set(T21);var gM=I21();gM.setDriver(T21);gM.Mongoose.prototype.mongo=kA();O21.exports=gM});var uM=C((fq0,S1)=>{var k1=S21();S1.exports=k1;S1.exports.default=k1;S1.exports.mongoose=k1;S1.exports.cast=k1.cast;S1.exports.STATES=k1.STATES;S1.exports.setDriver=k1.setDriver;S1.exports.set=k1.set;S1.exports.get=k1.get;S1.exports.createConnection=k1.createConnection;S1.exports.connect=k1.connect;S1.exports.disconnect=k1.disconnect;S1.exports.startSession=k1.startSession;S1.exports.pluralize=k1.pluralize;S1.exports.model=k1.model;S1.exports.deleteModel=k1.deleteModel;S1.exports.modelNames=k1.modelNames;S1.exports.plugin=k1.plugin;S1.exports.connections=k1.connections;S1.exports.version=k1.version;S1.exports.Aggregate=k1.Aggregate;S1.exports.Mongoose=k1.Mongoose;S1.exports.Schema=k1.Schema;S1.exports.SchemaType=k1.SchemaType;S1.exports.SchemaTypes=k1.SchemaTypes;S1.exports.VirtualType=k1.VirtualType;S1.exports.Types=k1.Types;S1.exports.Query=k1.Query;S1.exports.Model=k1.Model;S1.exports.Document=k1.Document;S1.exports.ObjectId=k1.ObjectId;S1.exports.isValidObjectId=k1.isValidObjectId;S1.exports.isObjectIdOrHexString=k1.isObjectIdOrHexString;S1.exports.syncIndexes=k1.syncIndexes;S1.exports.Decimal128=k1.Decimal128;S1.exports.Mixed=k1.Mixed;S1.exports.Date=k1.Date;S1.exports.Number=k1.Number;S1.exports.Error=k1.Error;S1.exports.MongooseError=k1.MongooseError;S1.exports.now=k1.now;S1.exports.CastError=k1.CastError;S1.exports.SchemaTypeOptions=k1.SchemaTypeOptions;S1.exports.mongo=k1.mongo;S1.exports.mquery=k1.mquery;S1.exports.sanitizeFilter=k1.sanitizeFilter;S1.exports.trusted=k1.trusted;S1.exports.skipMiddlewareFunction=k1.skipMiddlewareFunction;S1.exports.overwriteMiddlewareResult=k1.overwriteMiddlewareResult});var k21=C((yM,vM)=>{(function(A,F){typeof yM=="object"&&typeof vM!="undefined"?vM.exports=F():typeof define=="function"&&define.amd?define(F):(A=typeof globalThis!="undefined"?globalThis:A||self).dayjs=F()})(yM,function(){var A=1000,F=60000,B=3600000,$="millisecond",Z="second",D="minute",X="hour",J="day",Y="week",W="month",G="quarter",Q="year",q="date",z="Invalid Date",H=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var k=["th","st","nd","rd"],v=S%100;return"["+S+(k[(v-20)%10]||k[v]||k[0])+"]"}},E=function(S,k,v){var J1=String(S);return!J1||J1.length>=k?S:""+Array(k+1-J1.length).join(v)+S},L={s:E,z:function(S){var k=-S.utcOffset(),v=Math.abs(k),J1=Math.floor(v/60),r=v%60;return(k<=0?"+":"-")+E(J1,2,"0")+":"+E(r,2,"0")},m:function S(k,v){if(k.date()<v.date())return-S(v,k);var J1=12*(v.year()-k.year())+(v.month()-k.month()),r=k.clone().add(J1,W),q1=v-r<0,C1=k.clone().add(J1+(q1?-1:1),W);return+(-(J1+(v-r)/(q1?r-C1:C1-r))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:W,y:Q,w:Y,d:J,D:q,h:X,m:D,s:Z,ms:$,Q:G}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},V="en",M={};M[V]=K;var O="$isDayjsObject",R=function(S){return S instanceof N||!(!S||!S[O])},_=function S(k,v,J1){var r;if(!k)return V;if(typeof k=="string"){var q1=k.toLowerCase();M[q1]&&(r=q1),v&&(M[q1]=v,r=q1);var C1=k.split("-");if(!r&&C1.length>1)return S(C1[0])}else{var b1=k.name;M[b1]=k,r=b1}return!J1&&r&&(V=r),r||!J1&&V},P=function(S,k){if(R(S))return S.clone();var v=typeof k=="object"?k:{};return v.date=S,v.args=arguments,new N(v)},T=L;T.l=_,T.i=R,T.w=function(S,k){return P(S,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var N=function(){function S(v){this.$L=_(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[O]=!0}var k=S.prototype;return k.parse=function(v){this.$d=function(J1){var{date:r,utc:q1}=J1;if(r===null)return new Date(NaN);if(T.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var C1=r.match(H);if(C1){var b1=C1[2]-1||0,_1=(C1[7]||"0").substring(0,3);return q1?new Date(Date.UTC(C1[1],b1,C1[3]||1,C1[4]||0,C1[5]||0,C1[6]||0,_1)):new Date(C1[1],b1,C1[3]||1,C1[4]||0,C1[5]||0,C1[6]||0,_1)}}return new Date(r)}(v),this.init()},k.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},k.$utils=function(){return T},k.isValid=function(){return this.$d.toString()!==z},k.isSame=function(v,J1){var r=P(v);return this.startOf(J1)<=r&&r<=this.endOf(J1)},k.isAfter=function(v,J1){return P(v)<this.startOf(J1)},k.isBefore=function(v,J1){return this.endOf(J1)<P(v)},k.$g=function(v,J1,r){return T.u(v)?this[J1]:this.set(r,v)},k.unix=function(){return Math.floor(this.valueOf()/1000)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(v,J1){var r=this,q1=!!T.u(J1)||J1,C1=T.p(v),b1=function(_4,a0){var Y1=T.w(r.$u?Date.UTC(r.$y,a0,_4):new Date(r.$y,a0,_4),r);return q1?Y1:Y1.endOf(J)},_1=function(_4,a0){return T.w(r.toDate()[_4].apply(r.toDate("s"),(q1?[0,0,0,0]:[23,59,59,999]).slice(a0)),r)},O1=this.$W,J0=this.$M,s0=this.$D,N6="set"+(this.$u?"UTC":"");switch(C1){case Q:return q1?b1(1,0):b1(31,11);case W:return q1?b1(1,J0):b1(0,J0+1);case Y:var D6=this.$locale().weekStart||0,v6=(O1<D6?O1+7:O1)-D6;return b1(q1?s0-v6:s0+(6-v6),J0);case J:case q:return _1(N6+"Hours",0);case X:return _1(N6+"Minutes",1);case D:return _1(N6+"Seconds",2);case Z:return _1(N6+"Milliseconds",3);default:return this.clone()}},k.endOf=function(v){return this.startOf(v,!1)},k.$set=function(v,J1){var r,q1=T.p(v),C1="set"+(this.$u?"UTC":""),b1=(r={},r[J]=C1+"Date",r[q]=C1+"Date",r[W]=C1+"Month",r[Q]=C1+"FullYear",r[X]=C1+"Hours",r[D]=C1+"Minutes",r[Z]=C1+"Seconds",r[$]=C1+"Milliseconds",r)[q1],_1=q1===J?this.$D+(J1-this.$W):J1;if(q1===W||q1===Q){var O1=this.clone().set(q,1);O1.$d[b1](_1),O1.init(),this.$d=O1.set(q,Math.min(this.$D,O1.daysInMonth())).$d}else b1&&this.$d[b1](_1);return this.init(),this},k.set=function(v,J1){return this.clone().$set(v,J1)},k.get=function(v){return this[T.p(v)]()},k.add=function(v,J1){var r,q1=this;v=Number(v);var C1=T.p(J1),b1=function(J0){var s0=P(q1);return T.w(s0.date(s0.date()+Math.round(J0*v)),q1)};if(C1===W)return this.set(W,this.$M+v);if(C1===Q)return this.set(Q,this.$y+v);if(C1===J)return b1(1);if(C1===Y)return b1(7);var _1=(r={},r[D]=F,r[X]=B,r[Z]=A,r)[C1]||1,O1=this.$d.getTime()+v*_1;return T.w(O1,this)},k.subtract=function(v,J1){return this.add(-1*v,J1)},k.format=function(v){var J1=this,r=this.$locale();if(!this.isValid())return r.invalidDate||z;var q1=v||"YYYY-MM-DDTHH:mm:ssZ",C1=T.z(this),b1=this.$H,_1=this.$m,O1=this.$M,J0=r.weekdays,s0=r.months,N6=r.meridiem,D6=function(a0,Y1,a,w){return a0&&(a0[Y1]||a0(J1,q1))||a[Y1].slice(0,w)},v6=function(a0){return T.s(b1%12||12,a0,"0")},_4=N6||function(a0,Y1,a){var w=a0<12?"AM":"PM";return a?w.toLowerCase():w};return q1.replace(U,function(a0,Y1){return Y1||function(a){switch(a){case"YY":return String(J1.$y).slice(-2);case"YYYY":return T.s(J1.$y,4,"0");case"M":return O1+1;case"MM":return T.s(O1+1,2,"0");case"MMM":return D6(r.monthsShort,O1,s0,3);case"MMMM":return D6(s0,O1);case"D":return J1.$D;case"DD":return T.s(J1.$D,2,"0");case"d":return String(J1.$W);case"dd":return D6(r.weekdaysMin,J1.$W,J0,2);case"ddd":return D6(r.weekdaysShort,J1.$W,J0,3);case"dddd":return J0[J1.$W];case"H":return String(b1);case"HH":return T.s(b1,2,"0");case"h":return v6(1);case"hh":return v6(2);case"a":return _4(b1,_1,!0);case"A":return _4(b1,_1,!1);case"m":return String(_1);case"mm":return T.s(_1,2,"0");case"s":return String(J1.$s);case"ss":return T.s(J1.$s,2,"0");case"SSS":return T.s(J1.$ms,3,"0");case"Z":return C1}return null}(a0)||C1.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(v,J1,r){var q1,C1=this,b1=T.p(J1),_1=P(v),O1=(_1.utcOffset()-this.utcOffset())*F,J0=this-_1,s0=function(){return T.m(C1,_1)};switch(b1){case Q:q1=s0()/12;break;case W:q1=s0();break;case G:q1=s0()/3;break;case Y:q1=(J0-O1)/604800000;break;case J:q1=(J0-O1)/86400000;break;case X:q1=J0/B;break;case D:q1=J0/F;break;case Z:q1=J0/A;break;default:q1=J0}return r?q1:T.a(q1)},k.daysInMonth=function(){return this.endOf(W).$D},k.$locale=function(){return M[this.$L]},k.locale=function(v,J1){if(!v)return this.$L;var r=this.clone(),q1=_(v,J1,!0);return q1&&(r.$L=q1),r},k.clone=function(){return T.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},S}(),y=N.prototype;return P.prototype=y,[["$ms",$],["$s",Z],["$m",D],["$H",X],["$W",J],["$M",W],["$y",Q],["$D",q]].forEach(function(S){y[S[1]]=function(k){return this.$g(k,S[0],S[1])}}),P.extend=function(S,k){return S.$i||(S(k,N,P),S.$i=!0),P},P.locale=_,P.isDayjs=R,P.unix=function(S){return P(1000*S)},P.en=M[V],P.Ls=M,P.p={},P})});var M$=C((pM,d21)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Hz=A1("buffer"),T8=Hz.Buffer;function h21(A,F){for(var B in A)F[B]=A[B]}if(T8.from&&T8.alloc&&T8.allocUnsafe&&T8.allocUnsafeSlow)d21.exports=Hz;else h21(Hz,pM),pM.Buffer=DF;function DF(A,F,B){return T8(A,F,B)}DF.prototype=Object.create(T8.prototype);h21(T8,DF);DF.from=function(A,F,B){if(typeof A==="number")throw new TypeError("Argument must not be a number");return T8(A,F,B)};DF.alloc=function(A,F,B){if(typeof A!=="number")throw new TypeError("Argument must be a number");var $=T8(A);if(F!==void 0)if(typeof B==="string")$.fill(F,B);else $.fill(F);else $.fill(0);return $};DF.allocUnsafe=function(A){if(typeof A!=="number")throw new TypeError("Argument must be a number");return T8(A)};DF.allocUnsafeSlow=function(A){if(typeof A!=="number")throw new TypeError("Argument must be a number");return Hz.SlowBuffer(A)}});var iM=C((nq0,m21)=>{var Uz=M$().Buffer,vp1=A1("stream"),hp1=A1("util");function Cz(A){if(this.buffer=null,this.writable=!0,this.readable=!0,!A)return this.buffer=Uz.alloc(0),this;if(typeof A.pipe==="function")return this.buffer=Uz.alloc(0),A.pipe(this),this;if(A.length||typeof A==="object")return this.buffer=A,this.writable=!1,process.nextTick(function(){this.emit("end",A),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof A+")")}hp1.inherits(Cz,vp1);Cz.prototype.write=function A(F){this.buffer=Uz.concat([this.buffer,Uz.from(F)]),this.emit("data",F)};Cz.prototype.end=function A(F){if(F)this.write(F);this.emit("end",F),this.emit("close"),this.writable=!1,this.readable=!1};m21.exports=Cz});var l21=C((sq0,c21)=>{function nM(A){var F=(A/8|0)+(A%8===0?0:1);return F}var dp1={ES256:nM(256),ES384:nM(384),ES512:nM(521)};function mp1(A){var F=dp1[A];if(F)return F;throw new Error('Unknown algorithm "'+A+'"')}c21.exports=mp1});var r21=C((aq0,t21)=>{var Kz=M$().Buffer,i21=l21(),Ez=128,n21=0,cp1=32,lp1=16,pp1=2,s21=lp1|cp1|n21<<6,Lz=pp1|n21<<6;function ip1(A){return A.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a21(A){if(Kz.isBuffer(A))return A;else if(typeof A==="string")return Kz.from(A,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function np1(A,F){A=a21(A);var B=i21(F),$=B+1,Z=A.length,D=0;if(A[D++]!==s21)throw new Error('Could not find expected "seq"');var X=A[D++];if(X===(Ez|1))X=A[D++];if(Z-D<X)throw new Error('"seq" specified length of "'+X+'", only "'+(Z-D)+'" remaining');if(A[D++]!==Lz)throw new Error('Could not find expected "int" for "r"');var J=A[D++];if(Z-D-2<J)throw new Error('"r" specified length of "'+J+'", only "'+(Z-D-2)+'" available');if($<J)throw new Error('"r" specified length of "'+J+'", max of "'+$+'" is acceptable');var Y=D;if(D+=J,A[D++]!==Lz)throw new Error('Could not find expected "int" for "s"');var W=A[D++];if(Z-D!==W)throw new Error('"s" specified length of "'+W+'", expected "'+(Z-D)+'"');if($<W)throw new Error('"s" specified length of "'+W+'", max of "'+$+'" is acceptable');var G=D;if(D+=W,D!==Z)throw new Error('Expected to consume entire buffer, but "'+(Z-D)+'" bytes remain');var Q=B-J,q=B-W,z=Kz.allocUnsafe(Q+J+q+W);for(D=0;D<Q;++D)z[D]=0;A.copy(z,D,Y+Math.max(-Q,0),Y+J),D=B;for(var H=D;D<H+q;++D)z[D]=0;return A.copy(z,D,G+Math.max(-q,0),G+W),z=z.toString("base64"),z=ip1(z),z}function p21(A,F,B){var $=0;while(F+$<B&&A[F+$]===0)++$;var Z=A[F+$]>=Ez;if(Z)--$;return $}function sp1(A,F){A=a21(A);var B=i21(F),$=A.length;if($!==B*2)throw new TypeError('"'+F+'" signatures must be "'+B*2+'" bytes, saw "'+$+'"');var Z=p21(A,0,B),D=p21(A,B,A.length),X=B-Z,J=B-D,Y=2+X+1+1+J,W=Y<Ez,G=Kz.allocUnsafe((W?2:3)+Y),Q=0;if(G[Q++]=s21,W)G[Q++]=Y;else G[Q++]=Ez|1,G[Q++]=Y&255;if(G[Q++]=Lz,G[Q++]=X,Z<0)G[Q++]=0,Q+=A.copy(G,Q,0,B);else Q+=A.copy(G,Q,Z,B);if(G[Q++]=Lz,G[Q++]=J,D<0)G[Q++]=0,A.copy(G,Q,B);else A.copy(G,Q,B+D);return G}t21.exports={derToJose:np1,joseToDer:sp1}});var e21=C((tq0,o21)=>{var uX=A1("buffer").Buffer,sM=A1("buffer").SlowBuffer;o21.exports=wz;function wz(A,F){if(!uX.isBuffer(A)||!uX.isBuffer(F))return!1;if(A.length!==F.length)return!1;var B=0;for(var $=0;$<A.length;$++)B|=A[$]^F[$];return B===0}wz.install=function(){uX.prototype.equal=sM.prototype.equal=function A(F){return wz(this,F)}};var ap1=uX.prototype.equal,tp1=sM.prototype.equal;wz.restore=function(){uX.prototype.equal=ap1,sM.prototype.equal=tp1}});var oM=C((rq0,Y61)=>{var P$=M$().Buffer,q7=A1("crypto"),F61=r21(),A61=A1("util"),rp1=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,yX="secret must be a string or buffer",R$="key must be a string or a buffer",op1="key must be a string, a buffer or an object",tM=typeof q7.createPublicKey==="function";if(tM)R$+=" or a KeyObject",yX+="or a KeyObject";function B61(A){if(P$.isBuffer(A))return;if(typeof A==="string")return;if(!tM)throw F8(R$);if(typeof A!=="object")throw F8(R$);if(typeof A.type!=="string")throw F8(R$);if(typeof A.asymmetricKeyType!=="string")throw F8(R$);if(typeof A.export!=="function")throw F8(R$)}function $61(A){if(P$.isBuffer(A))return;if(typeof A==="string")return;if(typeof A==="object")return;throw F8(op1)}function ep1(A){if(P$.isBuffer(A))return;if(typeof A==="string")return A;if(!tM)throw F8(yX);if(typeof A!=="object")throw F8(yX);if(A.type!=="secret")throw F8(yX);if(typeof A.export!=="function")throw F8(yX)}function rM(A){return A.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Z61(A){A=A.toString();var F=4-A.length%4;if(F!==4)for(var B=0;B<F;++B)A+="=";return A.replace(/\-/g,"+").replace(/_/g,"/")}function F8(A){var F=[].slice.call(arguments,1),B=A61.format.bind(A61,A).apply(null,F);return new TypeError(B)}function Ai1(A){return P$.isBuffer(A)||typeof A==="string"}function vX(A){if(!Ai1(A))A=JSON.stringify(A);return A}function D61(A){return function F(B,$){ep1($),B=vX(B);var Z=q7.createHmac("sha"+A,$),D=(Z.update(B),Z.digest("base64"));return rM(D)}}var aM,Fi1="timingSafeEqual"in q7?function A(F,B){if(F.byteLength!==B.byteLength)return!1;return q7.timingSafeEqual(F,B)}:function A(F,B){if(!aM)aM=e21();return aM(F,B)};function Bi1(A){return function F(B,$,Z){var D=D61(A)(B,Z);return Fi1(P$.from($),P$.from(D))}}function X61(A){return function F(B,$){$61($),B=vX(B);var Z=q7.createSign("RSA-SHA"+A),D=(Z.update(B),Z.sign($,"base64"));return rM(D)}}function J61(A){return function F(B,$,Z){B61(Z),B=vX(B),$=Z61($);var D=q7.createVerify("RSA-SHA"+A);return D.update(B),D.verify(Z,$,"base64")}}function $i1(A){return function F(B,$){$61($),B=vX(B);var Z=q7.createSign("RSA-SHA"+A),D=(Z.update(B),Z.sign({key:$,padding:q7.constants.RSA_PKCS1_PSS_PADDING,saltLength:q7.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return rM(D)}}function Zi1(A){return function F(B,$,Z){B61(Z),B=vX(B),$=Z61($);var D=q7.createVerify("RSA-SHA"+A);return D.update(B),D.verify({key:Z,padding:q7.constants.RSA_PKCS1_PSS_PADDING,saltLength:q7.constants.RSA_PSS_SALTLEN_DIGEST},$,"base64")}}function Di1(A){var F=X61(A);return function B(){var $=F.apply(null,arguments);return $=F61.derToJose($,"ES"+A),$}}function Xi1(A){var F=J61(A);return function B($,Z,D){Z=F61.joseToDer(Z,"ES"+A).toString("base64");var X=F($,Z,D);return X}}function Ji1(){return function A(){return""}}function Yi1(){return function A(F,B){return B===""}}Y61.exports=function A(F){var B={hs:D61,rs:X61,ps:$i1,es:Di1,none:Ji1},$={hs:Bi1,rs:J61,ps:Zi1,es:Xi1,none:Yi1},Z=F.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!Z)throw F8(rp1,F);var D=(Z[1]||Z[3]).toLowerCase(),X=Z[2];return{sign:B[D](X),verify:$[D](X)}}});var eM=C((oq0,W61)=>{var Wi1=A1("buffer").Buffer;W61.exports=function A(F){if(typeof F==="string")return F;if(typeof F==="number"||Wi1.isBuffer(F))return F.toString();return JSON.stringify(F)}});var U61=C((eq0,H61)=>{var Gi1=M$().Buffer,G61=iM(),Qi1=oM(),zi1=A1("stream"),Q61=eM(),AR=A1("util");function z61(A,F){return Gi1.from(A,F).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qi1(A,F,B){B=B||"utf8";var $=z61(Q61(A),"binary"),Z=z61(Q61(F),B);return AR.format("%s.%s",$,Z)}function q61(A){var{header:F,payload:B}=A,$=A.secret||A.privateKey,Z=A.encoding,D=Qi1(F.alg),X=qi1(F,B,Z),J=D.sign(X,$);return AR.format("%s.%s",X,J)}function Vz(A){var F=A.secret||A.privateKey||A.key,B=new G61(F);this.readable=!0,this.header=A.header,this.encoding=A.encoding,this.secret=this.privateKey=this.key=B,this.payload=new G61(A.payload),this.secret.once("close",function(){if(!this.payload.writable&&this.readable)this.sign()}.bind(this)),this.payload.once("close",function(){if(!this.secret.writable&&this.readable)this.sign()}.bind(this))}AR.inherits(Vz,zi1);Vz.prototype.sign=function A(){try{var F=q61({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",F),this.emit("data",F),this.emit("end"),this.readable=!1,F}catch(B){this.readable=!1,this.emit("error",B),this.emit("close")}};Vz.sign=q61;H61.exports=Vz});var P61=C((AH0,R61)=>{var K61=M$().Buffer,C61=iM(),Hi1=oM(),Ui1=A1("stream"),E61=eM(),Ci1=A1("util"),Ki1=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Ei1(A){return Object.prototype.toString.call(A)==="[object Object]"}function Li1(A){if(Ei1(A))return A;try{return JSON.parse(A)}catch(F){return}}function L61(A){var F=A.split(".",1)[0];return Li1(K61.from(F,"base64").toString("binary"))}function wi1(A){return A.split(".",2).join(".")}function w61(A){return A.split(".")[2]}function Vi1(A,F){F=F||"utf8";var B=A.split(".")[1];return K61.from(B,"base64").toString(F)}function V61(A){return Ki1.test(A)&&!!L61(A)}function N61(A,F,B){if(!F){var $=new Error("Missing algorithm parameter for jws.verify");throw $.code="MISSING_ALGORITHM",$}A=E61(A);var Z=w61(A),D=wi1(A),X=Hi1(F);return X.verify(D,Z,B)}function M61(A,F){if(F=F||{},A=E61(A),!V61(A))return null;var B=L61(A);if(!B)return null;var $=Vi1(A);if(B.typ==="JWT"||F.json)$=JSON.parse($,F.encoding);return{header:B,payload:$,signature:w61(A)}}function j$(A){A=A||{};var F=A.secret||A.publicKey||A.key,B=new C61(F);this.readable=!0,this.algorithm=A.algorithm,this.encoding=A.encoding,this.secret=this.publicKey=this.key=B,this.signature=new C61(A.signature),this.secret.once("close",function(){if(!this.signature.writable&&this.readable)this.verify()}.bind(this)),this.signature.once("close",function(){if(!this.secret.writable&&this.readable)this.verify()}.bind(this))}Ci1.inherits(j$,Ui1);j$.prototype.verify=function A(){try{var F=N61(this.signature.buffer,this.algorithm,this.key.buffer),B=M61(this.signature.buffer,this.encoding);return this.emit("done",F,B),this.emit("data",F),this.emit("end"),this.readable=!1,F}catch($){this.readable=!1,this.emit("error",$),this.emit("close")}};j$.decode=M61;j$.isValid=V61;j$.verify=N61;R61.exports=j$});var Mz=C((Mi1)=>{var j61=U61(),Nz=P61(),Ni1=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Mi1.ALGORITHMS=Ni1;Mi1.sign=j61.sign;Mi1.verify=Nz.verify;Mi1.decode=Nz.decode;Mi1.isValid=Nz.isValid;Mi1.createSign=function A(F){return new j61(F)};Mi1.createVerify=function A(F){return new Nz(F)}});var FR=C((BH0,I61)=>{var ki1=Mz();I61.exports=function(A,F){F=F||{};var B=ki1.decode(A,F);if(!B)return null;var $=B.payload;if(typeof $==="string")try{var Z=JSON.parse($);if(Z!==null&&typeof Z==="object")$=Z}catch(D){}if(F.complete===!0)return{header:B.header,payload:$,signature:B.signature};return $}});var hX=C(($H0,T61)=>{var Rz=function(A,F){if(Error.call(this,A),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);if(this.name="JsonWebTokenError",this.message=A,F)this.inner=F};Rz.prototype=Object.create(Error.prototype);Rz.prototype.constructor=Rz;T61.exports=Rz});var BR=C((ZH0,S61)=>{var O61=hX(),Pz=function(A,F){O61.call(this,A),this.name="NotBeforeError",this.date=F};Pz.prototype=Object.create(O61.prototype);Pz.prototype.constructor=Pz;S61.exports=Pz});var $R=C((DH0,_61)=>{var k61=hX(),jz=function(A,F){k61.call(this,A),this.name="TokenExpiredError",this.expiredAt=F};jz.prototype=Object.create(k61.prototype);jz.prototype.constructor=jz;_61.exports=jz});var ZR=C((XH0,x61)=>{var _i1=qG();x61.exports=function(A,F){var B=F||Math.floor(Date.now()/1000);if(typeof A==="string"){var $=_i1(A);if(typeof $==="undefined")return;return Math.floor(B+$/1000)}else if(typeof A==="number")return B+A;else return}});var dX=C((JH0,b61)=>{var xi1=Number.MAX_SAFE_INTEGER||9007199254740991,bi1=["major","premajor","minor","preminor","patch","prepatch","prerelease"];b61.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:xi1,RELEASE_TYPES:bi1,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var mX=C((YH0,f61)=>{var fi1=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...A)=>console.error("SEMVER",...A):()=>{};f61.exports=fi1});var I$=C((O8,g61)=>{var{MAX_SAFE_COMPONENT_LENGTH:DR,MAX_SAFE_BUILD_LENGTH:gi1,MAX_LENGTH:ui1}=dX(),yi1=mX();O8=g61.exports={};var vi1=O8.re=[],hi1=O8.safeRe=[],H1=O8.src=[],di1=O8.safeSrc=[],U1=O8.t={},mi1=0,XR="[a-zA-Z0-9-]",ci1=[["\\s",1],["\\d",ui1],[XR,gi1]],li1=(A)=>{for(let[F,B]of ci1)A=A.split(`${F}*`).join(`${F}{0,${B}}`).split(`${F}+`).join(`${F}{1,${B}}`);return A},c1=(A,F,B)=>{let $=li1(F),Z=mi1++;yi1(A,Z,F),U1[A]=Z,H1[Z]=F,di1[Z]=$,vi1[Z]=new RegExp(F,B?"g":void 0),hi1[Z]=new RegExp($,B?"g":void 0)};c1("NUMERICIDENTIFIER","0|[1-9]\\d*");c1("NUMERICIDENTIFIERLOOSE","\\d+");c1("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${XR}*`);c1("MAINVERSION",`(${H1[U1.NUMERICIDENTIFIER]})\\.(${H1[U1.NUMERICIDENTIFIER]})\\.(${H1[U1.NUMERICIDENTIFIER]})`);c1("MAINVERSIONLOOSE",`(${H1[U1.NUMERICIDENTIFIERLOOSE]})\\.(${H1[U1.NUMERICIDENTIFIERLOOSE]})\\.(${H1[U1.NUMERICIDENTIFIERLOOSE]})`);c1("PRERELEASEIDENTIFIER",`(?:${H1[U1.NONNUMERICIDENTIFIER]}|${H1[U1.NUMERICIDENTIFIER]})`);c1("PRERELEASEIDENTIFIERLOOSE",`(?:${H1[U1.NONNUMERICIDENTIFIER]}|${H1[U1.NUMERICIDENTIFIERLOOSE]})`);c1("PRERELEASE",`(?:-(${H1[U1.PRERELEASEIDENTIFIER]}(?:\\.${H1[U1.PRERELEASEIDENTIFIER]})*))`);c1("PRERELEASELOOSE",`(?:-?(${H1[U1.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${H1[U1.PRERELEASEIDENTIFIERLOOSE]})*))`);c1("BUILDIDENTIFIER",`${XR}+`);c1("BUILD",`(?:\\+(${H1[U1.BUILDIDENTIFIER]}(?:\\.${H1[U1.BUILDIDENTIFIER]})*))`);c1("FULLPLAIN",`v?${H1[U1.MAINVERSION]}${H1[U1.PRERELEASE]}?${H1[U1.BUILD]}?`);c1("FULL",`^${H1[U1.FULLPLAIN]}$`);c1("LOOSEPLAIN",`[v=\\s]*${H1[U1.MAINVERSIONLOOSE]}${H1[U1.PRERELEASELOOSE]}?${H1[U1.BUILD]}?`);c1("LOOSE",`^${H1[U1.LOOSEPLAIN]}$`);c1("GTLT","((?:<|>)?=?)");c1("XRANGEIDENTIFIERLOOSE",`${H1[U1.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);c1("XRANGEIDENTIFIER",`${H1[U1.NUMERICIDENTIFIER]}|x|X|\\*`);c1("XRANGEPLAIN",`[v=\\s]*(${H1[U1.XRANGEIDENTIFIER]})(?:\\.(${H1[U1.XRANGEIDENTIFIER]})(?:\\.(${H1[U1.XRANGEIDENTIFIER]})(?:${H1[U1.PRERELEASE]})?${H1[U1.BUILD]}?)?)?`);c1("XRANGEPLAINLOOSE",`[v=\\s]*(${H1[U1.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H1[U1.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H1[U1.XRANGEIDENTIFIERLOOSE]})(?:${H1[U1.PRERELEASELOOSE]})?${H1[U1.BUILD]}?)?)?`);c1("XRANGE",`^${H1[U1.GTLT]}\\s*${H1[U1.XRANGEPLAIN]}$`);c1("XRANGELOOSE",`^${H1[U1.GTLT]}\\s*${H1[U1.XRANGEPLAINLOOSE]}$`);c1("COERCEPLAIN",`(^|[^\\d])(\\d{1,${DR}})(?:\\.(\\d{1,${DR}}))?(?:\\.(\\d{1,${DR}}))?`);c1("COERCE",`${H1[U1.COERCEPLAIN]}(?:$|[^\\d])`);c1("COERCEFULL",H1[U1.COERCEPLAIN]+`(?:${H1[U1.PRERELEASE]})?(?:${H1[U1.BUILD]})?(?:$|[^\\d])`);c1("COERCERTL",H1[U1.COERCE],!0);c1("COERCERTLFULL",H1[U1.COERCEFULL],!0);c1("LONETILDE","(?:~>?)");c1("TILDETRIM",`(\\s*)${H1[U1.LONETILDE]}\\s+`,!0);O8.tildeTrimReplace="$1~";c1("TILDE",`^${H1[U1.LONETILDE]}${H1[U1.XRANGEPLAIN]}$`);c1("TILDELOOSE",`^${H1[U1.LONETILDE]}${H1[U1.XRANGEPLAINLOOSE]}$`);c1("LONECARET","(?:\\^)");c1("CARETTRIM",`(\\s*)${H1[U1.LONECARET]}\\s+`,!0);O8.caretTrimReplace="$1^";c1("CARET",`^${H1[U1.LONECARET]}${H1[U1.XRANGEPLAIN]}$`);c1("CARETLOOSE",`^${H1[U1.LONECARET]}${H1[U1.XRANGEPLAINLOOSE]}$`);c1("COMPARATORLOOSE",`^${H1[U1.GTLT]}\\s*(${H1[U1.LOOSEPLAIN]})$|^$`);c1("COMPARATOR",`^${H1[U1.GTLT]}\\s*(${H1[U1.FULLPLAIN]})$|^$`);c1("COMPARATORTRIM",`(\\s*)${H1[U1.GTLT]}\\s*(${H1[U1.LOOSEPLAIN]}|${H1[U1.XRANGEPLAIN]})`,!0);O8.comparatorTrimReplace="$1$2$3";c1("HYPHENRANGE",`^\\s*(${H1[U1.XRANGEPLAIN]})\\s+-\\s+(${H1[U1.XRANGEPLAIN]})\\s*$`);c1("HYPHENRANGELOOSE",`^\\s*(${H1[U1.XRANGEPLAINLOOSE]})\\s+-\\s+(${H1[U1.XRANGEPLAINLOOSE]})\\s*$`);c1("STAR","(<|>)?=?\\s*\\*");c1("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");c1("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Iz=C((WH0,u61)=>{var pi1=Object.freeze({loose:!0}),ii1=Object.freeze({}),ni1=(A)=>{if(!A)return ii1;if(typeof A!=="object")return pi1;return A};u61.exports=ni1});var JR=C((GH0,h61)=>{var y61=/^[0-9]+$/,v61=(A,F)=>{let B=y61.test(A),$=y61.test(F);if(B&&$)A=+A,F=+F;return A===F?0:B&&!$?-1:$&&!B?1:A<F?-1:1},si1=(A,F)=>v61(F,A);h61.exports={compareIdentifiers:v61,rcompareIdentifiers:si1}});var z4=C((QH0,m61)=>{var Tz=mX(),{MAX_LENGTH:d61,MAX_SAFE_INTEGER:Oz}=dX(),{safeRe:Sz,t:kz}=I$(),ai1=Iz(),{compareIdentifiers:T$}=JR();class B8{constructor(A,F){if(F=ai1(F),A instanceof B8)if(A.loose===!!F.loose&&A.includePrerelease===!!F.includePrerelease)return A;else A=A.version;else if(typeof A!=="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof A}".`);if(A.length>d61)throw new TypeError(`version is longer than ${d61} characters`);Tz("SemVer",A,F),this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease;let B=A.trim().match(F.loose?Sz[kz.LOOSE]:Sz[kz.FULL]);if(!B)throw new TypeError(`Invalid Version: ${A}`);if(this.raw=A,this.major=+B[1],this.minor=+B[2],this.patch=+B[3],this.major>Oz||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Oz||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Oz||this.patch<0)throw new TypeError("Invalid patch version");if(!B[4])this.prerelease=[];else this.prerelease=B[4].split(".").map(($)=>{if(/^[0-9]+$/.test($)){let Z=+$;if(Z>=0&&Z<Oz)return Z}return $});this.build=B[5]?B[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(A){if(Tz("SemVer.compare",this.version,this.options,A),!(A instanceof B8)){if(typeof A==="string"&&A===this.version)return 0;A=new B8(A,this.options)}if(A.version===this.version)return 0;return this.compareMain(A)||this.comparePre(A)}compareMain(A){if(!(A instanceof B8))A=new B8(A,this.options);return T$(this.major,A.major)||T$(this.minor,A.minor)||T$(this.patch,A.patch)}comparePre(A){if(!(A instanceof B8))A=new B8(A,this.options);if(this.prerelease.length&&!A.prerelease.length)return-1;else if(!this.prerelease.length&&A.prerelease.length)return 1;else if(!this.prerelease.length&&!A.prerelease.length)return 0;let F=0;do{let B=this.prerelease[F],$=A.prerelease[F];if(Tz("prerelease compare",F,B,$),B===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(B===void 0)return-1;else if(B===$)continue;else return T$(B,$)}while(++F)}compareBuild(A){if(!(A instanceof B8))A=new B8(A,this.options);let F=0;do{let B=this.build[F],$=A.build[F];if(Tz("build compare",F,B,$),B===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(B===void 0)return-1;else if(B===$)continue;else return T$(B,$)}while(++F)}inc(A,F,B){if(A.startsWith("pre")){if(!F&&B===!1)throw new Error("invalid increment argument: identifier is empty");if(F){let $=`-${F}`.match(this.options.loose?Sz[kz.PRERELEASELOOSE]:Sz[kz.PRERELEASE]);if(!$||$[1]!==F)throw new Error(`invalid identifier: ${F}`)}}switch(A){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",F,B);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",F,B);break;case"prepatch":this.prerelease.length=0,this.inc("patch",F,B),this.inc("pre",F,B);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",F,B);this.inc("pre",F,B);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let $=Number(B)?1:0;if(this.prerelease.length===0)this.prerelease=[$];else{let Z=this.prerelease.length;while(--Z>=0)if(typeof this.prerelease[Z]==="number")this.prerelease[Z]++,Z=-2;if(Z===-1){if(F===this.prerelease.join(".")&&B===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push($)}}if(F){let Z=[F,$];if(B===!1)Z=[F];if(T$(this.prerelease[0],F)===0){if(isNaN(this.prerelease[1]))this.prerelease=Z}else this.prerelease=Z}break}default:throw new Error(`invalid increment argument: ${A}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}m61.exports=B8});var XF=C((zH0,l61)=>{var c61=z4(),ti1=(A,F,B=!1)=>{if(A instanceof c61)return A;try{return new c61(A,F)}catch($){if(!B)return null;throw $}};l61.exports=ti1});var i61=C((qH0,p61)=>{var ri1=XF(),oi1=(A,F)=>{let B=ri1(A,F);return B?B.version:null};p61.exports=oi1});var s61=C((HH0,n61)=>{var ei1=XF(),An1=(A,F)=>{let B=ei1(A.trim().replace(/^[=v]+/,""),F);return B?B.version:null};n61.exports=An1});var r61=C((UH0,t61)=>{var a61=z4(),Fn1=(A,F,B,$,Z)=>{if(typeof B==="string")Z=$,$=B,B=void 0;try{return new a61(A instanceof a61?A.version:A,B).inc(F,$,Z).version}catch(D){return null}};t61.exports=Fn1});var A41=C((CH0,e61)=>{var o61=XF(),Bn1=(A,F)=>{let B=o61(A,null,!0),$=o61(F,null,!0),Z=B.compare($);if(Z===0)return null;let D=Z>0,X=D?B:$,J=D?$:B,Y=!!X.prerelease.length;if(!!J.prerelease.length&&!Y){if(!J.patch&&!J.minor)return"major";if(J.compareMain(X)===0){if(J.minor&&!J.patch)return"minor";return"patch"}}let G=Y?"pre":"";if(B.major!==$.major)return G+"major";if(B.minor!==$.minor)return G+"minor";if(B.patch!==$.patch)return G+"patch";return"prerelease"};e61.exports=Bn1});var B41=C((KH0,F41)=>{var $n1=z4(),Zn1=(A,F)=>new $n1(A,F).major;F41.exports=Zn1});var Z41=C((EH0,$41)=>{var Dn1=z4(),Xn1=(A,F)=>new Dn1(A,F).minor;$41.exports=Xn1});var X41=C((LH0,D41)=>{var Jn1=z4(),Yn1=(A,F)=>new Jn1(A,F).patch;D41.exports=Yn1});var Y41=C((wH0,J41)=>{var Wn1=XF(),Gn1=(A,F)=>{let B=Wn1(A,F);return B&&B.prerelease.length?B.prerelease:null};J41.exports=Gn1});var H7=C((VH0,G41)=>{var W41=z4(),Qn1=(A,F,B)=>new W41(A,B).compare(new W41(F,B));G41.exports=Qn1});var z41=C((NH0,Q41)=>{var zn1=H7(),qn1=(A,F,B)=>zn1(F,A,B);Q41.exports=qn1});var H41=C((MH0,q41)=>{var Hn1=H7(),Un1=(A,F)=>Hn1(A,F,!0);q41.exports=Un1});var _z=C((RH0,C41)=>{var U41=z4(),Cn1=(A,F,B)=>{let $=new U41(A,B),Z=new U41(F,B);return $.compare(Z)||$.compareBuild(Z)};C41.exports=Cn1});var E41=C((PH0,K41)=>{var Kn1=_z(),En1=(A,F)=>A.sort((B,$)=>Kn1(B,$,F));K41.exports=En1});var w41=C((jH0,L41)=>{var Ln1=_z(),wn1=(A,F)=>A.sort((B,$)=>Ln1($,B,F));L41.exports=wn1});var cX=C((IH0,V41)=>{var Vn1=H7(),Nn1=(A,F,B)=>Vn1(A,F,B)>0;V41.exports=Nn1});var xz=C((TH0,N41)=>{var Mn1=H7(),Rn1=(A,F,B)=>Mn1(A,F,B)<0;N41.exports=Rn1});var YR=C((OH0,M41)=>{var Pn1=H7(),jn1=(A,F,B)=>Pn1(A,F,B)===0;M41.exports=jn1});var WR=C((SH0,R41)=>{var In1=H7(),Tn1=(A,F,B)=>In1(A,F,B)!==0;R41.exports=Tn1});var bz=C((kH0,P41)=>{var On1=H7(),Sn1=(A,F,B)=>On1(A,F,B)>=0;P41.exports=Sn1});var fz=C((_H0,j41)=>{var kn1=H7(),_n1=(A,F,B)=>kn1(A,F,B)<=0;j41.exports=_n1});var GR=C((xH0,I41)=>{var xn1=YR(),bn1=WR(),fn1=cX(),gn1=bz(),un1=xz(),yn1=fz(),vn1=(A,F,B,$)=>{switch(F){case"===":if(typeof A==="object")A=A.version;if(typeof B==="object")B=B.version;return A===B;case"!==":if(typeof A==="object")A=A.version;if(typeof B==="object")B=B.version;return A!==B;case"":case"=":case"==":return xn1(A,B,$);case"!=":return bn1(A,B,$);case">":return fn1(A,B,$);case">=":return gn1(A,B,$);case"<":return un1(A,B,$);case"<=":return yn1(A,B,$);default:throw new TypeError(`Invalid operator: ${F}`)}};I41.exports=vn1});var O41=C((bH0,T41)=>{var hn1=z4(),dn1=XF(),{safeRe:gz,t:uz}=I$(),mn1=(A,F)=>{if(A instanceof hn1)return A;if(typeof A==="number")A=String(A);if(typeof A!=="string")return null;F=F||{};let B=null;if(!F.rtl)B=A.match(F.includePrerelease?gz[uz.COERCEFULL]:gz[uz.COERCE]);else{let Y=F.includePrerelease?gz[uz.COERCERTLFULL]:gz[uz.COERCERTL],W;while((W=Y.exec(A))&&(!B||B.index+B[0].length!==A.length)){if(!B||W.index+W[0].length!==B.index+B[0].length)B=W;Y.lastIndex=W.index+W[1].length+W[2].length}Y.lastIndex=-1}if(B===null)return null;let $=B[2],Z=B[3]||"0",D=B[4]||"0",X=F.includePrerelease&&B[5]?`-${B[5]}`:"",J=F.includePrerelease&&B[6]?`+${B[6]}`:"";return dn1(`${$}.${Z}.${D}${X}${J}`,F)};T41.exports=mn1});var _41=C((fH0,k41)=>{class S41{constructor(){this.max=1000,this.map=new Map}get(A){let F=this.map.get(A);if(F===void 0)return;else return this.map.delete(A),this.map.set(A,F),F}delete(A){return this.map.delete(A)}set(A,F){if(!this.delete(A)&&F!==void 0){if(this.map.size>=this.max){let $=this.map.keys().next().value;this.delete($)}this.map.set(A,F)}return this}}k41.exports=S41});var U7=C((gH0,g41)=>{var cn1=/\s+/g;class lX{constructor(A,F){if(F=pn1(F),A instanceof lX)if(A.loose===!!F.loose&&A.includePrerelease===!!F.includePrerelease)return A;else return new lX(A.raw,F);if(A instanceof QR)return this.raw=A.value,this.set=[[A]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=A.trim().replace(cn1," "),this.set=this.raw.split("||").map((B)=>this.parseRange(B.trim())).filter((B)=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let B=this.set[0];if(this.set=this.set.filter(($)=>!b41($[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(let $ of this.set)if($.length===1&&on1($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let A=0;A<this.set.length;A++){if(A>0)this.formatted+="||";let F=this.set[A];for(let B=0;B<F.length;B++){if(B>0)this.formatted+=" ";this.formatted+=F[B].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(A){let B=((this.options.includePrerelease&&tn1)|(this.options.loose&&rn1))+":"+A,$=x41.get(B);if($)return $;let Z=this.options.loose,D=Z?X9[S4.HYPHENRANGELOOSE]:X9[S4.HYPHENRANGE];A=A.replace(D,Ys1(this.options.includePrerelease)),U2("hyphen replace",A),A=A.replace(X9[S4.COMPARATORTRIM],nn1),U2("comparator trim",A),A=A.replace(X9[S4.TILDETRIM],sn1),U2("tilde trim",A),A=A.replace(X9[S4.CARETTRIM],an1),U2("caret trim",A);let X=A.split(" ").map((G)=>en1(G,this.options)).join(" ").split(/\s+/).map((G)=>Js1(G,this.options));if(Z)X=X.filter((G)=>{return U2("loose invalid filter",G,this.options),!!G.match(X9[S4.COMPARATORLOOSE])});U2("range list",X);let J=new Map,Y=X.map((G)=>new QR(G,this.options));for(let G of Y){if(b41(G))return[G];J.set(G.value,G)}if(J.size>1&&J.has(""))J.delete("");let W=[...J.values()];return x41.set(B,W),W}intersects(A,F){if(!(A instanceof lX))throw new TypeError("a Range is required");return this.set.some((B)=>{return f41(B,F)&&A.set.some(($)=>{return f41($,F)&&B.every((Z)=>{return $.every((D)=>{return Z.intersects(D,F)})})})})}test(A){if(!A)return!1;if(typeof A==="string")try{A=new in1(A,this.options)}catch(F){return!1}for(let F=0;F<this.set.length;F++)if(Ws1(this.set[F],A,this.options))return!0;return!1}}g41.exports=lX;var ln1=_41(),x41=new ln1,pn1=Iz(),QR=pX(),U2=mX(),in1=z4(),{safeRe:X9,t:S4,comparatorTrimReplace:nn1,tildeTrimReplace:sn1,caretTrimReplace:an1}=I$(),{FLAG_INCLUDE_PRERELEASE:tn1,FLAG_LOOSE:rn1}=dX(),b41=(A)=>A.value==="<0.0.0-0",on1=(A)=>A.value==="",f41=(A,F)=>{let B=!0,$=A.slice(),Z=$.pop();while(B&&$.length)B=$.every((D)=>{return Z.intersects(D,F)}),Z=$.pop();return B},en1=(A,F)=>{return U2("comp",A,F),A=Bs1(A,F),U2("caret",A),A=As1(A,F),U2("tildes",A),A=Zs1(A,F),U2("xrange",A),A=Xs1(A,F),U2("stars",A),A},k4=(A)=>!A||A.toLowerCase()==="x"||A==="*",As1=(A,F)=>{return A.trim().split(/\s+/).map((B)=>Fs1(B,F)).join(" ")},Fs1=(A,F)=>{let B=F.loose?X9[S4.TILDELOOSE]:X9[S4.TILDE];return A.replace(B,($,Z,D,X,J)=>{U2("tilde",A,$,Z,D,X,J);let Y;if(k4(Z))Y="";else if(k4(D))Y=`>=${Z}.0.0 <${+Z+1}.0.0-0`;else if(k4(X))Y=`>=${Z}.${D}.0 <${Z}.${+D+1}.0-0`;else if(J)U2("replaceTilde pr",J),Y=`>=${Z}.${D}.${X}-${J} <${Z}.${+D+1}.0-0`;else Y=`>=${Z}.${D}.${X} <${Z}.${+D+1}.0-0`;return U2("tilde return",Y),Y})},Bs1=(A,F)=>{return A.trim().split(/\s+/).map((B)=>$s1(B,F)).join(" ")},$s1=(A,F)=>{U2("caret",A,F);let B=F.loose?X9[S4.CARETLOOSE]:X9[S4.CARET],$=F.includePrerelease?"-0":"";return A.replace(B,(Z,D,X,J,Y)=>{U2("caret",A,Z,D,X,J,Y);let W;if(k4(D))W="";else if(k4(X))W=`>=${D}.0.0${$} <${+D+1}.0.0-0`;else if(k4(J))if(D==="0")W=`>=${D}.${X}.0${$} <${D}.${+X+1}.0-0`;else W=`>=${D}.${X}.0${$} <${+D+1}.0.0-0`;else if(Y)if(U2("replaceCaret pr",Y),D==="0")if(X==="0")W=`>=${D}.${X}.${J}-${Y} <${D}.${X}.${+J+1}-0`;else W=`>=${D}.${X}.${J}-${Y} <${D}.${+X+1}.0-0`;else W=`>=${D}.${X}.${J}-${Y} <${+D+1}.0.0-0`;else if(U2("no pr"),D==="0")if(X==="0")W=`>=${D}.${X}.${J}${$} <${D}.${X}.${+J+1}-0`;else W=`>=${D}.${X}.${J}${$} <${D}.${+X+1}.0-0`;else W=`>=${D}.${X}.${J} <${+D+1}.0.0-0`;return U2("caret return",W),W})},Zs1=(A,F)=>{return U2("replaceXRanges",A,F),A.split(/\s+/).map((B)=>Ds1(B,F)).join(" ")},Ds1=(A,F)=>{A=A.trim();let B=F.loose?X9[S4.XRANGELOOSE]:X9[S4.XRANGE];return A.replace(B,($,Z,D,X,J,Y)=>{U2("xRange",A,$,Z,D,X,J,Y);let W=k4(D),G=W||k4(X),Q=G||k4(J),q=Q;if(Z==="="&&q)Z="";if(Y=F.includePrerelease?"-0":"",W)if(Z===">"||Z==="<")$="<0.0.0-0";else $="*";else if(Z&&q){if(G)X=0;if(J=0,Z===">")if(Z=">=",G)D=+D+1,X=0,J=0;else X=+X+1,J=0;else if(Z==="<=")if(Z="<",G)D=+D+1;else X=+X+1;if(Z==="<")Y="-0";$=`${Z+D}.${X}.${J}${Y}`}else if(G)$=`>=${D}.0.0${Y} <${+D+1}.0.0-0`;else if(Q)$=`>=${D}.${X}.0${Y} <${D}.${+X+1}.0-0`;return U2("xRange return",$),$})},Xs1=(A,F)=>{return U2("replaceStars",A,F),A.trim().replace(X9[S4.STAR],"")},Js1=(A,F)=>{return U2("replaceGTE0",A,F),A.trim().replace(X9[F.includePrerelease?S4.GTE0PRE:S4.GTE0],"")},Ys1=(A)=>(F,B,$,Z,D,X,J,Y,W,G,Q,q)=>{if(k4($))B="";else if(k4(Z))B=`>=${$}.0.0${A?"-0":""}`;else if(k4(D))B=`>=${$}.${Z}.0${A?"-0":""}`;else if(X)B=`>=${B}`;else B=`>=${B}${A?"-0":""}`;if(k4(W))Y="";else if(k4(G))Y=`<${+W+1}.0.0-0`;else if(k4(Q))Y=`<${W}.${+G+1}.0-0`;else if(q)Y=`<=${W}.${G}.${Q}-${q}`;else if(A)Y=`<${W}.${G}.${+Q+1}-0`;else Y=`<=${Y}`;return`${B} ${Y}`.trim()},Ws1=(A,F,B)=>{for(let $=0;$<A.length;$++)if(!A[$].test(F))return!1;if(F.prerelease.length&&!B.includePrerelease){for(let $=0;$<A.length;$++){if(U2(A[$].semver),A[$].semver===QR.ANY)continue;if(A[$].semver.prerelease.length>0){let Z=A[$].semver;if(Z.major===F.major&&Z.minor===F.minor&&Z.patch===F.patch)return!0}}return!1}return!0}});var pX=C((uH0,m41)=>{var iX=Symbol("SemVer ANY");class yz{static get ANY(){return iX}constructor(A,F){if(F=u41(F),A instanceof yz)if(A.loose===!!F.loose)return A;else A=A.value;if(A=A.trim().split(/\s+/).join(" "),qR("comparator",A,F),this.options=F,this.loose=!!F.loose,this.parse(A),this.semver===iX)this.value="";else this.value=this.operator+this.semver.version;qR("comp",this)}parse(A){let F=this.options.loose?y41[v41.COMPARATORLOOSE]:y41[v41.COMPARATOR],B=A.match(F);if(!B)throw new TypeError(`Invalid comparator: ${A}`);if(this.operator=B[1]!==void 0?B[1]:"",this.operator==="=")this.operator="";if(!B[2])this.semver=iX;else this.semver=new h41(B[2],this.options.loose)}toString(){return this.value}test(A){if(qR("Comparator.test",A,this.options.loose),this.semver===iX||A===iX)return!0;if(typeof A==="string")try{A=new h41(A,this.options)}catch(F){return!1}return zR(A,this.operator,this.semver,this.options)}intersects(A,F){if(!(A instanceof yz))throw new TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new d41(A.value,F).test(this.value)}else if(A.operator===""){if(A.value==="")return!0;return new d41(this.value,F).test(A.semver)}if(F=u41(F),F.includePrerelease&&(this.value==="<0.0.0-0"||A.value==="<0.0.0-0"))return!1;if(!F.includePrerelease&&(this.value.startsWith("<0.0.0")||A.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&A.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&A.operator.startsWith("<"))return!0;if(this.semver.version===A.semver.version&&this.operator.includes("=")&&A.operator.includes("="))return!0;if(zR(this.semver,"<",A.semver,F)&&this.operator.startsWith(">")&&A.operator.startsWith("<"))return!0;if(zR(this.semver,">",A.semver,F)&&this.operator.startsWith("<")&&A.operator.startsWith(">"))return!0;return!1}}m41.exports=yz;var u41=Iz(),{safeRe:y41,t:v41}=I$(),zR=GR(),qR=mX(),h41=z4(),d41=U7()});var nX=C((yH0,c41)=>{var Gs1=U7(),Qs1=(A,F,B)=>{try{F=new Gs1(F,B)}catch($){return!1}return F.test(A)};c41.exports=Qs1});var p41=C((vH0,l41)=>{var zs1=U7(),qs1=(A,F)=>new zs1(A,F).set.map((B)=>B.map(($)=>$.value).join(" ").trim().split(" "));l41.exports=qs1});var n41=C((hH0,i41)=>{var Hs1=z4(),Us1=U7(),Cs1=(A,F,B)=>{let $=null,Z=null,D=null;try{D=new Us1(F,B)}catch(X){return null}return A.forEach((X)=>{if(D.test(X)){if(!$||Z.compare(X)===-1)$=X,Z=new Hs1($,B)}}),$};i41.exports=Cs1});var a41=C((dH0,s41)=>{var Ks1=z4(),Es1=U7(),Ls1=(A,F,B)=>{let $=null,Z=null,D=null;try{D=new Es1(F,B)}catch(X){return null}return A.forEach((X)=>{if(D.test(X)){if(!$||Z.compare(X)===1)$=X,Z=new Ks1($,B)}}),$};s41.exports=Ls1});var o41=C((mH0,r41)=>{var HR=z4(),ws1=U7(),t41=cX(),Vs1=(A,F)=>{A=new ws1(A,F);let B=new HR("0.0.0");if(A.test(B))return B;if(B=new HR("0.0.0-0"),A.test(B))return B;B=null;for(let $=0;$<A.set.length;++$){let Z=A.set[$],D=null;if(Z.forEach((X)=>{let J=new HR(X.semver.version);switch(X.operator){case">":if(J.prerelease.length===0)J.patch++;else J.prerelease.push(0);J.raw=J.format();case"":case">=":if(!D||t41(J,D))D=J;break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${X.operator}`)}}),D&&(!B||t41(B,D)))B=D}if(B&&A.test(B))return B;return null};r41.exports=Vs1});var A91=C((cH0,e41)=>{var Ns1=U7(),Ms1=(A,F)=>{try{return new Ns1(A,F).range||"*"}catch(B){return null}};e41.exports=Ms1});var vz=C((lH0,Z91)=>{var Rs1=z4(),$91=pX(),{ANY:Ps1}=$91,js1=U7(),Is1=nX(),F91=cX(),B91=xz(),Ts1=fz(),Os1=bz(),Ss1=(A,F,B,$)=>{A=new Rs1(A,$),F=new js1(F,$);let Z,D,X,J,Y;switch(B){case">":Z=F91,D=Ts1,X=B91,J=">",Y=">=";break;case"<":Z=B91,D=Os1,X=F91,J="<",Y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Is1(A,F,$))return!1;for(let W=0;W<F.set.length;++W){let G=F.set[W],Q=null,q=null;if(G.forEach((z)=>{if(z.semver===Ps1)z=new $91(">=0.0.0");if(Q=Q||z,q=q||z,Z(z.semver,Q.semver,$))Q=z;else if(X(z.semver,q.semver,$))q=z}),Q.operator===J||Q.operator===Y)return!1;if((!q.operator||q.operator===J)&&D(A,q.semver))return!1;else if(q.operator===Y&&X(A,q.semver))return!1}return!0};Z91.exports=Ss1});var X91=C((pH0,D91)=>{var ks1=vz(),_s1=(A,F,B)=>ks1(A,F,">",B);D91.exports=_s1});var Y91=C((iH0,J91)=>{var xs1=vz(),bs1=(A,F,B)=>xs1(A,F,"<",B);J91.exports=bs1});var Q91=C((nH0,G91)=>{var W91=U7(),fs1=(A,F,B)=>{return A=new W91(A,B),F=new W91(F,B),A.intersects(F,B)};G91.exports=fs1});var q91=C((sH0,z91)=>{var gs1=nX(),us1=H7();z91.exports=(A,F,B)=>{let $=[],Z=null,D=null,X=A.sort((G,Q)=>us1(G,Q,B));for(let G of X)if(gs1(G,F,B)){if(D=G,!Z)Z=G}else{if(D)$.push([Z,D]);D=null,Z=null}if(Z)$.push([Z,null]);let J=[];for(let[G,Q]of $)if(G===Q)J.push(G);else if(!Q&&G===X[0])J.push("*");else if(!Q)J.push(`>=${G}`);else if(G===X[0])J.push(`<=${Q}`);else J.push(`${G} - ${Q}`);let Y=J.join(" || "),W=typeof F.raw==="string"?F.raw:String(F);return Y.length<W.length?Y:F}});var L91=C((aH0,E91)=>{var H91=U7(),CR=pX(),{ANY:UR}=CR,sX=nX(),KR=H7(),ys1=(A,F,B={})=>{if(A===F)return!0;A=new H91(A,B),F=new H91(F,B);let $=!1;A:for(let Z of A.set){for(let D of F.set){let X=hs1(Z,D,B);if($=$||X!==null,X)continue A}if($)return!1}return!0},vs1=[new CR(">=0.0.0-0")],U91=[new CR(">=0.0.0")],hs1=(A,F,B)=>{if(A===F)return!0;if(A.length===1&&A[0].semver===UR)if(F.length===1&&F[0].semver===UR)return!0;else if(B.includePrerelease)A=vs1;else A=U91;if(F.length===1&&F[0].semver===UR)if(B.includePrerelease)return!0;else F=U91;let $=new Set,Z,D;for(let z of A)if(z.operator===">"||z.operator===">=")Z=C91(Z,z,B);else if(z.operator==="<"||z.operator==="<=")D=K91(D,z,B);else $.add(z.semver);if($.size>1)return null;let X;if(Z&&D){if(X=KR(Z.semver,D.semver,B),X>0)return null;else if(X===0&&(Z.operator!==">="||D.operator!=="<="))return null}for(let z of $){if(Z&&!sX(z,String(Z),B))return null;if(D&&!sX(z,String(D),B))return null;for(let H of F)if(!sX(z,String(H),B))return!1;return!0}let J,Y,W,G,Q=D&&!B.includePrerelease&&D.semver.prerelease.length?D.semver:!1,q=Z&&!B.includePrerelease&&Z.semver.prerelease.length?Z.semver:!1;if(Q&&Q.prerelease.length===1&&D.operator==="<"&&Q.prerelease[0]===0)Q=!1;for(let z of F){if(G=G||z.operator===">"||z.operator===">=",W=W||z.operator==="<"||z.operator==="<=",Z){if(q){if(z.semver.prerelease&&z.semver.prerelease.length&&z.semver.major===q.major&&z.semver.minor===q.minor&&z.semver.patch===q.patch)q=!1}if(z.operator===">"||z.operator===">="){if(J=C91(Z,z,B),J===z&&J!==Z)return!1}else if(Z.operator===">="&&!sX(Z.semver,String(z),B))return!1}if(D){if(Q){if(z.semver.prerelease&&z.semver.prerelease.length&&z.semver.major===Q.major&&z.semver.minor===Q.minor&&z.semver.patch===Q.patch)Q=!1}if(z.operator==="<"||z.operator==="<="){if(Y=K91(D,z,B),Y===z&&Y!==D)return!1}else if(D.operator==="<="&&!sX(D.semver,String(z),B))return!1}if(!z.operator&&(D||Z)&&X!==0)return!1}if(Z&&W&&!D&&X!==0)return!1;if(D&&G&&!Z&&X!==0)return!1;if(q||Q)return!1;return!0},C91=(A,F,B)=>{if(!A)return F;let $=KR(A.semver,F.semver,B);return $>0?A:$<0?F:F.operator===">"&&A.operator===">="?F:A},K91=(A,F,B)=>{if(!A)return F;let $=KR(A.semver,F.semver,B);return $<0?A:$>0?F:F.operator==="<"&&A.operator==="<="?F:A};E91.exports=ys1});var hz=C((tH0,N91)=>{var ER=I$(),w91=dX(),ds1=z4(),V91=JR(),ms1=XF(),cs1=i61(),ls1=s61(),ps1=r61(),is1=A41(),ns1=B41(),ss1=Z41(),as1=X41(),ts1=Y41(),rs1=H7(),os1=z41(),es1=H41(),Aa1=_z(),Fa1=E41(),Ba1=w41(),$a1=cX(),Za1=xz(),Da1=YR(),Xa1=WR(),Ja1=bz(),Ya1=fz(),Wa1=GR(),Ga1=O41(),Qa1=pX(),za1=U7(),qa1=nX(),Ha1=p41(),Ua1=n41(),Ca1=a41(),Ka1=o41(),Ea1=A91(),La1=vz(),wa1=X91(),Va1=Y91(),Na1=Q91(),Ma1=q91(),Ra1=L91();N91.exports={parse:ms1,valid:cs1,clean:ls1,inc:ps1,diff:is1,major:ns1,minor:ss1,patch:as1,prerelease:ts1,compare:rs1,rcompare:os1,compareLoose:es1,compareBuild:Aa1,sort:Fa1,rsort:Ba1,gt:$a1,lt:Za1,eq:Da1,neq:Xa1,gte:Ja1,lte:Ya1,cmp:Wa1,coerce:Ga1,Comparator:Qa1,Range:za1,satisfies:qa1,toComparators:Ha1,maxSatisfying:Ua1,minSatisfying:Ca1,minVersion:Ka1,validRange:Ea1,outside:La1,gtr:wa1,ltr:Va1,intersects:Na1,simplifyRange:Ma1,subset:Ra1,SemVer:ds1,re:ER.re,src:ER.src,tokens:ER.t,SEMVER_SPEC_VERSION:w91.SEMVER_SPEC_VERSION,RELEASE_TYPES:w91.RELEASE_TYPES,compareIdentifiers:V91.compareIdentifiers,rcompareIdentifiers:V91.rcompareIdentifiers}});var R91=C((rH0,M91)=>{var Pa1=hz();M91.exports=Pa1.satisfies(process.version,">=15.7.0")});var j91=C((oH0,P91)=>{var ja1=hz();P91.exports=ja1.satisfies(process.version,">=16.9.0")});var LR=C((eH0,I91)=>{var Ia1=R91(),Ta1=j91(),Oa1={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Sa1={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};I91.exports=function(A,F){if(!A||!F)return;let B=F.asymmetricKeyType;if(!B)return;let $=Oa1[B];if(!$)throw new Error(`Unknown key type "${B}".`);if(!$.includes(A))throw new Error(`"alg" parameter for "${B}" key type must be one of: ${$.join(", ")}.`);if(Ia1)switch(B){case"ec":let Z=F.asymmetricKeyDetails.namedCurve,D=Sa1[A];if(Z!==D)throw new Error(`"alg" parameter "${A}" requires curve "${D}".`);break;case"rsa-pss":if(Ta1){let X=parseInt(A.slice(-3),10),{hashAlgorithm:J,mgf1HashAlgorithm:Y,saltLength:W}=F.asymmetricKeyDetails;if(J!==`sha${X}`||Y!==J)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${A}.`);if(W!==void 0&&W>X>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${A}.`)}break}}});var wR=C((AU0,T91)=>{var ka1=hz();T91.exports=ka1.satisfies(process.version,"^6.12.0 || >=8.0.0")});var k91=C((FU0,S91)=>{var D2=hX(),_a1=BR(),O91=$R(),xa1=FR(),ba1=ZR(),fa1=LR(),ga1=wR(),ua1=Mz(),{KeyObject:ya1,createSecretKey:va1,createPublicKey:ha1}=A1("crypto"),VR=["RS256","RS384","RS512"],da1=["ES256","ES384","ES512"],NR=["RS256","RS384","RS512"],ma1=["HS256","HS384","HS512"];if(ga1)VR.splice(VR.length,0,"PS256","PS384","PS512"),NR.splice(NR.length,0,"PS256","PS384","PS512");S91.exports=function(A,F,B,$){if(typeof B==="function"&&!$)$=B,B={};if(!B)B={};B=Object.assign({},B);let Z;if($)Z=$;else Z=function(G,Q){if(G)throw G;return Q};if(B.clockTimestamp&&typeof B.clockTimestamp!=="number")return Z(new D2("clockTimestamp must be a number"));if(B.nonce!==void 0&&(typeof B.nonce!=="string"||B.nonce.trim()===""))return Z(new D2("nonce must be a non-empty string"));if(B.allowInvalidAsymmetricKeyTypes!==void 0&&typeof B.allowInvalidAsymmetricKeyTypes!=="boolean")return Z(new D2("allowInvalidAsymmetricKeyTypes must be a boolean"));let D=B.clockTimestamp||Math.floor(Date.now()/1000);if(!A)return Z(new D2("jwt must be provided"));if(typeof A!=="string")return Z(new D2("jwt must be a string"));let X=A.split(".");if(X.length!==3)return Z(new D2("jwt malformed"));let J;try{J=xa1(A,{complete:!0})}catch(G){return Z(G)}if(!J)return Z(new D2("invalid token"));let Y=J.header,W;if(typeof F==="function"){if(!$)return Z(new D2("verify must be called asynchronous if secret or public key is provided as a callback"));W=F}else W=function(G,Q){return Q(null,F)};return W(Y,function(G,Q){if(G)return Z(new D2("error in secret or public key callback: "+G.message));let q=X[2].trim()!=="";if(!q&&Q)return Z(new D2("jwt signature is required"));if(q&&!Q)return Z(new D2("secret or public key must be provided"));if(!q&&!B.algorithms)return Z(new D2('please specify "none" in "algorithms" to verify unsigned tokens'));if(Q!=null&&!(Q instanceof ya1))try{Q=ha1(Q)}catch(U){try{Q=va1(typeof Q==="string"?Buffer.from(Q):Q)}catch(K){return Z(new D2("secretOrPublicKey is not valid key material"))}}if(!B.algorithms)if(Q.type==="secret")B.algorithms=ma1;else if(["rsa","rsa-pss"].includes(Q.asymmetricKeyType))B.algorithms=NR;else if(Q.asymmetricKeyType==="ec")B.algorithms=da1;else B.algorithms=VR;if(B.algorithms.indexOf(J.header.alg)===-1)return Z(new D2("invalid algorithm"));if(Y.alg.startsWith("HS")&&Q.type!=="secret")return Z(new D2(`secretOrPublicKey must be a symmetric key when using ${Y.alg}`));else if(/^(?:RS|PS|ES)/.test(Y.alg)&&Q.type!=="public")return Z(new D2(`secretOrPublicKey must be an asymmetric key when using ${Y.alg}`));if(!B.allowInvalidAsymmetricKeyTypes)try{fa1(Y.alg,Q)}catch(U){return Z(U)}let z;try{z=ua1.verify(A,J.header.alg,Q)}catch(U){return Z(U)}if(!z)return Z(new D2("invalid signature"));let H=J.payload;if(typeof H.nbf!=="undefined"&&!B.ignoreNotBefore){if(typeof H.nbf!=="number")return Z(new D2("invalid nbf value"));if(H.nbf>D+(B.clockTolerance||0))return Z(new _a1("jwt not active",new Date(H.nbf*1000)))}if(typeof H.exp!=="undefined"&&!B.ignoreExpiration){if(typeof H.exp!=="number")return Z(new D2("invalid exp value"));if(D>=H.exp+(B.clockTolerance||0))return Z(new O91("jwt expired",new Date(H.exp*1000)))}if(B.audience){let U=Array.isArray(B.audience)?B.audience:[B.audience];if(!(Array.isArray(H.aud)?H.aud:[H.aud]).some(function(L){return U.some(function(V){return V instanceof RegExp?V.test(L):V===L})}))return Z(new D2("jwt audience invalid. expected: "+U.join(" or ")))}if(B.issuer){if(typeof B.issuer==="string"&&H.iss!==B.issuer||Array.isArray(B.issuer)&&B.issuer.indexOf(H.iss)===-1)return Z(new D2("jwt issuer invalid. expected: "+B.issuer))}if(B.subject){if(H.sub!==B.subject)return Z(new D2("jwt subject invalid. expected: "+B.subject))}if(B.jwtid){if(H.jti!==B.jwtid)return Z(new D2("jwt jwtid invalid. expected: "+B.jwtid))}if(B.nonce){if(H.nonce!==B.nonce)return Z(new D2("jwt nonce invalid. expected: "+B.nonce))}if(B.maxAge){if(typeof H.iat!=="number")return Z(new D2("iat required when maxAge is specified"));let U=ba1(B.maxAge,H.iat);if(typeof U==="undefined")return Z(new D2('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(D>=U+(B.clockTolerance||0))return Z(new O91("maxAge exceeded",new Date(U*1000)))}if(B.complete===!0){let U=J.signature;return Z(null,{header:Y,payload:H,signature:U})}return Z(null,H)})}});var u91=C((BU0,g91)=>{var _91=1/0,b91=9007199254740991,ca1=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,x91=NaN,la1="[object Arguments]",pa1="[object Function]",ia1="[object GeneratorFunction]",na1="[object String]",sa1="[object Symbol]",aa1=/^\s+|\s+$/g,ta1=/^[-+]0x[0-9a-f]+$/i,ra1=/^0b[01]+$/i,oa1=/^0o[0-7]+$/i,ea1=/^(?:0|[1-9]\d*)$/,At1=parseInt;function Ft1(A,F){var B=-1,$=A?A.length:0,Z=Array($);while(++B<$)Z[B]=F(A[B],B,A);return Z}function Bt1(A,F,B,$){var Z=A.length,D=B+($?1:-1);while($?D--:++D<Z)if(F(A[D],D,A))return D;return-1}function $t1(A,F,B){if(F!==F)return Bt1(A,Zt1,B);var $=B-1,Z=A.length;while(++$<Z)if(A[$]===F)return $;return-1}function Zt1(A){return A!==A}function Dt1(A,F){var B=-1,$=Array(A);while(++B<A)$[B]=F(B);return $}function Xt1(A,F){return Ft1(F,function(B){return A[B]})}function Jt1(A,F){return function(B){return A(F(B))}}var dz=Object.prototype,RR=dz.hasOwnProperty,mz=dz.toString,Yt1=dz.propertyIsEnumerable,Wt1=Jt1(Object.keys,Object),Gt1=Math.max;function Qt1(A,F){var B=f91(A)||Ct1(A)?Dt1(A.length,String):[],$=B.length,Z=!!$;for(var D in A)if((F||RR.call(A,D))&&!(Z&&(D=="length"||qt1(D,$))))B.push(D);return B}function zt1(A){if(!Ht1(A))return Wt1(A);var F=[];for(var B in Object(A))if(RR.call(A,B)&&B!="constructor")F.push(B);return F}function qt1(A,F){return F=F==null?b91:F,!!F&&(typeof A=="number"||ea1.test(A))&&(A>-1&&A%1==0&&A<F)}function Ht1(A){var F=A&&A.constructor,B=typeof F=="function"&&F.prototype||dz;return A===B}function Ut1(A,F,B,$){A=PR(A)?A:jt1(A),B=B&&!$?Mt1(B):0;var Z=A.length;if(B<0)B=Gt1(Z+B,0);return wt1(A)?B<=Z&&A.indexOf(F,B)>-1:!!Z&&$t1(A,F,B)>-1}function Ct1(A){return Kt1(A)&&RR.call(A,"callee")&&(!Yt1.call(A,"callee")||mz.call(A)==la1)}var f91=Array.isArray;function PR(A){return A!=null&&Lt1(A.length)&&!Et1(A)}function Kt1(A){return jR(A)&&PR(A)}function Et1(A){var F=MR(A)?mz.call(A):"";return F==pa1||F==ia1}function Lt1(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=b91}function MR(A){var F=typeof A;return!!A&&(F=="object"||F=="function")}function jR(A){return!!A&&typeof A=="object"}function wt1(A){return typeof A=="string"||!f91(A)&&jR(A)&&mz.call(A)==na1}function Vt1(A){return typeof A=="symbol"||jR(A)&&mz.call(A)==sa1}function Nt1(A){if(!A)return A===0?A:0;if(A=Rt1(A),A===_91||A===-_91){var F=A<0?-1:1;return F*ca1}return A===A?A:0}function Mt1(A){var F=Nt1(A),B=F%1;return F===F?B?F-B:F:0}function Rt1(A){if(typeof A=="number")return A;if(Vt1(A))return x91;if(MR(A)){var F=typeof A.valueOf=="function"?A.valueOf():A;A=MR(F)?F+"":F}if(typeof A!="string")return A===0?A:+A;A=A.replace(aa1,"");var B=ra1.test(A);return B||oa1.test(A)?At1(A.slice(2),B?2:8):ta1.test(A)?x91:+A}function Pt1(A){return PR(A)?Qt1(A):zt1(A)}function jt1(A){return A?Xt1(A,Pt1(A)):[]}g91.exports=Ut1});var v91=C(($U0,y91)=>{var It1="[object Boolean]",Tt1=Object.prototype,Ot1=Tt1.toString;function St1(A){return A===!0||A===!1||kt1(A)&&Ot1.call(A)==It1}function kt1(A){return!!A&&typeof A=="object"}y91.exports=St1});var l91=C((ZU0,c91)=>{var h91=1/0,_t1=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,d91=NaN,xt1="[object Symbol]",bt1=/^\s+|\s+$/g,ft1=/^[-+]0x[0-9a-f]+$/i,gt1=/^0b[01]+$/i,ut1=/^0o[0-7]+$/i,yt1=parseInt,vt1=Object.prototype,ht1=vt1.toString;function dt1(A){return typeof A=="number"&&A==pt1(A)}function m91(A){var F=typeof A;return!!A&&(F=="object"||F=="function")}function mt1(A){return!!A&&typeof A=="object"}function ct1(A){return typeof A=="symbol"||mt1(A)&&ht1.call(A)==xt1}function lt1(A){if(!A)return A===0?A:0;if(A=it1(A),A===h91||A===-h91){var F=A<0?-1:1;return F*_t1}return A===A?A:0}function pt1(A){var F=lt1(A),B=F%1;return F===F?B?F-B:F:0}function it1(A){if(typeof A=="number")return A;if(ct1(A))return d91;if(m91(A)){var F=typeof A.valueOf=="function"?A.valueOf():A;A=m91(F)?F+"":F}if(typeof A!="string")return A===0?A:+A;A=A.replace(bt1,"");var B=gt1.test(A);return B||ut1.test(A)?yt1(A.slice(2),B?2:8):ft1.test(A)?d91:+A}c91.exports=dt1});var i91=C((DU0,p91)=>{var nt1="[object Number]",st1=Object.prototype,at1=st1.toString;function tt1(A){return!!A&&typeof A=="object"}function rt1(A){return typeof A=="number"||tt1(A)&&at1.call(A)==nt1}p91.exports=rt1});var t91=C((XU0,a91)=>{var ot1="[object Object]";function et1(A){var F=!1;if(A!=null&&typeof A.toString!="function")try{F=!!(A+"")}catch(B){}return F}function Ar1(A,F){return function(B){return A(F(B))}}var Fr1=Function.prototype,n91=Object.prototype,s91=Fr1.toString,Br1=n91.hasOwnProperty,$r1=s91.call(Object),Zr1=n91.toString,Dr1=Ar1(Object.getPrototypeOf,Object);function Xr1(A){return!!A&&typeof A=="object"}function Jr1(A){if(!Xr1(A)||Zr1.call(A)!=ot1||et1(A))return!1;var F=Dr1(A);if(F===null)return!0;var B=Br1.call(F,"constructor")&&F.constructor;return typeof B=="function"&&B instanceof B&&s91.call(B)==$r1}a91.exports=Jr1});var o91=C((JU0,r91)=>{var Yr1="[object String]",Wr1=Object.prototype,Gr1=Wr1.toString,Qr1=Array.isArray;function zr1(A){return!!A&&typeof A=="object"}function qr1(A){return typeof A=="string"||!Qr1(A)&&zr1(A)&&Gr1.call(A)==Yr1}r91.exports=qr1});var $71=C((YU0,B71)=>{var Hr1="Expected a function",e91=1/0,Ur1=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,A71=NaN,Cr1="[object Symbol]",Kr1=/^\s+|\s+$/g,Er1=/^[-+]0x[0-9a-f]+$/i,Lr1=/^0b[01]+$/i,wr1=/^0o[0-7]+$/i,Vr1=parseInt,Nr1=Object.prototype,Mr1=Nr1.toString;function Rr1(A,F){var B;if(typeof F!="function")throw new TypeError(Hr1);return A=Or1(A),function(){if(--A>0)B=F.apply(this,arguments);if(A<=1)F=void 0;return B}}function Pr1(A){return Rr1(2,A)}function F71(A){var F=typeof A;return!!A&&(F=="object"||F=="function")}function jr1(A){return!!A&&typeof A=="object"}function Ir1(A){return typeof A=="symbol"||jr1(A)&&Mr1.call(A)==Cr1}function Tr1(A){if(!A)return A===0?A:0;if(A=Sr1(A),A===e91||A===-e91){var F=A<0?-1:1;return F*Ur1}return A===A?A:0}function Or1(A){var F=Tr1(A),B=F%1;return F===F?B?F-B:F:0}function Sr1(A){if(typeof A=="number")return A;if(Ir1(A))return A71;if(F71(A)){var F=typeof A.valueOf=="function"?A.valueOf():A;A=F71(F)?F+"":F}if(typeof A!="string")return A===0?A:+A;A=A.replace(Kr1,"");var B=Lr1.test(A);return B||wr1.test(A)?Vr1(A.slice(2),B?2:8):Er1.test(A)?A71:+A}B71.exports=Pr1});var z71=C((WU0,Q71)=>{var Z71=ZR(),kr1=wR(),_r1=LR(),D71=Mz(),xr1=u91(),cz=v91(),X71=l91(),IR=i91(),Y71=t91(),v5=o91(),br1=$71(),{KeyObject:fr1,createSecretKey:gr1,createPrivateKey:ur1}=A1("crypto"),W71=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];if(kr1)W71.splice(3,0,"PS256","PS384","PS512");var yr1={expiresIn:{isValid:function(A){return X71(A)||v5(A)&&A},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(A){return X71(A)||v5(A)&&A},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(A){return v5(A)||Array.isArray(A)},message:'"audience" must be a string or array'},algorithm:{isValid:xr1.bind(null,W71),message:'"algorithm" must be a valid string enum value'},header:{isValid:Y71,message:'"header" must be an object'},encoding:{isValid:v5,message:'"encoding" must be a string'},issuer:{isValid:v5,message:'"issuer" must be a string'},subject:{isValid:v5,message:'"subject" must be a string'},jwtid:{isValid:v5,message:'"jwtid" must be a string'},noTimestamp:{isValid:cz,message:'"noTimestamp" must be a boolean'},keyid:{isValid:v5,message:'"keyid" must be a string'},mutatePayload:{isValid:cz,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:cz,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:cz,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},vr1={iat:{isValid:IR,message:'"iat" should be a number of seconds'},exp:{isValid:IR,message:'"exp" should be a number of seconds'},nbf:{isValid:IR,message:'"nbf" should be a number of seconds'}};function G71(A,F,B,$){if(!Y71(B))throw new Error('Expected "'+$+'" to be a plain object.');Object.keys(B).forEach(function(Z){let D=A[Z];if(!D){if(!F)throw new Error('"'+Z+'" is not allowed in "'+$+'"');return}if(!D.isValid(B[Z]))throw new Error(D.message)})}function hr1(A){return G71(yr1,!1,A,"options")}function dr1(A){return G71(vr1,!0,A,"payload")}var J71={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},mr1=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Q71.exports=function(A,F,B,$){if(typeof B==="function")$=B,B={};else B=B||{};let Z=typeof A==="object"&&!Buffer.isBuffer(A),D=Object.assign({alg:B.algorithm||"HS256",typ:Z?"JWT":void 0,kid:B.keyid},B.header);function X(W){if($)return $(W);throw W}if(!F&&B.algorithm!=="none")return X(new Error("secretOrPrivateKey must have a value"));if(F!=null&&!(F instanceof fr1))try{F=ur1(F)}catch(W){try{F=gr1(typeof F==="string"?Buffer.from(F):F)}catch(G){return X(new Error("secretOrPrivateKey is not valid key material"))}}if(D.alg.startsWith("HS")&&F.type!=="secret")return X(new Error(`secretOrPrivateKey must be a symmetric key when using ${D.alg}`));else if(/^(?:RS|PS|ES)/.test(D.alg)){if(F.type!=="private")return X(new Error(`secretOrPrivateKey must be an asymmetric key when using ${D.alg}`));if(!B.allowInsecureKeySizes&&!D.alg.startsWith("ES")&&F.asymmetricKeyDetails!==void 0&&F.asymmetricKeyDetails.modulusLength<2048)return X(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${D.alg}`))}if(typeof A==="undefined")return X(new Error("payload is required"));else if(Z){try{dr1(A)}catch(W){return X(W)}if(!B.mutatePayload)A=Object.assign({},A)}else{let W=mr1.filter(function(G){return typeof B[G]!=="undefined"});if(W.length>0)return X(new Error("invalid "+W.join(",")+" option for "+typeof A+" payload"))}if(typeof A.exp!=="undefined"&&typeof B.expiresIn!=="undefined")return X(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof A.nbf!=="undefined"&&typeof B.notBefore!=="undefined")return X(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{hr1(B)}catch(W){return X(W)}if(!B.allowInvalidAsymmetricKeyTypes)try{_r1(D.alg,F)}catch(W){return X(W)}let J=A.iat||Math.floor(Date.now()/1000);if(B.noTimestamp)delete A.iat;else if(Z)A.iat=J;if(typeof B.notBefore!=="undefined"){try{A.nbf=Z71(B.notBefore,J)}catch(W){return X(W)}if(typeof A.nbf==="undefined")return X(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof B.expiresIn!=="undefined"&&typeof A==="object"){try{A.exp=Z71(B.expiresIn,J)}catch(W){return X(W)}if(typeof A.exp==="undefined")return X(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(J71).forEach(function(W){let G=J71[W];if(typeof B[W]!=="undefined"){if(typeof A[G]!=="undefined")return X(new Error('Bad "options.'+W+'" option. The payload already has an "'+G+'" property.'));A[G]=B[W]}});let Y=B.encoding||"utf8";if(typeof $==="function")$=$&&br1($),D71.createSign({header:D,privateKey:F,payload:A,encoding:Y}).once("error",$).once("done",function(W){if(!B.allowInsecureKeySizes&&/^(?:RS|PS)/.test(D.alg)&&W.length<256)return $(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${D.alg}`));$(null,W)});else{let W=D71.sign({header:D,payload:A,secret:F,encoding:Y});if(!B.allowInsecureKeySizes&&/^(?:RS|PS)/.test(D.alg)&&W.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${D.alg}`);return W}}});var H71=C((GU0,q71)=>{q71.exports={decode:FR(),verify:k91(),sign:z71(),JsonWebTokenError:hX(),NotBeforeError:BR(),TokenExpiredError:$R()}});var m6={};m5(m6,{IsUndefined:()=>h2,IsUint8Array:()=>k8,IsSymbol:()=>oz,IsString:()=>m0,IsRegExp:()=>_$,IsObject:()=>_0,IsNumber:()=>Y9,IsNull:()=>rz,IsIterator:()=>tz,IsFunction:()=>az,IsDate:()=>c5,IsBoolean:()=>S8,IsBigInt:()=>k$,IsAsyncIterator:()=>sz,IsArray:()=>v2,HasPropertyKey:()=>rX});function rX(A,F){return F in A}function sz(A){return _0(A)&&!v2(A)&&!k8(A)&&Symbol.asyncIterator in A}function v2(A){return Array.isArray(A)}function k$(A){return typeof A==="bigint"}function S8(A){return typeof A==="boolean"}function c5(A){return A instanceof globalThis.Date}function az(A){return typeof A==="function"}function tz(A){return _0(A)&&!v2(A)&&!k8(A)&&Symbol.iterator in A}function rz(A){return A===null}function Y9(A){return typeof A==="number"}function _0(A){return typeof A==="object"&&A!==null}function _$(A){return A instanceof globalThis.RegExp}function m0(A){return typeof A==="string"}function oz(A){return typeof A==="symbol"}function k8(A){return A instanceof globalThis.Uint8Array}function h2(A){return A===void 0}function _71(A){return A.map((F)=>oX(F))}function x71(A){return new Date(A.getTime())}function b71(A){return new Uint8Array(A)}function f71(A){return new RegExp(A.source,A.flags)}function g71(A){let F={};for(let B of Object.getOwnPropertyNames(A))F[B]=oX(A[B]);for(let B of Object.getOwnPropertySymbols(A))F[B]=oX(A[B]);return F}function oX(A){return v2(A)?_71(A):c5(A)?x71(A):k8(A)?b71(A):_$(A)?f71(A):_0(A)?g71(A):A}function X2(A){return oX(A)}function JF(A,F){return F===void 0?X2(A):X2({...F,...A})}function eX(A){return y1(A)&&globalThis.Symbol.asyncIterator in A}function AJ(A){return y1(A)&&globalThis.Symbol.iterator in A}function ez(A){return y1(A)&&(globalThis.Object.getPrototypeOf(A)===Object.prototype||globalThis.Object.getPrototypeOf(A)===null)}function FJ(A){return A instanceof globalThis.Promise}function q4(A){return A instanceof Date&&globalThis.Number.isFinite(A.getTime())}function yR(A){return A instanceof globalThis.Map}function vR(A){return A instanceof globalThis.Set}function x9(A){return globalThis.ArrayBuffer.isView(A)}function YF(A){return A instanceof globalThis.Uint8Array}function I1(A,F){return F in A}function y1(A){return A!==null&&typeof A==="object"}function T1(A){return globalThis.Array.isArray(A)&&!globalThis.ArrayBuffer.isView(A)}function J2(A){return A===void 0}function _8(A){return A===null}function Z8(A){return typeof A==="boolean"}function V1(A){return typeof A==="number"}function BJ(A){return globalThis.Number.isInteger(A)}function M6(A){return typeof A==="bigint"}function Y0(A){return typeof A==="string"}function x3(A){return typeof A==="function"}function x8(A){return typeof A==="symbol"}function W9(A){return M6(A)||Z8(A)||_8(A)||V1(A)||Y0(A)||x8(A)||J2(A)}var t0;(function(A){A.InstanceMode="default",A.ExactOptionalPropertyTypes=!1,A.AllowArrayObject=!1,A.AllowNaN=!1,A.AllowNullVoid=!1;function F(X,J){return A.ExactOptionalPropertyTypes?J in X:X[J]!==void 0}A.IsExactOptionalProperty=F;function B(X){let J=y1(X);return A.AllowArrayObject?J:J&&!T1(X)}A.IsObjectLike=B;function $(X){return B(X)&&!(X instanceof Date)&&!(X instanceof Uint8Array)}A.IsRecordLike=$;function Z(X){return A.AllowNaN?V1(X):Number.isFinite(X)}A.IsNumberLike=Z;function D(X){let J=J2(X);return A.AllowNullVoid?J||X===null:J}A.IsVoidLike=D})(t0||(t0={}));function u71(A){return globalThis.Object.freeze(A).map((F)=>x$(F))}function y71(A){return A}function v71(A){return A}function h71(A){return A}function d71(A){let F={};for(let B of Object.getOwnPropertyNames(A))F[B]=x$(A[B]);for(let B of Object.getOwnPropertySymbols(A))F[B]=x$(A[B]);return globalThis.Object.freeze(F)}function x$(A){return v2(A)?u71(A):c5(A)?y71(A):k8(A)?v71(A):_$(A)?h71(A):_0(A)?d71(A):A}function c(A,F){let B=F!==void 0?{...F,...A}:A;switch(t0.InstanceMode){case"freeze":return x$(B);case"clone":return X2(B);default:return B}}class P1 extends Error{constructor(A){super(A)}}var g0=Symbol.for("TypeBox.Transform"),K7=Symbol.for("TypeBox.Readonly"),d2=Symbol.for("TypeBox.Optional"),b9=Symbol.for("TypeBox.Hint"),g=Symbol.for("TypeBox.Kind");function WF(A){return _0(A)&&A[K7]==="Readonly"}function x4(A){return _0(A)&&A[d2]==="Optional"}function Aq(A){return $0(A,"Any")}function Fq(A){return $0(A,"Argument")}function E7(A){return $0(A,"Array")}function l5(A){return $0(A,"AsyncIterator")}function p5(A){return $0(A,"BigInt")}function b8(A){return $0(A,"Boolean")}function L7(A){return $0(A,"Computed")}function w7(A){return $0(A,"Constructor")}function m71(A){return $0(A,"Date")}function V7(A){return $0(A,"Function")}function N7(A){return $0(A,"Integer")}function V2(A){return $0(A,"Intersect")}function i5(A){return $0(A,"Iterator")}function $0(A,F){return _0(A)&&g in A&&A[g]===F}function $J(A){return S8(A)||Y9(A)||m0(A)}function G9(A){return $0(A,"Literal")}function Q9(A){return $0(A,"MappedKey")}function Y2(A){return $0(A,"MappedResult")}function b3(A){return $0(A,"Never")}function c71(A){return $0(A,"Not")}function b$(A){return $0(A,"Null")}function M7(A){return $0(A,"Number")}function m2(A){return $0(A,"Object")}function n5(A){return $0(A,"Promise")}function s5(A){return $0(A,"Record")}function S2(A){return $0(A,"Ref")}function Bq(A){return $0(A,"RegExp")}function f8(A){return $0(A,"String")}function f$(A){return $0(A,"Symbol")}function z9(A){return $0(A,"TemplateLiteral")}function l71(A){return $0(A,"This")}function L0(A){return _0(A)&&g0 in A}function q9(A){return $0(A,"Tuple")}function g8(A){return $0(A,"Undefined")}function W0(A){return $0(A,"Union")}function p71(A){return $0(A,"Uint8Array")}function i71(A){return $0(A,"Unknown")}function n71(A){return $0(A,"Unsafe")}function s71(A){return $0(A,"Void")}function f3(A){return _0(A)&&g in A&&m0(A[g])}function C2(A){return Aq(A)||Fq(A)||E7(A)||b8(A)||p5(A)||l5(A)||L7(A)||w7(A)||m71(A)||V7(A)||N7(A)||V2(A)||i5(A)||G9(A)||Q9(A)||Y2(A)||b3(A)||c71(A)||b$(A)||M7(A)||m2(A)||n5(A)||s5(A)||S2(A)||Bq(A)||f8(A)||f$(A)||z9(A)||l71(A)||q9(A)||g8(A)||W0(A)||p71(A)||i71(A)||n71(A)||s71(A)||f3(A)}var b={};m5(b,{TypeGuardUnknownTypeError:()=>hR,IsVoid:()=>IP,IsUnsafe:()=>jP,IsUnknown:()=>PP,IsUnionLiteral:()=>$81,IsUnion:()=>Dq,IsUndefined:()=>MP,IsUint8Array:()=>RP,IsTuple:()=>NP,IsTransform:()=>VP,IsThis:()=>wP,IsTemplateLiteral:()=>LP,IsSymbol:()=>EP,IsString:()=>KP,IsSchema:()=>W2,IsRegExp:()=>CP,IsRef:()=>UP,IsRecursive:()=>B81,IsRecord:()=>HP,IsReadonly:()=>o71,IsProperties:()=>ZJ,IsPromise:()=>qP,IsOptional:()=>e71,IsObject:()=>zP,IsNumber:()=>QP,IsNull:()=>GP,IsNot:()=>WP,IsNever:()=>YP,IsMappedResult:()=>JP,IsMappedKey:()=>XP,IsLiteralValue:()=>DP,IsLiteralString:()=>$P,IsLiteralNumber:()=>ZP,IsLiteralBoolean:()=>F81,IsLiteral:()=>u$,IsKindOf:()=>r1,IsKind:()=>TP,IsIterator:()=>BP,IsIntersect:()=>FP,IsInteger:()=>AP,IsImport:()=>A81,IsFunction:()=>eR,IsDate:()=>oR,IsConstructor:()=>rR,IsComputed:()=>tR,IsBoolean:()=>aR,IsBigInt:()=>sR,IsAsyncIterator:()=>nR,IsArray:()=>iR,IsArgument:()=>pR,IsAny:()=>lR});class hR extends P1{}var a71=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function dR(A){try{return new RegExp(A),!0}catch{return!1}}function $q(A){if(!m0(A))return!1;for(let F=0;F<A.length;F++){let B=A.charCodeAt(F);if(B>=7&&B<=13||B===27||B===127)return!1}return!0}function mR(A){return Zq(A)||W2(A)}function g$(A){return h2(A)||k$(A)}function c0(A){return h2(A)||Y9(A)}function Zq(A){return h2(A)||S8(A)}function x0(A){return h2(A)||m0(A)}function t71(A){return h2(A)||m0(A)&&$q(A)&&dR(A)}function r71(A){return h2(A)||m0(A)&&$q(A)}function cR(A){return h2(A)||W2(A)}function o71(A){return _0(A)&&A[K7]==="Readonly"}function e71(A){return _0(A)&&A[d2]==="Optional"}function lR(A){return r1(A,"Any")&&x0(A.$id)}function pR(A){return r1(A,"Argument")&&Y9(A.index)}function iR(A){return r1(A,"Array")&&A.type==="array"&&x0(A.$id)&&W2(A.items)&&c0(A.minItems)&&c0(A.maxItems)&&Zq(A.uniqueItems)&&cR(A.contains)&&c0(A.minContains)&&c0(A.maxContains)}function nR(A){return r1(A,"AsyncIterator")&&A.type==="AsyncIterator"&&x0(A.$id)&&W2(A.items)}function sR(A){return r1(A,"BigInt")&&A.type==="bigint"&&x0(A.$id)&&g$(A.exclusiveMaximum)&&g$(A.exclusiveMinimum)&&g$(A.maximum)&&g$(A.minimum)&&g$(A.multipleOf)}function aR(A){return r1(A,"Boolean")&&A.type==="boolean"&&x0(A.$id)}function tR(A){return r1(A,"Computed")&&m0(A.target)&&v2(A.parameters)&&A.parameters.every((F)=>W2(F))}function rR(A){return r1(A,"Constructor")&&A.type==="Constructor"&&x0(A.$id)&&v2(A.parameters)&&A.parameters.every((F)=>W2(F))&&W2(A.returns)}function oR(A){return r1(A,"Date")&&A.type==="Date"&&x0(A.$id)&&c0(A.exclusiveMaximumTimestamp)&&c0(A.exclusiveMinimumTimestamp)&&c0(A.maximumTimestamp)&&c0(A.minimumTimestamp)&&c0(A.multipleOfTimestamp)}function eR(A){return r1(A,"Function")&&A.type==="Function"&&x0(A.$id)&&v2(A.parameters)&&A.parameters.every((F)=>W2(F))&&W2(A.returns)}function A81(A){return r1(A,"Import")&&rX(A,"$defs")&&_0(A.$defs)&&ZJ(A.$defs)&&rX(A,"$ref")&&m0(A.$ref)&&A.$ref in A.$defs}function AP(A){return r1(A,"Integer")&&A.type==="integer"&&x0(A.$id)&&c0(A.exclusiveMaximum)&&c0(A.exclusiveMinimum)&&c0(A.maximum)&&c0(A.minimum)&&c0(A.multipleOf)}function ZJ(A){return _0(A)&&Object.entries(A).every(([F,B])=>$q(F)&&W2(B))}function FP(A){return r1(A,"Intersect")&&(m0(A.type)&&A.type!=="object"?!1:!0)&&v2(A.allOf)&&A.allOf.every((F)=>W2(F)&&!VP(F))&&x0(A.type)&&(Zq(A.unevaluatedProperties)||cR(A.unevaluatedProperties))&&x0(A.$id)}function BP(A){return r1(A,"Iterator")&&A.type==="Iterator"&&x0(A.$id)&&W2(A.items)}function r1(A,F){return _0(A)&&g in A&&A[g]===F}function $P(A){return u$(A)&&m0(A.const)}function ZP(A){return u$(A)&&Y9(A.const)}function F81(A){return u$(A)&&S8(A.const)}function u$(A){return r1(A,"Literal")&&x0(A.$id)&&DP(A.const)}function DP(A){return S8(A)||Y9(A)||m0(A)}function XP(A){return r1(A,"MappedKey")&&v2(A.keys)&&A.keys.every((F)=>Y9(F)||m0(F))}function JP(A){return r1(A,"MappedResult")&&ZJ(A.properties)}function YP(A){return r1(A,"Never")&&_0(A.not)&&Object.getOwnPropertyNames(A.not).length===0}function WP(A){return r1(A,"Not")&&W2(A.not)}function GP(A){return r1(A,"Null")&&A.type==="null"&&x0(A.$id)}function QP(A){return r1(A,"Number")&&A.type==="number"&&x0(A.$id)&&c0(A.exclusiveMaximum)&&c0(A.exclusiveMinimum)&&c0(A.maximum)&&c0(A.minimum)&&c0(A.multipleOf)}function zP(A){return r1(A,"Object")&&A.type==="object"&&x0(A.$id)&&ZJ(A.properties)&&mR(A.additionalProperties)&&c0(A.minProperties)&&c0(A.maxProperties)}function qP(A){return r1(A,"Promise")&&A.type==="Promise"&&x0(A.$id)&&W2(A.item)}function HP(A){return r1(A,"Record")&&A.type==="object"&&x0(A.$id)&&mR(A.additionalProperties)&&_0(A.patternProperties)&&((F)=>{let B=Object.getOwnPropertyNames(F.patternProperties);return B.length===1&&dR(B[0])&&_0(F.patternProperties)&&W2(F.patternProperties[B[0]])})(A)}function B81(A){return _0(A)&&b9 in A&&A[b9]==="Recursive"}function UP(A){return r1(A,"Ref")&&x0(A.$id)&&m0(A.$ref)}function CP(A){return r1(A,"RegExp")&&x0(A.$id)&&m0(A.source)&&m0(A.flags)&&c0(A.maxLength)&&c0(A.minLength)}function KP(A){return r1(A,"String")&&A.type==="string"&&x0(A.$id)&&c0(A.minLength)&&c0(A.maxLength)&&t71(A.pattern)&&r71(A.format)}function EP(A){return r1(A,"Symbol")&&A.type==="symbol"&&x0(A.$id)}function LP(A){return r1(A,"TemplateLiteral")&&A.type==="string"&&m0(A.pattern)&&A.pattern[0]==="^"&&A.pattern[A.pattern.length-1]==="$"}function wP(A){return r1(A,"This")&&x0(A.$id)&&m0(A.$ref)}function VP(A){return _0(A)&&g0 in A}function NP(A){return r1(A,"Tuple")&&A.type==="array"&&x0(A.$id)&&Y9(A.minItems)&&Y9(A.maxItems)&&A.minItems===A.maxItems&&(h2(A.items)&&h2(A.additionalItems)&&A.minItems===0||v2(A.items)&&A.items.every((F)=>W2(F)))}function MP(A){return r1(A,"Undefined")&&A.type==="undefined"&&x0(A.$id)}function $81(A){return Dq(A)&&A.anyOf.every((F)=>$P(F)||ZP(F))}function Dq(A){return r1(A,"Union")&&x0(A.$id)&&_0(A)&&v2(A.anyOf)&&A.anyOf.every((F)=>W2(F))}function RP(A){return r1(A,"Uint8Array")&&A.type==="Uint8Array"&&x0(A.$id)&&c0(A.minByteLength)&&c0(A.maxByteLength)}function PP(A){return r1(A,"Unknown")&&x0(A.$id)}function jP(A){return r1(A,"Unsafe")}function IP(A){return r1(A,"Void")&&A.type==="void"&&x0(A.$id)}function TP(A){return _0(A)&&g in A&&m0(A[g])&&!a71.includes(A[g])}function W2(A){return _0(A)&&(lR(A)||pR(A)||iR(A)||aR(A)||sR(A)||nR(A)||tR(A)||rR(A)||oR(A)||eR(A)||AP(A)||FP(A)||BP(A)||u$(A)||XP(A)||JP(A)||YP(A)||WP(A)||GP(A)||QP(A)||zP(A)||qP(A)||HP(A)||UP(A)||CP(A)||KP(A)||EP(A)||LP(A)||wP(A)||NP(A)||MP(A)||Dq(A)||RP(A)||PP(A)||jP(A)||IP(A)||TP(A))}var OP="(true|false)",DJ="(0|[1-9][0-9]*)",SP="(.*)";var g3="^(0|[1-9][0-9]*)$",u3="^(.*)$",kP="^(?!.*)$";var T0={};m5(T0,{Set:()=>Y81,Has:()=>J81,Get:()=>W81,Entries:()=>Z81,Delete:()=>X81,Clear:()=>D81});var GF=new Map;function Z81(){return new Map(GF)}function D81(){return GF.clear()}function X81(A){return GF.delete(A)}function J81(A){return GF.has(A)}function Y81(A,F){GF.set(A,F)}function W81(A){return GF.get(A)}var J6={};m5(J6,{Set:()=>H81,Has:()=>q81,Get:()=>U81,Entries:()=>G81,Delete:()=>z81,Clear:()=>Q81});var QF=new Map;function G81(){return new Map(QF)}function Q81(){return QF.clear()}function z81(A){return QF.delete(A)}function q81(A){return QF.has(A)}function H81(A,F){QF.set(A,F)}function U81(A){return QF.get(A)}function _P(A,F){return A.includes(F)}function xP(A){return[...new Set(A)]}function C81(A,F){return A.filter((B)=>F.includes(B))}function K81(A,F){return A.reduce((B,$)=>{return C81(B,$)},F)}function bP(A){return A.length===1?A[0]:A.length>1?K81(A.slice(1),A[0]):[]}function fP(A){let F=[];for(let B of A)F.push(...B);return F}function y3(A){return c({[g]:"Any"},A)}function zF(A,F){return c({[g]:"Array",type:"array",items:A},F)}function gP(A){return c({[g]:"Argument",index:A})}function qF(A,F){return c({[g]:"AsyncIterator",type:"AsyncIterator",items:A},F)}function r0(A,F,B){return c({[g]:"Computed",target:A,parameters:F},B)}function E81(A,F){let{[F]:B,...$}=A;return $}function N2(A,F){return F.reduce((B,$)=>E81(B,$),A)}function p1(A){return c({[g]:"Never",not:{}},A)}function q0(A){return c({[g]:"MappedResult",properties:A})}function HF(A,F,B){return c({[g]:"Constructor",type:"Constructor",parameters:A,returns:F},B)}function D8(A,F,B){return c({[g]:"Function",type:"Function",parameters:A,returns:F},B)}function y$(A,F){return c({[g]:"Union",anyOf:A},F)}function L81(A){return A.some((F)=>x4(F))}function uP(A){return A.map((F)=>x4(F)?w81(F):F)}function w81(A){return N2(A,[d2])}function V81(A,F){return L81(A)?c6(y$(uP(A),F)):y$(uP(A),F)}function X8(A,F){return A.length===1?c(A[0],F):A.length===0?p1(F):V81(A,F)}function w0(A,F){return A.length===0?p1(F):A.length===1?c(A[0],F):y$(A,F)}class Xq extends P1{}function N81(A){return A.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function Jq(A,F,B){return A[F]===B&&A.charCodeAt(F-1)!==92}function y8(A,F){return Jq(A,F,"(")}function v$(A,F){return Jq(A,F,")")}function yP(A,F){return Jq(A,F,"|")}function M81(A){if(!(y8(A,0)&&v$(A,A.length-1)))return!1;let F=0;for(let B=0;B<A.length;B++){if(y8(A,B))F+=1;if(v$(A,B))F-=1;if(F===0&&B!==A.length-1)return!1}return!0}function R81(A){return A.slice(1,A.length-1)}function P81(A){let F=0;for(let B=0;B<A.length;B++){if(y8(A,B))F+=1;if(v$(A,B))F-=1;if(yP(A,B)&&F===0)return!0}return!1}function j81(A){for(let F=0;F<A.length;F++)if(y8(A,F))return!0;return!1}function I81(A){let[F,B]=[0,0],$=[];for(let D=0;D<A.length;D++){if(y8(A,D))F+=1;if(v$(A,D))F-=1;if(yP(A,D)&&F===0){let X=A.slice(B,D);if(X.length>0)$.push(UF(X));B=D+1}}let Z=A.slice(B);if(Z.length>0)$.push(UF(Z));if($.length===0)return{type:"const",const:""};if($.length===1)return $[0];return{type:"or",expr:$}}function T81(A){function F(Z,D){if(!y8(Z,D))throw new Xq("TemplateLiteralParser: Index must point to open parens");let X=0;for(let J=D;J<Z.length;J++){if(y8(Z,J))X+=1;if(v$(Z,J))X-=1;if(X===0)return[D,J]}throw new Xq("TemplateLiteralParser: Unclosed group parens in expression")}function B(Z,D){for(let X=D;X<Z.length;X++)if(y8(Z,X))return[D,X];return[D,Z.length]}let $=[];for(let Z=0;Z<A.length;Z++)if(y8(A,Z)){let[D,X]=F(A,Z),J=A.slice(D,X+1);$.push(UF(J)),Z=X}else{let[D,X]=B(A,Z),J=A.slice(D,X);if(J.length>0)$.push(UF(J));Z=X-1}return $.length===0?{type:"const",const:""}:$.length===1?$[0]:{type:"and",expr:$}}function UF(A){return M81(A)?UF(R81(A)):P81(A)?I81(A):j81(A)?T81(A):{type:"const",const:N81(A)}}function CF(A){return UF(A.slice(1,A.length-1))}class vP extends P1{}function O81(A){return A.type==="or"&&A.expr.length===2&&A.expr[0].type==="const"&&A.expr[0].const==="0"&&A.expr[1].type==="const"&&A.expr[1].const==="[1-9][0-9]*"}function S81(A){return A.type==="or"&&A.expr.length===2&&A.expr[0].type==="const"&&A.expr[0].const==="true"&&A.expr[1].type==="const"&&A.expr[1].const==="false"}function k81(A){return A.type==="const"&&A.const===".*"}function a5(A){return O81(A)||k81(A)?!1:S81(A)?!0:A.type==="and"?A.expr.every((F)=>a5(F)):A.type==="or"?A.expr.every((F)=>a5(F)):A.type==="const"?!0:(()=>{throw new vP("Unknown expression type")})()}function XJ(A){let F=CF(A.pattern);return a5(F)}class hP extends P1{}function*dP(A){if(A.length===1)return yield*A[0];for(let F of A[0])for(let B of dP(A.slice(1)))yield`${F}${B}`}function*_81(A){return yield*dP(A.expr.map((F)=>[...h$(F)]))}function*x81(A){for(let F of A.expr)yield*h$(F)}function*b81(A){return yield A.const}function*h$(A){return A.type==="and"?yield*_81(A):A.type==="or"?yield*x81(A):A.type==="const"?yield*b81(A):(()=>{throw new hP("Unknown expression")})()}function KF(A){let F=CF(A.pattern);return a5(F)?[...h$(F)]:[]}function Z0(A,F){return c({[g]:"Literal",const:A,type:typeof A},F)}function JJ(A){return c({[g]:"Boolean",type:"boolean"},A)}function EF(A){return c({[g]:"BigInt",type:"bigint"},A)}function f9(A){return c({[g]:"Number",type:"number"},A)}function H4(A){return c({[g]:"String",type:"string"},A)}function*f81(A){let F=A.trim().replace(/"|'/g,"");return F==="boolean"?yield JJ():F==="number"?yield f9():F==="bigint"?yield EF():F==="string"?yield H4():yield(()=>{let B=F.split("|").map(($)=>Z0($.trim()));return B.length===0?p1():B.length===1?B[0]:X8(B)})()}function*g81(A){if(A[1]!=="{"){let F=Z0("$"),B=Yq(A.slice(1));return yield*[F,...B]}for(let F=2;F<A.length;F++)if(A[F]==="}"){let B=f81(A.slice(2,F)),$=Yq(A.slice(F+1));return yield*[...B,...$]}yield Z0(A)}function*Yq(A){for(let F=0;F<A.length;F++)if(A[F]==="$"){let B=Z0(A.slice(0,F)),$=g81(A.slice(F));return yield*[B,...$]}yield Z0(A)}function mP(A){return[...Yq(A)]}class cP extends P1{}function u81(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lP(A,F){return z9(A)?A.pattern.slice(1,A.pattern.length-1):W0(A)?`(${A.anyOf.map((B)=>lP(B,F)).join("|")})`:M7(A)?`${F}${DJ}`:N7(A)?`${F}${DJ}`:p5(A)?`${F}${DJ}`:f8(A)?`${F}${SP}`:G9(A)?`${F}${u81(A.const.toString())}`:b8(A)?`${F}${OP}`:(()=>{throw new cP(`Unexpected Kind '${A[g]}'`)})()}function Wq(A){return`^${A.map((F)=>lP(F,"")).join("")}$`}function t5(A){let B=KF(A).map(($)=>Z0($));return X8(B)}function YJ(A,F){let B=m0(A)?Wq(mP(A)):Wq(A);return c({[g]:"TemplateLiteral",type:"string",pattern:B},F)}function y81(A){return KF(A).map((B)=>B.toString())}function v81(A){let F=[];for(let B of A)F.push(...b4(B));return F}function h81(A){return[A.toString()]}function b4(A){return[...new Set(z9(A)?y81(A):W0(A)?v81(A.anyOf):G9(A)?h81(A.const):M7(A)?["[number]"]:N7(A)?["[number]"]:[])]}function d81(A,F,B){let $={};for(let Z of Object.getOwnPropertyNames(F))$[Z]=v3(A,b4(F[Z]),B);return $}function m81(A,F,B){return d81(A,F.properties,B)}function pP(A,F,B){let $=m81(A,F,B);return q0($)}function nP(A,F){return A.map((B)=>sP(B,F))}function c81(A){return A.filter((F)=>!b3(F))}function l81(A,F){return WJ(c81(nP(A,F)))}function p81(A){return A.some((F)=>b3(F))?[]:A}function i81(A,F){return X8(p81(nP(A,F)))}function n81(A,F){return F in A?A[F]:F==="[number]"?X8(A):p1()}function s81(A,F){return F==="[number]"?A:p1()}function a81(A,F){return F in A?A[F]:p1()}function sP(A,F){return V2(A)?l81(A.allOf,F):W0(A)?i81(A.anyOf,F):q9(A)?n81(A.items??[],F):E7(A)?s81(A.items,F):m2(A)?a81(A.properties,F):p1()}function d$(A,F){return F.map((B)=>sP(A,B))}function iP(A,F){return X8(d$(A,F))}function v3(A,F,B){if(S2(A)||S2(F)){if(!C2(A)||!C2(F))throw new P1("Index types using Ref parameters require both Type and Key to be of TSchema");return r0("Index",[A,F])}if(Y2(F))return pP(A,F,B);if(Q9(F))return aP(A,F,B);return c(C2(F)?iP(A,b4(F)):iP(A,F),B)}function t81(A,F,B){return{[F]:v3(A,[F],X2(B))}}function r81(A,F,B){return F.reduce(($,Z)=>{return{...$,...t81(A,Z,B)}},{})}function o81(A,F,B){return r81(A,F.keys,B)}function aP(A,F,B){let $=o81(A,F,B);return q0($)}function LF(A,F){return c({[g]:"Iterator",type:"Iterator",items:A},F)}function e81(A){let F=[];for(let B in A)if(!x4(A[B]))F.push(B);return F}function A31(A,F){let B=e81(A),$=B.length>0?{[g]:"Object",type:"object",properties:A,required:B}:{[g]:"Object",type:"object",properties:A};return c($,F)}var V0=A31;function GJ(A,F){return c({[g]:"Promise",type:"Promise",item:A},F)}function F31(A){return c(N2(A,[K7]))}function B31(A){return c({...A,[K7]:"Readonly"})}function $31(A,F){return F===!1?F31(A):B31(A)}function f4(A,F){let B=F??!0;return Y2(A)?tP(A,B):$31(A,B)}function Z31(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=f4(A[$],F);return B}function D31(A,F){return Z31(A.properties,F)}function tP(A,F){let B=D31(A,F);return q0(B)}function g9(A,F){return c(A.length>0?{[g]:"Tuple",type:"array",items:A,additionalItems:!1,minItems:A.length,maxItems:A.length}:{[g]:"Tuple",type:"array",minItems:A.length,maxItems:A.length},F)}function rP(A,F){return A in F?u9(A,F[A]):q0(F)}function X31(A){return{[A]:Z0(A)}}function J31(A){let F={};for(let B of A)F[B]=Z0(B);return F}function Y31(A,F){return _P(F,A)?X31(A):J31(F)}function W31(A,F){let B=Y31(A,F);return rP(A,B)}function m$(A,F){return F.map((B)=>u9(A,B))}function G31(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(F))B[$]=u9(A,F[$]);return B}function u9(A,F){let B={...F};return x4(F)?c6(u9(A,N2(F,[d2]))):WF(F)?f4(u9(A,N2(F,[K7]))):Y2(F)?rP(A,F.properties):Q9(F)?W31(A,F.keys):w7(F)?HF(m$(A,F.parameters),u9(A,F.returns),B):V7(F)?D8(m$(A,F.parameters),u9(A,F.returns),B):l5(F)?qF(u9(A,F.items),B):i5(F)?LF(u9(A,F.items),B):V2(F)?l6(m$(A,F.allOf),B):W0(F)?w0(m$(A,F.anyOf),B):q9(F)?g9(m$(A,F.items??[]),B):m2(F)?V0(G31(A,F.properties),B):E7(F)?zF(u9(A,F.items),B):n5(F)?GJ(u9(A,F.item),B):F}function Q31(A,F){let B={};for(let $ of A)B[$]=u9($,F);return B}function oP(A,F,B){let $=C2(A)?b4(A):A,Z=F({[g]:"MappedKey",keys:$}),D=Q31($,Z);return V0(D,B)}function z31(A){return c(N2(A,[d2]))}function q31(A){return c({...A,[d2]:"Optional"})}function H31(A,F){return F===!1?z31(A):q31(A)}function c6(A,F){let B=F??!0;return Y2(A)?eP(A,B):H31(A,B)}function U31(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=c6(A[$],F);return B}function C31(A,F){return U31(A.properties,F)}function eP(A,F){let B=C31(A,F);return q0(B)}function c$(A,F={}){let B=A.every((Z)=>m2(Z)),$=C2(F.unevaluatedProperties)?{unevaluatedProperties:F.unevaluatedProperties}:{};return c(F.unevaluatedProperties===!1||C2(F.unevaluatedProperties)||B?{...$,[g]:"Intersect",type:"object",allOf:A}:{...$,[g]:"Intersect",allOf:A},F)}function K31(A){return A.every((F)=>x4(F))}function E31(A){return N2(A,[d2])}function Aj(A){return A.map((F)=>x4(F)?E31(F):F)}function L31(A,F){return K31(A)?c6(c$(Aj(A),F)):c$(Aj(A),F)}function WJ(A,F={}){if(A.length===1)return c(A[0],F);if(A.length===0)return p1(F);if(A.some((B)=>L0(B)))throw new Error("Cannot intersect transform types");return L31(A,F)}function l6(A,F){if(A.length===1)return c(A[0],F);if(A.length===0)return p1(F);if(A.some((B)=>L0(B)))throw new Error("Cannot intersect transform types");return c$(A,F)}function y9(...A){let[F,B]=typeof A[0]==="string"?[A[0],A[1]]:[A[0].$id,A[1]];if(typeof F!=="string")throw new P1("Ref: $ref must be a string");return c({[g]:"Ref",$ref:F},B)}function w31(A,F){return r0("Awaited",[r0(A,F)])}function V31(A){return r0("Awaited",[y9(A)])}function N31(A){return l6(Fj(A))}function M31(A){return w0(Fj(A))}function R31(A){return wF(A)}function Fj(A){return A.map((F)=>wF(F))}function wF(A,F){return c(L7(A)?w31(A.target,A.parameters):V2(A)?N31(A.allOf):W0(A)?M31(A.anyOf):n5(A)?R31(A.item):S2(A)?V31(A.$ref):A,F)}function Bj(A){let F=[];for(let B of A)F.push(g4(B));return F}function P31(A){let F=Bj(A);return fP(F)}function j31(A){let F=Bj(A);return bP(F)}function I31(A){return A.map((F,B)=>B.toString())}function T31(A){return["[number]"]}function O31(A){return globalThis.Object.getOwnPropertyNames(A)}function S31(A){if(!Gq)return[];return globalThis.Object.getOwnPropertyNames(A).map((B)=>{return B[0]==="^"&&B[B.length-1]==="$"?B.slice(1,B.length-1):B})}function g4(A){return V2(A)?P31(A.allOf):W0(A)?j31(A.anyOf):q9(A)?I31(A.items??[]):E7(A)?T31(A.items):m2(A)?O31(A.properties):s5(A)?S31(A.patternProperties):[]}var Gq=!1;function v8(A){Gq=!0;let F=g4(A);return Gq=!1,`^(${F.map(($)=>`(${$})`).join("|")})$`}function k31(A,F){return r0("KeyOf",[r0(A,F)])}function _31(A){return r0("KeyOf",[y9(A)])}function x31(A,F){let B=g4(A),$=b31(B),Z=X8($);return c(Z,F)}function b31(A){return A.map((F)=>F==="[number]"?f9():Z0(F))}function VF(A,F){return L7(A)?k31(A.target,A.parameters):S2(A)?_31(A.$ref):Y2(A)?$j(A,F):x31(A,F)}function f31(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=VF(A[$],X2(F));return B}function g31(A,F){return f31(A.properties,F)}function $j(A,F){let B=g31(A,F);return q0(B)}function QJ(A){let F=g4(A),B=d$(A,F);return F.map(($,Z)=>[F[Z],B[Z]])}function u31(A){let F=[];for(let B of A)F.push(...g4(B));return xP(F)}function y31(A){return A.filter((F)=>!b3(F))}function v31(A,F){let B=[];for(let $ of A)B.push(...d$($,[F]));return y31(B)}function h31(A,F){let B={};for(let $ of F)B[$]=WJ(v31(A,$));return B}function Zj(A,F){let B=u31(A),$=h31(A,B);return V0($,F)}function zJ(A){return c({[g]:"Date",type:"Date"},A)}function qJ(A){return c({[g]:"Null",type:"null"},A)}function HJ(A){return c({[g]:"Symbol",type:"symbol"},A)}function UJ(A){return c({[g]:"Undefined",type:"undefined"},A)}function CJ(A){return c({[g]:"Uint8Array",type:"Uint8Array"},A)}function R7(A){return c({[g]:"Unknown"},A)}function d31(A){return A.map((F)=>Qq(F,!1))}function m31(A){let F={};for(let B of globalThis.Object.getOwnPropertyNames(A))F[B]=f4(Qq(A[B],!1));return F}function KJ(A,F){return F===!0?A:f4(A)}function Qq(A,F){return sz(A)?KJ(y3(),F):tz(A)?KJ(y3(),F):v2(A)?f4(g9(d31(A))):k8(A)?CJ():c5(A)?zJ():_0(A)?KJ(V0(m31(A)),F):az(A)?KJ(D8([],R7()),F):h2(A)?UJ():rz(A)?qJ():oz(A)?HJ():k$(A)?EF():Y9(A)?Z0(A):S8(A)?Z0(A):m0(A)?Z0(A):V0({})}function Dj(A,F){return c(Qq(A,!0),F)}function Xj(A,F){return w7(A)?g9(A.parameters,F):p1(F)}function Jj(A,F){if(h2(A))throw new Error("Enum undefined or empty");let B=globalThis.Object.getOwnPropertyNames(A).filter((D)=>isNaN(D)).map((D)=>A[D]),Z=[...new Set(B)].map((D)=>Z0(D));return w0(Z,{...F,[b9]:"Enum"})}class zj extends P1{}var i;(function(A){A[A.Union=0]="Union",A[A.True=1]="True",A[A.False=2]="False"})(i||(i={}));function v9(A){return A===i.False?A:i.True}function NF(A){throw new zj(A)}function o2(A){return b.IsNever(A)||b.IsIntersect(A)||b.IsUnion(A)||b.IsUnknown(A)||b.IsAny(A)}function e2(A,F){return b.IsNever(F)?Uj(A,F):b.IsIntersect(F)?EJ(A,F):b.IsUnion(F)?Cq(A,F):b.IsUnknown(F)?Lj(A,F):b.IsAny(F)?Uq(A,F):NF("StructuralRight")}function Uq(A,F){return i.True}function c31(A,F){return b.IsIntersect(F)?EJ(A,F):b.IsUnion(F)&&F.anyOf.some((B)=>b.IsAny(B)||b.IsUnknown(B))?i.True:b.IsUnion(F)?i.Union:b.IsUnknown(F)?i.True:b.IsAny(F)?i.True:i.Union}function l31(A,F){return b.IsUnknown(A)?i.False:b.IsAny(A)?i.Union:b.IsNever(A)?i.True:i.False}function p31(A,F){return b.IsObject(F)&&LJ(F)?i.True:o2(F)?e2(A,F):!b.IsArray(F)?i.False:v9(b0(A.items,F.items))}function i31(A,F){return o2(F)?e2(A,F):!b.IsAsyncIterator(F)?i.False:v9(b0(A.items,F.items))}function n31(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsBigInt(F)?i.True:i.False}function qj(A,F){return b.IsLiteralBoolean(A)?i.True:b.IsBoolean(A)?i.True:i.False}function s31(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsBoolean(F)?i.True:i.False}function a31(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):!b.IsConstructor(F)?i.False:A.parameters.length>F.parameters.length?i.False:!A.parameters.every((B,$)=>v9(b0(F.parameters[$],B))===i.True)?i.False:v9(b0(A.returns,F.returns))}function t31(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsDate(F)?i.True:i.False}function r31(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):!b.IsFunction(F)?i.False:A.parameters.length>F.parameters.length?i.False:!A.parameters.every((B,$)=>v9(b0(F.parameters[$],B))===i.True)?i.False:v9(b0(A.returns,F.returns))}function Hj(A,F){return b.IsLiteral(A)&&m6.IsNumber(A.const)?i.True:b.IsNumber(A)||b.IsInteger(A)?i.True:i.False}function o31(A,F){return b.IsInteger(F)||b.IsNumber(F)?i.True:o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):i.False}function EJ(A,F){return F.allOf.every((B)=>b0(A,B)===i.True)?i.True:i.False}function e31(A,F){return A.allOf.some((B)=>b0(B,F)===i.True)?i.True:i.False}function A51(A,F){return o2(F)?e2(A,F):!b.IsIterator(F)?i.False:v9(b0(A.items,F.items))}function F51(A,F){return b.IsLiteral(F)&&F.const===A.const?i.True:o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsString(F)?Ej(A,F):b.IsNumber(F)?Cj(A,F):b.IsInteger(F)?Hj(A,F):b.IsBoolean(F)?qj(A,F):i.False}function Uj(A,F){return i.False}function B51(A,F){return i.True}function Yj(A){let[F,B]=[A,0];while(!0){if(!b.IsNot(F))break;F=F.not,B+=1}return B%2===0?F:R7()}function $51(A,F){return b.IsNot(A)?b0(Yj(A),F):b.IsNot(F)?b0(A,Yj(F)):NF("Invalid fallthrough for Not")}function Z51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsNull(F)?i.True:i.False}function Cj(A,F){return b.IsLiteralNumber(A)?i.True:b.IsNumber(A)||b.IsInteger(A)?i.True:i.False}function D51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsInteger(F)||b.IsNumber(F)?i.True:i.False}function u4(A,F){return Object.getOwnPropertyNames(A.properties).length===F}function Wj(A){return LJ(A)}function Gj(A){return u4(A,0)||u4(A,1)&&"description"in A.properties&&b.IsUnion(A.properties.description)&&A.properties.description.anyOf.length===2&&(b.IsString(A.properties.description.anyOf[0])&&b.IsUndefined(A.properties.description.anyOf[1])||b.IsString(A.properties.description.anyOf[1])&&b.IsUndefined(A.properties.description.anyOf[0]))}function zq(A){return u4(A,0)}function Qj(A){return u4(A,0)}function X51(A){return u4(A,0)}function J51(A){return u4(A,0)}function Y51(A){return LJ(A)}function W51(A){let F=f9();return u4(A,0)||u4(A,1)&&"length"in A.properties&&v9(b0(A.properties.length,F))===i.True}function G51(A){return u4(A,0)}function LJ(A){let F=f9();return u4(A,0)||u4(A,1)&&"length"in A.properties&&v9(b0(A.properties.length,F))===i.True}function Q51(A){let F=D8([y3()],y3());return u4(A,0)||u4(A,1)&&"then"in A.properties&&v9(b0(A.properties.then,F))===i.True}function Kj(A,F){return b0(A,F)===i.False?i.False:b.IsOptional(A)&&!b.IsOptional(F)?i.False:i.True}function p6(A,F){return b.IsUnknown(A)?i.False:b.IsAny(A)?i.Union:b.IsNever(A)||b.IsLiteralString(A)&&Wj(F)||b.IsLiteralNumber(A)&&zq(F)||b.IsLiteralBoolean(A)&&Qj(F)||b.IsSymbol(A)&&Gj(F)||b.IsBigInt(A)&&X51(F)||b.IsString(A)&&Wj(F)||b.IsSymbol(A)&&Gj(F)||b.IsNumber(A)&&zq(F)||b.IsInteger(A)&&zq(F)||b.IsBoolean(A)&&Qj(F)||b.IsUint8Array(A)&&Y51(F)||b.IsDate(A)&&J51(F)||b.IsConstructor(A)&&G51(F)||b.IsFunction(A)&&W51(F)?i.True:b.IsRecord(A)&&b.IsString(qq(A))?(()=>{return F[b9]==="Record"?i.True:i.False})():b.IsRecord(A)&&b.IsNumber(qq(A))?(()=>{return u4(F,0)?i.True:i.False})():i.False}function z51(A,F){return o2(F)?e2(A,F):b.IsRecord(F)?h9(A,F):!b.IsObject(F)?i.False:(()=>{for(let B of Object.getOwnPropertyNames(F.properties)){if(!(B in A.properties)&&!b.IsOptional(F.properties[B]))return i.False;if(b.IsOptional(F.properties[B]))return i.True;if(Kj(A.properties[B],F.properties[B])===i.False)return i.False}return i.True})()}function q51(A,F){return o2(F)?e2(A,F):b.IsObject(F)&&Q51(F)?i.True:!b.IsPromise(F)?i.False:v9(b0(A.item,F.item))}function qq(A){return g3 in A.patternProperties?f9():(u3 in A.patternProperties)?H4():NF("Unknown record key pattern")}function Hq(A){return g3 in A.patternProperties?A.patternProperties[g3]:(u3 in A.patternProperties)?A.patternProperties[u3]:NF("Unable to get record value schema")}function h9(A,F){let[B,$]=[qq(F),Hq(F)];return b.IsLiteralString(A)&&b.IsNumber(B)&&v9(b0(A,$))===i.True?i.True:b.IsUint8Array(A)&&b.IsNumber(B)?b0(A,$):b.IsString(A)&&b.IsNumber(B)?b0(A,$):b.IsArray(A)&&b.IsNumber(B)?b0(A,$):b.IsObject(A)?(()=>{for(let Z of Object.getOwnPropertyNames(A.properties))if(Kj($,A.properties[Z])===i.False)return i.False;return i.True})():i.False}function H51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):!b.IsRecord(F)?i.False:b0(Hq(A),Hq(F))}function U51(A,F){let B=b.IsRegExp(A)?H4():A,$=b.IsRegExp(F)?H4():F;return b0(B,$)}function Ej(A,F){return b.IsLiteral(A)&&m6.IsString(A.const)?i.True:b.IsString(A)?i.True:i.False}function C51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsString(F)?i.True:i.False}function K51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsSymbol(F)?i.True:i.False}function E51(A,F){return b.IsTemplateLiteral(A)?b0(t5(A),F):b.IsTemplateLiteral(F)?b0(A,t5(F)):NF("Invalid fallthrough for TemplateLiteral")}function L51(A,F){return b.IsArray(F)&&A.items!==void 0&&A.items.every((B)=>b0(B,F.items)===i.True)}function w51(A,F){return b.IsNever(A)?i.True:b.IsUnknown(A)?i.False:b.IsAny(A)?i.Union:i.False}function V51(A,F){return o2(F)?e2(A,F):b.IsObject(F)&&LJ(F)?i.True:b.IsArray(F)&&L51(A,F)?i.True:!b.IsTuple(F)?i.False:m6.IsUndefined(A.items)&&!m6.IsUndefined(F.items)||!m6.IsUndefined(A.items)&&m6.IsUndefined(F.items)?i.False:m6.IsUndefined(A.items)&&!m6.IsUndefined(F.items)?i.True:A.items.every((B,$)=>b0(B,F.items[$])===i.True)?i.True:i.False}function N51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsUint8Array(F)?i.True:i.False}function M51(A,F){return o2(F)?e2(A,F):b.IsObject(F)?p6(A,F):b.IsRecord(F)?h9(A,F):b.IsVoid(F)?j51(A,F):b.IsUndefined(F)?i.True:i.False}function Cq(A,F){return F.anyOf.some((B)=>b0(A,B)===i.True)?i.True:i.False}function R51(A,F){return A.anyOf.every((B)=>b0(B,F)===i.True)?i.True:i.False}function Lj(A,F){return i.True}function P51(A,F){return b.IsNever(F)?Uj(A,F):b.IsIntersect(F)?EJ(A,F):b.IsUnion(F)?Cq(A,F):b.IsAny(F)?Uq(A,F):b.IsString(F)?Ej(A,F):b.IsNumber(F)?Cj(A,F):b.IsInteger(F)?Hj(A,F):b.IsBoolean(F)?qj(A,F):b.IsArray(F)?l31(A,F):b.IsTuple(F)?w51(A,F):b.IsObject(F)?p6(A,F):b.IsUnknown(F)?i.True:i.False}function j51(A,F){return b.IsUndefined(A)?i.True:b.IsUndefined(A)?i.True:i.False}function I51(A,F){return b.IsIntersect(F)?EJ(A,F):b.IsUnion(F)?Cq(A,F):b.IsUnknown(F)?Lj(A,F):b.IsAny(F)?Uq(A,F):b.IsObject(F)?p6(A,F):b.IsVoid(F)?i.True:i.False}function b0(A,F){return b.IsTemplateLiteral(A)||b.IsTemplateLiteral(F)?E51(A,F):b.IsRegExp(A)||b.IsRegExp(F)?U51(A,F):b.IsNot(A)||b.IsNot(F)?$51(A,F):b.IsAny(A)?c31(A,F):b.IsArray(A)?p31(A,F):b.IsBigInt(A)?n31(A,F):b.IsBoolean(A)?s31(A,F):b.IsAsyncIterator(A)?i31(A,F):b.IsConstructor(A)?a31(A,F):b.IsDate(A)?t31(A,F):b.IsFunction(A)?r31(A,F):b.IsInteger(A)?o31(A,F):b.IsIntersect(A)?e31(A,F):b.IsIterator(A)?A51(A,F):b.IsLiteral(A)?F51(A,F):b.IsNever(A)?B51(A,F):b.IsNull(A)?Z51(A,F):b.IsNumber(A)?D51(A,F):b.IsObject(A)?z51(A,F):b.IsRecord(A)?H51(A,F):b.IsString(A)?C51(A,F):b.IsSymbol(A)?K51(A,F):b.IsTuple(A)?V51(A,F):b.IsPromise(A)?q51(A,F):b.IsUint8Array(A)?N51(A,F):b.IsUndefined(A)?M51(A,F):b.IsUnion(A)?R51(A,F):b.IsUnknown(A)?P51(A,F):b.IsVoid(A)?I51(A,F):NF(`Unknown left type operand '${A[g]}'`)}function h3(A,F){return b0(A,F)}function T51(A,F,B,$,Z){let D={};for(let X of globalThis.Object.getOwnPropertyNames(A))D[X]=MF(A[X],F,B,$,X2(Z));return D}function O51(A,F,B,$,Z){return T51(A.properties,F,B,$,Z)}function wj(A,F,B,$,Z){let D=O51(A,F,B,$,Z);return q0(D)}function S51(A,F,B,$){let Z=h3(A,F);return Z===i.Union?w0([B,$]):Z===i.True?B:$}function MF(A,F,B,$,Z){return Y2(A)?wj(A,F,B,$,Z):Q9(A)?c(Vj(A,F,B,$,Z)):c(S51(A,F,B,$),Z)}function k51(A,F,B,$,Z){return{[A]:MF(Z0(A),F,B,$,X2(Z))}}function _51(A,F,B,$,Z){return A.reduce((D,X)=>{return{...D,...k51(X,F,B,$,Z)}},{})}function x51(A,F,B,$,Z){return _51(A.keys,F,B,$,Z)}function Vj(A,F,B,$,Z){let D=x51(A,F,B,$,Z);return q0(D)}function b51(A){return A.allOf.every((F)=>h8(F))}function f51(A){return A.anyOf.some((F)=>h8(F))}function g51(A){return!h8(A.not)}function h8(A){return A[g]==="Intersect"?b51(A):A[g]==="Union"?f51(A):A[g]==="Not"?g51(A):A[g]==="Undefined"?!0:!1}function Nj(A,F){return RF(t5(A),F)}function u51(A,F){let B=A.filter(($)=>h3($,F)===i.False);return B.length===1?B[0]:w0(B)}function RF(A,F,B={}){if(z9(A))return c(Nj(A,F),B);if(Y2(A))return c(Mj(A,F),B);return c(W0(A)?u51(A.anyOf,F):h3(A,F)!==i.False?p1():A,B)}function y51(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=RF(A[$],F);return B}function v51(A,F){return y51(A.properties,F)}function Mj(A,F){let B=v51(A,F);return q0(B)}function Rj(A,F){return PF(t5(A),F)}function h51(A,F){let B=A.filter(($)=>h3($,F)!==i.False);return B.length===1?B[0]:w0(B)}function PF(A,F,B){if(z9(A))return c(Rj(A,F),B);if(Y2(A))return c(Pj(A,F),B);return c(W0(A)?h51(A.anyOf,F):h3(A,F)!==i.False?A:p1(),B)}function d51(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=PF(A[$],F);return B}function m51(A,F){return d51(A.properties,F)}function Pj(A,F){let B=m51(A,F);return q0(B)}function jj(A,F){return w7(A)?c(A.returns,F):p1(F)}function wJ(A){return f4(c6(A))}function r5(A,F,B){return c({[g]:"Record",type:"object",patternProperties:{[A]:F}},B)}function Kq(A,F,B){let $={};for(let Z of A)$[Z]=F;return V0($,{...B,[b9]:"Record"})}function c51(A,F,B){return XJ(A)?Kq(b4(A),F,B):r5(A.pattern,F,B)}function l51(A,F,B){return Kq(b4(w0(A)),F,B)}function p51(A,F,B){return Kq([A.toString()],F,B)}function i51(A,F,B){return r5(A.source,F,B)}function n51(A,F,B){let $=h2(A.pattern)?u3:A.pattern;return r5($,F,B)}function s51(A,F,B){return r5(u3,F,B)}function a51(A,F,B){return r5(kP,F,B)}function t51(A,F,B){return V0({true:F,false:F},B)}function r51(A,F,B){return r5(g3,F,B)}function o51(A,F,B){return r5(g3,F,B)}function VJ(A,F,B={}){return W0(A)?l51(A.anyOf,F,B):z9(A)?c51(A,F,B):G9(A)?p51(A.const,F,B):b8(A)?t51(A,F,B):N7(A)?r51(A,F,B):M7(A)?o51(A,F,B):Bq(A)?i51(A,F,B):f8(A)?n51(A,F,B):Aq(A)?s51(A,F,B):b3(A)?a51(A,F,B):p1(B)}function NJ(A){return globalThis.Object.getOwnPropertyNames(A.patternProperties)[0]}function Ij(A){let F=NJ(A);return F===u3?H4():F===g3?f9():H4({pattern:F})}function MJ(A){return A.patternProperties[NJ(A)]}function e51(A,F){return F.parameters=l$(A,F.parameters),F.returns=P7(A,F.returns),F}function AA1(A,F){return F.parameters=l$(A,F.parameters),F.returns=P7(A,F.returns),F}function FA1(A,F){return F.allOf=l$(A,F.allOf),F}function BA1(A,F){return F.anyOf=l$(A,F.anyOf),F}function $A1(A,F){if(h2(F.items))return F;return F.items=l$(A,F.items),F}function ZA1(A,F){return F.items=P7(A,F.items),F}function DA1(A,F){return F.items=P7(A,F.items),F}function XA1(A,F){return F.items=P7(A,F.items),F}function JA1(A,F){return F.item=P7(A,F.item),F}function YA1(A,F){let B=zA1(A,F.properties);return{...F,...V0(B)}}function WA1(A,F){let B=P7(A,Ij(F)),$=P7(A,MJ(F)),Z=VJ(B,$);return{...F,...Z}}function GA1(A,F){return F.index in A?A[F.index]:R7()}function QA1(A,F){let B=WF(F),$=x4(F),Z=P7(A,F);return B&&$?wJ(Z):B&&!$?f4(Z):!B&&$?c6(Z):Z}function zA1(A,F){return globalThis.Object.getOwnPropertyNames(F).reduce((B,$)=>{return{...B,[$]:QA1(A,F[$])}},{})}function l$(A,F){return F.map((B)=>P7(A,B))}function P7(A,F){return w7(F)?e51(A,F):V7(F)?AA1(A,F):V2(F)?FA1(A,F):W0(F)?BA1(A,F):q9(F)?$A1(A,F):E7(F)?ZA1(A,F):l5(F)?DA1(A,F):i5(F)?XA1(A,F):n5(F)?JA1(A,F):m2(F)?YA1(A,F):s5(F)?WA1(A,F):Fq(F)?GA1(A,F):F}function Tj(A,F){return P7(F,JF(A))}function Oj(A){return c({[g]:"Integer",type:"integer"},A)}function qA1(A,F,B){return{[A]:j7(Z0(A),F,X2(B))}}function HA1(A,F,B){return A.reduce((Z,D)=>{return{...Z,...qA1(D,F,B)}},{})}function UA1(A,F,B){return HA1(A.keys,F,B)}function Sj(A,F,B){let $=UA1(A,F,B);return q0($)}function CA1(A){let[F,B]=[A.slice(0,1),A.slice(1)];return[F.toLowerCase(),B].join("")}function KA1(A){let[F,B]=[A.slice(0,1),A.slice(1)];return[F.toUpperCase(),B].join("")}function EA1(A){return A.toUpperCase()}function LA1(A){return A.toLowerCase()}function wA1(A,F,B){let $=CF(A.pattern);if(!a5($))return{...A,pattern:kj(A.pattern,F)};let X=[...h$($)].map((W)=>Z0(W)),J=_j(X,F),Y=w0(J);return YJ([Y],B)}function kj(A,F){return typeof A==="string"?F==="Uncapitalize"?CA1(A):F==="Capitalize"?KA1(A):F==="Uppercase"?EA1(A):F==="Lowercase"?LA1(A):A:A.toString()}function _j(A,F){return A.map((B)=>j7(B,F))}function j7(A,F,B={}){return Q9(A)?Sj(A,F,B):z9(A)?wA1(A,F,B):W0(A)?w0(_j(A.anyOf,F),B):G9(A)?Z0(kj(A.const,F),B):c(A,B)}function xj(A,F={}){return j7(A,"Capitalize",F)}function bj(A,F={}){return j7(A,"Lowercase",F)}function fj(A,F={}){return j7(A,"Uncapitalize",F)}function gj(A,F={}){return j7(A,"Uppercase",F)}function VA1(A,F,B){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(A))$[Z]=d3(A[Z],F,X2(B));return $}function NA1(A,F,B){return VA1(A.properties,F,B)}function uj(A,F,B){let $=NA1(A,F,B);return q0($)}function MA1(A,F){return A.map((B)=>Eq(B,F))}function RA1(A,F){return A.map((B)=>Eq(B,F))}function PA1(A,F){let{[F]:B,...$}=A;return $}function jA1(A,F){return F.reduce((B,$)=>PA1(B,$),A)}function IA1(A,F){let B=N2(A,[g0,"$id","required","properties"]),$=jA1(A.properties,F);return V0($,B)}function TA1(A){let F=A.reduce((B,$)=>$J($)?[...B,Z0($)]:B,[]);return w0(F)}function Eq(A,F){return V2(A)?l6(MA1(A.allOf,F)):W0(A)?w0(RA1(A.anyOf,F)):m2(A)?IA1(A,F):V0({})}function d3(A,F,B){let $=v2(F)?TA1(F):F,Z=C2(F)?b4(F):F,D=S2(A),X=S2(F);return Y2(A)?uj(A,Z,B):Q9(F)?yj(A,F,B):D&&X?r0("Omit",[A,$],B):!D&&X?r0("Omit",[A,$],B):D&&!X?r0("Omit",[A,$],B):c({...Eq(A,Z),...B})}function OA1(A,F,B){return{[F]:d3(A,[F],X2(B))}}function SA1(A,F,B){return F.reduce(($,Z)=>{return{...$,...OA1(A,Z,B)}},{})}function kA1(A,F,B){return SA1(A,F.keys,B)}function yj(A,F,B){let $=kA1(A,F,B);return q0($)}function _A1(A,F,B){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(A))$[Z]=m3(A[Z],F,X2(B));return $}function xA1(A,F,B){return _A1(A.properties,F,B)}function vj(A,F,B){let $=xA1(A,F,B);return q0($)}function bA1(A,F){return A.map((B)=>Lq(B,F))}function fA1(A,F){return A.map((B)=>Lq(B,F))}function gA1(A,F){let B={};for(let $ of F)if($ in A)B[$]=A[$];return B}function uA1(A,F){let B=N2(A,[g0,"$id","required","properties"]),$=gA1(A.properties,F);return V0($,B)}function yA1(A){let F=A.reduce((B,$)=>$J($)?[...B,Z0($)]:B,[]);return w0(F)}function Lq(A,F){return V2(A)?l6(bA1(A.allOf,F)):W0(A)?w0(fA1(A.anyOf,F)):m2(A)?uA1(A,F):V0({})}function m3(A,F,B){let $=v2(F)?yA1(F):F,Z=C2(F)?b4(F):F,D=S2(A),X=S2(F);return Y2(A)?vj(A,Z,B):Q9(F)?hj(A,F,B):D&&X?r0("Pick",[A,$],B):!D&&X?r0("Pick",[A,$],B):D&&!X?r0("Pick",[A,$],B):c({...Lq(A,Z),...B})}function vA1(A,F,B){return{[F]:m3(A,[F],X2(B))}}function hA1(A,F,B){return F.reduce(($,Z)=>{return{...$,...vA1(A,Z,B)}},{})}function dA1(A,F,B){return hA1(A,F.keys,B)}function hj(A,F,B){let $=dA1(A,F,B);return q0($)}function mA1(A,F){return r0("Partial",[r0(A,F)])}function cA1(A){return r0("Partial",[y9(A)])}function lA1(A){let F={};for(let B of globalThis.Object.getOwnPropertyNames(A))F[B]=c6(A[B]);return F}function pA1(A){let F=N2(A,[g0,"$id","required","properties"]),B=lA1(A.properties);return V0(B,F)}function dj(A){return A.map((F)=>mj(F))}function mj(A){return L7(A)?mA1(A.target,A.parameters):S2(A)?cA1(A.$ref):V2(A)?l6(dj(A.allOf)):W0(A)?w0(dj(A.anyOf)):m2(A)?pA1(A):p5(A)?A:b8(A)?A:N7(A)?A:G9(A)?A:b$(A)?A:M7(A)?A:f8(A)?A:f$(A)?A:g8(A)?A:V0({})}function jF(A,F){if(Y2(A))return cj(A,F);else return c({...mj(A),...F})}function iA1(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=jF(A[$],X2(F));return B}function nA1(A,F){return iA1(A.properties,F)}function cj(A,F){let B=nA1(A,F);return q0(B)}function sA1(A,F){return r0("Required",[r0(A,F)])}function aA1(A){return r0("Required",[y9(A)])}function tA1(A){let F={};for(let B of globalThis.Object.getOwnPropertyNames(A))F[B]=N2(A[B],[d2]);return F}function rA1(A){let F=N2(A,[g0,"$id","required","properties"]),B=tA1(A.properties);return V0(B,F)}function lj(A){return A.map((F)=>pj(F))}function pj(A){return L7(A)?sA1(A.target,A.parameters):S2(A)?aA1(A.$ref):V2(A)?l6(lj(A.allOf)):W0(A)?w0(lj(A.anyOf)):m2(A)?rA1(A):p5(A)?A:b8(A)?A:N7(A)?A:G9(A)?A:b$(A)?A:M7(A)?A:f8(A)?A:f$(A)?A:g8(A)?A:V0({})}function IF(A,F){if(Y2(A))return ij(A,F);else return c({...pj(A),...F})}function oA1(A,F){let B={};for(let $ of globalThis.Object.getOwnPropertyNames(A))B[$]=IF(A[$],F);return B}function eA1(A,F){return oA1(A.properties,F)}function ij(A,F){let B=eA1(A,F);return q0(B)}function AF1(A,F){return F.map((B)=>{return S2(B)?wq(A,B.$ref):H9(A,B)})}function wq(A,F){return F in A?S2(A[F])?wq(A,A[F].$ref):H9(A,A[F]):p1()}function FF1(A){return wF(A[0])}function BF1(A){return v3(A[0],A[1])}function $F1(A){return VF(A[0])}function ZF1(A){return jF(A[0])}function DF1(A){return d3(A[0],A[1])}function XF1(A){return m3(A[0],A[1])}function JF1(A){return IF(A[0])}function YF1(A,F,B){let $=AF1(A,B);return F==="Awaited"?FF1($):F==="Index"?BF1($):F==="KeyOf"?$F1($):F==="Partial"?ZF1($):F==="Omit"?DF1($):F==="Pick"?XF1($):F==="Required"?JF1($):p1()}function WF1(A,F){return zF(H9(A,F))}function GF1(A,F){return qF(H9(A,F))}function QF1(A,F,B){return HF(p$(A,F),H9(A,B))}function zF1(A,F,B){return D8(p$(A,F),H9(A,B))}function qF1(A,F){return l6(p$(A,F))}function HF1(A,F){return LF(H9(A,F))}function UF1(A,F){return V0(globalThis.Object.keys(F).reduce((B,$)=>{return{...B,[$]:H9(A,F[$])}},{}))}function CF1(A,F){let[B,$]=[H9(A,MJ(F)),NJ(F)],Z=JF(F);return Z.patternProperties[$]=B,Z}function KF1(A,F){return S2(F)?{...wq(A,F.$ref),[g0]:F[g0]}:F}function EF1(A,F){return g9(p$(A,F))}function LF1(A,F){return w0(p$(A,F))}function p$(A,F){return F.map((B)=>H9(A,B))}function H9(A,F){return x4(F)?c(H9(A,N2(F,[d2])),F):WF(F)?c(H9(A,N2(F,[K7])),F):L0(F)?c(KF1(A,F),F):E7(F)?c(WF1(A,F.items),F):l5(F)?c(GF1(A,F.items),F):L7(F)?c(YF1(A,F.target,F.parameters)):w7(F)?c(QF1(A,F.parameters,F.returns),F):V7(F)?c(zF1(A,F.parameters,F.returns),F):V2(F)?c(qF1(A,F.allOf),F):i5(F)?c(HF1(A,F.items),F):m2(F)?c(UF1(A,F.properties),F):s5(F)?c(CF1(A,F)):q9(F)?c(EF1(A,F.items||[]),F):W0(F)?c(LF1(A,F.anyOf),F):F}function wF1(A,F){return F in A?H9(A,A[F]):p1()}function nj(A){return globalThis.Object.getOwnPropertyNames(A).reduce((F,B)=>{return{...F,[B]:wF1(A,B)}},{})}class sj{constructor(A){let F=nj(A),B=this.WithIdentifiers(F);this.$defs=B}Import(A,F){let B={...this.$defs,[A]:c(this.$defs[A],F)};return c({[g]:"Import",$defs:B,$ref:A})}WithIdentifiers(A){return globalThis.Object.getOwnPropertyNames(A).reduce((F,B)=>{return{...F,[B]:{...A[B],$id:B}}},{})}}function aj(A){return new sj(A)}function tj(A,F){return c({[g]:"Not",not:A},F)}function rj(A,F){return V7(A)?g9(A.parameters,F):p1()}var VF1=0;function oj(A,F={}){if(h2(F.$id))F.$id=`T${VF1++}`;let B=JF(A({[g]:"This",$ref:`${F.$id}`}));return B.$id=F.$id,c({[b9]:"Recursive",...B},F)}function ej(A,F){let B=m0(A)?new globalThis.RegExp(A):A;return c({[g]:"RegExp",type:"RegExp",source:B.source,flags:B.flags},F)}function NF1(A){return V2(A)?A.allOf:W0(A)?A.anyOf:q9(A)?A.items??[]:[]}function AI(A){return NF1(A)}function FI(A,F){return V7(A)?c(A.returns,F):p1(F)}class BI{constructor(A){this.schema=A}Decode(A){return new $I(this.schema,A)}}class $I{constructor(A,F){this.schema=A,this.decode=F}EncodeTransform(A,F){let Z={Encode:(D)=>F[g0].Encode(A(D)),Decode:(D)=>this.decode(F[g0].Decode(D))};return{...F,[g0]:Z}}EncodeSchema(A,F){let B={Decode:this.decode,Encode:A};return{...F,[g0]:B}}Encode(A){return L0(this.schema)?this.EncodeTransform(A,this.schema):this.EncodeSchema(A,this.schema)}}function ZI(A){return new BI(A)}function RJ(A={}){return c({[g]:A[g]??"Unsafe"},A)}function DI(A){return c({[g]:"Void",type:"void"},A)}var Vq={};m5(Vq,{Void:()=>DI,Uppercase:()=>gj,Unsafe:()=>RJ,Unknown:()=>R7,Union:()=>w0,Undefined:()=>UJ,Uncapitalize:()=>fj,Uint8Array:()=>CJ,Tuple:()=>g9,Transform:()=>ZI,TemplateLiteral:()=>YJ,Symbol:()=>HJ,String:()=>H4,ReturnType:()=>FI,Rest:()=>AI,Required:()=>IF,RegExp:()=>ej,Ref:()=>y9,Recursive:()=>oj,Record:()=>VJ,ReadonlyOptional:()=>wJ,Readonly:()=>f4,Promise:()=>GJ,Pick:()=>m3,Partial:()=>jF,Parameters:()=>rj,Optional:()=>c6,Omit:()=>d3,Object:()=>V0,Number:()=>f9,Null:()=>qJ,Not:()=>tj,Never:()=>p1,Module:()=>aj,Mapped:()=>oP,Lowercase:()=>bj,Literal:()=>Z0,KeyOf:()=>VF,Iterator:()=>LF,Intersect:()=>l6,Integer:()=>Oj,Instantiate:()=>Tj,InstanceType:()=>jj,Index:()=>v3,Function:()=>D8,Extract:()=>PF,Extends:()=>MF,Exclude:()=>RF,Enum:()=>Jj,Date:()=>zJ,ConstructorParameters:()=>Xj,Constructor:()=>HF,Const:()=>Dj,Composite:()=>Zj,Capitalize:()=>xj,Boolean:()=>JJ,BigInt:()=>EF,Awaited:()=>wF,AsyncIterator:()=>qF,Array:()=>zF,Argument:()=>gP,Any:()=>y3});var d8=Vq;function MF1(A){switch(A.errorType){case d.ArrayContains:return"Expected array to contain at least one matching value";case d.ArrayMaxContains:return`Expected array to contain no more than ${A.schema.maxContains} matching values`;case d.ArrayMinContains:return`Expected array to contain at least ${A.schema.minContains} matching values`;case d.ArrayMaxItems:return`Expected array length to be less or equal to ${A.schema.maxItems}`;case d.ArrayMinItems:return`Expected array length to be greater or equal to ${A.schema.minItems}`;case d.ArrayUniqueItems:return"Expected array elements to be unique";case d.Array:return"Expected array";case d.AsyncIterator:return"Expected AsyncIterator";case d.BigIntExclusiveMaximum:return`Expected bigint to be less than ${A.schema.exclusiveMaximum}`;case d.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${A.schema.exclusiveMinimum}`;case d.BigIntMaximum:return`Expected bigint to be less or equal to ${A.schema.maximum}`;case d.BigIntMinimum:return`Expected bigint to be greater or equal to ${A.schema.minimum}`;case d.BigIntMultipleOf:return`Expected bigint to be a multiple of ${A.schema.multipleOf}`;case d.BigInt:return"Expected bigint";case d.Boolean:return"Expected boolean";case d.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${A.schema.exclusiveMinimumTimestamp}`;case d.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${A.schema.exclusiveMaximumTimestamp}`;case d.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${A.schema.minimumTimestamp}`;case d.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${A.schema.maximumTimestamp}`;case d.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${A.schema.multipleOfTimestamp}`;case d.Date:return"Expected Date";case d.Function:return"Expected function";case d.IntegerExclusiveMaximum:return`Expected integer to be less than ${A.schema.exclusiveMaximum}`;case d.IntegerExclusiveMinimum:return`Expected integer to be greater than ${A.schema.exclusiveMinimum}`;case d.IntegerMaximum:return`Expected integer to be less or equal to ${A.schema.maximum}`;case d.IntegerMinimum:return`Expected integer to be greater or equal to ${A.schema.minimum}`;case d.IntegerMultipleOf:return`Expected integer to be a multiple of ${A.schema.multipleOf}`;case d.Integer:return"Expected integer";case d.IntersectUnevaluatedProperties:return"Unexpected property";case d.Intersect:return"Expected all values to match";case d.Iterator:return"Expected Iterator";case d.Literal:return`Expected ${typeof A.schema.const==="string"?`'${A.schema.const}'`:A.schema.const}`;case d.Never:return"Never";case d.Not:return"Value should not match";case d.Null:return"Expected null";case d.NumberExclusiveMaximum:return`Expected number to be less than ${A.schema.exclusiveMaximum}`;case d.NumberExclusiveMinimum:return`Expected number to be greater than ${A.schema.exclusiveMinimum}`;case d.NumberMaximum:return`Expected number to be less or equal to ${A.schema.maximum}`;case d.NumberMinimum:return`Expected number to be greater or equal to ${A.schema.minimum}`;case d.NumberMultipleOf:return`Expected number to be a multiple of ${A.schema.multipleOf}`;case d.Number:return"Expected number";case d.Object:return"Expected object";case d.ObjectAdditionalProperties:return"Unexpected property";case d.ObjectMaxProperties:return`Expected object to have no more than ${A.schema.maxProperties} properties`;case d.ObjectMinProperties:return`Expected object to have at least ${A.schema.minProperties} properties`;case d.ObjectRequiredProperty:return"Expected required property";case d.Promise:return"Expected Promise";case d.RegExp:return"Expected string to match regular expression";case d.StringFormatUnknown:return`Unknown format '${A.schema.format}'`;case d.StringFormat:return`Expected string to match '${A.schema.format}' format`;case d.StringMaxLength:return`Expected string length less or equal to ${A.schema.maxLength}`;case d.StringMinLength:return`Expected string length greater or equal to ${A.schema.minLength}`;case d.StringPattern:return`Expected string to match '${A.schema.pattern}'`;case d.String:return"Expected string";case d.Symbol:return"Expected symbol";case d.TupleLength:return`Expected tuple to have ${A.schema.maxItems||0} elements`;case d.Tuple:return"Expected tuple";case d.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${A.schema.maxByteLength}`;case d.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${A.schema.minByteLength}`;case d.Uint8Array:return"Expected Uint8Array";case d.Undefined:return"Expected undefined";case d.Union:return"Expected union value";case d.Void:return"Expected void";case d.Kind:return`Expected kind '${A.schema[g]}'`;default:return"Unknown error type"}}var RF1=MF1;function XI(){return RF1}class JI extends P1{constructor(A){super(`Unable to dereference schema with $id '${A.$ref}'`);this.schema=A}}function PF1(A,F){let B=F.find(($)=>$.$id===A.$ref);if(B===void 0)throw new JI(A);return G0(B,F)}function H6(A,F){if(!Y0(A.$id)||F.some((B)=>B.$id===A.$id))return F;return F.push(A),F}function G0(A,F){return A[g]==="This"||A[g]==="Ref"?PF1(A,F):A}class YI extends P1{constructor(A){super("Unable to hash value");this.value=A}}var U9;(function(A){A[A.Undefined=0]="Undefined",A[A.Null=1]="Null",A[A.Boolean=2]="Boolean",A[A.Number=3]="Number",A[A.String=4]="String",A[A.Object=5]="Object",A[A.Array=6]="Array",A[A.Date=7]="Date",A[A.Uint8Array=8]="Uint8Array",A[A.Symbol=9]="Symbol",A[A.BigInt=10]="BigInt"})(U9||(U9={}));var TF=BigInt("14695981039346656037"),[jF1,IF1]=[BigInt("1099511628211"),BigInt("18446744073709551616")],TF1=Array.from({length:256}).map((A,F)=>BigInt(F)),WI=new Float64Array(1),GI=new DataView(WI.buffer),QI=new Uint8Array(WI.buffer);function*OF1(A){let F=A===0?1:Math.ceil(Math.floor(Math.log2(A)+1)/8);for(let B=0;B<F;B++)yield A>>8*(F-1-B)&255}function SF1(A){i6(U9.Array);for(let F of A)OF(F)}function kF1(A){i6(U9.Boolean),i6(A?1:0)}function _F1(A){i6(U9.BigInt),GI.setBigInt64(0,A);for(let F of QI)i6(F)}function xF1(A){i6(U9.Date),OF(A.getTime())}function bF1(A){i6(U9.Null)}function fF1(A){i6(U9.Number),GI.setFloat64(0,A);for(let F of QI)i6(F)}function gF1(A){i6(U9.Object);for(let F of globalThis.Object.getOwnPropertyNames(A).sort())OF(F),OF(A[F])}function uF1(A){i6(U9.String);for(let F=0;F<A.length;F++)for(let B of OF1(A.charCodeAt(F)))i6(B)}function yF1(A){i6(U9.Symbol),OF(A.description)}function vF1(A){i6(U9.Uint8Array);for(let F=0;F<A.length;F++)i6(A[F])}function hF1(A){return i6(U9.Undefined)}function OF(A){if(T1(A))return SF1(A);if(Z8(A))return kF1(A);if(M6(A))return _F1(A);if(q4(A))return xF1(A);if(_8(A))return bF1(A);if(V1(A))return fF1(A);if(y1(A))return gF1(A);if(Y0(A))return uF1(A);if(x8(A))return yF1(A);if(YF(A))return vF1(A);if(J2(A))return hF1(A);throw new YI(A)}function i6(A){TF=TF^TF1[A],TF=TF*jF1%IF1}function c3(A){return TF=BigInt("14695981039346656037"),OF(A),TF}class zI extends P1{constructor(A){super("Unknown type");this.schema=A}}function dF1(A){return A[g]==="Any"||A[g]==="Unknown"}function o1(A){return A!==void 0}function mF1(A,F,B){return!0}function cF1(A,F,B){return!0}function lF1(A,F,B){if(!T1(B))return!1;if(o1(A.minItems)&&!(B.length>=A.minItems))return!1;if(o1(A.maxItems)&&!(B.length<=A.maxItems))return!1;if(!B.every((D)=>U6(A.items,F,D)))return!1;if(A.uniqueItems===!0&&!function(){let D=new Set;for(let X of B){let J=c3(X);if(D.has(J))return!1;else D.add(J)}return!0}())return!1;if(!(o1(A.contains)||V1(A.minContains)||V1(A.maxContains)))return!0;let $=o1(A.contains)?A.contains:p1(),Z=B.reduce((D,X)=>U6($,F,X)?D+1:D,0);if(Z===0)return!1;if(V1(A.minContains)&&Z<A.minContains)return!1;if(V1(A.maxContains)&&Z>A.maxContains)return!1;return!0}function pF1(A,F,B){return eX(B)}function iF1(A,F,B){if(!M6(B))return!1;if(o1(A.exclusiveMaximum)&&!(B<A.exclusiveMaximum))return!1;if(o1(A.exclusiveMinimum)&&!(B>A.exclusiveMinimum))return!1;if(o1(A.maximum)&&!(B<=A.maximum))return!1;if(o1(A.minimum)&&!(B>=A.minimum))return!1;if(o1(A.multipleOf)&&B%A.multipleOf!==BigInt(0))return!1;return!0}function nF1(A,F,B){return Z8(B)}function sF1(A,F,B){return U6(A.returns,F,B.prototype)}function aF1(A,F,B){if(!q4(B))return!1;if(o1(A.exclusiveMaximumTimestamp)&&!(B.getTime()<A.exclusiveMaximumTimestamp))return!1;if(o1(A.exclusiveMinimumTimestamp)&&!(B.getTime()>A.exclusiveMinimumTimestamp))return!1;if(o1(A.maximumTimestamp)&&!(B.getTime()<=A.maximumTimestamp))return!1;if(o1(A.minimumTimestamp)&&!(B.getTime()>=A.minimumTimestamp))return!1;if(o1(A.multipleOfTimestamp)&&B.getTime()%A.multipleOfTimestamp!==0)return!1;return!0}function tF1(A,F,B){return x3(B)}function rF1(A,F,B){let $=globalThis.Object.values(A.$defs),Z=A.$defs[A.$ref];return U6(Z,[...F,...$],B)}function oF1(A,F,B){if(!BJ(B))return!1;if(o1(A.exclusiveMaximum)&&!(B<A.exclusiveMaximum))return!1;if(o1(A.exclusiveMinimum)&&!(B>A.exclusiveMinimum))return!1;if(o1(A.maximum)&&!(B<=A.maximum))return!1;if(o1(A.minimum)&&!(B>=A.minimum))return!1;if(o1(A.multipleOf)&&B%A.multipleOf!==0)return!1;return!0}function eF1(A,F,B){let $=A.allOf.every((Z)=>U6(Z,F,B));if(A.unevaluatedProperties===!1){let Z=new RegExp(v8(A)),D=Object.getOwnPropertyNames(B).every((X)=>Z.test(X));return $&&D}else if(C2(A.unevaluatedProperties)){let Z=new RegExp(v8(A)),D=Object.getOwnPropertyNames(B).every((X)=>Z.test(X)||U6(A.unevaluatedProperties,F,B[X]));return $&&D}else return $}function AB1(A,F,B){return AJ(B)}function FB1(A,F,B){return B===A.const}function BB1(A,F,B){return!1}function $B1(A,F,B){return!U6(A.not,F,B)}function ZB1(A,F,B){return _8(B)}function DB1(A,F,B){if(!t0.IsNumberLike(B))return!1;if(o1(A.exclusiveMaximum)&&!(B<A.exclusiveMaximum))return!1;if(o1(A.exclusiveMinimum)&&!(B>A.exclusiveMinimum))return!1;if(o1(A.minimum)&&!(B>=A.minimum))return!1;if(o1(A.maximum)&&!(B<=A.maximum))return!1;if(o1(A.multipleOf)&&B%A.multipleOf!==0)return!1;return!0}function XB1(A,F,B){if(!t0.IsObjectLike(B))return!1;if(o1(A.minProperties)&&!(Object.getOwnPropertyNames(B).length>=A.minProperties))return!1;if(o1(A.maxProperties)&&!(Object.getOwnPropertyNames(B).length<=A.maxProperties))return!1;let $=Object.getOwnPropertyNames(A.properties);for(let Z of $){let D=A.properties[Z];if(A.required&&A.required.includes(Z)){if(!U6(D,F,B[Z]))return!1;if((h8(D)||dF1(D))&&!(Z in B))return!1}else if(t0.IsExactOptionalProperty(B,Z)&&!U6(D,F,B[Z]))return!1}if(A.additionalProperties===!1){let Z=Object.getOwnPropertyNames(B);if(A.required&&A.required.length===$.length&&Z.length===$.length)return!0;else return Z.every((D)=>$.includes(D))}else if(typeof A.additionalProperties==="object")return Object.getOwnPropertyNames(B).every((D)=>$.includes(D)||U6(A.additionalProperties,F,B[D]));else return!0}function JB1(A,F,B){return FJ(B)}function YB1(A,F,B){if(!t0.IsRecordLike(B))return!1;if(o1(A.minProperties)&&!(Object.getOwnPropertyNames(B).length>=A.minProperties))return!1;if(o1(A.maxProperties)&&!(Object.getOwnPropertyNames(B).length<=A.maxProperties))return!1;let[$,Z]=Object.entries(A.patternProperties)[0],D=new RegExp($),X=Object.entries(B).every(([W,G])=>{return D.test(W)?U6(Z,F,G):!0}),J=typeof A.additionalProperties==="object"?Object.entries(B).every(([W,G])=>{return!D.test(W)?U6(A.additionalProperties,F,G):!0}):!0,Y=A.additionalProperties===!1?Object.getOwnPropertyNames(B).every((W)=>{return D.test(W)}):!0;return X&&J&&Y}function WB1(A,F,B){return U6(G0(A,F),F,B)}function GB1(A,F,B){let $=new RegExp(A.source,A.flags);if(o1(A.minLength)){if(!(B.length>=A.minLength))return!1}if(o1(A.maxLength)){if(!(B.length<=A.maxLength))return!1}return $.test(B)}function QB1(A,F,B){if(!Y0(B))return!1;if(o1(A.minLength)){if(!(B.length>=A.minLength))return!1}if(o1(A.maxLength)){if(!(B.length<=A.maxLength))return!1}if(o1(A.pattern)){if(!new RegExp(A.pattern).test(B))return!1}if(o1(A.format)){if(!T0.Has(A.format))return!1;return T0.Get(A.format)(B)}return!0}function zB1(A,F,B){return x8(B)}function qB1(A,F,B){return Y0(B)&&new RegExp(A.pattern).test(B)}function HB1(A,F,B){return U6(G0(A,F),F,B)}function UB1(A,F,B){if(!T1(B))return!1;if(A.items===void 0&&B.length!==0)return!1;if(B.length!==A.maxItems)return!1;if(!A.items)return!0;for(let $=0;$<A.items.length;$++)if(!U6(A.items[$],F,B[$]))return!1;return!0}function CB1(A,F,B){return J2(B)}function KB1(A,F,B){return A.anyOf.some(($)=>U6($,F,B))}function EB1(A,F,B){if(!YF(B))return!1;if(o1(A.maxByteLength)&&!(B.length<=A.maxByteLength))return!1;if(o1(A.minByteLength)&&!(B.length>=A.minByteLength))return!1;return!0}function LB1(A,F,B){return!0}function wB1(A,F,B){return t0.IsVoidLike(B)}function VB1(A,F,B){if(!J6.Has(A[g]))return!1;return J6.Get(A[g])(A,B)}function U6(A,F,B){let $=o1(A.$id)?H6(A,F):F,Z=A;switch(Z[g]){case"Any":return mF1(Z,$,B);case"Argument":return cF1(Z,$,B);case"Array":return lF1(Z,$,B);case"AsyncIterator":return pF1(Z,$,B);case"BigInt":return iF1(Z,$,B);case"Boolean":return nF1(Z,$,B);case"Constructor":return sF1(Z,$,B);case"Date":return aF1(Z,$,B);case"Function":return tF1(Z,$,B);case"Import":return rF1(Z,$,B);case"Integer":return oF1(Z,$,B);case"Intersect":return eF1(Z,$,B);case"Iterator":return AB1(Z,$,B);case"Literal":return FB1(Z,$,B);case"Never":return BB1(Z,$,B);case"Not":return $B1(Z,$,B);case"Null":return ZB1(Z,$,B);case"Number":return DB1(Z,$,B);case"Object":return XB1(Z,$,B);case"Promise":return JB1(Z,$,B);case"Record":return YB1(Z,$,B);case"Ref":return WB1(Z,$,B);case"RegExp":return GB1(Z,$,B);case"String":return QB1(Z,$,B);case"Symbol":return zB1(Z,$,B);case"TemplateLiteral":return qB1(Z,$,B);case"This":return HB1(Z,$,B);case"Tuple":return UB1(Z,$,B);case"Undefined":return CB1(Z,$,B);case"Union":return KB1(Z,$,B);case"Uint8Array":return EB1(Z,$,B);case"Unknown":return LB1(Z,$,B);case"Void":return wB1(Z,$,B);default:if(!J6.Has(Z[g]))throw new zI(Z);return VB1(Z,$,B)}}function i1(...A){return A.length===3?U6(A[0],A[1],A[2]):U6(A[0],[],A[1])}var d;(function(A){A[A.ArrayContains=0]="ArrayContains",A[A.ArrayMaxContains=1]="ArrayMaxContains",A[A.ArrayMaxItems=2]="ArrayMaxItems",A[A.ArrayMinContains=3]="ArrayMinContains",A[A.ArrayMinItems=4]="ArrayMinItems",A[A.ArrayUniqueItems=5]="ArrayUniqueItems",A[A.Array=6]="Array",A[A.AsyncIterator=7]="AsyncIterator",A[A.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",A[A.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",A[A.BigIntMaximum=10]="BigIntMaximum",A[A.BigIntMinimum=11]="BigIntMinimum",A[A.BigIntMultipleOf=12]="BigIntMultipleOf",A[A.BigInt=13]="BigInt",A[A.Boolean=14]="Boolean",A[A.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",A[A.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",A[A.DateMaximumTimestamp=17]="DateMaximumTimestamp",A[A.DateMinimumTimestamp=18]="DateMinimumTimestamp",A[A.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",A[A.Date=20]="Date",A[A.Function=21]="Function",A[A.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",A[A.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",A[A.IntegerMaximum=24]="IntegerMaximum",A[A.IntegerMinimum=25]="IntegerMinimum",A[A.IntegerMultipleOf=26]="IntegerMultipleOf",A[A.Integer=27]="Integer",A[A.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",A[A.Intersect=29]="Intersect",A[A.Iterator=30]="Iterator",A[A.Kind=31]="Kind",A[A.Literal=32]="Literal",A[A.Never=33]="Never",A[A.Not=34]="Not",A[A.Null=35]="Null",A[A.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",A[A.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",A[A.NumberMaximum=38]="NumberMaximum",A[A.NumberMinimum=39]="NumberMinimum",A[A.NumberMultipleOf=40]="NumberMultipleOf",A[A.Number=41]="Number",A[A.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",A[A.ObjectMaxProperties=43]="ObjectMaxProperties",A[A.ObjectMinProperties=44]="ObjectMinProperties",A[A.ObjectRequiredProperty=45]="ObjectRequiredProperty",A[A.Object=46]="Object",A[A.Promise=47]="Promise",A[A.RegExp=48]="RegExp",A[A.StringFormatUnknown=49]="StringFormatUnknown",A[A.StringFormat=50]="StringFormat",A[A.StringMaxLength=51]="StringMaxLength",A[A.StringMinLength=52]="StringMinLength",A[A.StringPattern=53]="StringPattern",A[A.String=54]="String",A[A.Symbol=55]="Symbol",A[A.TupleLength=56]="TupleLength",A[A.Tuple=57]="Tuple",A[A.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",A[A.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",A[A.Uint8Array=60]="Uint8Array",A[A.Undefined=61]="Undefined",A[A.Union=62]="Union",A[A.Void=63]="Void"})(d||(d={}));class qI extends P1{constructor(A){super("Unknown type");this.schema=A}}function m8(A){return A.replace(/~/g,"~0").replace(/\//g,"~1")}function e1(A){return A!==void 0}class o5{constructor(A){this.iterator=A}[Symbol.iterator](){return this.iterator}First(){let A=this.iterator.next();return A.done?void 0:A.value}}function z1(A,F,B,$,Z=[]){return{type:A,schema:F,path:B,value:$,message:XI()({errorType:A,path:B,schema:F,value:$,errors:Z}),errors:Z}}function*NB1(A,F,B,$){}function*MB1(A,F,B,$){}function*RB1(A,F,B,$){if(!T1($))return yield z1(d.Array,A,B,$);if(e1(A.minItems)&&!($.length>=A.minItems))yield z1(d.ArrayMinItems,A,B,$);if(e1(A.maxItems)&&!($.length<=A.maxItems))yield z1(d.ArrayMaxItems,A,B,$);for(let X=0;X<$.length;X++)yield*C6(A.items,F,`${B}/${X}`,$[X]);if(A.uniqueItems===!0&&!function(){let X=new Set;for(let J of $){let Y=c3(J);if(X.has(Y))return!1;else X.add(Y)}return!0}())yield z1(d.ArrayUniqueItems,A,B,$);if(!(e1(A.contains)||e1(A.minContains)||e1(A.maxContains)))return;let Z=e1(A.contains)?A.contains:p1(),D=$.reduce((X,J,Y)=>C6(Z,F,`${B}${Y}`,J).next().done===!0?X+1:X,0);if(D===0)yield z1(d.ArrayContains,A,B,$);if(V1(A.minContains)&&D<A.minContains)yield z1(d.ArrayMinContains,A,B,$);if(V1(A.maxContains)&&D>A.maxContains)yield z1(d.ArrayMaxContains,A,B,$)}function*PB1(A,F,B,$){if(!eX($))yield z1(d.AsyncIterator,A,B,$)}function*jB1(A,F,B,$){if(!M6($))return yield z1(d.BigInt,A,B,$);if(e1(A.exclusiveMaximum)&&!($<A.exclusiveMaximum))yield z1(d.BigIntExclusiveMaximum,A,B,$);if(e1(A.exclusiveMinimum)&&!($>A.exclusiveMinimum))yield z1(d.BigIntExclusiveMinimum,A,B,$);if(e1(A.maximum)&&!($<=A.maximum))yield z1(d.BigIntMaximum,A,B,$);if(e1(A.minimum)&&!($>=A.minimum))yield z1(d.BigIntMinimum,A,B,$);if(e1(A.multipleOf)&&$%A.multipleOf!==BigInt(0))yield z1(d.BigIntMultipleOf,A,B,$)}function*IB1(A,F,B,$){if(!Z8($))yield z1(d.Boolean,A,B,$)}function*TB1(A,F,B,$){yield*C6(A.returns,F,B,$.prototype)}function*OB1(A,F,B,$){if(!q4($))return yield z1(d.Date,A,B,$);if(e1(A.exclusiveMaximumTimestamp)&&!($.getTime()<A.exclusiveMaximumTimestamp))yield z1(d.DateExclusiveMaximumTimestamp,A,B,$);if(e1(A.exclusiveMinimumTimestamp)&&!($.getTime()>A.exclusiveMinimumTimestamp))yield z1(d.DateExclusiveMinimumTimestamp,A,B,$);if(e1(A.maximumTimestamp)&&!($.getTime()<=A.maximumTimestamp))yield z1(d.DateMaximumTimestamp,A,B,$);if(e1(A.minimumTimestamp)&&!($.getTime()>=A.minimumTimestamp))yield z1(d.DateMinimumTimestamp,A,B,$);if(e1(A.multipleOfTimestamp)&&$.getTime()%A.multipleOfTimestamp!==0)yield z1(d.DateMultipleOfTimestamp,A,B,$)}function*SB1(A,F,B,$){if(!x3($))yield z1(d.Function,A,B,$)}function*kB1(A,F,B,$){let Z=globalThis.Object.values(A.$defs),D=A.$defs[A.$ref];yield*C6(D,[...F,...Z],B,$)}function*_B1(A,F,B,$){if(!BJ($))return yield z1(d.Integer,A,B,$);if(e1(A.exclusiveMaximum)&&!($<A.exclusiveMaximum))yield z1(d.IntegerExclusiveMaximum,A,B,$);if(e1(A.exclusiveMinimum)&&!($>A.exclusiveMinimum))yield z1(d.IntegerExclusiveMinimum,A,B,$);if(e1(A.maximum)&&!($<=A.maximum))yield z1(d.IntegerMaximum,A,B,$);if(e1(A.minimum)&&!($>=A.minimum))yield z1(d.IntegerMinimum,A,B,$);if(e1(A.multipleOf)&&$%A.multipleOf!==0)yield z1(d.IntegerMultipleOf,A,B,$)}function*xB1(A,F,B,$){let Z=!1;for(let D of A.allOf)for(let X of C6(D,F,B,$))Z=!0,yield X;if(Z)return yield z1(d.Intersect,A,B,$);if(A.unevaluatedProperties===!1){let D=new RegExp(v8(A));for(let X of Object.getOwnPropertyNames($))if(!D.test(X))yield z1(d.IntersectUnevaluatedProperties,A,`${B}/${X}`,$)}if(typeof A.unevaluatedProperties==="object"){let D=new RegExp(v8(A));for(let X of Object.getOwnPropertyNames($))if(!D.test(X)){let J=C6(A.unevaluatedProperties,F,`${B}/${X}`,$[X]).next();if(!J.done)yield J.value}}}function*bB1(A,F,B,$){if(!AJ($))yield z1(d.Iterator,A,B,$)}function*fB1(A,F,B,$){if($!==A.const)yield z1(d.Literal,A,B,$)}function*gB1(A,F,B,$){yield z1(d.Never,A,B,$)}function*uB1(A,F,B,$){if(C6(A.not,F,B,$).next().done===!0)yield z1(d.Not,A,B,$)}function*yB1(A,F,B,$){if(!_8($))yield z1(d.Null,A,B,$)}function*vB1(A,F,B,$){if(!t0.IsNumberLike($))return yield z1(d.Number,A,B,$);if(e1(A.exclusiveMaximum)&&!($<A.exclusiveMaximum))yield z1(d.NumberExclusiveMaximum,A,B,$);if(e1(A.exclusiveMinimum)&&!($>A.exclusiveMinimum))yield z1(d.NumberExclusiveMinimum,A,B,$);if(e1(A.maximum)&&!($<=A.maximum))yield z1(d.NumberMaximum,A,B,$);if(e1(A.minimum)&&!($>=A.minimum))yield z1(d.NumberMinimum,A,B,$);if(e1(A.multipleOf)&&$%A.multipleOf!==0)yield z1(d.NumberMultipleOf,A,B,$)}function*hB1(A,F,B,$){if(!t0.IsObjectLike($))return yield z1(d.Object,A,B,$);if(e1(A.minProperties)&&!(Object.getOwnPropertyNames($).length>=A.minProperties))yield z1(d.ObjectMinProperties,A,B,$);if(e1(A.maxProperties)&&!(Object.getOwnPropertyNames($).length<=A.maxProperties))yield z1(d.ObjectMaxProperties,A,B,$);let Z=Array.isArray(A.required)?A.required:[],D=Object.getOwnPropertyNames(A.properties),X=Object.getOwnPropertyNames($);for(let J of Z){if(X.includes(J))continue;yield z1(d.ObjectRequiredProperty,A.properties[J],`${B}/${m8(J)}`,void 0)}if(A.additionalProperties===!1){for(let J of X)if(!D.includes(J))yield z1(d.ObjectAdditionalProperties,A,`${B}/${m8(J)}`,$[J])}if(typeof A.additionalProperties==="object")for(let J of X){if(D.includes(J))continue;yield*C6(A.additionalProperties,F,`${B}/${m8(J)}`,$[J])}for(let J of D){let Y=A.properties[J];if(A.required&&A.required.includes(J)){if(yield*C6(Y,F,`${B}/${m8(J)}`,$[J]),h8(A)&&!(J in $))yield z1(d.ObjectRequiredProperty,Y,`${B}/${m8(J)}`,void 0)}else if(t0.IsExactOptionalProperty($,J))yield*C6(Y,F,`${B}/${m8(J)}`,$[J])}}function*dB1(A,F,B,$){if(!FJ($))yield z1(d.Promise,A,B,$)}function*mB1(A,F,B,$){if(!t0.IsRecordLike($))return yield z1(d.Object,A,B,$);if(e1(A.minProperties)&&!(Object.getOwnPropertyNames($).length>=A.minProperties))yield z1(d.ObjectMinProperties,A,B,$);if(e1(A.maxProperties)&&!(Object.getOwnPropertyNames($).length<=A.maxProperties))yield z1(d.ObjectMaxProperties,A,B,$);let[Z,D]=Object.entries(A.patternProperties)[0],X=new RegExp(Z);for(let[J,Y]of Object.entries($))if(X.test(J))yield*C6(D,F,`${B}/${m8(J)}`,Y);if(typeof A.additionalProperties==="object"){for(let[J,Y]of Object.entries($))if(!X.test(J))yield*C6(A.additionalProperties,F,`${B}/${m8(J)}`,Y)}if(A.additionalProperties===!1)for(let[J,Y]of Object.entries($)){if(X.test(J))continue;return yield z1(d.ObjectAdditionalProperties,A,`${B}/${m8(J)}`,Y)}}function*cB1(A,F,B,$){yield*C6(G0(A,F),F,B,$)}function*lB1(A,F,B,$){if(!Y0($))return yield z1(d.String,A,B,$);if(e1(A.minLength)&&!($.length>=A.minLength))yield z1(d.StringMinLength,A,B,$);if(e1(A.maxLength)&&!($.length<=A.maxLength))yield z1(d.StringMaxLength,A,B,$);if(!new RegExp(A.source,A.flags).test($))return yield z1(d.RegExp,A,B,$)}function*pB1(A,F,B,$){if(!Y0($))return yield z1(d.String,A,B,$);if(e1(A.minLength)&&!($.length>=A.minLength))yield z1(d.StringMinLength,A,B,$);if(e1(A.maxLength)&&!($.length<=A.maxLength))yield z1(d.StringMaxLength,A,B,$);if(Y0(A.pattern)){if(!new RegExp(A.pattern).test($))yield z1(d.StringPattern,A,B,$)}if(Y0(A.format)){if(!T0.Has(A.format))yield z1(d.StringFormatUnknown,A,B,$);else if(!T0.Get(A.format)($))yield z1(d.StringFormat,A,B,$)}}function*iB1(A,F,B,$){if(!x8($))yield z1(d.Symbol,A,B,$)}function*nB1(A,F,B,$){if(!Y0($))return yield z1(d.String,A,B,$);if(!new RegExp(A.pattern).test($))yield z1(d.StringPattern,A,B,$)}function*sB1(A,F,B,$){yield*C6(G0(A,F),F,B,$)}function*aB1(A,F,B,$){if(!T1($))return yield z1(d.Tuple,A,B,$);if(A.items===void 0&&$.length!==0)return yield z1(d.TupleLength,A,B,$);if($.length!==A.maxItems)return yield z1(d.TupleLength,A,B,$);if(!A.items)return;for(let Z=0;Z<A.items.length;Z++)yield*C6(A.items[Z],F,`${B}/${Z}`,$[Z])}function*tB1(A,F,B,$){if(!J2($))yield z1(d.Undefined,A,B,$)}function*rB1(A,F,B,$){if(i1(A,F,$))return;let Z=A.anyOf.map((D)=>new o5(C6(D,F,B,$)));yield z1(d.Union,A,B,$,Z)}function*oB1(A,F,B,$){if(!YF($))return yield z1(d.Uint8Array,A,B,$);if(e1(A.maxByteLength)&&!($.length<=A.maxByteLength))yield z1(d.Uint8ArrayMaxByteLength,A,B,$);if(e1(A.minByteLength)&&!($.length>=A.minByteLength))yield z1(d.Uint8ArrayMinByteLength,A,B,$)}function*eB1(A,F,B,$){}function*A$1(A,F,B,$){if(!t0.IsVoidLike($))yield z1(d.Void,A,B,$)}function*F$1(A,F,B,$){if(!J6.Get(A[g])(A,$))yield z1(d.Kind,A,B,$)}function*C6(A,F,B,$){let Z=e1(A.$id)?[...F,A]:F,D=A;switch(D[g]){case"Any":return yield*NB1(D,Z,B,$);case"Argument":return yield*MB1(D,Z,B,$);case"Array":return yield*RB1(D,Z,B,$);case"AsyncIterator":return yield*PB1(D,Z,B,$);case"BigInt":return yield*jB1(D,Z,B,$);case"Boolean":return yield*IB1(D,Z,B,$);case"Constructor":return yield*TB1(D,Z,B,$);case"Date":return yield*OB1(D,Z,B,$);case"Function":return yield*SB1(D,Z,B,$);case"Import":return yield*kB1(D,Z,B,$);case"Integer":return yield*_B1(D,Z,B,$);case"Intersect":return yield*xB1(D,Z,B,$);case"Iterator":return yield*bB1(D,Z,B,$);case"Literal":return yield*fB1(D,Z,B,$);case"Never":return yield*gB1(D,Z,B,$);case"Not":return yield*uB1(D,Z,B,$);case"Null":return yield*yB1(D,Z,B,$);case"Number":return yield*vB1(D,Z,B,$);case"Object":return yield*hB1(D,Z,B,$);case"Promise":return yield*dB1(D,Z,B,$);case"Record":return yield*mB1(D,Z,B,$);case"Ref":return yield*cB1(D,Z,B,$);case"RegExp":return yield*lB1(D,Z,B,$);case"String":return yield*pB1(D,Z,B,$);case"Symbol":return yield*iB1(D,Z,B,$);case"TemplateLiteral":return yield*nB1(D,Z,B,$);case"This":return yield*sB1(D,Z,B,$);case"Tuple":return yield*aB1(D,Z,B,$);case"Undefined":return yield*tB1(D,Z,B,$);case"Union":return yield*rB1(D,Z,B,$);case"Uint8Array":return yield*oB1(D,Z,B,$);case"Unknown":return yield*eB1(D,Z,B,$);case"Void":return yield*A$1(D,Z,B,$);default:if(!J6.Has(D[g]))throw new qI(A);return yield*F$1(D,Z,B,$)}}function J8(...A){let F=A.length===3?C6(A[0],A[1],"",A[2]):C6(A[0],[],"",A[1]);return new o5(F)}var B$1=function(A,F,B,$,Z){if($==="m")throw new TypeError("Private method is not writable");if($==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof F==="function"?A!==F||!Z:!F.has(A))throw new TypeError("Cannot write private member to an object whose class did not declare it");return $==="a"?Z.call(A,B):Z?Z.value=B:F.set(A,B),B},UI=function(A,F,B,$){if(B==="a"&&!$)throw new TypeError("Private accessor was defined without a getter");if(typeof F==="function"?A!==F||!$:!F.has(A))throw new TypeError("Cannot read private member from an object whose class did not declare it");return B==="m"?$:B==="a"?$.call(A):$?$.value:F.get(A)},Nq,PJ,CI;class KI extends P1{constructor(A){let F=A.First();super(F===void 0?"Invalid Value":F.message);Nq.add(this),PJ.set(this,void 0),B$1(this,PJ,A,"f"),this.error=F}Errors(){return new o5(UI(this,Nq,"m",CI).call(this))}}PJ=new WeakMap,Nq=new WeakSet,CI=function*A(){if(this.error)yield this.error;yield*UI(this,PJ,"f")};function HI(A,F,B){if(i1(A,F,B))return;throw new KI(J8(A,F,B))}function jJ(...A){return A.length===3?HI(A[0],A[1],A[2]):HI(A[0],[],A[1])}function $$1(A){let F={};for(let B of Object.getOwnPropertyNames(A))F[B]=H0(A[B]);for(let B of Object.getOwnPropertySymbols(A))F[B]=H0(A[B]);return F}function Z$1(A){return A.map((F)=>H0(F))}function D$1(A){return A.slice()}function X$1(A){return new Map(H0([...A.entries()]))}function J$1(A){return new Set(H0([...A.entries()]))}function Y$1(A){return new Date(A.toISOString())}function W$1(A){return A}function H0(A){if(T1(A))return Z$1(A);if(q4(A))return Y$1(A);if(x9(A))return D$1(A);if(yR(A))return X$1(A);if(vR(A))return J$1(A);if(y1(A))return $$1(A);if(W9(A))return W$1(A);throw new Error("ValueClone: Unable to clone value")}class d9 extends P1{constructor(A,F){super(F);this.schema=A}}function U0(A){return x3(A)?A():H0(A)}function G$1(A,F){if(I1(A,"default"))return U0(A.default);else return{}}function Q$1(A,F){return{}}function z$1(A,F){if(A.uniqueItems===!0&&!I1(A,"default"))throw new d9(A,"Array with the uniqueItems constraint requires a default value");else if("contains"in A&&!I1(A,"default"))throw new d9(A,"Array with the contains constraint requires a default value");else if("default"in A)return U0(A.default);else if(A.minItems!==void 0)return Array.from({length:A.minItems}).map((B)=>{return C9(A.items,F)});else return[]}function q$1(A,F){if(I1(A,"default"))return U0(A.default);else return async function*(){}()}function H$1(A,F){if(I1(A,"default"))return U0(A.default);else return BigInt(0)}function U$1(A,F){if(I1(A,"default"))return U0(A.default);else return!1}function C$1(A,F){if(I1(A,"default"))return U0(A.default);else{let B=C9(A.returns,F);if(typeof B==="object"&&!Array.isArray(B))return class{constructor(){for(let[$,Z]of Object.entries(B)){let D=this;D[$]=Z}}};else return class{}}}function K$1(A,F){if(I1(A,"default"))return U0(A.default);else if(A.minimumTimestamp!==void 0)return new Date(A.minimumTimestamp);else return new Date}function E$1(A,F){if(I1(A,"default"))return U0(A.default);else return()=>C9(A.returns,F)}function L$1(A,F){let B=globalThis.Object.values(A.$defs),$=A.$defs[A.$ref];return C9($,[...F,...B])}function w$1(A,F){if(I1(A,"default"))return U0(A.default);else if(A.minimum!==void 0)return A.minimum;else return 0}function V$1(A,F){if(I1(A,"default"))return U0(A.default);else{let B=A.allOf.reduce(($,Z)=>{let D=C9(Z,F);return typeof D==="object"?{...$,...D}:D},{});if(!i1(A,F,B))throw new d9(A,"Intersect produced invalid value. Consider using a default value.");return B}}function N$1(A,F){if(I1(A,"default"))return U0(A.default);else return function*(){}()}function M$1(A,F){if(I1(A,"default"))return U0(A.default);else return A.const}function R$1(A,F){if(I1(A,"default"))return U0(A.default);else throw new d9(A,"Never types cannot be created. Consider using a default value.")}function P$1(A,F){if(I1(A,"default"))return U0(A.default);else throw new d9(A,"Not types must have a default value")}function j$1(A,F){if(I1(A,"default"))return U0(A.default);else return null}function I$1(A,F){if(I1(A,"default"))return U0(A.default);else if(A.minimum!==void 0)return A.minimum;else return 0}function T$1(A,F){if(I1(A,"default"))return U0(A.default);else{let B=new Set(A.required),$={};for(let[Z,D]of Object.entries(A.properties)){if(!B.has(Z))continue;$[Z]=C9(D,F)}return $}}function O$1(A,F){if(I1(A,"default"))return U0(A.default);else return Promise.resolve(C9(A.item,F))}function S$1(A,F){if(I1(A,"default"))return U0(A.default);else return{}}function k$1(A,F){if(I1(A,"default"))return U0(A.default);else return C9(G0(A,F),F)}function _$1(A,F){if(I1(A,"default"))return U0(A.default);else throw new d9(A,"RegExp types cannot be created. Consider using a default value.")}function x$1(A,F){if(A.pattern!==void 0)if(!I1(A,"default"))throw new d9(A,"String types with patterns must specify a default value");else return U0(A.default);else if(A.format!==void 0)if(!I1(A,"default"))throw new d9(A,"String types with formats must specify a default value");else return U0(A.default);else if(I1(A,"default"))return U0(A.default);else if(A.minLength!==void 0)return Array.from({length:A.minLength}).map(()=>" ").join("");else return""}function b$1(A,F){if(I1(A,"default"))return U0(A.default);else if("value"in A)return Symbol.for(A.value);else return Symbol()}function f$1(A,F){if(I1(A,"default"))return U0(A.default);if(!XJ(A))throw new d9(A,"Can only create template literals that produce a finite variants. Consider using a default value.");return KF(A)[0]}function g$1(A,F){if(EI++>l$1)throw new d9(A,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(I1(A,"default"))return U0(A.default);else return C9(G0(A,F),F)}function u$1(A,F){if(I1(A,"default"))return U0(A.default);if(A.items===void 0)return[];else return Array.from({length:A.minItems}).map((B,$)=>C9(A.items[$],F))}function y$1(A,F){if(I1(A,"default"))return U0(A.default);else return}function v$1(A,F){if(I1(A,"default"))return U0(A.default);else if(A.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return C9(A.anyOf[0],F)}function h$1(A,F){if(I1(A,"default"))return U0(A.default);else if(A.minByteLength!==void 0)return new Uint8Array(A.minByteLength);else return new Uint8Array(0)}function d$1(A,F){if(I1(A,"default"))return U0(A.default);else return{}}function m$1(A,F){if(I1(A,"default"))return U0(A.default);else return}function c$1(A,F){if(I1(A,"default"))return U0(A.default);else throw new Error("User defined types must specify a default value")}function C9(A,F){let B=H6(A,F),$=A;switch($[g]){case"Any":return G$1($,B);case"Argument":return Q$1($,B);case"Array":return z$1($,B);case"AsyncIterator":return q$1($,B);case"BigInt":return H$1($,B);case"Boolean":return U$1($,B);case"Constructor":return C$1($,B);case"Date":return K$1($,B);case"Function":return E$1($,B);case"Import":return L$1($,B);case"Integer":return w$1($,B);case"Intersect":return V$1($,B);case"Iterator":return N$1($,B);case"Literal":return M$1($,B);case"Never":return R$1($,B);case"Not":return P$1($,B);case"Null":return j$1($,B);case"Number":return I$1($,B);case"Object":return T$1($,B);case"Promise":return O$1($,B);case"Record":return S$1($,B);case"Ref":return k$1($,B);case"RegExp":return _$1($,B);case"String":return x$1($,B);case"Symbol":return b$1($,B);case"TemplateLiteral":return f$1($,B);case"This":return g$1($,B);case"Tuple":return u$1($,B);case"Undefined":return y$1($,B);case"Union":return v$1($,B);case"Uint8Array":return h$1($,B);case"Unknown":return d$1($,B);case"Void":return m$1($,B);default:if(!J6.Has($[g]))throw new d9($,"Unknown type");return c$1($,B)}}var l$1=512,EI=0;function I7(...A){return EI=0,A.length===2?C9(A[0],A[1]):C9(A[0],[])}class Mq extends P1{constructor(A,F){super(F);this.schema=A}}function LI(A,F,B){if(A[g]==="Object"&&typeof B==="object"&&!_8(B)){let $=A,Z=Object.getOwnPropertyNames(B),D=Object.entries($.properties),[X,J]=[1/D.length,D.length];return D.reduce((Y,[W,G])=>{let Q=G[g]==="Literal"&&G.const===B[W]?J:0,q=i1(G,F,B[W])?X:0,z=Z.includes(W)?X:0;return Y+(Q+q+z)},0)}else if(A[g]==="Union"){let Z=A.anyOf.map((D)=>G0(D,F)).map((D)=>LI(D,F,B));return Math.max(...Z)}else return i1(A,F,B)?1:0}function p$1(A,F,B){let $=A.anyOf.map((X)=>G0(X,F)),[Z,D]=[$[0],0];for(let X of $){let J=LI(X,F,B);if(J>D)Z=X,D=J}return Z}function i$1(A,F,B){if("default"in A)return typeof B==="function"?A.default:H0(A.default);else{let $=p$1(A,F,B);return i$($,F,B)}}function n$1(A,F,B){return i1(A,F,B)?H0(B):I7(A,F)}function s$1(A,F,B){return i1(A,F,B)?B:I7(A,F)}function a$1(A,F,B){if(i1(A,F,B))return H0(B);let $=T1(B)?H0(B):I7(A,F),Z=V1(A.minItems)&&$.length<A.minItems?[...$,...Array.from({length:A.minItems-$.length},()=>null)]:$,X=(V1(A.maxItems)&&Z.length>A.maxItems?Z.slice(0,A.maxItems):Z).map((Y)=>T7(A.items,F,Y));if(A.uniqueItems!==!0)return X;let J=[...new Set(X)];if(!i1(A,F,J))throw new Mq(A,"Array cast produced invalid data due to uniqueItems constraint");return J}function t$1(A,F,B){if(i1(A,F,B))return I7(A,F);let $=new Set(A.returns.required||[]),Z=function(){};for(let[D,X]of Object.entries(A.returns.properties)){if(!$.has(D)&&B.prototype[D]===void 0)continue;Z.prototype[D]=T7(X,F,B.prototype[D])}return Z}function r$1(A,F,B){let $=globalThis.Object.values(A.$defs),Z=A.$defs[A.$ref];return T7(Z,[...F,...$],B)}function wI(A,F){if(y1(A)&&!y1(F)||!y1(A)&&y1(F))return A;if(!y1(A)||!y1(F))return F;return globalThis.Object.getOwnPropertyNames(A).reduce((B,$)=>{let Z=$ in F?wI(A[$],F[$]):A[$];return{...B,[$]:Z}},{})}function o$1(A,F,B){if(i1(A,F,B))return B;let $=I7(A,F),Z=wI($,B);return i1(A,F,Z)?Z:$}function e$1(A,F,B){throw new Mq(A,"Never types cannot be cast")}function AZ1(A,F,B){if(i1(A,F,B))return B;if(B===null||typeof B!=="object")return I7(A,F);let $=new Set(A.required||[]),Z={};for(let[D,X]of Object.entries(A.properties)){if(!$.has(D)&&B[D]===void 0)continue;Z[D]=T7(X,F,B[D])}if(typeof A.additionalProperties==="object"){let D=Object.getOwnPropertyNames(A.properties);for(let X of Object.getOwnPropertyNames(B)){if(D.includes(X))continue;Z[X]=T7(A.additionalProperties,F,B[X])}}return Z}function FZ1(A,F,B){if(i1(A,F,B))return H0(B);if(B===null||typeof B!=="object"||Array.isArray(B)||B instanceof Date)return I7(A,F);let $=Object.getOwnPropertyNames(A.patternProperties)[0],Z=A.patternProperties[$],D={};for(let[X,J]of Object.entries(B))D[X]=T7(Z,F,J);return D}function BZ1(A,F,B){return T7(G0(A,F),F,B)}function $Z1(A,F,B){return T7(G0(A,F),F,B)}function ZZ1(A,F,B){if(i1(A,F,B))return H0(B);if(!T1(B))return I7(A,F);if(A.items===void 0)return[];return A.items.map(($,Z)=>T7($,F,B[Z]))}function DZ1(A,F,B){return i1(A,F,B)?H0(B):i$1(A,F,B)}function T7(A,F,B){let $=Y0(A.$id)?H6(A,F):F,Z=A;switch(A[g]){case"Array":return a$1(Z,$,B);case"Constructor":return t$1(Z,$,B);case"Import":return r$1(Z,$,B);case"Intersect":return o$1(Z,$,B);case"Never":return e$1(Z,$,B);case"Object":return AZ1(Z,$,B);case"Record":return FZ1(Z,$,B);case"Ref":return BZ1(Z,$,B);case"This":return $Z1(Z,$,B);case"Tuple":return ZZ1(Z,$,B);case"Union":return DZ1(Z,$,B);case"Date":case"Symbol":case"Uint8Array":return n$1(A,F,B);default:return s$1(Z,$,B)}}function i$(...A){return A.length===3?T7(A[0],A[1],A[2]):T7(A[0],[],A[1])}function XZ1(A){return f3(A)&&A[g]!=="Unsafe"}function JZ1(A,F,B){if(!T1(B))return B;return B.map(($)=>y4(A.items,F,$))}function YZ1(A,F,B){let $=globalThis.Object.values(A.$defs),Z=A.$defs[A.$ref];return y4(Z,[...F,...$],B)}function WZ1(A,F,B){let $=A.unevaluatedProperties,D=A.allOf.map((J)=>y4(J,F,H0(B))).reduce((J,Y)=>y1(Y)?{...J,...Y}:Y,{});if(!y1(B)||!y1(D)||!f3($))return D;let X=g4(A);for(let J of Object.getOwnPropertyNames(B)){if(X.includes(J))continue;if(i1($,F,B[J]))D[J]=y4($,F,B[J])}return D}function GZ1(A,F,B){if(!y1(B)||T1(B))return B;let $=A.additionalProperties;for(let Z of Object.getOwnPropertyNames(B)){if(I1(A.properties,Z)){B[Z]=y4(A.properties[Z],F,B[Z]);continue}if(f3($)&&i1($,F,B[Z])){B[Z]=y4($,F,B[Z]);continue}delete B[Z]}return B}function QZ1(A,F,B){if(!y1(B))return B;let $=A.additionalProperties,Z=Object.getOwnPropertyNames(B),[D,X]=Object.entries(A.patternProperties)[0],J=new RegExp(D);for(let Y of Z){if(J.test(Y)){B[Y]=y4(X,F,B[Y]);continue}if(f3($)&&i1($,F,B[Y])){B[Y]=y4($,F,B[Y]);continue}delete B[Y]}return B}function zZ1(A,F,B){return y4(G0(A,F),F,B)}function qZ1(A,F,B){return y4(G0(A,F),F,B)}function HZ1(A,F,B){if(!T1(B))return B;if(J2(A.items))return[];let $=Math.min(B.length,A.items.length);for(let Z=0;Z<$;Z++)B[Z]=y4(A.items[Z],F,B[Z]);return B.length>$?B.slice(0,$):B}function UZ1(A,F,B){for(let $ of A.anyOf)if(XZ1($)&&i1($,F,B))return y4($,F,B);return B}function y4(A,F,B){let $=Y0(A.$id)?H6(A,F):F,Z=A;switch(Z[g]){case"Array":return JZ1(Z,$,B);case"Import":return YZ1(Z,$,B);case"Intersect":return WZ1(Z,$,B);case"Object":return GZ1(Z,$,B);case"Record":return QZ1(Z,$,B);case"Ref":return zZ1(Z,$,B);case"This":return qZ1(Z,$,B);case"Tuple":return HZ1(Z,$,B);case"Union":return UZ1(Z,$,B);default:return B}}function IJ(...A){return A.length===3?y4(A[0],A[1],A[2]):y4(A[0],[],A[1])}function TJ(A){return Y0(A)&&!isNaN(A)&&!isNaN(parseFloat(A))}function CZ1(A){return M6(A)||Z8(A)||V1(A)}function n$(A){return A===!0||V1(A)&&A===1||M6(A)&&A===BigInt("1")||Y0(A)&&(A.toLowerCase()==="true"||A==="1")}function s$(A){return A===!1||V1(A)&&(A===0||Object.is(A,-0))||M6(A)&&A===BigInt("0")||Y0(A)&&(A.toLowerCase()==="false"||A==="0"||A==="-0")}function KZ1(A){return Y0(A)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(A)}function EZ1(A){return Y0(A)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(A)}function LZ1(A){return Y0(A)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(A)}function wZ1(A){return Y0(A)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(A)}function VZ1(A){return Y0(A)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(A)}function NZ1(A,F){let B=NI(A);return B===F?B:A}function MZ1(A,F){let B=MI(A);return B===F?B:A}function RZ1(A,F){let B=VI(A);return B===F?B:A}function PZ1(A,F){return Y0(A.const)?NZ1(F,A.const):V1(A.const)?MZ1(F,A.const):Z8(A.const)?RZ1(F,A.const):F}function VI(A){return n$(A)?!0:s$(A)?!1:A}function jZ1(A){let F=(B)=>B.split(".")[0];return TJ(A)?BigInt(F(A)):V1(A)?BigInt(Math.trunc(A)):s$(A)?BigInt(0):n$(A)?BigInt(1):A}function NI(A){return x8(A)&&A.description!==void 0?A.description.toString():CZ1(A)?A.toString():A}function MI(A){return TJ(A)?parseFloat(A):n$(A)?1:s$(A)?0:A}function IZ1(A){return TJ(A)?parseInt(A):V1(A)?Math.trunc(A):n$(A)?1:s$(A)?0:A}function TZ1(A){return Y0(A)&&A.toLowerCase()==="null"?null:A}function OZ1(A){return Y0(A)&&A==="undefined"?void 0:A}function SZ1(A){return q4(A)?A:V1(A)?new Date(A):n$(A)?new Date(1):s$(A)?new Date(0):TJ(A)?new Date(parseInt(A)):EZ1(A)?new Date(`1970-01-01T${A}.000Z`):KZ1(A)?new Date(`1970-01-01T${A}`):wZ1(A)?new Date(`${A}.000Z`):LZ1(A)?new Date(A):VZ1(A)?new Date(`${A}T00:00:00.000Z`):A}function kZ1(A){return A}function _Z1(A,F,B){return(T1(B)?B:[B]).map((Z)=>O7(A.items,F,Z))}function xZ1(A,F,B){return jZ1(B)}function bZ1(A,F,B){return VI(B)}function fZ1(A,F,B){return SZ1(B)}function gZ1(A,F,B){let $=globalThis.Object.values(A.$defs),Z=A.$defs[A.$ref];return O7(Z,[...F,...$],B)}function uZ1(A,F,B){return IZ1(B)}function yZ1(A,F,B){return A.allOf.reduce(($,Z)=>O7(Z,F,$),B)}function vZ1(A,F,B){return PZ1(A,B)}function hZ1(A,F,B){return TZ1(B)}function dZ1(A,F,B){return MI(B)}function mZ1(A,F,B){if(!y1(B))return B;for(let $ of Object.getOwnPropertyNames(A.properties)){if(!I1(B,$))continue;B[$]=O7(A.properties[$],F,B[$])}return B}function cZ1(A,F,B){if(!y1(B))return B;let Z=Object.getOwnPropertyNames(A.patternProperties)[0],D=A.patternProperties[Z];for(let[X,J]of Object.entries(B))B[X]=O7(D,F,J);return B}function lZ1(A,F,B){return O7(G0(A,F),F,B)}function pZ1(A,F,B){return NI(B)}function iZ1(A,F,B){return Y0(B)||V1(B)?Symbol(B):B}function nZ1(A,F,B){return O7(G0(A,F),F,B)}function sZ1(A,F,B){if(!(T1(B)&&!J2(A.items)))return B;return B.map((Z,D)=>{return D<A.items.length?O7(A.items[D],F,Z):Z})}function aZ1(A,F,B){return OZ1(B)}function tZ1(A,F,B){for(let $ of A.anyOf)if(i1($,F,B))return B;for(let $ of A.anyOf){let Z=O7($,F,H0(B));if(!i1($,F,Z))continue;return Z}return B}function O7(A,F,B){let $=H6(A,F),Z=A;switch(A[g]){case"Array":return _Z1(Z,$,B);case"BigInt":return xZ1(Z,$,B);case"Boolean":return bZ1(Z,$,B);case"Date":return fZ1(Z,$,B);case"Import":return gZ1(Z,$,B);case"Integer":return uZ1(Z,$,B);case"Intersect":return yZ1(Z,$,B);case"Literal":return vZ1(Z,$,B);case"Null":return hZ1(Z,$,B);case"Number":return dZ1(Z,$,B);case"Object":return mZ1(Z,$,B);case"Record":return cZ1(Z,$,B);case"Ref":return lZ1(Z,$,B);case"String":return pZ1(Z,$,B);case"Symbol":return iZ1(Z,$,B);case"This":return nZ1(Z,$,B);case"Tuple":return sZ1(Z,$,B);case"Undefined":return aZ1(Z,$,B);case"Union":return tZ1(Z,$,B);default:return kZ1(B)}}function OJ(...A){return A.length===3?O7(A[0],A[1],A[2]):O7(A[0],[],A[1])}class a$ extends P1{constructor(A,F,B){super("Unable to decode value as it does not match the expected schema");this.schema=A,this.value=F,this.error=B}}class SJ extends P1{constructor(A,F,B,$){super($ instanceof Error?$.message:"Unknown error");this.schema=A,this.path=F,this.value=B,this.error=$}}function K2(A,F,B){try{return L0(A)?A[g0].Decode(B):B}catch($){throw new SJ(A,F,B,$)}}function rZ1(A,F,B,$){return T1($)?K2(A,B,$.map((Z,D)=>S7(A.items,F,`${B}/${D}`,Z))):K2(A,B,$)}function oZ1(A,F,B,$){if(!y1($)||W9($))return K2(A,B,$);let Z=QJ(A),D=Z.map((G)=>G[0]),X={...$};for(let[G,Q]of Z)if(G in X)X[G]=S7(Q,F,`${B}/${G}`,X[G]);if(!L0(A.unevaluatedProperties))return K2(A,B,X);let J=Object.getOwnPropertyNames(X),Y=A.unevaluatedProperties,W={...X};for(let G of J)if(!D.includes(G))W[G]=K2(Y,`${B}/${G}`,W[G]);return K2(A,B,W)}function eZ1(A,F,B,$){let Z=globalThis.Object.values(A.$defs),D=A.$defs[A.$ref],X=S7(D,[...F,...Z],B,$);return K2(A,B,X)}function AD1(A,F,B,$){return K2(A,B,S7(A.not,F,B,$))}function FD1(A,F,B,$){if(!y1($))return K2(A,B,$);let Z=g4(A),D={...$};for(let W of Z){if(!I1(D,W))continue;if(J2(D[W])&&(!g8(A.properties[W])||t0.IsExactOptionalProperty(D,W)))continue;D[W]=S7(A.properties[W],F,`${B}/${W}`,D[W])}if(!C2(A.additionalProperties))return K2(A,B,D);let X=Object.getOwnPropertyNames(D),J=A.additionalProperties,Y={...D};for(let W of X)if(!Z.includes(W))Y[W]=K2(J,`${B}/${W}`,Y[W]);return K2(A,B,Y)}function BD1(A,F,B,$){if(!y1($))return K2(A,B,$);let Z=Object.getOwnPropertyNames(A.patternProperties)[0],D=new RegExp(Z),X={...$};for(let G of Object.getOwnPropertyNames($))if(D.test(G))X[G]=S7(A.patternProperties[Z],F,`${B}/${G}`,X[G]);if(!C2(A.additionalProperties))return K2(A,B,X);let J=Object.getOwnPropertyNames(X),Y=A.additionalProperties,W={...X};for(let G of J)if(!D.test(G))W[G]=K2(Y,`${B}/${G}`,W[G]);return K2(A,B,W)}function $D1(A,F,B,$){let Z=G0(A,F);return K2(A,B,S7(Z,F,B,$))}function ZD1(A,F,B,$){let Z=G0(A,F);return K2(A,B,S7(Z,F,B,$))}function DD1(A,F,B,$){return T1($)&&T1(A.items)?K2(A,B,A.items.map((Z,D)=>S7(Z,F,`${B}/${D}`,$[D]))):K2(A,B,$)}function XD1(A,F,B,$){for(let Z of A.anyOf){if(!i1(Z,F,$))continue;let D=S7(Z,F,B,$);return K2(A,B,D)}return K2(A,B,$)}function S7(A,F,B,$){let Z=H6(A,F),D=A;switch(A[g]){case"Array":return rZ1(D,Z,B,$);case"Import":return eZ1(D,Z,B,$);case"Intersect":return oZ1(D,Z,B,$);case"Not":return AD1(D,Z,B,$);case"Object":return FD1(D,Z,B,$);case"Record":return BD1(D,Z,B,$);case"Ref":return $D1(D,Z,B,$);case"Symbol":return K2(D,B,$);case"This":return ZD1(D,Z,B,$);case"Tuple":return DD1(D,Z,B,$);case"Union":return XD1(D,Z,B,$);default:return K2(D,B,$)}}function SF(A,F,B){return S7(A,F,"",B)}class t$ extends P1{constructor(A,F,B){super("The encoded value does not match the expected schema");this.schema=A,this.value=F,this.error=B}}class RI extends P1{constructor(A,F,B,$){super(`${$ instanceof Error?$.message:"Unknown error"}`);this.schema=A,this.path=F,this.value=B,this.error=$}}function R6(A,F,B){try{return L0(A)?A[g0].Encode(B):B}catch($){throw new RI(A,F,B,$)}}function JD1(A,F,B,$){let Z=R6(A,B,$);return T1(Z)?Z.map((D,X)=>k7(A.items,F,`${B}/${X}`,D)):Z}function YD1(A,F,B,$){let Z=globalThis.Object.values(A.$defs),D=A.$defs[A.$ref],X=R6(A,B,$);return k7(D,[...F,...Z],B,X)}function WD1(A,F,B,$){let Z=R6(A,B,$);if(!y1($)||W9($))return Z;let D=QJ(A),X=D.map((Q)=>Q[0]),J={...Z};for(let[Q,q]of D)if(Q in J)J[Q]=k7(q,F,`${B}/${Q}`,J[Q]);if(!L0(A.unevaluatedProperties))return J;let Y=Object.getOwnPropertyNames(J),W=A.unevaluatedProperties,G={...J};for(let Q of Y)if(!X.includes(Q))G[Q]=R6(W,`${B}/${Q}`,G[Q]);return G}function GD1(A,F,B,$){return R6(A.not,B,R6(A,B,$))}function QD1(A,F,B,$){let Z=R6(A,B,$);if(!y1(Z))return Z;let D=g4(A),X={...Z};for(let G of D){if(!I1(X,G))continue;if(J2(X[G])&&(!g8(A.properties[G])||t0.IsExactOptionalProperty(X,G)))continue;X[G]=k7(A.properties[G],F,`${B}/${G}`,X[G])}if(!C2(A.additionalProperties))return X;let J=Object.getOwnPropertyNames(X),Y=A.additionalProperties,W={...X};for(let G of J)if(!D.includes(G))W[G]=R6(Y,`${B}/${G}`,W[G]);return W}function zD1(A,F,B,$){let Z=R6(A,B,$);if(!y1($))return Z;let D=Object.getOwnPropertyNames(A.patternProperties)[0],X=new RegExp(D),J={...Z};for(let Q of Object.getOwnPropertyNames($))if(X.test(Q))J[Q]=k7(A.patternProperties[D],F,`${B}/${Q}`,J[Q]);if(!C2(A.additionalProperties))return J;let Y=Object.getOwnPropertyNames(J),W=A.additionalProperties,G={...J};for(let Q of Y)if(!X.test(Q))G[Q]=R6(W,`${B}/${Q}`,G[Q]);return G}function qD1(A,F,B,$){let Z=G0(A,F),D=k7(Z,F,B,$);return R6(A,B,D)}function HD1(A,F,B,$){let Z=G0(A,F),D=k7(Z,F,B,$);return R6(A,B,D)}function UD1(A,F,B,$){let Z=R6(A,B,$);return T1(A.items)?A.items.map((D,X)=>k7(D,F,`${B}/${X}`,Z[X])):[]}function CD1(A,F,B,$){for(let Z of A.anyOf){if(!i1(Z,F,$))continue;let D=k7(Z,F,B,$);return R6(A,B,D)}for(let Z of A.anyOf){let D=k7(Z,F,B,$);if(!i1(A,F,D))continue;return R6(A,B,D)}return R6(A,B,$)}function k7(A,F,B,$){let Z=H6(A,F),D=A;switch(A[g]){case"Array":return JD1(D,Z,B,$);case"Import":return YD1(D,Z,B,$);case"Intersect":return WD1(D,Z,B,$);case"Not":return GD1(D,Z,B,$);case"Object":return QD1(D,Z,B,$);case"Record":return zD1(D,Z,B,$);case"Ref":return qD1(D,Z,B,$);case"This":return HD1(D,Z,B,$);case"Tuple":return UD1(D,Z,B,$);case"Union":return CD1(D,Z,B,$);default:return R6(D,B,$)}}function kF(A,F,B){return k7(A,F,"",B)}function KD1(A,F){return L0(A)||Y6(A.items,F)}function ED1(A,F){return L0(A)||Y6(A.items,F)}function LD1(A,F){return L0(A)||Y6(A.returns,F)||A.parameters.some((B)=>Y6(B,F))}function wD1(A,F){return L0(A)||Y6(A.returns,F)||A.parameters.some((B)=>Y6(B,F))}function VD1(A,F){return L0(A)||L0(A.unevaluatedProperties)||A.allOf.some((B)=>Y6(B,F))}function ND1(A,F){let B=globalThis.Object.getOwnPropertyNames(A.$defs).reduce((Z,D)=>[...Z,A.$defs[D]],[]),$=A.$defs[A.$ref];return L0(A)||Y6($,[...B,...F])}function MD1(A,F){return L0(A)||Y6(A.items,F)}function RD1(A,F){return L0(A)||Y6(A.not,F)}function PD1(A,F){return L0(A)||Object.values(A.properties).some((B)=>Y6(B,F))||C2(A.additionalProperties)&&Y6(A.additionalProperties,F)}function jD1(A,F){return L0(A)||Y6(A.item,F)}function ID1(A,F){let B=Object.getOwnPropertyNames(A.patternProperties)[0],$=A.patternProperties[B];return L0(A)||Y6($,F)||C2(A.additionalProperties)&&L0(A.additionalProperties)}function TD1(A,F){if(L0(A))return!0;return Y6(G0(A,F),F)}function OD1(A,F){if(L0(A))return!0;return Y6(G0(A,F),F)}function SD1(A,F){return L0(A)||!J2(A.items)&&A.items.some((B)=>Y6(B,F))}function kD1(A,F){return L0(A)||A.anyOf.some((B)=>Y6(B,F))}function Y6(A,F){let B=H6(A,F),$=A;if(A.$id&&Rq.has(A.$id))return!1;if(A.$id)Rq.add(A.$id);switch(A[g]){case"Array":return KD1($,B);case"AsyncIterator":return ED1($,B);case"Constructor":return LD1($,B);case"Function":return wD1($,B);case"Import":return ND1($,B);case"Intersect":return VD1($,B);case"Iterator":return MD1($,B);case"Not":return RD1($,B);case"Object":return PD1($,B);case"Promise":return jD1($,B);case"Record":return ID1($,B);case"Ref":return TD1($,B);case"This":return OD1($,B);case"Tuple":return SD1($,B);case"Union":return kD1($,B);default:return L0(A)}}var Rq=new Set;function c8(A,F){return Rq.clear(),Y6(A,F)}function PI(...A){let[F,B,$]=A.length===3?[A[0],A[1],A[2]]:[A[0],[],A[1]];if(!i1(F,B,$))throw new a$(F,$,J8(F,B,$).First());return c8(F,B)?SF(F,B,$):$}function l8(A,F){let B=I1(A,"default")?A.default:void 0,$=x3(B)?B():H0(B);return J2(F)?$:y1(F)&&y1($)?Object.assign($,F):F}function Pq(A){return f3(A)&&"default"in A}function _D1(A,F,B){if(T1(B)){for(let Z=0;Z<B.length;Z++)B[Z]=U4(A.items,F,B[Z]);return B}let $=l8(A,B);if(!T1($))return $;for(let Z=0;Z<$.length;Z++)$[Z]=U4(A.items,F,$[Z]);return $}function xD1(A,F,B){return q4(B)?B:l8(A,B)}function bD1(A,F,B){let $=globalThis.Object.values(A.$defs),Z=A.$defs[A.$ref];return U4(Z,[...F,...$],B)}function fD1(A,F,B){let $=l8(A,B);return A.allOf.reduce((Z,D)=>{let X=U4(D,F,$);return y1(X)?{...Z,...X}:X},{})}function gD1(A,F,B){let $=l8(A,B);if(!y1($))return $;let Z=Object.getOwnPropertyNames(A.properties);for(let D of Z){let X=U4(A.properties[D],F,$[D]);if(J2(X))continue;$[D]=U4(A.properties[D],F,$[D])}if(!Pq(A.additionalProperties))return $;for(let D of Object.getOwnPropertyNames($)){if(Z.includes(D))continue;$[D]=U4(A.additionalProperties,F,$[D])}return $}function uD1(A,F,B){let $=l8(A,B);if(!y1($))return $;let Z=A.additionalProperties,[D,X]=Object.entries(A.patternProperties)[0],J=new RegExp(D);for(let Y of Object.getOwnPropertyNames($)){if(!(J.test(Y)&&Pq(X)))continue;$[Y]=U4(X,F,$[Y])}if(!Pq(Z))return $;for(let Y of Object.getOwnPropertyNames($)){if(J.test(Y))continue;$[Y]=U4(Z,F,$[Y])}return $}function yD1(A,F,B){return U4(G0(A,F),F,l8(A,B))}function vD1(A,F,B){return U4(G0(A,F),F,B)}function hD1(A,F,B){let $=l8(A,B);if(!T1($)||J2(A.items))return $;let[Z,D]=[A.items,Math.max(A.items.length,$.length)];for(let X=0;X<D;X++)if(X<Z.length)$[X]=U4(Z[X],F,$[X]);return $}function dD1(A,F,B){let $=l8(A,B);for(let Z of A.anyOf){let D=U4(Z,F,H0($));if(i1(Z,F,D))return D}return $}function U4(A,F,B){let $=H6(A,F),Z=A;switch(Z[g]){case"Array":return _D1(Z,$,B);case"Date":return xD1(Z,$,B);case"Import":return bD1(Z,$,B);case"Intersect":return fD1(Z,$,B);case"Object":return gD1(Z,$,B);case"Record":return uD1(Z,$,B);case"Ref":return yD1(Z,$,B);case"This":return vD1(Z,$,B);case"Tuple":return hD1(Z,$,B);case"Union":return dD1(Z,$,B);default:return l8(Z,B)}}function kJ(...A){return A.length===3?U4(A[0],A[1],A[2]):U4(A[0],[],A[1])}var _7={};m5(_7,{ValuePointerRootSetError:()=>jq,ValuePointerRootDeleteError:()=>Iq,Set:()=>mD1,Has:()=>lD1,Get:()=>pD1,Format:()=>r$,Delete:()=>cD1});class jq extends P1{constructor(A,F,B){super("Cannot set root value");this.value=A,this.path=F,this.update=B}}class Iq extends P1{constructor(A,F){super("Cannot delete root value");this.value=A,this.path=F}}function jI(A){return A.indexOf("~")===-1?A:A.replace(/~1/g,"/").replace(/~0/g,"~")}function*r$(A){if(A==="")return;let[F,B]=[0,0];for(let $=0;$<A.length;$++)if(A.charAt($)==="/")if($===0)F=$+1;else B=$,yield jI(A.slice(F,B)),F=$+1;else B=$;yield jI(A.slice(F))}function mD1(A,F,B){if(F==="")throw new jq(A,F,B);let[$,Z,D]=[null,A,""];for(let X of r$(F)){if(Z[X]===void 0)Z[X]={};$=Z,Z=Z[X],D=X}$[D]=B}function cD1(A,F){if(F==="")throw new Iq(A,F);let[B,$,Z]=[null,A,""];for(let D of r$(F)){if($[D]===void 0||$[D]===null)return;B=$,$=$[D],Z=D}if(Array.isArray(B)){let D=parseInt(Z);B.splice(D,1)}else delete B[Z]}function lD1(A,F){if(F==="")return!0;let[B,$,Z]=[null,A,""];for(let D of r$(F)){if($[D]===void 0)return!1;B=$,$=$[D],Z=D}return Object.getOwnPropertyNames(B).includes(Z)}function pD1(A,F){if(F==="")return A;let B=A;for(let $ of r$(F)){if(B[$]===void 0)return;B=B[$]}return B}function iD1(A,F){if(!y1(F))return!1;let B=[...Object.keys(A),...Object.getOwnPropertySymbols(A)],$=[...Object.keys(F),...Object.getOwnPropertySymbols(F)];if(B.length!==$.length)return!1;return B.every((Z)=>e5(A[Z],F[Z]))}function nD1(A,F){return q4(F)&&A.getTime()===F.getTime()}function sD1(A,F){if(!T1(F)||A.length!==F.length)return!1;return A.every((B,$)=>e5(B,F[$]))}function aD1(A,F){if(!x9(F)||A.length!==F.length||Object.getPrototypeOf(A).constructor.name!==Object.getPrototypeOf(F).constructor.name)return!1;return A.every((B,$)=>e5(B,F[$]))}function tD1(A,F){return A===F}function e5(A,F){if(q4(A))return nD1(A,F);if(x9(A))return aD1(A,F);if(T1(A))return sD1(A,F);if(y1(A))return iD1(A,F);if(W9(A))return tD1(A,F);throw new Error("ValueEquals: Unable to compare value")}var rD1=V0({type:Z0("insert"),path:H4(),value:R7()}),oD1=V0({type:Z0("update"),path:H4(),value:R7()}),eD1=V0({type:Z0("delete"),path:H4()}),TI=w0([rD1,oD1,eD1]);class Tq extends P1{constructor(A,F){super(F);this.value=A}}function _J(A,F){return{type:"update",path:A,value:F}}function OI(A,F){return{type:"insert",path:A,value:F}}function SI(A){return{type:"delete",path:A}}function II(A){if(globalThis.Object.getOwnPropertySymbols(A).length>0)throw new Tq(A,"Cannot diff objects with symbols")}function*AX1(A,F,B){if(II(F),II(B),!ez(B))return yield _J(A,B);let $=globalThis.Object.getOwnPropertyNames(F),Z=globalThis.Object.getOwnPropertyNames(B);for(let D of Z){if(I1(F,D))continue;yield OI(`${A}/${D}`,B[D])}for(let D of $){if(!I1(B,D))continue;if(e5(F,B))continue;yield*xJ(`${A}/${D}`,F[D],B[D])}for(let D of $){if(I1(B,D))continue;yield SI(`${A}/${D}`)}}function*FX1(A,F,B){if(!T1(B))return yield _J(A,B);for(let $=0;$<Math.min(F.length,B.length);$++)yield*xJ(`${A}/${$}`,F[$],B[$]);for(let $=0;$<B.length;$++){if($<F.length)continue;yield OI(`${A}/${$}`,B[$])}for(let $=F.length-1;$>=0;$--){if($<B.length)continue;yield SI(`${A}/${$}`)}}function*BX1(A,F,B){if(!x9(B)||F.length!==B.length||globalThis.Object.getPrototypeOf(F).constructor.name!==globalThis.Object.getPrototypeOf(B).constructor.name)return yield _J(A,B);for(let $=0;$<Math.min(F.length,B.length);$++)yield*xJ(`${A}/${$}`,F[$],B[$])}function*$X1(A,F,B){if(F===B)return;yield _J(A,B)}function*xJ(A,F,B){if(ez(F))return yield*AX1(A,F,B);if(T1(F))return yield*FX1(A,F,B);if(x9(F))return yield*BX1(A,F,B);if(W9(F))return yield*$X1(A,F,B);throw new Tq(F,"Unable to diff value")}function kI(A,F){return[...xJ("",A,F)]}function ZX1(A){return A.length>0&&A[0].path===""&&A[0].type==="update"}function DX1(A){return A.length===0}function _I(A,F){if(ZX1(F))return H0(F[0].value);if(DX1(F))return H0(A);let B=H0(A);for(let $ of F)switch($.type){case"insert":{_7.Set(B,$.path,$.value);break}case"update":{_7.Set(B,$.path,$.value);break}case"delete":{_7.Delete(B,$.path);break}}return B}function xI(...A){let[F,B,$]=A.length===3?[A[0],A[1],A[2]]:[A[0],[],A[1]],Z=c8(F,B)?kF(F,B,$):$;if(!i1(F,B,Z))throw new t$(F,Z,J8(F,B,Z).First());return Z}function bJ(A){return y1(A)&&!T1(A)}class Oq extends P1{constructor(A){super(A)}}function XX1(A,F,B,$){if(!bJ(B))_7.Set(A,F,H0($));else{let Z=Object.getOwnPropertyNames(B),D=Object.getOwnPropertyNames($);for(let X of Z)if(!D.includes(X))delete B[X];for(let X of D)if(!Z.includes(X))B[X]=null;for(let X of D)Sq(A,`${F}/${X}`,B[X],$[X])}}function JX1(A,F,B,$){if(!T1(B))_7.Set(A,F,H0($));else{for(let Z=0;Z<$.length;Z++)Sq(A,`${F}/${Z}`,B[Z],$[Z]);B.splice($.length)}}function YX1(A,F,B,$){if(x9(B)&&B.length===$.length)for(let Z=0;Z<B.length;Z++)B[Z]=$[Z];else _7.Set(A,F,H0($))}function WX1(A,F,B,$){if(B===$)return;_7.Set(A,F,$)}function Sq(A,F,B,$){if(T1($))return JX1(A,F,B,$);if(x9($))return YX1(A,F,B,$);if(bJ($))return XX1(A,F,B,$);if(W9($))return WX1(A,F,B,$)}function bI(A){return x9(A)||W9(A)}function GX1(A,F){return bJ(A)&&T1(F)||T1(A)&&bJ(F)}function fI(A,F){if(bI(A)||bI(F))throw new Oq("Only object and array types can be mutated at the root level");if(GX1(A,F))throw new Oq("Cannot assign due type mismatch of assignable values");Sq(A,"",A,F)}class _q extends P1{constructor(A){super(A)}}var kq;(function(A){let F=new Map([["Assert",(D,X,J)=>{return jJ(D,X,J),J}],["Cast",(D,X,J)=>i$(D,X,J)],["Clean",(D,X,J)=>IJ(D,X,J)],["Clone",(D,X,J)=>H0(J)],["Convert",(D,X,J)=>OJ(D,X,J)],["Decode",(D,X,J)=>c8(D,X)?SF(D,X,J):J],["Default",(D,X,J)=>kJ(D,X,J)],["Encode",(D,X,J)=>c8(D,X)?kF(D,X,J):J]]);function B(D){F.delete(D)}A.Delete=B;function $(D,X){F.set(D,X)}A.Set=$;function Z(D){return F.get(D)}A.Get=Z})(kq||(kq={}));var gI=["Clone","Clean","Default","Convert","Assert","Decode"];function QX1(A,F,B,$){return A.reduce((Z,D)=>{let X=kq.Get(D);if(J2(X))throw new _q(`Unable to find Parse operation '${D}'`);return X(F,B,Z)},$)}function uI(...A){let[F,B,$,Z]=A.length===4?[A[0],A[1],A[2],A[3]]:A.length===3?T1(A[0])?[A[0],A[1],[],A[2]]:[gI,A[0],A[1],A[2]]:A.length===2?[gI,A[0],[],A[1]]:(()=>{throw new _q("Invalid Arguments")})();return QX1(F,B,$,Z)}var j0={};m5(j0,{ValueErrorIterator:()=>o5,Patch:()=>_I,Parse:()=>uI,Mutate:()=>fI,Hash:()=>c3,Errors:()=>J8,Equal:()=>e5,Encode:()=>xI,Edit:()=>TI,Diff:()=>kI,Default:()=>kJ,Decode:()=>PI,Create:()=>I7,Convert:()=>OJ,Clone:()=>H0,Clean:()=>IJ,Check:()=>i1,Cast:()=>i$,Assert:()=>jJ});class yI{constructor(A,F,B,$){this.schema=A,this.references=F,this.checkFunc=B,this.code=$,this.hasTransform=c8(A,F)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(A){return J8(this.schema,this.references,A)}Check(A){return this.checkFunc(A)}Decode(A){if(!this.checkFunc(A))throw new a$(this.schema,A,this.Errors(A).First());return this.hasTransform?SF(this.schema,this.references,A):A}Encode(A){let F=this.hasTransform?kF(this.schema,this.references,A):A;if(!this.checkFunc(F))throw new t$(this.schema,A,this.Errors(A).First());return F}}var p8;(function(A){function F(D){return D===36}A.DollarSign=F;function B(D){return D===95}A.IsUnderscore=B;function $(D){return D>=65&&D<=90||D>=97&&D<=122}A.IsAlpha=$;function Z(D){return D>=48&&D<=57}A.IsNumeric=Z})(p8||(p8={}));var fJ;(function(A){function F(D){if(D.length===0)return!1;return p8.IsNumeric(D.charCodeAt(0))}function B(D){if(F(D))return!1;for(let X=0;X<D.length;X++){let J=D.charCodeAt(X);if(!(p8.IsAlpha(J)||p8.IsNumeric(J)||p8.DollarSign(J)||p8.IsUnderscore(J)))return!1}return!0}function $(D){return D.replace(/'/g,"\\'")}function Z(D,X){return B(X)?`${D}.${X}`:`${D}['${$(X)}']`}A.Encode=Z})(fJ||(fJ={}));var xq;(function(A){function F(B){let $=[];for(let Z=0;Z<B.length;Z++){let D=B.charCodeAt(Z);if(p8.IsNumeric(D)||p8.IsAlpha(D))$.push(B.charAt(Z));else $.push(`_${D}_`)}return $.join("").replace(/__/g,"_")}A.Encode=F})(xq||(xq={}));var bq;(function(A){function F(B){return B.replace(/'/g,"\\'")}A.Escape=F})(bq||(bq={}));class vI extends P1{constructor(A){super("Unknown type");this.schema=A}}class fq extends P1{constructor(A){super("Preflight validation check failed to guard for the given schema");this.schema=A}}var AA;(function(A){function F(X,J,Y){return t0.ExactOptionalPropertyTypes?`('${J}' in ${X} ? ${Y} : true)`:`(${fJ.Encode(X,J)} !== undefined ? ${Y} : true)`}A.IsExactOptionalProperty=F;function B(X){return!t0.AllowArrayObject?`(typeof ${X} === 'object' && ${X} !== null && !Array.isArray(${X}))`:`(typeof ${X} === 'object' && ${X} !== null)`}A.IsObjectLike=B;function $(X){return!t0.AllowArrayObject?`(typeof ${X} === 'object' && ${X} !== null && !Array.isArray(${X}) && !(${X} instanceof Date) && !(${X} instanceof Uint8Array))`:`(typeof ${X} === 'object' && ${X} !== null && !(${X} instanceof Date) && !(${X} instanceof Uint8Array))`}A.IsRecordLike=$;function Z(X){return t0.AllowNaN?`typeof ${X} === 'number'`:`Number.isFinite(${X})`}A.IsNumberLike=Z;function D(X){return t0.AllowNullVoid?`(${X} === undefined || ${X} === null)`:`${X} === undefined`}A.IsVoidLike=D})(AA||(AA={}));var Y8;(function(A){function F(w){return w[g]==="Any"||w[g]==="Unknown"}function*B(w,h,I){yield"true"}function*$(w,h,I){yield"true"}function*Z(w,h,I){yield`Array.isArray(${I})`;let[$1,e]=[v6("value","any"),v6("acc","number")];if(V1(w.maxItems))yield`${I}.length <= ${w.maxItems}`;if(V1(w.minItems))yield`${I}.length >= ${w.minItems}`;let D1=J0(w.items,h,"value");if(yield`${I}.every((${$1}) => ${D1})`,W2(w.contains)||V1(w.minContains)||V1(w.maxContains)){let E1=W2(w.contains)?w.contains:p1(),I0=J0(E1,h,"value"),X6=V1(w.minContains)?[`(count >= ${w.minContains})`]:[],r2=V1(w.maxContains)?[`(count <= ${w.maxContains})`]:[],h6=`const count = value.reduce((${e}, ${$1}) => ${I0} ? acc + 1 : acc, 0)`,_9=["(count > 0)",...X6,...r2].join(" && ");yield`((${$1}) => { ${h6}; return ${_9}})(${I})`}if(w.uniqueItems===!0)yield`((${$1}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${I})`}function*D(w,h,I){yield`(typeof value === 'object' && Symbol.asyncIterator in ${I})`}function*X(w,h,I){if(yield`(typeof ${I} === 'bigint')`,M6(w.exclusiveMaximum))yield`${I} < BigInt(${w.exclusiveMaximum})`;if(M6(w.exclusiveMinimum))yield`${I} > BigInt(${w.exclusiveMinimum})`;if(M6(w.maximum))yield`${I} <= BigInt(${w.maximum})`;if(M6(w.minimum))yield`${I} >= BigInt(${w.minimum})`;if(M6(w.multipleOf))yield`(${I} % BigInt(${w.multipleOf})) === 0`}function*J(w,h,I){yield`(typeof ${I} === 'boolean')`}function*Y(w,h,I){yield*_1(w.returns,h,`${I}.prototype`)}function*W(w,h,I){if(yield`(${I} instanceof Date) && Number.isFinite(${I}.getTime())`,V1(w.exclusiveMaximumTimestamp))yield`${I}.getTime() < ${w.exclusiveMaximumTimestamp}`;if(V1(w.exclusiveMinimumTimestamp))yield`${I}.getTime() > ${w.exclusiveMinimumTimestamp}`;if(V1(w.maximumTimestamp))yield`${I}.getTime() <= ${w.maximumTimestamp}`;if(V1(w.minimumTimestamp))yield`${I}.getTime() >= ${w.minimumTimestamp}`;if(V1(w.multipleOfTimestamp))yield`(${I}.getTime() % ${w.multipleOfTimestamp}) === 0`}function*G(w,h,I){yield`(typeof ${I} === 'function')`}function*Q(w,h,I){let $1=globalThis.Object.getOwnPropertyNames(w.$defs).reduce((e,D1)=>{return[...e,w.$defs[D1]]},[]);yield*_1(y9(w.$ref),[...h,...$1],I)}function*q(w,h,I){if(yield`Number.isInteger(${I})`,V1(w.exclusiveMaximum))yield`${I} < ${w.exclusiveMaximum}`;if(V1(w.exclusiveMinimum))yield`${I} > ${w.exclusiveMinimum}`;if(V1(w.maximum))yield`${I} <= ${w.maximum}`;if(V1(w.minimum))yield`${I} >= ${w.minimum}`;if(V1(w.multipleOf))yield`(${I} % ${w.multipleOf}) === 0`}function*z(w,h,I){let $1=w.allOf.map((e)=>J0(e,h,I)).join(" && ");if(w.unevaluatedProperties===!1){let e=N6(`${new RegExp(v8(w))};`),D1=`Object.getOwnPropertyNames(${I}).every(key => ${e}.test(key))`;yield`(${$1} && ${D1})`}else if(W2(w.unevaluatedProperties)){let e=N6(`${new RegExp(v8(w))};`),D1=`Object.getOwnPropertyNames(${I}).every(key => ${e}.test(key) || ${J0(w.unevaluatedProperties,h,`${I}[key]`)})`;yield`(${$1} && ${D1})`}else yield`(${$1})`}function*H(w,h,I){yield`(typeof value === 'object' && Symbol.iterator in ${I})`}function*U(w,h,I){if(typeof w.const==="number"||typeof w.const==="boolean")yield`(${I} === ${w.const})`;else yield`(${I} === '${bq.Escape(w.const)}')`}function*K(w,h,I){yield"false"}function*E(w,h,I){yield`(!${J0(w.not,h,I)})`}function*L(w,h,I){yield`(${I} === null)`}function*V(w,h,I){if(yield AA.IsNumberLike(I),V1(w.exclusiveMaximum))yield`${I} < ${w.exclusiveMaximum}`;if(V1(w.exclusiveMinimum))yield`${I} > ${w.exclusiveMinimum}`;if(V1(w.maximum))yield`${I} <= ${w.maximum}`;if(V1(w.minimum))yield`${I} >= ${w.minimum}`;if(V1(w.multipleOf))yield`(${I} % ${w.multipleOf}) === 0`}function*M(w,h,I){if(yield AA.IsObjectLike(I),V1(w.minProperties))yield`Object.getOwnPropertyNames(${I}).length >= ${w.minProperties}`;if(V1(w.maxProperties))yield`Object.getOwnPropertyNames(${I}).length <= ${w.maxProperties}`;let $1=Object.getOwnPropertyNames(w.properties);for(let e of $1){let D1=fJ.Encode(I,e),E1=w.properties[e];if(w.required&&w.required.includes(e)){if(yield*_1(E1,h,D1),h8(E1)||F(E1))yield`('${e}' in ${I})`}else{let I0=J0(E1,h,D1);yield AA.IsExactOptionalProperty(I,e,I0)}}if(w.additionalProperties===!1)if(w.required&&w.required.length===$1.length)yield`Object.getOwnPropertyNames(${I}).length === ${$1.length}`;else{let e=`[${$1.map((D1)=>`'${D1}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${I}).every(key => ${e}.includes(key))`}if(typeof w.additionalProperties==="object"){let e=J0(w.additionalProperties,h,`${I}[key]`),D1=`[${$1.map((E1)=>`'${E1}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${I}).every(key => ${D1}.includes(key) || ${e}))`}}function*O(w,h,I){yield`${I} instanceof Promise`}function*R(w,h,I){if(yield AA.IsRecordLike(I),V1(w.minProperties))yield`Object.getOwnPropertyNames(${I}).length >= ${w.minProperties}`;if(V1(w.maxProperties))yield`Object.getOwnPropertyNames(${I}).length <= ${w.maxProperties}`;let[$1,e]=Object.entries(w.patternProperties)[0],D1=N6(`${new RegExp($1)}`),E1=J0(e,h,"value"),I0=W2(w.additionalProperties)?J0(w.additionalProperties,h,I):w.additionalProperties===!1?"false":"true",X6=`(${D1}.test(key) ? ${E1} : ${I0})`;yield`(Object.entries(${I}).every(([key, value]) => ${X6}))`}function*_(w,h,I){let $1=G0(w,h);if(O1.functions.has(w.$ref))return yield`${s0(w.$ref)}(${I})`;yield*_1($1,h,I)}function*P(w,h,I){let $1=N6(`${new RegExp(w.source,w.flags)};`);if(yield`(typeof ${I} === 'string')`,V1(w.maxLength))yield`${I}.length <= ${w.maxLength}`;if(V1(w.minLength))yield`${I}.length >= ${w.minLength}`;yield`${$1}.test(${I})`}function*T(w,h,I){if(yield`(typeof ${I} === 'string')`,V1(w.maxLength))yield`${I}.length <= ${w.maxLength}`;if(V1(w.minLength))yield`${I}.length >= ${w.minLength}`;if(w.pattern!==void 0)yield`${N6(`${new RegExp(w.pattern)};`)}.test(${I})`;if(w.format!==void 0)yield`format('${w.format}', ${I})`}function*N(w,h,I){yield`(typeof ${I} === 'symbol')`}function*y(w,h,I){yield`(typeof ${I} === 'string')`,yield`${N6(`${new RegExp(w.pattern)};`)}.test(${I})`}function*S(w,h,I){yield`${s0(w.$ref)}(${I})`}function*k(w,h,I){if(yield`Array.isArray(${I})`,w.items===void 0)return yield`${I}.length === 0`;yield`(${I}.length === ${w.maxItems})`;for(let $1=0;$1<w.items.length;$1++)yield`${J0(w.items[$1],h,`${I}[${$1}]`)}`}function*v(w,h,I){yield`${I} === undefined`}function*J1(w,h,I){yield`(${w.anyOf.map((e)=>J0(e,h,I)).join(" || ")})`}function*r(w,h,I){if(yield`${I} instanceof Uint8Array`,V1(w.maxByteLength))yield`(${I}.length <= ${w.maxByteLength})`;if(V1(w.minByteLength))yield`(${I}.length >= ${w.minByteLength})`}function*q1(w,h,I){yield"true"}function*C1(w,h,I){yield AA.IsVoidLike(I)}function*b1(w,h,I){let $1=O1.instances.size;O1.instances.set($1,w),yield`kind('${w[g]}', ${$1}, ${I})`}function*_1(w,h,I,$1=!0){let e=Y0(w.$id)?[...h,w]:h,D1=w;if($1&&Y0(w.$id)){let E1=s0(w.$id);if(O1.functions.has(E1))return yield`${E1}(${I})`;else{O1.functions.set(E1,"<deferred>");let I0=D6(E1,w,h,"value",!1);return O1.functions.set(E1,I0),yield`${E1}(${I})`}}switch(D1[g]){case"Any":return yield*B(D1,e,I);case"Argument":return yield*$(D1,e,I);case"Array":return yield*Z(D1,e,I);case"AsyncIterator":return yield*D(D1,e,I);case"BigInt":return yield*X(D1,e,I);case"Boolean":return yield*J(D1,e,I);case"Constructor":return yield*Y(D1,e,I);case"Date":return yield*W(D1,e,I);case"Function":return yield*G(D1,e,I);case"Import":return yield*Q(D1,e,I);case"Integer":return yield*q(D1,e,I);case"Intersect":return yield*z(D1,e,I);case"Iterator":return yield*H(D1,e,I);case"Literal":return yield*U(D1,e,I);case"Never":return yield*K(D1,e,I);case"Not":return yield*E(D1,e,I);case"Null":return yield*L(D1,e,I);case"Number":return yield*V(D1,e,I);case"Object":return yield*M(D1,e,I);case"Promise":return yield*O(D1,e,I);case"Record":return yield*R(D1,e,I);case"Ref":return yield*_(D1,e,I);case"RegExp":return yield*P(D1,e,I);case"String":return yield*T(D1,e,I);case"Symbol":return yield*N(D1,e,I);case"TemplateLiteral":return yield*y(D1,e,I);case"This":return yield*S(D1,e,I);case"Tuple":return yield*k(D1,e,I);case"Undefined":return yield*v(D1,e,I);case"Union":return yield*J1(D1,e,I);case"Uint8Array":return yield*r(D1,e,I);case"Unknown":return yield*q1(D1,e,I);case"Void":return yield*C1(D1,e,I);default:if(!J6.Has(D1[g]))throw new vI(w);return yield*b1(D1,e,I)}}let O1={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function J0(w,h,I,$1=!0){return`(${[..._1(w,h,I,$1)].join(" && ")})`}function s0(w){return`check_${xq.Encode(w)}`}function N6(w){let h=`local_${O1.variables.size}`;return O1.variables.set(h,`const ${h} = ${w}`),h}function D6(w,h,I,$1,e=!0){let[D1,E1]=[`
`,(h6)=>"".padStart(h6," ")],I0=v6("value","any"),X6=_4("boolean"),r2=[..._1(h,I,$1,e)].map((h6)=>`${E1(4)}${h6}`).join(` &&${D1}`);return`function ${w}(${I0})${X6} {${D1}${E1(2)}return (${D1}${r2}${D1}${E1(2)})
}`}function v6(w,h){let I=O1.language==="typescript"?`: ${h}`:"";return`${w}${I}`}function _4(w){return O1.language==="typescript"?`: ${w}`:""}function a0(w,h,I){let $1=D6("check",w,h,"value"),e=v6("value","any"),D1=_4("boolean"),E1=[...O1.functions.values()],I0=[...O1.variables.values()],X6=Y0(w.$id)?`return function check(${e})${D1} {
  return ${s0(w.$id)}(value)
}`:`return ${$1}`;return[...I0,...E1,X6].join(`
`)}function Y1(...w){let h={language:"javascript"},[I,$1,e]=w.length===2&&T1(w[1])?[w[0],w[1],h]:w.length===2&&!T1(w[1])?[w[0],[],w[1]]:w.length===3?[w[0],w[1],w[2]]:w.length===1?[w[0],[],h]:[null,[],h];if(O1.language=e.language,O1.variables.clear(),O1.functions.clear(),O1.instances.clear(),!W2(I))throw new fq(I);for(let D1 of $1)if(!W2(D1))throw new fq(D1);return a0(I,$1,e)}A.Code=Y1;function a(w,h=[]){let I=Y1(w,h,{language:"javascript"}),$1=globalThis.Function("kind","format","hash",I),e=new Map(O1.instances);function D1(r2,h6,_9){if(!J6.Has(r2)||!e.has(h6))return!1;let aX=J6.Get(r2),tX=e.get(h6);return aX(tX,_9)}function E1(r2,h6){if(!T0.Has(r2))return!1;return T0.Get(r2)(h6)}function I0(r2){return c3(r2)}let X6=$1(D1,E1,I0);return new yI(w,h,X6,I)}A.Compile=a})(Y8||(Y8={}));var ZY=C7(cI(),1),yT=C7(gJ(),1);var cT=C7(gJ(),1),YZ=C7(gJ(),1);var v4=Symbol.for("TypeBox.Kind"),IX1=Symbol.for("TypeBox.Hint"),sI=(A)=>/(\ |-|\t|\n)/.test(A)||!isNaN(+A[0]),aI=(A,F,B=!1)=>{if(typeof F==="number")return`${A}[${F}]`;if(sI(F))return`${A}${B?"?.":""}["${F}"]`;return`${A}${B?"?":""}.${F}`},TX1=(A)=>sI(A)?`"${A}"`:A,nI=(A,F=0,B)=>{if(B.type!=="string"||B.const||B.trusted)return A;let $="";for(let Z=F-1;Z>=0;Z--)$+=`d.h${Z}(`;return $+A+")".repeat(F)},tI=(A)=>{if(!A.allOf||v4 in A&&(A[v4]!=="Intersect"||A.type!=="object"))return A;let{allOf:F,...B}=A;if(B.properties={},v4 in B)B[v4]="Object";for(let $ of F){if($.type!=="object")continue;let{properties:Z,required:D,type:X,[v4]:J,...Y}=$;if(D)B.required=B.required?B.required.concat(D):D;Object.assign(B,Y);for(let W in $.properties)B.properties[W]=tI($.properties[W])}return B},OX1=(A,F,B)=>{let $=A.patternProperties["^(.*)$"]??A.patternProperties[Object.keys(A.patternProperties)[0]];if(!$)return F;let Z=B.array;return B.array++,`(()=>{const ar${Z}s=Object.keys(${F}),ar${Z}v={};for(let i=0;i<ar${Z}s.length;i++){const ar${Z}p=${F}[ar${Z}s[i]];ar${Z}v[ar${Z}s[i]]=${i8($,`ar${Z}p`,B)}}return ar${Z}v})()`},SX1=(A,F,B)=>{let $=B.array;B.array++;let Z=F==="v"&&!B.unions.length,D="";if(!Z)D="(()=>{";D+=`const ar${$}v=[`;for(let X=0;X<A.length;X++){if(X!==0)D+=",";D+=i8(A[X],aI(F,X,B.parentIsOptional),B)}if(D+="];",!Z)D+=`return ar${$}v})()`;return D};function uJ(A,F=new WeakMap){if(A===null||typeof A!=="object"||typeof A==="function")return A;if(F.has(A))return F.get(A);if(Array.isArray(A)){let B=new Array(A.length);F.set(A,B);for(let $=0;$<A.length;$++)B[$]=uJ(A[$],F);return B}if(typeof A==="object"){let B=Object.keys(A).concat(Object.getOwnPropertySymbols(A)),$={};for(let Z of B)$[Z]=uJ(A[Z],F);return $}return A}var kX1=(A,F,B)=>{if(B.TypeCompiler===void 0){if(!B.typeCompilerWanred)console.warn(new Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),B.typeCompilerWanred=!0;return F}B.unionKeys[F]=1;let $=B.unions.length,Z=B.unions[$]=[],D=`(()=>{
`,X=(J)=>{if(!(v4 in J)||!J.$ref)return J;if(J[v4]==="This")return uJ(B.definitions[J.$ref]);else if(J[v4]==="Ref")if(!B.modules)console.warn(new Error("[exact-mirror] modules is required when using nested cyclic reference"));else return B.modules.Import(J.$ref);return J};for(let J=0;J<A.length;J++){let Y=X(A[J]);if(Array.isArray(Y.anyOf))for(let W=0;W<Y.anyOf.length;W++)Y.anyOf[W]=X(Y.anyOf[W]);else if(Y.items)if(Array.isArray(Y.items))for(let W=0;W<Y.items.length;W++)Y.items[W]=X(Y.items[W]);else Y.items=X(Y.items);Z.push(Y8.Compile(Y)),D+=`if(d.unions[${$}][${J}].Check(${F})){return ${i8(Y,F,{...B,recursion:B.recursion+1,parentIsOptional:!0})}}
`}return D+=`return ${B.removeUnknownUnionType?"undefined":F}})()`,D},i8=(A,F,B)=>{if(!A)return"";let $=F==="v"&&!B.unions.length;if(v4 in A&&A[v4]==="Import"&&A.$ref in A.$defs)return i8(A.$defs[A.$ref],F,{...B,definitions:Object.assign(B.definitions,A.$defs)});if($&&A.type!=="object"&&A.type!=="array"&&!A.anyOf)return`return ${nI("v",B.sanitize?.length,A)}`;if(B.recursion>=B.recursionLimit)return F;let Z="";if(A.$id&&IX1 in A)B.definitions[A.$id]=A;switch(A.type){case"object":if(A[v4]==="Record"){Z=OX1(A,F,B);break}if(A=tI(A),Z+="{",A.additionalProperties)Z+=`...${F}`;let D=Object.keys(A.properties);for(let W=0;W<D.length;W++){let G=D[W],Q=A.required&&!A.required.includes(G)||Array.isArray(A.properties[G].anyOf),q=aI(F,G,B.parentIsOptional);if(Q){let H=B.array;if(F.startsWith("ar")){let U=q.slice(q.indexOf(".")+1),K=B.optionalsInArray;if(K[H])K[H].push(U);else K[H]=[U]}else B.optionals.push(q)}let z=A.properties[G];if(A.additionalProperties&&z.type!=="object")continue;if(W!==0)Z+=",";Z+=`${TX1(G)}:${Q?`${q}===undefined?undefined:`:""}${i8(z,q,{...B,recursion:B.recursion+1,parentIsOptional:Q})}`}Z+="}";break;case"array":if(A.items.type!=="object"&&A.items.type!=="array")if(Array.isArray(A.items)){Z=SX1(A.items,F,B);break}else if($)return"return v";else if(v4 in A.items&&A.items.$ref&&(A.items[v4]==="Ref"||A.items[v4]==="This"))Z=i8(uJ(B.definitions[A.items.$ref]),F,{...B,parentIsOptional:!0,recursion:B.recursion+1});else{Z=F;break}let X=B.array;B.array++;let J=F;if($)Z=`const ar${X}v=new Array(${F}.length);`;else J=`ar${X}s`,Z=`((${J})=>{const ar${X}v=new Array(${J}.length);`;Z+=`for(let i=0;i<${J}.length;i++){const ar${X}p=${J}[i];ar${X}v[i]=${i8(A.items,`ar${X}p`,B)}`;let Y=B.optionalsInArray[X+1];if(Y)for(let W=0;W<Y.length;W++){let G=`ar${X}v[i].${Y[W]}`;Z+=`;if(${G}===undefined)delete ${G}`}if(Z+="}",!$)Z+=`return ar${X}v})(${F})`;break;default:if(A.$ref&&A.$ref in B.definitions)return i8(B.definitions[A.$ref],F,B);if(Array.isArray(A.anyOf)){Z=kX1(A.anyOf,F,B);break}Z=nI(F,B.sanitize?.length,A);break}if(!$)return Z;if(A.type==="array")return`${Z}return ar0v`;Z=`const x=${Z}
`;for(let D=0;D<B.optionals.length;D++){let X=B.optionals[D],J=X.slice(1);if(Z+=`if(${X}===undefined`,B.unionKeys[X])Z+=`||x${J}===undefined`;Z+=`)delete x${J.charCodeAt(0)!==63?"?":""}${J}
`}return`${Z}return x`},uq=(A,{TypeCompiler:F,modules:B,definitions:$,sanitize:Z,recursionLimit:D=8,removeUnknownUnionType:X=!1}={})=>{let J=[];if(typeof Z==="function")Z=[Z];let Y=i8(A,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:J,unionKeys:{},TypeCompiler:F,modules:B,definitions:$??B?.$defs??{},sanitize:Z,recursion:0,recursionLimit:D,removeUnknownUnionType:X});if(!J.length&&!Z?.length)return Function("v",Y);let W;if(Z?.length){W={};for(let G=0;G<Z.length;G++)W[`h${G}`]=Z[G]}return Function("d",`return function mirror(v){${Y}}`)({unions:J,...W})};var _F=(A,F)=>{let B=F?.length?{}:null;if(B)for(let $ of F)B[$.part.charCodeAt(0)]=$;return{part:A,store:null,inert:B,params:null,wildcardStore:null}},rI=(A,F)=>({...A,part:F}),oI=(A)=>({name:A,store:null,inert:null}),eI=class A{constructor(F={}){this.config=F,F.lazy&&(this.find=this.lazyFind)}root={};history=[];deferred=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=(F,B)=>this.config.lazy?(this.build(),this.find(F,B)):this.find;build(){if(this.config.lazy){for(let[F,B,$]of this.deferred)this.add(F,B,$,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=(F,B)=>{let $=this.root[F];return $?pJ(B,B.length,$,0):null}}}add(F,B,$,{ignoreError:Z=!1,ignoreHistory:D=!1,lazy:X=this.config.lazy}={}){if(X)return this.find=this.lazyFind,this.deferred.push([F,B,$]),$;if(typeof B!="string")throw new TypeError("Route path must be a string");B===""?B="/":B[0]!=="/"&&(B=`/${B}`);let J=B[B.length-1]==="*",Y=B.match(A.regex.optionalParams);if(Y){let z=B.replaceAll("?","");this.add(F,z,$,{ignoreError:Z,ignoreHistory:D,lazy:X});for(let H=0;H<Y.length;H++){let U=B.replace(Y[H],"");this.add(F,U,$,{ignoreError:!0,ignoreHistory:D,lazy:X})}return $}if(Y&&(B=B.replaceAll("?","")),this.history.find(([z,H,U])=>z===F&&H===B))return $;(J||Y&&B.charCodeAt(B.length-1)===63)&&(B=B.slice(0,-1)),D||this.history.push([F,B,$]);let W=B.split(A.regex.static),G=B.match(A.regex.params)||[];W[W.length-1]===""&&W.pop();let Q;this.root[F]?Q=this.root[F]:Q=this.root[F]=_F("/");let q=0;for(let z=0;z<W.length;++z){let H=W[z];if(z>0){let U=G[q++].slice(1);if(Q.params===null)Q.params=oI(U);else if(Q.params.name!==U){if(Z)return $;throw new Error(`Cannot create route "${B}" with parameter "${U}" because a route already exists with a different parameter name ("${Q.params.name}") in the same location`)}let K=Q.params;if(K.inert===null){Q=K.inert=_F(H);continue}Q=K.inert}for(let U=0;;){if(U===H.length){if(U<Q.part.length){let K=rI(Q,Q.part.slice(U));Object.assign(Q,_F(H,[K]))}break}if(U===Q.part.length){Q.inert===null&&(Q.inert={});let K=Q.inert[H.charCodeAt(U)];if(K){Q=K,H=H.slice(U),U=0;continue}let E=_F(H.slice(U));Q.inert[H.charCodeAt(U)]=E,Q=E;break}if(H[U]!==Q.part[U]){let K=rI(Q,Q.part.slice(U)),E=_F(H.slice(U));Object.assign(Q,_F(Q.part.slice(0,U),[K,E])),Q=E;break}++U}}if(q<G.length){let z=G[q].slice(1);if(Q.params===null)Q.params=oI(z);else if(Q.params.name!==z){if(Z)return $;throw new Error(`Cannot create route "${B}" with parameter "${z}" because a route already exists with a different parameter name ("${Q.params.name}") in the same location`)}return Q.params.store===null&&(Q.params.store=$),Q.params.store}return J?(Q.wildcardStore===null&&(Q.wildcardStore=$),Q.wildcardStore):(Q.store===null&&(Q.store=$),Q.store)}find(F,B){let $=this.root[F];return $?pJ(B,B.length,$,0):null}},pJ=(A,F,B,$)=>{let Z=B.part,D=Z.length,X=$+D;if(D>1){if(X>F)return null;if(D<15){for(let J=1,Y=$+1;J<D;++J,++Y)if(Z.charCodeAt(J)!==A.charCodeAt(Y))return null}else if(A.slice($,X)!==Z)return null}if(X===F)return B.store!==null?{store:B.store,params:{}}:B.wildcardStore!==null?{store:B.wildcardStore,params:{"*":""}}:null;if(B.inert!==null){let J=B.inert[A.charCodeAt(X)];if(J!==void 0){let Y=pJ(A,F,J,X);if(Y!==null)return Y}}if(B.params!==null){let{store:J,name:Y,inert:W}=B.params,G=A.indexOf("/",X);if(G!==X){if(G===-1||G>=F){if(J!==null){let Q={};return Q[Y]=A.substring(X,F),{store:J,params:Q}}}else if(W!==null){let Q=pJ(A,F,W,G);if(Q!==null)return Q.params[Y]=A.substring(X,G),Q}}}return B.wildcardStore!==null?{store:B.wildcardStore,params:{"*":A.substring(X,F)}}:null},BH={date:PT,time:aq(!0),"date-time":AT(!0),"iso-time":aq(!1),"iso-date-time":AT(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:vX1,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:iX1,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:hX1,int32:{type:"number",validate:cX1},int64:{type:"number",validate:lX1},float:{type:"number",validate:BT},double:{type:"number",validate:BT},password:!0,binary:!0};function _X1(A){return A%4===0&&(A%100!==0||A%400===0)}var xX1=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,bX1=[0,31,28,31,30,31,30,31,31,30,31,30,31];function PT(A){let F=xX1.exec(A);if(!F)return!1;let B=+F[1],$=+F[2],Z=+F[3];return $>=1&&$<=12&&Z>=1&&Z<=($===2&&_X1(B)?29:bX1[$])}var fX1=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function aq(A){return function(F){let B=fX1.exec(F);if(!B)return!1;let $=+B[1],Z=+B[2],D=+B[3],X=B[4],J=B[5]==="-"?-1:1,Y=+(B[6]||0),W=+(B[7]||0);if(Y>23||W>59||A&&!X)return!1;if($<=23&&Z<=59&&D<60)return!0;let G=Z-W*J,Q=$-Y*J-(G<0?1:0);return(Q===23||Q===-1)&&(G===59||G===-1)&&D<61}}var jT=(A)=>A.charCodeAt(A.length-6)===32?A.slice(0,-6)+"+"+A.slice(-5):A,gX1=/t|\s/i;function AT(A){let F=aq(A);return function(B){let $=B.split(gX1);return $.length===2&&PT($[0])&&F($[1])}}var uX1=/\/|:/,yX1=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function vX1(A){return uX1.test(A)&&yX1.test(A)}var FT=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function hX1(A){return FT.lastIndex=0,FT.test(A)}var dX1=-2147483648,mX1=2147483647;function cX1(A){return Number.isInteger(A)&&A<=mX1&&A>=dX1}function lX1(A){return Number.isInteger(A)}function BT(){return!0}var pX1=/[^\\]\\Z/;function iX1(A){if(pX1.test(A))return!1;try{return new RegExp(A),!0}catch{return!1}}var IT=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,TT=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,OT=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,nX1=BH.date,sX1=BH["date-time"];T0.Has("date")||T0.Set("date",(A)=>{let F=jT(A).replace(/"/g,"");if(IT.test(F)||TT.test(F)||OT.test(F)||nX1(F)){let B=new Date(F);if(!Number.isNaN(B.getTime()))return!0}return!1});T0.Has("date-time")||T0.Set("date-time",(A)=>{let F=A.replace(/"/g,"");if(IT.test(F)||TT.test(F)||OT.test(F)||sX1(F)){let B=new Date(F);if(!Number.isNaN(B.getTime()))return!0}return!1});Object.entries(BH).forEach((A)=>{let[F,B]=A;T0.Has(F)||(B instanceof RegExp?T0.Set(F,($)=>B.test($)):typeof B=="function"&&T0.Set(F,B))});T0.Has("numeric")||T0.Set("numeric",(A)=>!!A&&!isNaN(+A));T0.Has("integer")||T0.Set("integer",(A)=>!!A&&Number.isInteger(+A));T0.Has("boolean")||T0.Set("boolean",(A)=>A==="true"||A==="false");T0.Has("ObjectString")||T0.Set("ObjectString",(A)=>{let F=A.charCodeAt(0);if((F===9||F===10||F===32)&&(F=A.trimStart().charCodeAt(0)),F!==123&&F!==91)return!1;try{return JSON.parse(A),!0}catch{return!1}});T0.Has("ArrayString")||T0.Set("ArrayString",(A)=>{let F=A.charCodeAt(0);if((F===9||F===10||F===32)&&(F=A.trimStart().charCodeAt(0)),F!==123&&F!==91)return!1;try{return JSON.parse(A),!0}catch{return!1}});var gF=typeof Bun<"u",aX1={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},tX1=(A)=>{let F=A.lastIndexOf(".");return F===-1?"":A.slice(F+1)};var yq,vq,tq=class{constructor(A){if(this.path=A,gF)this.value=Bun.file(A);else if(typeof window<"u")console.warn("Browser environment does not support file");else if(!yq||!vq)try{this.value=import("fs").then((F)=>(yq=F.createReadStream,F.createReadStream(A))),this.stats=import("fs/promises").then((F)=>(vq=F.stat,F.stat(A)))}catch{}else this.value=yq(A),this.stats=vq(A)}get type(){return aX1[tX1(this.path)]||"application/octet-stream"}get length(){return gF?this.value.size:this.stats?.then((A)=>A.size)??0}},iJ="toJSON"in new Headers,$T=(A,F)=>{let B=new URL(A);return B.pathname=F,B.toString()},rX1=(A)=>typeof A=="function"&&/^\s*class\s+/.test(A.toString())||A.toString&&A.toString().startsWith("[object ")&&A.toString()!=="[object Object]"||o0(Object.getPrototypeOf(A)),hq=(A)=>A&&typeof A=="object"&&!Array.isArray(A),d4=(A,F,B)=>{let $=B?.skipKeys,Z=B?.override??!0;if(!hq(A)||!hq(F))return A;for(let[D,X]of Object.entries(F))if(!$?.includes(D)){if(!hq(X)||!(D in A)||rX1(X)){(Z||!(D in A))&&(A[D]=X);continue}A[D]=d4(A[D],X,{skipKeys:$,override:Z})}return A},ST=(A,F)=>{let B=d4(Object.assign({},A),F,{skipKeys:["properties"]});return B.properties&&delete B.properties,B},M2=(A,F)=>{if(!F)return A;let B=[],$=[];if(A){Array.isArray(A)||(A=[A]);for(let Z of A)B.push(Z),Z.checksum&&$.push(Z.checksum)}if(F){Array.isArray(F)||(F=[F]);for(let Z of F)$.includes(Z.checksum)||B.push(Z)}return B},oX1=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],eX1=oX1.reduce((A,F)=>(A[F]=!0,A),{}),kT=(A,F)=>{let B=($)=>typeof $=="object"&&Object.keys($).every($H);return B(A)&&B(F)?Object.assign(A,F):A&&!B(A)&&B(F)?Object.assign({200:A},F):F??A},o$=(A,F)=>!A&&!F?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:{body:F?.body??A?.body,headers:F?.headers??A?.headers,params:F?.params??A?.params,query:F?.query??A?.query,cookie:F?.cookie??A?.cookie,response:kT(A?.response,F?.response)},n8=(A,F)=>{if(!Object.values(F).find(($)=>$!=null))return{...A};let B={...A,...F,body:F?.body??A?.body,headers:F?.headers??A?.headers,params:F?.params??A?.params,query:F?.query??A?.query,cookie:F?.cookie??A?.cookie,response:kT(A?.response,F?.response),type:A?.type||F?.type,detail:d4(F?.detail??{},A?.detail??{}),parse:M2(A?.parse,F?.parse),transform:M2(A?.transform,F?.transform),beforeHandle:M2(M2(G6(A?.resolve,"resolve"),A?.beforeHandle),M2(G6(F.resolve,"resolve"),F?.beforeHandle)),afterHandle:M2(A?.afterHandle,F?.afterHandle),mapResponse:M2(A?.mapResponse,F?.mapResponse),afterResponse:M2(A?.afterResponse,F?.afterResponse),trace:M2(A?.trace,F?.trace),error:M2(A?.error,F?.error)};return B.resolve&&delete B.resolve,B},AJ1=(A)=>{A.parse&&!Array.isArray(A.parse)&&(A.parse=[A.parse]),A.transform&&!Array.isArray(A.transform)&&(A.transform=[A.transform]),A.afterHandle&&!Array.isArray(A.afterHandle)&&(A.afterHandle=[A.afterHandle]),A.mapResponse&&!Array.isArray(A.mapResponse)&&(A.mapResponse=[A.mapResponse]),A.afterResponse&&!Array.isArray(A.afterResponse)&&(A.afterResponse=[A.afterResponse]),A.trace&&!Array.isArray(A.trace)&&(A.trace=[A.trace]),A.error&&!Array.isArray(A.error)&&(A.error=[A.error]);let F=[];return A.resolve&&(F=G6(Array.isArray(A.resolve)?A.resolve:[A.resolve],"resolve"),delete A.resolve),A.beforeHandle&&(F.length?F=F.concat(Array.isArray(A.beforeHandle)?A.beforeHandle:[A.beforeHandle]):F=Array.isArray(A.beforeHandle)?A.beforeHandle:[A.beforeHandle]),F.length&&(A.beforeHandle=F),A},FJ1=typeof Bun<"u",BJ1=FJ1&&typeof Bun.hash=="function",bF=(A)=>{if(BJ1)return Bun.hash(A);let F=9;for(let B=0;B<A.length;)F=Math.imul(F^A.charCodeAt(B++),387420489);return F=F^F>>>9},x7=(A,F)=>{if(!F)return;if(!Array.isArray(F)){let $=F;return A&&!$.checksum&&($.checksum=A),$.scope==="scoped"&&($.scope="local"),$}let B=[...F];for(let $ of B)A&&!$.checksum&&($.checksum=A),$.scope==="scoped"&&($.scope="local");return B},ZT=(A,F,B)=>({start:M2(A.start,x7(B,F?.start)),request:M2(A.request,x7(B,F?.request)),parse:M2(A.parse,x7(B,F?.parse)),transform:M2(A.transform,x7(B,F?.transform)),beforeHandle:M2(M2(G6(A.resolve,"resolve"),A.beforeHandle),x7(B,M2(G6(F?.resolve,"resolve"),F?.beforeHandle))),afterHandle:M2(A.afterHandle,x7(B,F?.afterHandle)),mapResponse:M2(A.mapResponse,x7(B,F?.mapResponse)),afterResponse:M2(A.afterResponse,x7(B,F?.afterResponse)),trace:M2(A.trace,x7(B,F?.trace)),error:M2(A.error,x7(B,F?.error)),stop:M2(A.stop,x7(B,F?.stop))}),$J1=(A,F,{skipIfHasType:B=!1})=>{if(!A)return A;if(!Array.isArray(A))return B?A.scope??=F:A.scope=F,A;for(let $ of A)B?$.scope??=F:$.scope=F;return A},l3=(A)=>{if(!A)return A;if(!Array.isArray(A))switch(A.scope){case"global":case"scoped":return{...A};default:return{fn:A}}let F=[];for(let B of A)switch(B.scope){case"global":case"scoped":F.push({...B});break}return F},DT=(A)=>({...A,type:A?.type,detail:A?.detail,parse:l3(A?.parse),transform:l3(A?.transform),beforeHandle:l3(A?.beforeHandle),afterHandle:l3(A?.afterHandle),mapResponse:l3(A?.mapResponse),afterResponse:l3(A?.afterResponse),error:l3(A?.error),trace:l3(A?.trace)}),FY={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},XT=Object.fromEntries(Object.entries(FY).map(([A,F])=>[F,A]));function ZJ1(A){let F=A;for(;F.endsWith("=");)F=F.slice(0,-1);return F}var JT=new TextEncoder,nJ=async(A,F)=>{if(typeof A!="string")throw new TypeError("Cookie value must be provided as a string.");if(F===null)throw new TypeError("Secret key must be provided.");let B=await crypto.subtle.importKey("raw",JT.encode(F),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),$=await crypto.subtle.sign("HMAC",B,JT.encode(A));return A+"."+ZJ1(Buffer.from($).toString("base64"))},YT=async(A,F)=>{if(typeof A!="string")throw new TypeError("Signed cookie string must be provided.");if(F===null)throw new TypeError("Secret key must be provided.");let B=A.slice(0,A.lastIndexOf("."));return await nJ(B,F)===A?B:!1},DJ1=(A,F,B)=>{if(!(!A||typeof A!="object"||!F))for(let[$,Z]of Object.entries(F)){if(eX1[$]||!($ in A))continue;let D=A[$];if(typeof D=="function"){let X=D(Z);if(typeof X=="object")for(let[J,Y]of Object.entries(X))B(J)({fn:Y})}delete F[$]}},XJ1=({globalHook:A,localHook:F})=>(B)=>($,Z)=>{if(typeof $=="function"&&($={fn:$}),B==="resolve"&&($={...$,subType:"resolve"}),F[B]||(F[B]=[]),typeof F[B]=="function"&&(F[B]=[F[B]]),Array.isArray(F[B])||(F[B]=[F[B]]),"fn"in $||Array.isArray($)){Array.isArray($)?F[B]=F[B].concat($):F[B].push($);return}let{insert:D="after",stack:X="local"}=$;typeof Z=="function"&&(Z={fn:Z}),X==="global"?Array.isArray(Z)?D==="before"?A[B]=Z.concat(A[B]):A[B]=A[B].concat(Z):D==="before"?A[B].unshift(Z):A[B].push(Z):Array.isArray(Z)?D==="before"?F[B]=Z.concat(F[B]):F[B]=F[B].concat(Z):D==="before"?F[B].unshift(Z):F[B].push(Z)},JJ1=(A)=>{if(typeof A=="number")return A;if(A.length<16){if(A.trim().length===0)return null;let F=Number(A);return Number.isNaN(F)?null:F}if(A.length===16){if(A.trim().length===0)return null;let F=Number(A);return Number.isNaN(F)||F.toString()!==A?null:F}return null},$H=(A)=>JJ1(A)!==null,YJ1=class{constructor(A=console.error,F=()=>{}){this.onError=A,this.onFinally=F,this.root=null,this.promises=[]}get size(){return this.promises.length}add(A){return this.promises.push(A),this.root||=this.drain(),this.promises.length===1&&this.then(this.onFinally),A}async drain(){for(;this.promises.length>0;){try{await this.promises[0]}catch(A){this.onError(A)}this.promises.shift()}this.root=null}then(A,F){return(this.root??Promise.resolve()).then(A,F)}},G6=(A,F)=>{if(!A)return A;if(!Array.isArray(A)){if(typeof A=="function"||typeof A=="string")return F?{fn:A,subType:F}:{fn:A};if("fn"in A)return A}let B=[];for(let $ of A)typeof $=="function"||typeof $=="string"?B.push(F?{fn:$,subType:F}:{fn:$}):("fn"in $)&&B.push($);return B},WT=(A)=>(A.start&&(A.start=G6(A.start)),A.request&&(A.request=G6(A.request)),A.parse&&(A.parse=G6(A.parse)),A.transform&&(A.transform=G6(A.transform)),A.beforeHandle&&(A.beforeHandle=G6(A.beforeHandle)),A.afterHandle&&(A.afterHandle=G6(A.afterHandle)),A.mapResponse&&(A.mapResponse=G6(A.mapResponse)),A.afterResponse&&(A.afterResponse=G6(A.afterResponse)),A.trace&&(A.trace=G6(A.trace)),A.error&&(A.error=G6(A.error)),A.stop&&(A.stop=G6(A.stop)),A),GT=(A)=>{let F=Object.create(null);return A.start?.map&&(F.start=A.start.map((B)=>B.fn)),A.request?.map&&(F.request=A.request.map((B)=>B.fn)),A.parse?.map&&(F.parse=A.parse.map((B)=>B.fn)),A.transform?.map&&(F.transform=A.transform.map((B)=>B.fn)),A.beforeHandle?.map&&(F.beforeHandle=A.beforeHandle.map((B)=>B.fn)),A.afterHandle?.map&&(F.afterHandle=A.afterHandle.map((B)=>B.fn)),A.mapResponse?.map&&(F.mapResponse=A.mapResponse.map((B)=>B.fn)),A.afterResponse?.map&&(F.afterResponse=A.afterResponse.map((B)=>B.fn)),A.error?.map&&(F.error=A.error.map((B)=>B.fn)),A.stop?.map&&(F.stop=A.stop.map((B)=>B.fn)),A.trace?.map?F.trace=A.trace.map((B)=>B.fn):F.trace=[],F},QT=(A)=>({body:A.body,cookie:A.cookie,headers:A.headers,query:A.query,set:A.set,server:A.server,path:A.path,route:A.route,url:A.url}),ZH=(A,F=302)=>Response.redirect(A,F),$A=Symbol("ElysiaFormData"),WZ=Symbol("ElysiaRequestId"),WJ1=(A)=>{let F=new FormData;if(F[$A]={},A)for(let[B,$]of Object.entries(A)){if(Array.isArray($)){F[$A][B]=[];for(let Z of $)$ instanceof File?F.append(B,$,$.name):$ instanceof tq?F.append(B,$.value,$.value?.name):F.append(B,$),F[$A][B].push($);continue}$ instanceof File?F.append(B,$,$.name):$ instanceof tq?F.append(B,$.value,$.value?.name):F.append(B,$),F[$A][B]=$}return F},BY=()=>{let A=crypto.randomUUID();return A.slice(0,8)+A.slice(24,32)},zT=(A)=>{if(!A.length)return[];let F=[];for(let B=0;B<A.length;B++){let $=A[B];$.checksum&&(F.includes($.checksum)&&(A.splice(B,1),B--),F.push($.checksum))}return A},p3=(A,F="scoped")=>{if(A){if(F==="scoped"){for(let B of A)"scope"in B&&B.scope==="local"&&(B.scope="scoped");return}for(let B of A)"scope"in B&&(B.scope="global")}},FZ=(A)=>A.charCodeAt(A.length-1)===47?A.slice(0,A.length-1):A+"/",o0=(A)=>{if(!A)return!1;for(let F in A)return!0;return!1},BZ=(A,{dynamic:F=!1}={})=>{let B=encodeURIComponent(A).replace(/%2F/g,"/");return F&&(B=B.replace(/%3A/g,":").replace(/%3F/g,"?")),B},_T=(()=>{if(typeof Bun>"u")return!0;let A=Bun.version.split(".");return!(+A[0]<1||+A[1]<2||+A[2]<14)})();var qT=typeof Bun<"u"?Bun.env:typeof process<"u"?process?.env:void 0,sJ=Symbol("ElysiaErrorCode"),XZ=(qT?.NODE_ENV??qT?.ENV)==="production",GJ1={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0},E4=class{constructor(A,F){let B=F??(A in XT?XT[A]:A);this.code=FY[A]??A,A in GJ1?this.response=void 0:this.response=B}},aJ=(A,F)=>new E4(A,F);var xT=class extends Error{constructor(A){super(A??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},QJ1=class extends Error{constructor(A){super("Bad Request",{cause:A});this.code="PARSE",this.status=400}},HT=class extends Error{constructor(A,F){super(F??`"${A}" has invalid cookie signature`);this.key=A,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},f7=(A)=>{if(!A)return{summary:void 0};let{message:F,path:B,value:$,type:Z}=A,D=B.slice(1).replaceAll("/","."),X=B==="";switch(Z){case 42:return{...A,summary:X?"Value should not be provided":`Property '${D}' should not be provided`};case 45:return{...A,summary:X?"Value is missing":`Property '${D}' is missing`};case 50:let J=F.indexOf("'"),Y=F.slice(J+1,F.indexOf("'",J+1));return{...A,summary:X?"Value should be an email":`Property '${D}' should be ${Y}`};case 54:return{...A,summary:`${F.slice(0,9).trim()} property '${D}' to be ${F.slice(8).trim()} but found: ${$}`};case 62:let W=A.schema.anyOf.map((G)=>`'${G?.format??G.type}'`).join(", ");return{...A,summary:X?`Value should be one of ${W}`:`Property '${D}' should be one of: ${W}`};default:return{summary:F,...A}}},dq=class A extends Error{constructor(F,B,$=`"${F}" has invalid file type`){super($);this.property=F,this.expected=B,this.message=$,this.code="INVALID_FILE_TYPE",this.status=422,Object.setPrototypeOf(this,A.prototype)}toResponse(F){return XZ?new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...F,"content-type":"application/json"}}):new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...F,"content-type":"application/json"}})}},G2=class A extends Error{constructor(F,B,$,Z){$&&typeof $=="object"&&$ instanceof E4&&($=$.response);let D=Z?.First()||(XZ?void 0:("Errors"in B)?B.Errors($).First():j0.Errors(B,$).First()),X=D?.schema?.message||D?.schema?.error!==void 0?typeof D.schema.error=="function"?D.schema.error({type:F,validator:B,value:$,get errors(){return[...B.Errors($)].map(f7)}}):D.schema.error:void 0,J=D?.path||"root",Y="";if(X!==void 0)Y=typeof X=="object"?JSON.stringify(X):X+"";else if(XZ)Y=JSON.stringify({type:"validation",on:F,summary:f7(D).summary,message:D?.message,found:$});else{let W=B?.schema??B,G="Errors"in B?[...B.Errors($)].map(f7):[...j0.Errors(B,$)].map(f7),Q;try{Q=j0.Create(W)}catch(q){Q={type:"Could not create expected value",message:q?.message,error:q}}Y=JSON.stringify({type:"validation",on:F,summary:f7(D).summary,property:J,message:D?.message,expected:Q,found:$,errors:G},null,2)}super(Y);this.type=F,this.validator=B,this.value=$,this.code="VALIDATION",this.status=422,Object.setPrototypeOf(this,A.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(f7):[...j0.Errors(this.validator,this.value)].map(f7)}static simplifyModel(F){let B="schema"in F?F.schema:F;try{return j0.Create(B)}catch{return B}}get model(){return A.simplifyModel(this.validator)}toResponse(F){return new Response(this.message,{status:400,headers:{...F,"content-type":"application/json"}})}},yJ=(A,F)=>{try{return JSON.parse(A)}catch{throw new G2("property",F,A)}};function $Y(A,F){return J6.Has(A)||J6.Set(A,F),(B={})=>RJ({...B,[g]:A})}var FA=(A)=>{try{let F=Y8.Compile(A);return F.Create=()=>j0.Create(A),F.Error=(B)=>new G2("property",A,B,F.Errors(B)),F}catch{return{Check:(F)=>j0.Check(A,F),CheckThrow:(F)=>{if(!j0.Check(A,F))throw new G2("property",A,F,j0.Errors(A,F))},Decode:(F)=>j0.Decode(A,F),Create:()=>j0.Create(A),Error:(F)=>new G2("property",A,F,j0.Errors(A,F))}}},UT=(A)=>{if(typeof A=="string")switch(A.slice(-1)){case"k":return+A.slice(0,A.length-1)*1024;case"m":return+A.slice(0,A.length-1)*1048576;default:return+A}return A},tJ=(A,F)=>A.startsWith(F)?!0:F.charCodeAt(F.length-1)===42&&F.charCodeAt(F.length-2)===47&&A.startsWith(F.slice(0,-1)),CT=!1,zJ1=()=>{CT||(console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),CT=!0)},DH=async()=>import("file-type").then((A)=>(rJ=A.fileTypeFromBlob,rJ)).catch(zJ1),rJ,qJ1=(A)=>rJ?rJ(A):DH().then((F)=>{if(F)return F(A)}),bT=async(A,F,B=A?.name??"")=>{if(Array.isArray(A))return await Promise.all(A.map((Z)=>bT(Z,F,B))),!0;if(!A)return!1;let $=await qJ1(A);if(!$)throw new dq(B,F);if(typeof F=="string"&&!tJ($.mime,F))throw new dq(B,F);for(let Z=0;Z<F.length;Z++)if(tJ($.mime,F[Z]))return!0;throw new dq(B,F)},rq=(A,F)=>{if(F instanceof tq)return!0;if(!(F instanceof Blob)||A.minSize&&F.size<UT(A.minSize)||A.maxSize&&F.size>UT(A.maxSize))return!1;if(A.extension){if(typeof A.extension=="string")return tJ(F.type,A.extension);for(let B=0;B<A.extension.length;B++)if(tJ(F.type,A.extension[B]))return!0;return!1}return!0},F1=Object.assign({},d8);$Y("UnionEnum",(A,F)=>(typeof F=="number"||typeof F=="string"||F===null)&&A.enum.includes(F));var HJ1=$Y("Files",(A,F)=>{if(!Array.isArray(F))return rq(A,F);if(A.minItems&&F.length<A.minItems||A.maxItems&&F.length>A.maxItems)return!1;for(let B=0;B<F.length;B++)if(!rq(A,F[B]))return!1;return!0}),UJ1=$Y("ElysiaForm",({compiler:A,...F},B)=>{if(!(B instanceof FormData))return!1;if(A){if(!($A in B))throw new G2("property",F,B);if(!A.Check(B[$A]))throw A.Error(B[$A])}return!0}),c4={String:(A)=>d8.String(A),Numeric:(A)=>{let F=d8.Number(A),B=FA(F);return F1.Transform(F1.Union([F1.String({format:"numeric",default:0}),F1.Number(A)],A)).Decode(($)=>{let Z=+$;if(isNaN(Z))return $;if(A&&!B.Check(Z))throw B.Error($);return Z}).Encode(($)=>$)},Integer:(A)=>{let F=d8.Integer(A),B=FA(F);return F1.Transform(F1.Union([F1.String({format:"integer",default:0}),d8.Integer(A)],A)).Decode(($)=>{let Z=+$;if(!B.Check(Z))throw B.Error(Z);return Z}).Encode(($)=>$)},Date:(A)=>{let F=d8.Date(A),B=FA(F),$=A?.default?new Date(A.default):void 0;return F1.Transform(F1.Union([d8.Date(A),F1.String({format:"date-time",default:$?.toISOString()}),F1.String({format:"date",default:$?.toISOString()}),F1.Number({default:$?.getTime()})],A)).Decode((Z)=>{if(typeof Z=="number"){let X=new Date(Z);if(!B.Check(X))throw B.Error(X);return X}if(Z instanceof Date)return Z;let D=new Date(jT(Z));if(!D||isNaN(D.getTime()))throw new G2("property",F,D);if(!B.Check(D))throw B.Error(D);return D}).Encode((Z)=>Z.toISOString())},BooleanString:(A)=>{let F=d8.Boolean(A),B=FA(F);return F1.Transform(F1.Union([F1.Boolean(A),F1.String({format:"boolean",default:!1})],A)).Decode(($)=>{if(typeof $=="string")return $==="true";if($!==void 0&&!B.Check($))throw B.Error($);return $}).Encode(($)=>$)},ObjectString:(A,F)=>{let B=F1.Object(A,F),$=FA(B),Z=JSON.stringify($.Create());return F1.Transform(F1.Union([F1.String({format:"ObjectString",default:Z}),B])).Decode((D)=>{if(typeof D=="string"){if(D.charCodeAt(0)!==123)throw new G2("property",B,D);if(!$.Check(D=yJ(D,B)))throw $.Error(D);return $.Decode(D)}return D}).Encode((D)=>{let X;if(typeof D=="string"&&(D=yJ(X=D,B)),!$.Check(D))throw $.Error(D);return X??JSON.stringify(D)})},ArrayString:(A=F1.String(),F)=>{let B=F1.Array(A,F),$=FA(B),Z=(D,X=!1)=>{if(D.charCodeAt(0)===91){if(!$.Check(D=yJ(D,B)))throw $.Error(D);return $.Decode(D)}if(D.indexOf(",")!==-1){if(!$.Check(D))throw $.Error(D);return $.Decode(D)}if(X)return D;throw new G2("property",B,D)};return F1.Transform(F1.Union([F1.String({format:"ArrayString",default:F?.default}),B])).Decode((D)=>{if(Array.isArray(D)){let X=[];for(let J=0;J<D.length;J++){let Y=D[J];if(typeof Y=="string"){let W=Z(Y,!0);Array.isArray(W)?X=X.concat(W):X.push(W);continue}X.push(Y)}return X}return typeof D=="string"?Z(D):D}).Encode((D)=>{let X;if(typeof D=="string"&&(D=yJ(X=D,B)),!$.Check(D))throw new G2("property",B,D);return X??JSON.stringify(D)})},File:$Y("File",rq),Files:(A={})=>F1.Transform(HJ1(A)).Decode((F)=>Array.isArray(F)?F:[F]).Encode((F)=>F),Nullable:(A,F)=>F1.Union([A,F1.Null()],F),MaybeEmpty:(A,F)=>F1.Union([A,F1.Null(),F1.Undefined()],F),Cookie:(A,{domain:F,expires:B,httpOnly:$,maxAge:Z,path:D,priority:X,sameSite:J,secure:Y,secrets:W,sign:G,...Q}={})=>{let q=F1.Object(A,Q);return q.config={domain:F,expires:B,httpOnly:$,maxAge:Z,path:D,priority:X,sameSite:J,secure:Y,secrets:W,sign:G},q},UnionEnum:(A,F={})=>{let B=A.every(($)=>typeof $=="string")?{type:"string"}:A.every(($)=>typeof $=="number")?{type:"number"}:A.every(($)=>$===null)?{type:"null"}:{};if(A.some(($)=>typeof $=="object"&&$!==null))throw new Error("This type does not support objects or arrays");return{default:A[0],...F,[g]:"UnionEnum",...B,enum:A}},NoValidate:(A,F=!0)=>(A.noValidate=F,A),Form:(A,F={})=>{let B=F1.Object(A,{default:WJ1({}),...F}),$=FA(B);return F1.Union([B,UJ1({compiler:$})])}};F1.BooleanString=c4.BooleanString;F1.ObjectString=c4.ObjectString;F1.ArrayString=c4.ArrayString;F1.Numeric=c4.Numeric;F1.Integer=c4.Integer;F1.File=(A)=>(A?.type&&DH(),c4.File({default:"File",...A,extension:A?.type,type:"string",format:"binary"}));F1.Files=(A)=>(A?.type&&DH(),c4.Files({...A,elysiaMeta:"Files",default:"Files",extension:A?.type,type:"array",items:{...A,default:"Files",type:"string",format:"binary"}}));F1.Nullable=(A)=>c4.Nullable(A);F1.MaybeEmpty=c4.MaybeEmpty;F1.Cookie=c4.Cookie;F1.Date=c4.Date;F1.UnionEnum=c4.UnionEnum;F1.NoValidate=c4.NoValidate;F1.Form=c4.Form;var CJ1=(A)=>{A.startsWith("async")&&(A=A.slice(5)),A=A.trimStart();let F=-1;if(A.charCodeAt(0)===40&&(F=A.indexOf("=>",A.indexOf(")")),F!==-1)){let Z=F;for(;Z>0&&A.charCodeAt(--Z)!==41;);let D=A.slice(F+2);return D.charCodeAt(0)===32&&(D=D.trimStart()),[A.slice(1,Z),D,{isArrowReturn:D.charCodeAt(0)!==123}]}if(/^(\w+)=>/g.test(A)&&(F=A.indexOf("=>"),F!==-1)){let Z=A.slice(F+2);return Z.charCodeAt(0)===32&&(Z=Z.trimStart()),[A.slice(0,F),Z,{isArrowReturn:Z.charCodeAt(0)!==123}]}if(A.startsWith("function")){F=A.indexOf("(");let Z=A.indexOf(")");return[A.slice(F+1,Z),A.slice(Z+2),{isArrowReturn:!1}]}let B=A.indexOf("(");if(B!==-1){let Z=A.indexOf(`
`,2),D=A.slice(0,Z),X=D.lastIndexOf(")")+1,J=A.slice(Z+1);return[D.slice(B,X),"{"+J,{isArrowReturn:!1}]}let $=A.split(`
`,2);return[$[0],$[1],{isArrowReturn:!1}]},KJ1=(A)=>{let F=A.indexOf("{");if(F===-1)return[-1,0];let B=F+1,$=1;for(;B<A.length;B++){let Z=A.charCodeAt(B);if(Z===123?$++:Z===125&&$--,$===0)break}return $!==0?[0,A.length]:[F,B+1]},EJ1=(A)=>{let F=A.lastIndexOf("}");if(F===-1)return[-1,0];let B=F-1,$=1;for(;B>=0;B--){let Z=A.charCodeAt(B);if(Z===125?$++:Z===123&&$--,$===0)break}return $!==0?[-1,0]:[B,F+1]},fT=(A)=>{for(;;){let F=A.indexOf(":");if(F===-1)break;let B=A.indexOf(",",F);B===-1&&(B=A.indexOf("}",F)-1),B===-2&&(B=A.length),A=A.slice(0,F)+A.slice(B)}return A},gT=(A)=>{let F=!1;A.charCodeAt(0)===40&&(A=A.slice(1,-1)),A.charCodeAt(0)===123&&(F=!0,A=A.slice(1,-1)),A=A.replace(/( |\t|\n)/g,"").trim();let B=[];for(;;){let[Z,D]=KJ1(A);if(Z===-1)break;B.push(A.slice(0,Z-1)),A.charCodeAt(D)===44&&D++,A=A.slice(D)}A=fT(A),A&&(B=B.concat(A.split(",")));let $=Object.create(null);for(let Z of B){if(Z.indexOf(",")===-1){$[Z]=!0;continue}for(let D of Z.split(","))$[D.trim()]=!0}return{hasParenthesis:F,parameters:$}},LJ1=(A,F)=>{let{parameters:B,hasParenthesis:$}=gT(A);return B.query&&(F.query=!0),B.headers&&(F.headers=!0),B.body&&(F.body=!0),B.cookie&&(F.cookie=!0),B.set&&(F.set=!0),B.server&&(F.server=!0),B.route&&(F.route=!0),B.url&&(F.url=!0),B.path&&(F.path=!0),$?`{ ${Object.keys(B).join(", ")} }`:Object.keys(B).join(", ")},KT=(A,F,B)=>{let $=new RegExp(`${A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);B!==void 0&&($.lastIndex=B);let Z=$.exec(F);return Z?Z.index:-1},uT=(A,F,B=0)=>{if(B>5)return[];let $=[],Z=F;for(;;){let D=KT(" = "+A,Z);if(D===-1&&(D=KT("="+A,Z)),D===-1){let W=Z.indexOf(" = "+A);if(W===-1&&(W=Z.indexOf("="+A)),W+3+A.length!==Z.length)break;D=W}let X=Z.slice(0,D),J=X.lastIndexOf(" "),Y=X.slice(J!==-1?J+1:-1);if(Y==="}"){let[W,G]=EJ1(X);$.push(fT(Z.slice(W,G))),Z=Z.slice(D+3+A.length);continue}for(;Y.charCodeAt(0)===44;)Y=Y.slice(1);for(;Y.charCodeAt(0)===9;)Y=Y.slice(1);Y.includes("(")||$.push(Y),Z=Z.slice(D+3+A.length)}for(let D of $){if(D.charCodeAt(0)===123)continue;let X=uT(D,F);X.length>0&&$.push(...X)}return $},wJ1=(A)=>{if(!A)return;if(A.charCodeAt(0)!==123)return A;if(A=A.slice(2,-2),!A.includes(","))return A.indexOf("...")!==-1?A.slice(A.indexOf("...")+3):void 0;let F=A.indexOf("...");if(F!==-1)return A.slice(F+3).trimEnd()},VJ1=(A,F,B)=>{let $=(Z,D)=>new RegExp(`${D}\\.(${Z})|${D}\\["${Z}"\\]|${D}\\['${Z}'\\]`).test(A);for(let Z of F)if(Z){if(Z.charCodeAt(0)===123){let D=gT(Z).parameters;D.query&&(B.query=!0),D.headers&&(B.headers=!0),D.body&&(B.body=!0),D.cookie&&(B.cookie=!0),D.set&&(B.set=!0),D.server&&(B.server=!0),D.url&&(B.url=!0),D.route&&(B.route=!0),D.path&&(B.path=!0);continue}if(!B.query&&($("query",Z)||A.includes("return "+Z)||A.includes("return "+Z+".query"))&&(B.query=!0),!B.headers&&$("headers",Z)&&(B.headers=!0),!B.body&&$("body",Z)&&(B.body=!0),!B.cookie&&$("cookie",Z)&&(B.cookie=!0),!B.set&&$("set",Z)&&(B.set=!0),!B.server&&$("server",Z)&&(B.server=!0),!B.route&&$("route",Z)&&(B.route=!0),!B.url&&$("url",Z)&&(B.url=!0),!B.path&&$("path",Z)&&(B.path=!0),B.query&&B.headers&&B.body&&B.cookie&&B.set&&B.server&&B.route&&B.url&&B.path)break}return F},NJ1=(A,F,B)=>{try{let $=new RegExp(`\\w\\((.*?)?${A}`,"gs");$.test(F);let Z=F.charCodeAt($.lastIndex);return Z===41||Z===44?(B.query=!0,B.headers=!0,B.body=!0,B.cookie=!0,B.set=!0,B.server=!0,B.url=!0,B.route=!0,B.path=!0,!0):!1}catch{return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(F),console.log("--- context ---"),console.log(A),!0}},vJ,cJ={},ET=(A=0)=>{vJ&&clearTimeout(vJ),vJ=setTimeout(()=>{cJ={},vJ=void 0,gF&&Bun.gc(!1)},A)},oq=(A,F)=>({body:A.body||F.body,cookie:A.cookie||F.cookie,headers:A.headers||F.headers,query:A.query||F.query,set:A.set||F.set,server:A.server||F.server,url:A.url||F.url,route:A.route||F.route,path:A.path||F.path}),JZ=(A,F={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1})=>{let B=[];A.request?.length&&B.push(...A.request),A.beforeHandle?.length&&B.push(...A.beforeHandle),A.parse?.length&&B.push(...A.parse),A.error?.length&&B.push(...A.error),A.transform?.length&&B.push(...A.transform),A.afterHandle?.length&&B.push(...A.afterHandle),A.mapResponse?.length&&B.push(...A.mapResponse),A.afterResponse?.length&&B.push(...A.afterResponse),A.handler&&typeof A.handler=="function"&&B.push(A.handler);for(let $=0;$<B.length;$++){let Z=B[$];if(!Z)continue;let D=typeof Z=="object"?Z.fn:Z;if(typeof D!="function")continue;let X=D.toString(),J=bF(X),Y=cJ[J];if(Y){F=oq(F,Y);continue}let W={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[G,Q]=CJ1(X),q=LJ1(G,W),z=wJ1(q);if(z){let H=uT(z,Q.slice(1,-1));H.splice(0,-1,z);let U=Q;U.charCodeAt(0)===123&&U.charCodeAt(Q.length-1)===125&&(U=U.slice(1,-1)),NJ1(z,U,W)||VJ1(U,H,W),!W.query&&U.includes("return "+z+".query")&&(W.query=!0)}if(cJ[J]||(cJ[J]=W),F=oq(F,W),F.query&&F.headers&&F.body&&F.cookie&&F.set&&F.server&&F.url&&F.route&&F.path)break}return F},r3=class{constructor(A,F,B={}){this.name=A,this.jar=F,this.initial=B}get cookie(){return this.jar[this.name]??this.initial}set cookie(A){this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]=A}get setCookie(){return this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]}set setCookie(A){this.cookie=A}get value(){return this.cookie.value}set value(A){this.setCookie.value=A}get expires(){return this.cookie.expires}set expires(A){this.setCookie.expires=A}get maxAge(){return this.cookie.maxAge}set maxAge(A){this.setCookie.maxAge=A}get domain(){return this.cookie.domain}set domain(A){this.setCookie.domain=A}get path(){return this.cookie.path}set path(A){this.setCookie.path=A}get secure(){return this.cookie.secure}set secure(A){this.setCookie.secure=A}get httpOnly(){return this.cookie.httpOnly}set httpOnly(A){this.setCookie.httpOnly=A}get sameSite(){return this.cookie.sameSite}set sameSite(A){this.setCookie.sameSite=A}get priority(){return this.cookie.priority}set priority(A){this.setCookie.priority=A}get partitioned(){return this.cookie.partitioned}set partitioned(A){this.setCookie.partitioned=A}get secrets(){return this.cookie.secrets}set secrets(A){this.setCookie.secrets=A}update(A){return this.setCookie=Object.assign(this.cookie,typeof A=="function"?A(this.cookie):A),this}set(A){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof A=="function"?A(this.cookie):A),this}remove(){if(this.value!==void 0)return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value=="object"?JSON.stringify(this.value):this.value?.toString()??""}},LT=(A,F,B)=>(A.cookie||(A.cookie={}),new Proxy(F,{get($,Z){return Z in F?new r3(Z,A.cookie,Object.assign({},B??{},F[Z])):new r3(Z,A.cookie,Object.assign({},B))}})),vT=async(A,F,{secrets:B,sign:$,...Z}={})=>{if(!F)return LT(A,{},Z);let D=typeof B=="string";$&&$!==!0&&!Array.isArray($)&&($=[$]);let X={},J=ZY.parse(F);for(let[Y,W]of Object.entries(J)){if(W===void 0)continue;let G=yT.default(W);if($===!0||$?.includes(Y)){if(!B)throw new Error("No secret is provided to cookie plugin");if(D){let Q=await YT(G,B);if(Q===!1)throw new HT(Y);G=Q}else{let Q=!0;for(let q=0;q<B.length;q++){let z=await YT(G,B[q]);if(z!==!1){Q=!0,G=z;break}}if(!Q)throw new HT(Y)}}X[Y]={value:G}}return LT(A,X,Z)},hT=(A)=>{if(!A||!o0(A))return;let F=[];for(let[B,$]of Object.entries(A)){if(!B||!$)continue;let Z=$.value;Z!=null&&F.push(ZY.serialize(B,typeof Z=="object"?JSON.stringify(Z):Z+"",$))}if(F.length!==0)return F.length===1?F[0]:F},R2=(A,F)=>{if(!gF&&A instanceof Promise)return A.then((D)=>R2(D,F));let B=A.size,$=F&&(F.status===206||F.status===304||F.status===412||F.status===416),Z=$?{"transfer-encoding":"chunked"}:{"accept-ranges":"bytes","content-range":B?`bytes 0-${B-1}/${B}`:void 0,"transfer-encoding":"chunked"};if(!F&&!B)return new Response(A);if(!F)return new Response(A,{headers:Z});if(F.headers instanceof Headers){let D=Z;if(iJ)D=F.headers.toJSON();else{D={};for(let[X,J]of F.headers.entries())X in F.headers&&(D[X]=J)}return $&&(delete F.headers["content-length"],delete F.headers["accept-ranges"]),new Response(A,{status:F.status,headers:D})}return o0(F.headers)?new Response(A,{status:F.status,headers:Object.assign(Z,F.headers)}):new Response(A,{status:F.status,headers:Z})},dT=(A,F)=>{if(!A)return A;A.delete("set-cookie");for(let B=0;B<F.length;B++){let $=F[B].indexOf("=");A.append("set-cookie",`${F[B].slice(0,$)}=${F[B].slice($+1)||""}`)}return A},o3=(A,F)=>{if(F?.headers){if(A)if(iJ)Object.assign(F.headers,A.headers.toJSON());else for(let[B,$]of A.headers.entries())B in F.headers&&(F.headers[B]=$);return F.status===200&&(F.status=A.status),F.headers["content-encoding"]&&delete F.headers["content-encoding"],F}if(!A)return{headers:{},status:F?.status??200};if(iJ)return F={headers:A.headers.toJSON(),status:F?.status??200},F.headers["content-encoding"]&&delete F.headers["content-encoding"],F;F={headers:{},status:F?.status??200};for(let[B,$]of A.headers.entries())B!=="content-encoding"&&B in F.headers&&(F.headers[B]=$);return F},XH=({mapResponse:A,mapCompactResponse:F})=>async(B,$,Z)=>{let D=B.next();if(D instanceof Promise&&(D=await D),typeof D?.done>"u"||D?.done)return $?A(D.value,$,Z):F(D.value,Z);let X=D.value&&typeof D.value?.stream?"text/event-stream":D.value&&typeof D.value=="object"?"application/json":"text/plain";return $?.headers?($.headers["transfer-encoding"]||($.headers["transfer-encoding"]="chunked"),$.headers["content-type"]||($.headers["content-type"]=X),$.headers["cache-control"]||($.headers["cache-control"]="no-cache")):$={status:200,headers:{"content-type":X,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}},new Response(new ReadableStream({async start(J){let Y=!1;if(Z?.signal?.addEventListener("abort",()=>{Y=!0;try{J.close()}catch{}}),D.value!==void 0&&D.value!==null)if(D.value.toStream)J.enqueue(D.value.toStream());else if(typeof D.value=="object")try{J.enqueue(Buffer.from(JSON.stringify(D.value)))}catch{J.enqueue(Buffer.from(D.value.toString()))}else J.enqueue(Buffer.from(D.value.toString()));for await(let W of B){if(Y)break;if(W!=null){if(W.toStream)J.enqueue(W.toStream());else if(typeof W=="object")try{J.enqueue(Buffer.from(JSON.stringify(W)))}catch{J.enqueue(Buffer.from(W.toString()))}else J.enqueue(Buffer.from(W.toString()));await new Promise((G)=>setTimeout(()=>G(),0))}}try{J.close()}catch{}}}),$)};async function*e3(A){let F=A.body;if(!F)return;let B=F.getReader(),$=new TextDecoder;try{for(;;){let{done:Z,value:D}=await B.read();if(Z)break;yield $.decode(D)}}finally{B.releaseLock()}}var DY=(A)=>{if(typeof A.status=="string"&&(A.status=FY[A.status]),A.cookie&&o0(A.cookie)){let F=hT(A.cookie);F&&(A.headers["set-cookie"]=F)}A.headers["set-cookie"]&&Array.isArray(A.headers["set-cookie"])&&(A.headers=dT(new Headers(A.headers),A.headers["set-cookie"]))},mT=(A)=>{let F=XH(A);return(B,$,Z)=>{let D=!1;if($.headers instanceof Headers)for(let J of $.headers.keys())if(J==="set-cookie"){if(D)continue;D=!0;for(let Y of $.headers.getSetCookie())B.headers.append("set-cookie",Y)}else B.headers.append(J,$.headers?.get(J)??"");else for(let J in $.headers)B.headers.append(J,$.headers[J]);let X=$.status??200;return B.status!==X&&X!==200&&(B.status<=300||B.status>400)?B.text().then((J)=>{let Y=new Response(J,{headers:B.headers,status:$.status});return!Y.headers.has("content-length")&&Y.headers.get("transfer-encoding")==="chunked"?F(e3(Y),o3(Y,$),Z):Y}):!B.headers.has("content-length")&&B.headers.get("transfer-encoding")==="chunked"?F(e3(B),o3(B,$),Z):B}},oJ=(A,F={headers:{}})=>{let B=A.path,$=mime[B.slice(B.lastIndexOf(".")+1)];return $&&(F.headers["content-type"]=$),A.stats&&F.status!==206&&F.status!==304&&F.status!==412&&F.status!==416?A.stats.then((Z)=>{let D=Z.size;return D!==void 0&&(F.headers["content-range"]=`bytes 0-${D-1}/${D}`,F.headers["content-length"]=D),R2(A.value,F)}):R2(A.value,F)},m4=(A,F,B)=>{if(o0(F.headers)||F.status!==200||F.cookie)switch(DY(F),A?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response(A,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return oJ(A,F);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,m4(A.response,F,B);case"ReadableStream":return F.headers["content-type"]?.startsWith("text/event-stream")||(F.headers["content-type"]="text/event-stream; charset=utf-8"),B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,F);case void 0:return A?new Response(JSON.stringify(A),F):new Response("",F);case"Response":return eJ(A,F,B);case"Error":return n3(A,F);case"Promise":return A.then(($)=>m4($,F,B));case"Function":return m4(A(),F,B);case"Number":case"Boolean":return new Response(A.toString(),F);case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);case"FormData":return new Response(A,F);default:if(A instanceof Response)return eJ(A,F,B);if(A instanceof Promise)return A.then(($)=>m4($,F));if(A instanceof Error)return n3(A,F);if(A instanceof E4)return F.status=A.code,m4(A.response,F,B);if(typeof A?.next=="function")return a3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>m4($,F));if(typeof A?.toResponse=="function")return m4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A,F)}return A instanceof Response&&!A.headers.has("content-length")&&A.headers.get("transfer-encoding")==="chunked"?a3(e3(A),o3(A,F),B):typeof A?.next=="function"||A instanceof ReadableStream?a3(A,F,B):t8(A,B)},h4=(A,F,B)=>{if(A!=null)if(o0(F.headers)||F.status!==200||F.cookie)switch(DY(F),A?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response(A,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return oJ(A,F);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,h4(A.response,F,B);case"ReadableStream":return F.headers["content-type"]?.startsWith("text/event-stream")||(F.headers["content-type"]="text/event-stream; charset=utf-8"),B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,F);case void 0:return A?new Response(JSON.stringify(A),F):void 0;case"Response":return eJ(A,F,B);case"Promise":return A.then(($)=>h4($,F));case"Error":return n3(A,F);case"Function":return h4(A(),F);case"Number":case"Boolean":return new Response(A.toString(),F);case"FormData":return new Response(A);case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);default:if(A instanceof Response)return eJ(A,F,B);if(A instanceof Promise)return A.then(($)=>h4($,F));if(A instanceof Error)return n3(A,F);if(A instanceof E4)return F.status=A.code,h4(A.response,F,B);if(typeof A?.next=="function")return a3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>h4($,F));if(typeof A?.toResponse=="function")return h4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A,F)}else switch(A?.constructor?.name){case"String":return F.headers["content-type"]="text/plain",new Response(A);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return oJ(A,F);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,h4(A.response,F,B);case"ReadableStream":return B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:return A?new Response(JSON.stringify(A),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return!A.headers.has("content-length")&&A.headers.get("transfer-encoding")==="chunked"?a3(e3(A),o3(A),B):A;case"Promise":return A.then(($)=>{let Z=h4($,F);if(Z!==void 0)return Z});case"Error":return n3(A,F);case"Function":return t8(A(),B);case"Number":case"Boolean":return new Response(A.toString());case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);case"FormData":return new Response(A);default:if(A instanceof Response)return A;if(A instanceof Promise)return A.then(($)=>h4($,F));if(A instanceof Error)return n3(A,F);if(A instanceof E4)return F.status=A.code,h4(A.response,F,B);if(typeof A?.next=="function")return a3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>h4($,F));if(typeof A?.toResponse=="function")return h4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A)}},t8=(A,F)=>{switch(A?.constructor?.name){case"String":return new Response(A,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify(A),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return oJ(A);case"File":return R2(A);case"Blob":return R2(A);case"ElysiaCustomStatusResponse":return m4(A.response,{status:A.code,headers:{}});case"ReadableStream":return F?.signal?.addEventListener("abort",{handleEvent(){F?.signal&&!F?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:return A?new Response(JSON.stringify(A),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return A.headers.get("transfer-encoding")==="chunked"?a3(e3(A),o3(A),F):A;case"Error":return n3(A);case"Promise":return A.then((B)=>t8(B,F));case"Function":return t8(A(),F);case"Number":case"Boolean":return new Response(A.toString());case"FormData":return new Response(A);default:if(A instanceof Response)return A;if(A instanceof Promise)return A.then((B)=>t8(B,F));if(A instanceof Error)return n3(A);if(A instanceof E4)return m4(A.response,{status:A.code,headers:{}});if(typeof A?.next=="function")return a3(A,void 0,F);if(typeof A?.then=="function")return A.then((B)=>m4(B,set));if(typeof A?.toResponse=="function")return t8(A.toResponse());if("charCodeAt"in A){let B=A.charCodeAt(0);if(B===123||B===91)return new Response(JSON.stringify(A),{headers:{"Content-Type":"application/json"}})}return new Response(A)}},n3=(A,F)=>new Response(JSON.stringify({name:A?.name,message:A?.message,cause:A?.cause}),{status:F?.status!==200?F?.status??500:500,headers:F?.headers}),MJ1=(A,F,B={})=>{if(typeof A=="function")return;let $=m4(A,{headers:B});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length)return $.clone.bind($)},eJ=mT({mapResponse:m4,mapCompactResponse:t8}),a3=XH({mapResponse:m4,mapCompactResponse:t8}),eq={name:"web-standard",isWebStandard:!0,handler:{mapResponse:m4,mapEarlyResponse:h4,mapCompactResponse:t8,createStaticHandler:MJ1},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json(A){return A?`try{c.body=await c.request.json()}catch{}
`:`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData(A){let F=`
c.body={}
`;return A?F+="let form;try{form=await c.request.formData()}catch{}":F+=`const form=await c.request.formData()
`,F+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},async stop(A,F){if(!A.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(A.server&&(A.server.stop(F),A.server=null,A.event.stop?.length))for(let B=0;B<A.event.stop.length;B++)A.event.stop[B].fn(A)},composeGeneralHandler:{parameters:"r",createContext(A){let F="",B="",$=A.setHeaders;for(let X of Object.keys(A.decorator))F+=`,'${X}':decorator['${X}']`;let Z=A.config.handler?.standardHostname??!0,D=!!A.event.trace?.length;return B+=`const u=r.url,s=u.indexOf('/',${Z?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,D&&(B+=`const id=randomId()
`),B+="const c={request:r,store,qi,path:p,url:u,redirect,error:status,status,set:{headers:",B+=Object.keys($??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",B+=",status:200}",A.inference.server&&(B+=",get server(){return app.getServer()}"),D&&(B+=",[ELYSIA_REQUEST_ID]:id"),B+=F,B+=`}
`,B},error404(A,F){let B="if(route===null)return ";return F?B+=`app.handleError(c,notFound,false,${this.parameters})`:B+=A?"new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"error404.clone()",{declare:F?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:B}}},composeError:{mapResponseContext:"",validationError:"return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})",unknownError:"return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})"},listen(){return()=>{throw new Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}};function RJ1(A,F=0){let B=Object.create(null),$=1,Z=2,D=4,X=8,J=0,Y=F-1,W=Y,G=A.length;for(let q=F;q<G;q++)switch(A.charCodeAt(q)){case 38:Q(q),Y=q,W=q,J=0;break;case 61:W<=Y?W=q:J|=X;break;case 43:W>Y?J|=D:J|=$;break;case 37:W>Y?J|=X:J|=Z;break}return Q(G),B;function Q(q){let z=W>Y,H=z?W:q;if(H<=Y+1)return;let U=A.slice(Y+1,H);if(J&$&&(U=U.replace(/\+/g," ")),J&Z&&(U=YZ.default(U)||U),B[U]!==void 0)return;let K="";z&&(K=A.slice(W+1,q),J&D&&(K=K.replace(/\+/g," ")),J&X&&(K=YZ.default(K)||K)),B[U]=K}}function lJ(A){let F=Object.create(null),B=0,$=1,Z=2,D=4,X=8,J=A.length,Y=-1,W=-1;for(let Q=0;Q<J;Q++)switch(A.charCodeAt(Q)){case 38:G(A,Q),Y=Q,W=Q,B=0;break;case 61:W<=Y?W=Q:B|=X;break;case 43:W>Y?B|=D:B|=$;break;case 37:W>Y?B|=X:B|=Z;break}return Y<J&&G(A,J),F;function G(Q,q){let z=W>Y,H=z?W:q,U=Q.slice(Y+1,H);if(!z&&U.length===0)return;let K=U;B&$&&(K=K.replace(/\+/g," ")),B&Z&&(K=YZ.default(K)||K);let E="";if(z){let V=Q.slice(W+1,q);B&D&&(V=V.replace(/\+/g," ")),B&X&&(V=YZ.default(V)||V),E=V}let L=F[K];L===void 0?F[K]=E:Array.isArray(L)?L.push(E):F[K]=[L,E]}}var XY=Symbol("ElysiaTrace"),s8=()=>{let{promise:A,resolve:F}=Promise.withResolvers(),{promise:B,resolve:$}=Promise.withResolvers(),{promise:Z,resolve:D}=Promise.withResolvers(),X=[],J=[];return[(Y)=>(Y&&X.push(Y),A),(Y)=>{let W=[],G=[],Q=null;for(let z=0;z<(Y.total??0);z++){let{promise:H,resolve:U}=Promise.withResolvers(),{promise:K,resolve:E}=Promise.withResolvers(),{promise:L,resolve:V}=Promise.withResolvers(),M=[],O=[];W.push((R)=>(R&&M.push(R),H)),G.push((R)=>{let _={...R,end:K,error:L,index:z,onStop(P){return P&&O.push(P),K}};U(_);for(let P=0;P<M.length;P++)M[P](_);return(P=null)=>{let T=performance.now();P&&(Q=P);let N={end:T,error:P,get elapsed(){return T-R.begin}};for(let y=0;y<O.length;y++)O[y](N);E(T),V(P)}})}let q={...Y,end:B,error:Z,onEvent(z){for(let H=0;H<W.length;H++)W[H](z)},onStop(z){return z&&J.push(z),B}};F(q);for(let z=0;z<X.length;z++)X[z](q);return{resolveChild:G,resolve(z=null){let H=performance.now();!z&&Q&&(z=Q);let U={end:H,error:z,get elapsed(){return H-Y.begin}};for(let K=0;K<J.length;K++)J[K](U);$(H),D(z)}}}]},PJ1=(A)=>(F)=>{let[B,$]=s8(),[Z,D]=s8(),[X,J]=s8(),[Y,W]=s8(),[G,Q]=s8(),[q,z]=s8(),[H,U]=s8(),[K,E]=s8(),[L,V]=s8();return A({id:F[WZ],context:F,set:F.set,onRequest:B,onParse:Z,onTransform:X,onBeforeHandle:Y,onHandle:G,onAfterHandle:q,onMapResponse:K,onAfterResponse:L,onError:H,time:Date.now(),store:F.store}),{request:$,parse:D,transform:J,beforeHandle:W,handle:Q,afterHandle:z,error:U,mapResponse:E,afterResponse:V}},AH=(A)=>A?A?.[g]==="Import"&&A.References?A.References().some(AH):(A.schema&&(A=A.schema),!!A&&(d2 in A)):!1,W8=(A)=>{if(!A)return!1;let F=A?.schema??A;if(F[g]==="Import"&&A.References)return A.References().some(W8);if(F.anyOf)return F.anyOf.some(W8);if(F.someOf)return F.someOf.some(W8);if(F.allOf)return F.allOf.some(W8);if(F.not)return F.not.some(W8);if(F.type==="object"){let B=F.properties;if("additionalProperties"in F)return F.additionalProperties;if("patternProperties"in F)return!1;for(let $ of Object.keys(B)){let Z=B[$];if(Z.type==="object"){if(W8(Z))return!0}else if(Z.anyOf){for(let D=0;D<Z.anyOf.length;D++)if(W8(Z.anyOf[D]))return!0}return Z.additionalProperties}return!1}return F.type==="array"&&F.items&&!Array.isArray(F.items)?W8(F.items):!1},i3=(A,F)=>{if(!F)return!1;if(g in F&&F[g]===A)return!0;if(F.type==="object"){let B=F.properties;if(!B)return!1;for(let $ of Object.keys(B)){let Z=B[$];if(Z.type==="object"){if(i3(A,Z))return!0}else if(Z.anyOf){for(let D=0;D<Z.anyOf.length;D++)if(i3(A,Z.anyOf[D]))return!0}if(g in Z&&Z[g]===A)return!0}return!1}return!!F.properties&&g in F.properties&&F.properties[g]===A},ZZ=(A,F)=>{if(!F)return;let B=F.schema??F;if(B[g]==="Import"&&F.References)return F.References().some(($)=>ZZ(A,$));if(B.type==="object"){let $=B.properties;if(!$)return!1;for(let Z of Object.keys($)){let D=$[Z];if(A in D)return!0;if(D.type==="object"){if(ZZ(A,D))return!0}else if(D.anyOf){for(let X=0;X<D.anyOf.length;X++)if(ZZ(A,D.anyOf[X]))return!0}}return!1}return A in B},G8=(A)=>{if(!A)return!1;if(A.oneOf){for(let F=0;F<A.oneOf.length;F++)if(G8(A.oneOf[F]))return!0}if(A.anyOf){for(let F=0;F<A.anyOf.length;F++)if(G8(A.anyOf[F]))return!0}if(A.oneOf){for(let F=0;F<A.oneOf.length;F++)if(G8(A.oneOf[F]))return!0}if(A.allOf){for(let F=0;F<A.allOf.length;F++)if(G8(A.allOf[F]))return!0}if(A.not&&G8(A.not))return!0;if(A.type==="object"&&A.properties){let F=A.properties;for(let B of Object.keys(F)){let $=F[B];if(G8($)||$.type==="array"&&$.items&&G8($.items))return!0}}return A.type==="array"&&A.items&&G8(A.items)?!0:A[g]==="Ref"&&("$ref"in A)},b7=(A)=>{if(!A)return!1;if(A.$ref&&A.$defs&&A.$ref in A.$defs&&b7(A.$defs[A.$ref]))return!0;if(A.oneOf){for(let F=0;F<A.oneOf.length;F++)if(b7(A.oneOf[F]))return!0}if(A.anyOf){for(let F=0;F<A.anyOf.length;F++)if(b7(A.anyOf[F]))return!0}if(A.allOf){for(let F=0;F<A.allOf.length;F++)if(b7(A.allOf[F]))return!0}if(A.not&&b7(A.not))return!0;if(A.type==="object"&&A.properties){let F=A.properties;for(let B of Object.keys(F)){let $=F[B];if(b7($)||$.type==="array"&&$.items&&b7($.items))return!0}}return A.type==="array"&&A.items&&b7(A.items)?!0:(g0 in A)},mq=(A,F,B={})=>{let $=B;if($.root=!0,!Array.isArray(F))return F.original=A,W6(A,F,$);for(let Z of F)Z.original=A,A=W6(A,Z,$);return A},W6=(A,F,B)=>{if(!A)return A;let $=B.root;if(F.onlyFirstObject&&A.type==="object")return F.to(A)??A;if(F.untilObjectFound&&!$&&A.type==="object")return A;let Z=F.from[g];if(A.oneOf){for(let J=0;J<A.oneOf.length;J++)A.oneOf[J]=W6(A.oneOf[J],F,B);return A}if(A.anyOf){for(let J=0;J<A.anyOf.length;J++)A.anyOf[J]=W6(A.anyOf[J],F,B);return A}if(A.allOf){for(let J=0;J<A.allOf.length;J++)A.allOf[J]=W6(A.allOf[J],F,B);return A}if(A.not)return W6(A.not,F,B);let D=$&&!!F.excludeRoot;if(A[g]===Z){let{anyOf:J,oneOf:Y,allOf:W,not:G,properties:Q,items:q,...z}=A,H=F.to(z);if(!H)return A;let U,K=(L)=>{let V=E(L);return V.$id&&delete V.$id,V},E=(L)=>{if(Q&&L.type==="object"){let M={};for(let[O,R]of Object.entries(Q))M[O]=W6(R,F,{...B,root:!1});return{...z,...L,properties:M}}if(q&&L.type==="array")return{...z,...L,items:W6(q,F,{...B,root:!1})};let V={...z,...L};return delete V.required,Q&&L.type==="string"&&L.format==="ObjectString"&&L.default==="{}"&&(U=F1.ObjectString(Q,z),V.default=JSON.stringify(j0.Create(F1.Object(Q))),V.properties=Q),q&&L.type==="string"&&L.format==="ArrayString"&&L.default==="[]"&&(U=F1.ArrayString(q,z),V.default=JSON.stringify(j0.Create(F1.Array(q))),V.items=q),V};if(D){if(Q){let L={};for(let[V,M]of Object.entries(Q))L[V]=W6(M,F,{...B,root:!1});return{...z,properties:L}}else if(q?.map)return{...z,items:q.map((L)=>W6(L,F,{...B,root:!1}))};return z}if(H.anyOf)for(let L=0;L<H.anyOf.length;L++)H.anyOf[L]=K(H.anyOf[L]);else if(H.oneOf)for(let L=0;L<H.oneOf.length;L++)H.oneOf[L]=K(H.oneOf[L]);else if(H.allOf)for(let L=0;L<H.allOf.length;L++)H.allOf[L]=K(H.allOf[L]);else H.not&&(H.not=K(H.not));if(U&&(H[g0]=U[g0]),H.anyOf||H.oneOf||H.allOf||H.not)return H;if(Q){let L={};for(let[V,M]of Object.entries(Q))L[V]=W6(M,F,{...B,root:!1});return{...z,...H,properties:L}}else if(q?.map)return{...z,...H,items:q.map((L)=>W6(L,F,{...B,root:!1}))};return{...z,...H}}let X=A?.properties;if(X&&$&&F.rootOnly!==!0)for(let[J,Y]of Object.entries(X))switch(Y[g]){case Z:let{anyOf:W,oneOf:G,allOf:Q,not:q,type:z,...H}=Y,U=F.to(H);if(!U)return A;if(U.anyOf)for(let K=0;K<U.anyOf.length;K++)U.anyOf[K]={...H,...U.anyOf[K]};else if(U.oneOf)for(let K=0;K<U.oneOf.length;K++)U.oneOf[K]={...H,...U.oneOf[K]};else if(U.allOf)for(let K=0;K<U.allOf.length;K++)U.allOf[K]={...H,...U.allOf[K]};else U.not&&(U.not={...H,...U.not});X[J]={...H,...W6(H,F,{...B,root:!1})};break;case"Object":case"Union":X[J]=W6(Y,F,{...B,root:!1});break;default:if(Array.isArray(Y.items))for(let K=0;K<Y.items.length;K++)Y.items[K]=W6(Y.items[K],F,{...B,root:!1});else Y.anyOf||Y.oneOf||Y.allOf||Y.not?X[J]=W6(Y,F,{...B,root:!1}):Y.type==="array"&&(Y.items=W6(Y.items,F,{...B,root:!1}));break}return A.type==="array"&&A.items&&(Array.isArray(A.items)?A.items=A.items.map((J)=>W6(J,F,{...B,root:!1})):A.items=W6(A.items,F,{...B,root:!1})),A},e$=(A)=>(F)=>{if(typeof F=="object")try{return j0.Clean(A,F)}catch{}return F},K6=(A,{models:F={},dynamic:B=!1,modules:$,normalize:Z=!1,additionalProperties:D=!1,coerce:X=!1,additionalCoerce:J=[],validators:Y,sanitize:W}={})=>{if(Y=Y?.filter((U)=>U),!A){if(!Y?.length)return;A=Y[0],Y=Y.slice(1)}let G,Q=(U)=>X?mq(U,[{from:F1.Number(),to:(K)=>F1.Numeric(K),untilObjectFound:!0},{from:F1.Boolean(),to:(K)=>F1.BooleanString(K),untilObjectFound:!0},...Array.isArray(J)?J:[J]]):mq(U,J),q=(U)=>{let K;if(!U)return;if(typeof U!="string")K=U;else{let L=U.endsWith("[]"),V=L?U.substring(0,U.length-2):U;K=$?.Import(V)??F[V],L&&(K=F1.Array(K))}if(!K)return;let E;if(K[g]!=="Import"&&(E=G8(K))){let L=BY();G===void 0&&(G=E),K=F1.Module({...$?.$defs,[L]:K}).Import(L)}if(K[g]==="Import"){let L={};for(let[M,O]of Object.entries(K.$defs))L[M]=Q(O);let V=K.$ref;K=F1.Module(L).Import(V)}else(X||J)&&(K=Q(K));return K},z=q(A);if(Y?.length){let U=!1,{schema:K,notObjects:E}=IJ1([z,...Y.map(q)]);E&&(z=F1.Intersect([...K?[K]:[],...E.map((L)=>{let V=q(L);return V.type==="object"&&"additionalProperties"in V&&(!U&&V.additionalProperties===!1&&(U=!0),delete V.additionalProperties),V})]),z.type==="object"&&U&&(z.additionalProperties=!1))}else z.type==="object"&&!("additionalProperties"in z)?z.additionalProperties=D:z=mq(z,{onlyFirstObject:!0,from:F1.Object({}),to({properties:U,...K}){if(U&&!("additionalProperties"in z))return F1.Object(U,{...K,additionalProperties:!1})}});if(B){let U={schema:z,references:"",checkFunc:()=>{},code:"",Check:(K)=>j0.Check(z,K),Errors:(K)=>j0.Errors(z,K),Code:()=>"",Clean:e$(z),Decode:(K)=>j0.Decode(z,K),Encode:(K)=>j0.Encode(z,K),get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=W8(z)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=ZZ("default",z)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=AH(z)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=b7(z)},"~hasRef":G,get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=b7(z)}};if(z.config&&(U.config=z.config,U?.schema?.config&&delete U.schema.config),Z&&z.additionalProperties===!1)if(Z===!0||Z==="exactMirror")try{U.Clean=uq(z,{TypeCompiler:Y8,sanitize:W?.(),modules:$})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(z),U.Clean=e$(z)}else U.Clean=e$(z);return U.parse=(K)=>{try{return U.Decode(K)}catch{throw[...U.Errors(K)].map(f7)}},U.safeParse=(K)=>{try{return{success:!0,data:U.Decode(K),error:null}}catch{let E=[...H.Errors(K)].map(f7);return{success:!1,data:null,error:E[0]?.summary,errors:E}}},U}let H=Y8.Compile(z,Object.values(F));if(z.config&&(H.config=z.config,H?.schema?.config&&delete H.schema.config),Z===!0||Z==="exactMirror")try{H.Clean=uq(z,{TypeCompiler:Y8,sanitize:W?.(),modules:$})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(z),H.Clean=e$(z)}else H.Clean=e$(z);return H.parse=(U)=>{try{return H.Decode(U)}catch{throw[...H.Errors(U)].map(f7)}},H.safeParse=(U)=>{try{return{success:!0,data:H.Decode(U),error:null}}catch{let K=[...H.Errors(U)].map(f7);return{success:!1,data:null,error:K[0]?.summary,errors:K}}},Object.assign(H,{get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=W8(H)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=ZZ("default",H)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=AH(H)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=b7(z)},get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=G8(z)},"~hasRef":G}),H},jJ1=(A)=>A[g]==="Union"||!A.schema&&!!A.anyOf,IJ1=(A)=>{if(A.length===0)return{schema:void 0,notObjects:[]};if(A.length===1)return A[0].type==="object"?{schema:A[0],notObjects:[]}:{schema:void 0,notObjects:A};let F,B=[],$=!1,Z=!1;for(let D of A){if(D.type!=="object"){B.push(D);continue}if("additionalProperties"in D&&(D.additionalProperties===!0?$=!0:D.additionalProperties===!1&&(Z=!0)),!F){F=D;continue}F={...F,...D,properties:{...F.properties,...D.properties},required:[...F?.required??[],...D.required]}}return F&&(F.required&&(F.required=[...new Set(F.required)]),Z?F.additionalProperties=!1:$&&(F.additionalProperties=!0)),{schema:F,notObjects:B}},wT=(A,{models:F={},modules:B,dynamic:$=!1,normalize:Z=!1,additionalProperties:D=!1,validators:X=[],sanitize:J})=>{if(X=X.filter((G)=>G),!A){if(!X?.length)return;A=X[0],X=X.slice(1)}let Y;if(typeof A!="string")Y=A;else{let G=A.endsWith("[]"),Q=G?A.substring(0,A.length-2):A;Y=B.Import(Q)??F[Q],G&&(Y=F1.Array(Y))}if(!Y)return;if(g in Y)return{200:K6(Y,{modules:B,models:F,additionalProperties:D,dynamic:$,normalize:Z,coerce:!1,additionalCoerce:[],validators:X.map((G)=>G[200]),sanitize:J})};let W={};return Object.keys(Y).forEach((G)=>{if(isNaN(+G))return;let Q=Y[+G];if(typeof Q=="string"){if(Q in F){let q=F[Q];W[+G]=g in q?K6(q,{modules:B,models:F,additionalProperties:D,dynamic:$,normalize:Z,coerce:!1,additionalCoerce:[],validators:X.map((z)=>z[+G]),sanitize:J}):q}return}W[+G]=g in Q?K6(Q,{modules:B,models:F,additionalProperties:D,dynamic:$,normalize:Z,coerce:!1,additionalCoerce:[],validators:X.map((q)=>q[+G]),sanitize:J}):Q}),W},cq,BA=()=>(cq||(cq=[{from:F1.Object({}),to:()=>F1.ObjectString({}),excludeRoot:!0},{from:F1.Array(F1.Any()),to:()=>F1.ArrayString(F1.Any())}]),cq),lq,FH=()=>(lq||(lq=[{from:F1.Number(),to:(A)=>F1.Numeric(A),rootOnly:!0},{from:F1.Boolean(),to:(A)=>F1.BooleanString(A),rootOnly:!0}]),lq),lT=({validator:A,modules:F,defaultConfig:B={},config:$,dynamic:Z,models:D,validators:X,sanitize:J})=>{let Y=K6(A,{modules:F,dynamic:Z,models:D,additionalProperties:!0,coerce:!0,additionalCoerce:BA(),validators:X,sanitize:J});return Y?Y.config=ST(Y.config,$):(Y=K6(F1.Cookie(F1.Any()),{modules:F,dynamic:Z,models:D,additionalProperties:!0,validators:X,sanitize:J}),Y.config=B),Y},hJ=(A)=>A[g]==="Import"&&A.$defs[A.$ref][g]==="Object"?A.$defs[A.$ref]:A,k2=(A,F)=>F?A:"",TJ1=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],JH=({context:A="c",trace:F=[],addFn:B})=>{if(!F.length)return()=>({resolveChild(){return()=>{}},resolve(){}});for(let $=0;$<F.length;$++)B(`let report${$},reportChild${$},reportErr${$},reportErrChild${$};let trace${$}=${A}[ELYSIA_TRACE]?.[${$}]??trace[${$}](${A});
`);return($,{name:Z,total:D=0}={})=>{Z||(Z="anonymous");let X=$==="error"?"reportErr":"report";for(let J=0;J<F.length;J++)B(`${X}${J} = trace${J}.${$}({id,event:'${$}',name:'${Z}',begin:performance.now(),total:${D}})
`);return{resolve(){for(let J=0;J<F.length;J++)B(`${X}${J}.resolve()
`)},resolveChild(J){for(let Y=0;Y<F.length;Y++)B(`${X}Child${Y}=${X}${Y}.resolveChild?.shift()?.({id,event:'${$}',name:'${J}',begin:performance.now()})
`);return(Y)=>{for(let W=0;W<F.length;W++)B(Y?`if(${Y} instanceof Error){${X}Child${W}?.(${Y}) }else{${X}Child${W}?.()}`:`${X}Child${W}?.()
`)}}}}},$Z=({schema:A,name:F,type:B,typeAlias:$=B,normalize:Z,ignoreTryCatch:D=!1})=>!Z||!A.Clean||A.hasAdditionalProperties?"":Z===!0||Z==="exactMirror"?D?`${F}=validator.${$}.Clean(${F})
`:`try{${F}=validator.${$}.Clean(${F})
}catch{}`:Z==="typebox"?`${F}=validator.${$}.Clean(${F})
`:"",OJ1=({injectResponse:A="",normalize:F=!1,validator:B,encodeSchema:$=!1,isStaticResponse:Z=!1,hasSanitize:D=!1})=>({validate:(X,J=`c.${X}`)=>`c.set.status=422;throw new ValidationError('${X}',validator.${X},${J})`,response:(X="r")=>{if(Z)return"";let J=A+`
`;J+=`if(${X} instanceof ElysiaCustomStatusResponse){c.set.status=${X}.code
${X}=${X}.response}switch(c.set.status){`;for(let[Y,W]of Object.entries(B.response)){J+=`
case ${Y}:if(${X} instanceof Response)break
`;let G=W.schema?.noValidate===!0,Q=G||D,q=({ignoreTryCatch:H=!1}={})=>$Z({name:X,schema:W,type:"response",typeAlias:`response[${Y}]`,normalize:F,ignoreTryCatch:H});Q&&(J+=q());let z=!Q&&F&&!G;$&&W.hasTransform?J+=`try{${X}=validator.response[${Y}].Encode(${X})
c.set.status=${Y}}catch{`+(z?`try{
`+q({ignoreTryCatch:!0})+`${X}=validator.response[${Y}].Encode(${X})
}catch{throw new ValidationError('response',validator.response[${Y}],${X})}`:`throw new ValidationError('response',validator.response[${Y}],${X})`)+"}":(Q||(J+=q()),G||(J+=`if(validator.response[${Y}].Check(${X})===false)throw new ValidationError('response',validator.response[${Y}],${X})
c.set.status=${Y}
`)),J+=`break
`}return J+"}"}}),fF=(A)=>(A?.fn??A).constructor.name==="AsyncFunction",SJ1=/=>\s?response\.clone\(/,kJ1=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,A6=(A)=>{let F=typeof A=="object";if(F&&A.isAsync!==void 0)return A.isAsync;let B=F?A.fn:A;if(B.constructor.name==="AsyncFunction")return!0;let $=B.toString();if(SJ1.test($))return F&&(A.isAsync=!1),!1;let Z=kJ1.test($);return F&&(A.isAsync=Z),Z},DZ=(A)=>{let F=typeof A=="object";if(F&&A.hasReturn!==void 0)return A.hasReturn;let B=F?A.fn.toString():typeof A=="string"?A.toString():A,$=B.indexOf(")");if(B.charCodeAt($+2)===61&&B.charCodeAt($+5)!==123)return F&&(A.hasReturn=!0),!0;let Z=B.includes("return");return F&&(A.hasReturn=Z),Z},dJ=(A)=>{let F=A?.fn??A;return F.constructor.name==="AsyncGeneratorFunction"||F.constructor.name==="GeneratorFunction"},AZ=(A,F,B=`c.${F}`)=>`try{${A}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${F}',validator.${F},${B})}}`,_J1=({app:A,path:F,method:B,hooks:$,validator:Z,handler:D,allowMeta:X=!1,inference:J})=>{let Y=A["~adapter"].composeHandler,W=A["~adapter"].handler,G=typeof D=="function";if(!G&&(D=W.mapResponse(D,{headers:A.setHeaders??{}}),$.parse?.length&&$.transform?.length&&$.beforeHandle?.length&&$.afterHandle?.length))return D instanceof Response?Function("a",`"use strict";
return function(){return a.clone()}`)(D):Function("a",`"use strict";
return function(){return a}`)(D);let Q=G?"handler(c)":"handler",q=!!$.afterResponse?.length,z=!!$.trace?.length,H="";if(J=JZ($,J),J=JZ({handler:D},J),Y.declare){let Y1=Y.declare(J);Y1&&(H+=Y1)}J.server&&(H+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`),Z.createBody?.(),Z.createQuery?.(),Z.createHeaders?.(),Z.createParams?.(),Z.createCookie?.(),Z.createResponse?.();let U=!!Z.body||!!Z.headers||!!Z.params||!!Z.query||!!Z.cookie||!!Z.response,K=J.query||!!Z.query,E=$.parse?.length===1&&$.parse[0].fn==="none",L=B!==""&&B!=="GET"&&B!=="HEAD"&&(J.body||!!Z.body||!!$.parse?.length)&&!E,V=A.setHeaders,M=V&&!!Object.keys(V).length,O=J.headers||!!Z.headers||Y.preferWebstandardHeaders!==!0&&J.body,R=J.cookie||!!Z.cookie,_=Z.cookie?.config?ST(Z?.cookie?.config,A.config.cookie):A.config.cookie,P="",T=()=>{if(P)return P;if(_?.sign){if(!_.secrets)throw new Error(`t.Cookie required secret which is not set in (${B}) ${F}.`);let Y1=_.secrets?typeof _.secrets=="string"?_.secrets:_.secrets[0]:void 0;if(P+=`const _setCookie = c.set.cookie
if(_setCookie){`,_.sign===!0)P+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${Y1}')}`;else for(let a of _.sign)P+=`if(_setCookie['${a}']?.value)c.set.cookie['${a}'].value=await signCookie(_setCookie['${a}'].value,'${Y1}')
`;P+=`}
`}return P},N=A.config.normalize,y=A.config.encodeSchema,S=OJ1({normalize:N,validator:Z,encodeSchema:y,isStaticResponse:D instanceof Response,hasSanitize:!!A.config.sanitize});O&&(H+=Y.headers),z&&(H+=`const id=c[ELYSIA_REQUEST_ID]
`);let k=JH({trace:$.trace,addFn:(Y1)=>{H+=Y1}});if(H+="try{",R){let Y1=(w,h)=>{let I=_?.[w]??h;return I?typeof I=="string"?`${w}:'${I}',`:I instanceof Date?`${w}: new Date(${I.getTime()}),`:`${w}:${I},`:typeof h=="string"?`${w}:"${h}",`:`${w}:${h},`},a=_?`{secrets:${_.secrets!==void 0?typeof _.secrets=="string"?`'${_.secrets}'`:"["+_.secrets.reduce((w,h)=>w+`'${h}',`,"")+"]":"undefined"},sign:${_.sign===!0?!0:_.sign!==void 0?"["+_.sign.reduce((w,h)=>w+`'${h}',`,"")+"]":"undefined"},`+Y1("domain")+Y1("expires")+Y1("httpOnly")+Y1("maxAge")+Y1("path","/")+Y1("priority")+Y1("sameSite")+Y1("secure")+"}":"undefined";O?H+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${a})
`:H+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${a})
`}if(K){let Y1=[];if(Z.query&&Z.query.schema.type==="object"){let a=Z.query.schema.properties;if(!Z.query.hasAdditionalProperties)for(let[w,h]of Object.entries(a)){let I=h,$1=I.type==="array"||!!I.anyOf?.some((E1)=>E1.type==="string"&&E1.format==="ArrayString");I&&d2 in I&&I.type==="array"&&I.items&&(I=I.items);let{type:e,anyOf:D1}=I;Y1.push({key:w,isArray:$1,isNestedObjectArray:$1&&I.items?.type==="object"||!!I.items?.anyOf?.some((E1)=>E1.type==="object"||E1.type==="array"),isObject:e==="object"||D1?.some((E1)=>E1.type==="string"&&E1.format==="ArrayString"),anyOf:!!D1})}}if(!Y1.length)H+="if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}";else{H+=`if(c.qi!==-1){let url='&'+c.url.slice(c.qi+1)
`;let a=0;for(let{key:w,isArray:h,isObject:I,isNestedObjectArray:$1,anyOf:e}of Y1){let D1=(a===0?"let ":"")+`memory=url.indexOf('&${w}=')
let a${a}
`;h?(H+=D1,$1?H+=`while(memory!==-1){const start=memory+${w.length+2}
memory=url.indexOf('&',start)
if(a${a}===undefined)
a${a}=''
else
a${a}+=','
let temp
if(memory===-1)temp=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else temp=decodeURIComponent(url.slice(start, memory).replace(/\\+/g,' '))
const charCode=temp.charCodeAt(0)
if(charCode!==91&&charCode !== 123)
temp='"'+temp+'"'
a${a}+=temp
if(memory===-1)break
memory=url.indexOf('&${w}=',memory)
if(memory===-1)break}try{if(a${a}.charCodeAt(0)===91)a${a} = JSON.parse(a${a})
else
a${a}=JSON.parse('['+a${a}+']')}catch{}
`:H+=`while(memory!==-1){const start=memory+${w.length+2}
memory=url.indexOf('&',start)
if(a${a}===undefined)a${a}=[]
if(memory===-1){const temp=decodeURIComponent(url.slice(start)).replace(/\\+/g,' ')
if(temp.includes(',')){a${a}=a${a}.concat(temp.split(','))}else{a${a}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g,' '))}
break}else{const temp=decodeURIComponent(url.slice(start, memory)).replace(/\\+/g,' ')
if(temp.includes(',')){a${a}=a${a}.concat(temp.split(','))}else{a${a}.push(temp)}
}memory=url.indexOf('&${w}=',memory)
if(memory===-1) break
}`):I?H+=D1+`if(memory!==-1){const start=memory+${w.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${a}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))else a${a}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))if(a${a}!==undefined)try{a${a}=JSON.parse(a${a})}catch{}}`:(H+=D1+`if(memory!==-1){const start=memory+${w.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${a}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else{a${a}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))`,e&&(H+=`
let deepMemory=url.indexOf('&${w}=',memory)
if(deepMemory!==-1){a${a}=[a${a}]
let first=true
while(true){const start=deepMemory+${w.length+2}
if(first)first=false
else deepMemory = url.indexOf('&', start)
let value
if(deepMemory===-1)value=url.slice(start).replace(/\\+/g,' ')
else value=url.slice(start, deepMemory).replace(/\\+/g,' ')
value=decodeURIComponent(value)
if(value===null){if(deepMemory===-1){break}else{continue}}
const vStart=value.charCodeAt(0)
const vEnd=value.charCodeAt(value.length - 1)
if((vStart===91&&vEnd===93)||(vStart===123&&vEnd===125))
try{a${a}.push(JSON.parse(value))}catch{a${a}.push(value)}if(deepMemory===-1)break}}`),H+="}}"),a++,H+=`
`}H+="c.query={"+Y1.map(({key:w},h)=>`'${w}':a${h}`).join(",")+"}",H+=`} else c.query = {}
`}}let v=typeof D=="function"&&A6(D),J1=z||$.afterResponse?.length?"c.response= ":"",r=R||L||v||!!$.parse?.length||!!$.afterHandle?.some(A6)||!!$.beforeHandle?.some(A6)||!!$.transform?.some(A6)||!!$.mapResponse?.some(A6),q1=(typeof D=="function"?dJ(D):!1)||!!$.beforeHandle?.some(dJ)||!!$.afterHandle?.some(dJ)||!!$.transform?.some(dJ),C1=Object.keys(Z.response??{}),b1=C1.length>1,_1=C1.length===0||C1.length===1&&C1[0]==="200",O1=J.cookie||J.set||O||z||b1||!_1||G&&M||q1,J0=(Y1="r")=>`return ${O1?"mapResponse":"mapCompactResponse"}(${J1}${Y1}${O1?",c.set":""}${s0})
`,s0=q1||Y.mapResponseContext?`,${Y.mapResponseContext}`:"";(z||J.route)&&(H+=`c.route=\`${F}\`
`);let N6=k("parse",{total:$.parse?.length});if(L){let Y1=!!$.parse?.length||J.body||Z.body;Y.parser.declare&&(H+=Y.parser.declare),H+=`
try{`;let a=typeof $.parse=="string"?$.parse:Array.isArray($.parse)&&$.parse.length===1?typeof $.parse[0]=="string"?$.parse[0]:typeof $.parse[0].fn=="string"?$.parse[0].fn:void 0:void 0;if(!a&&Z.body&&!$.parse?.length){let w=Z.body.schema;w&&w.anyOf&&w[g]==="Union"&&w.anyOf?.length===2&&w.anyOf?.find((h)=>h[g]==="ElysiaForm")&&(a="formdata")}if(a&&TJ1.includes(a)){let w=k("parse",{total:$.parse?.length}),h=!!Z.body?.isOptional;switch(a){case"json":case"application/json":H+=Y.parser.json(h);break;case"text":case"text/plain":H+=Y.parser.text(h);break;case"urlencoded":case"application/x-www-form-urlencoded":H+=Y.parser.urlencoded(h);break;case"arrayBuffer":case"application/octet-stream":H+=Y.parser.arrayBuffer(h);break;case"formdata":case"multipart/form-data":H+=Y.parser.formData(h);break;default:a[0]in A["~parser"]&&(H+=O?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",H+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${a}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`);break}w.resolve()}else if(Y1){H+=`
`;let w=$.parse?.length?"let":"const";H+=O?`${w} contentType=c.headers['content-type']
`:`${w} contentType=c.request.headers.get('content-type')
`;let h=!1;if($.parse?.length)H+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{h=!0;let $1=!!Z.body?.isOptional;H+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+Y.parser.json($1)+`break
case 120:`+Y.parser.urlencoded($1)+`break
case 111:`+Y.parser.arrayBuffer($1)+`break
case 114:`+Y.parser.formData($1)+`break
default:if(contentType.charCodeAt(0)===116){`+Y.parser.text($1)+`}break
}`}let I=k("parse",{total:$.parse?.length});if($.parse)for(let $1=0;$1<$.parse.length;$1++){let e=`bo${$1}`;if($1!==0&&(H+=`
if(!used){`),typeof $.parse[$1].fn=="string"){let D1=I.resolveChild($.parse[$1].fn),E1=!!Z.body?.isOptional;switch($.parse[$1].fn){case"json":case"application/json":h=!0,H+=Y.parser.json(E1);break;case"text":case"text/plain":h=!0,H+=Y.parser.text(E1);break;case"urlencoded":case"application/x-www-form-urlencoded":h=!0,H+=Y.parser.urlencoded(E1);break;case"arrayBuffer":case"application/octet-stream":h=!0,H+=Y.parser.arrayBuffer(E1);break;case"formdata":case"multipart/form-data":h=!0,H+=Y.parser.formData(E1);break;default:H+=`let ${e}=parser['${$.parse[$1].fn}'](c,contentType)
if(${e} instanceof Promise)${e}=await ${e}
if(${e}!==undefined){c.body=${e};used=true;}
`}D1()}else{let D1=I.resolveChild($.parse[$1].fn.name);H+=`let ${e}=e.parse[${$1}]
${e}=${e}(c,contentType)
if(${e} instanceof Promise)${e}=await ${e}
if(${e}!==undefined){c.body=${e};used=true}`,D1()}if($1!==0&&(H+="}"),h)break}if(I.resolve(),!h){let $1=!!Z.body?.isOptional;$.parse?.length&&(H+=`
if(!used){
if(!contentType) throw new ParseError()
`),H+="switch(contentType){",H+=`case 'application/json':
`+Y.parser.json($1)+`break
case 'text/plain':`+Y.parser.text($1)+`break
case 'application/x-www-form-urlencoded':`+Y.parser.urlencoded($1)+`break
case 'application/octet-stream':`+Y.parser.arrayBuffer($1)+`break
case 'multipart/form-data':`+Y.parser.formData($1)+`break
`;for(let e of Object.keys(A["~parser"]))H+=`case '${e}':let bo${e}=parser['${e}'](c,contentType)
if(bo${e} instanceof Promise)bo${e}=await bo${e}
if(bo${e} instanceof ElysiaCustomStatusResponse)throw result
if(bo${e}!==undefined)c.body=bo${e}
break
`;$.parse?.length&&(H+="}"),H+="}"}$.parse?.length&&(H+=`
delete c.contentType`)}H+="}catch(error){throw new ParseError(error)}"}if(N6.resolve(),$?.transform){let Y1=k("transform",{total:$.transform.length});$.transform.length&&(H+=`let transformed
`);for(let a=0;a<$.transform.length;a++){let w=$.transform[a],h=Y1.resolveChild(w.fn.name);H+=A6(w)?`transformed=await e.transform[${a}](c)
`:`transformed=e.transform[${a}](c)
`,w.subType==="mapDerive"?H+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`:H+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else Object.assign(c,transformed)
`,h()}Y1.resolve()}let D6=[];if(Z){if(Z.headers){if(Z.headers.hasDefault)for(let[Y1,a]of Object.entries(j0.Default(Z.headers.schema,{}))){let w=typeof a=="object"?JSON.stringify(a):typeof a=="string"?`'${a}'`:a;w!==void 0&&(H+=`c.headers['${Y1}']??=${w}
`)}H+=$Z({name:"c.headers",schema:Z.headers,type:"headers",normalize:N}),Z.headers.isOptional&&(H+="if(isNotEmpty(c.headers)){"),Z.body?.schema?.noValidate!==!0&&(H+="if(validator.headers.Check(c.headers) === false){"+S.validate("headers")+"}"),Z.headers.hasTransform&&(H+=AZ(`c.headers=validator.headers.Decode(c.headers)
`,"headers")),Z.headers.isOptional&&(H+="}")}if(Z.params){if(Z.params.hasDefault)for(let[Y1,a]of Object.entries(j0.Default(Z.params.schema,{}))){let w=typeof a=="object"?JSON.stringify(a):typeof a=="string"?`'${a}'`:a;w!==void 0&&(H+=`c.params['${Y1}']??=${w}
`)}Z.params?.schema?.noValidate!==!0&&(H+="if(validator.params.Check(c.params)===false){"+S.validate("params")+"}"),Z.params.hasTransform&&(H+=AZ(`c.params=validator.params.Decode(c.params)
`,"params"))}if(Z.query){if(Z.query.hasDefault)for(let[Y1,a]of Object.entries(j0.Default(Z.query.schema,{}))){let w=typeof a=="object"?JSON.stringify(a):typeof a=="string"?`'${a}'`:a;w!==void 0&&(H+=`if(c.query['${Y1}']===undefined)c.query['${Y1}']=${w}
`),H+=$Z({name:"c.query",schema:Z.query,type:"query",normalize:N})}Z.query.isOptional&&(H+="if(isNotEmpty(c.query)){"),Z.query?.schema?.noValidate!==!0&&(H+="if(validator.query.Check(c.query)===false){"+S.validate("query")+"}"),Z.query.hasTransform&&(H+=AZ(`c.query=validator.query.Decode(Object.assign({},c.query))
`,"query")),Z.query.isOptional&&(H+="}")}if(L&&Z.body){(Z.body.hasTransform||Z.body.isOptional)&&(H+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&isNotEmpty(c.body))
`);let Y1=jJ1(Z.body.schema),a=!1;if(Z.body.hasDefault){let w=j0.Default(Z.body.schema,Z.body.schema.type==="object"||Z.body.schema[g]==="Import"&&Z.body.schema.$defs[Z.body.schema.$ref][g]==="Object"?{}:void 0),h=hJ(Z.body.schema);if(!Y1&&w&&typeof w=="object"&&(i3("File",h)||i3("Files",h))){a=!0;for(let[$1,e]of Object.entries(w))(e==="File"||e==="Files")&&delete w[$1];o0(w)||(w=void 0)}let I=typeof w=="object"?JSON.stringify(w):typeof w=="string"?`'${w}'`:w;w!=null&&(Array.isArray(w)?H+=`if(!c.body)c.body=${I}
`:typeof w=="object"?H+=`c.body=Object.assign(${I},c.body)
`:H+=`c.body=${I}
`),H+=$Z({name:"c.body",schema:Z.body,type:"body",normalize:N}),Z.body?.schema?.noValidate!==!0&&(Z.body.isOptional?H+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+S.validate("body")+"}":H+="if(validator.body.Check(c.body)===false){"+S.validate("body")+"}")}else H+=$Z({name:"c.body",schema:Z.body,type:"body",normalize:N}),Z.body?.schema?.noValidate!==!0&&(Z.body.isOptional?H+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+S.validate("body")+"}":H+="if(validator.body.Check(c.body)===false){"+S.validate("body")+"}");if(Z.body.hasTransform&&(H+=AZ(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,"body")),Y1&&Z.body.schema.anyOf?.length){let w=Object.values(Z.body.schema.anyOf);for(let h=0;h<w.length;h++){let I=w[h];if(i3("File",I)||i3("Files",I)){let $1=K6(I,{modules:A.definitions.typebox,dynamic:!A.config.aot,models:A.definitions.type,normalize:A.config.normalize,additionalCoerce:FH(),sanitize:()=>A.config.sanitize});if($1){let e=D6.length===0,D1=Object.entries(I.properties),E1=e?`
`:" else ";E1+=`if(fileUnions[${D6.length}].Check(c.body)){`;let I0="",X6=0;for(let r2=0;r2<D1.length;r2++){let[h6,_9]=D1[r2];!_9.extension||_9[g]!=="File"&&_9[g]!=="Files"||(X6&&(I0+=","),I0+=`validateFileExtension(c.body.${h6},${JSON.stringify(_9.extension)},'body.${h6}')`,X6++)}I0&&(X6===1?E1+=`await ${I0}
`:X6>1&&(E1+=`await Promise.all([${I0}])
`),E1+="}",H+=E1,D6.push($1))}}}}else if(a||!Y1&&(i3("File",hJ(Z.body.schema))||i3("Files",hJ(Z.body.schema)))){let w="",h=0;for(let[I,$1]of Object.entries(hJ(Z.body.schema).properties))!$1.extension||$1[g]!=="File"&&$1[g]!=="Files"||(h&&(w+=","),w+=`validateFileExtension(c.body.${I},${JSON.stringify($1.extension)},'body.${I}')`,h++);h&&(H+=`
`),h===1?H+=`await ${w}
`:h>1&&(H+=`await Promise.all([${w}])
`)}}if(Z.cookie){let Y1=lT({modules:A.definitions.typebox,validator:Z.cookie,defaultConfig:A.config.cookie,dynamic:!!A.config.aot,config:Z.cookie?.config??{},models:A.definitions.type});if(H+=`const cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,Y1.hasDefault)for(let[a,w]of Object.entries(j0.Default(Y1.schema,{})))H+=`cookieValue['${a}'] = ${typeof w=="object"?JSON.stringify(w):w}
`;Y1.isOptional&&(H+="if(isNotEmpty(c.cookie)){"),Z.body?.schema?.noValidate!==!0&&(H+="if(validator.cookie.Check(cookieValue)===false){"+S.validate("cookie","cookieValue")+"}"),Y1.hasTransform&&(H+=AZ(`for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue)))c.cookie[key].value=value
`,"cookie")),Y1.isOptional&&(H+="}")}}if($?.beforeHandle){let Y1=k("beforeHandle",{total:$.beforeHandle.length}),a=!1;for(let w=0;w<$.beforeHandle.length;w++){let h=$.beforeHandle[w],I=Y1.resolveChild(h.fn.name),$1=DZ(h);if(h.subType==="resolve"||h.subType==="mapResolve")a||(a=!0,H+=`
let resolved
`),H+=A6(h)?`resolved=await e.beforeHandle[${w}](c);
`:`resolved=e.beforeHandle[${w}](c);
`,h.subType==="mapResolve"?H+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`:H+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else Object.assign(c, resolved)
`;else if(!$1)H+=A6(h)?`await e.beforeHandle[${w}](c)
`:`e.beforeHandle[${w}](c)
`,I();else{if(H+=A6(h)?`be=await e.beforeHandle[${w}](c)
`:`be=e.beforeHandle[${w}](c)
`,I("be"),H+="if(be!==undefined){",Y1.resolve(),$.afterHandle?.length){k("handle",{name:G?D.name:void 0}).resolve();let D1=k("afterHandle",{total:$.afterHandle.length});for(let E1=0;E1<$.afterHandle.length;E1++){let I0=$.afterHandle[E1],X6=DZ(I0),r2=D1.resolveChild(I0.fn.name);H+=`c.response = be
`,X6?(H+=A6(I0.fn)?`af=await e.afterHandle[${E1}](c)
`:`af=e.afterHandle[${E1}](c)
`,H+=`if(af!==undefined) c.response=be=af
`):H+=A6(I0.fn)?`await e.afterHandle[${E1}](c, be)
`:`e.afterHandle[${E1}](c, be)
`,r2("af")}D1.resolve()}Z.response&&(H+=S.response("be"));let e=k("mapResponse",{total:$.mapResponse?.length});if($.mapResponse?.length){H+=`c.response=be
`;for(let D1=0;D1<$.mapResponse.length;D1++){let E1=$.mapResponse[D1],I0=e.resolveChild(E1.fn.name);H+=`if(mr===undefined){mr=${fF(E1)?"await ":""}e.mapResponse[${D1}](c)
if(mr!==undefined)be=c.response=mr}`,I0()}}e.resolve(),H+=T(),H+=`return mapEarlyResponse(${J1}be,c.set${s0})}
`}}Y1.resolve()}if($.afterHandle?.length){let Y1=k("handle",{name:G?D.name:void 0});$.afterHandle.length?H+=v?`let r=c.response=await ${Q}
`:`let r=c.response=${Q}
`:H+=v?`let r=await ${Q}
`:`let r=${Q}
`,Y1.resolve();let a=k("afterHandle",{total:$.afterHandle.length});for(let h=0;h<$.afterHandle.length;h++){let I=$.afterHandle[h],$1=DZ(I),e=a.resolveChild(I.fn.name);$1?(H+=A6(I.fn)?`af=await e.afterHandle[${h}](c)
`:`af=e.afterHandle[${h}](c)
`,e("af"),Z.response?(H+="if(af!==undefined){",a.resolve(),H+=S.response("af"),H+="c.response=af}"):(H+="if(af!==undefined){",a.resolve(),H+="c.response=af}")):(H+=A6(I.fn)?`await e.afterHandle[${h}](c)
`:`e.afterHandle[${h}](c)
`,e())}a.resolve(),H+=`r=c.response
`,Z.response&&(H+=S.response()),H+=T();let w=k("mapResponse",{total:$.mapResponse?.length});if($.mapResponse?.length)for(let h=0;h<$.mapResponse.length;h++){let I=$.mapResponse[h],$1=w.resolveChild(I.fn.name);H+=`mr=${fF(I)?"await ":""}e.mapResponse[${h}](c)
if(mr!==undefined)r=c.response=mr
`,$1()}w.resolve(),H+=J0()}else{let Y1=k("handle",{name:G?D.name:void 0});if(Z.response||$.mapResponse?.length){H+=v?`let r=await ${Q}
`:`let r=${Q}
`,Y1.resolve(),Z.response&&(H+=S.response()),k("afterHandle").resolve();let a=k("mapResponse",{total:$.mapResponse?.length});if($.mapResponse?.length){H+=`
c.response=r
`;for(let w=0;w<$.mapResponse.length;w++){let h=$.mapResponse[w],I=a.resolveChild(h.fn.name);H+=`
if(mr===undefined){mr=${fF(h)?"await ":""}e.mapResponse[${w}](c)
if(mr!==undefined)r=c.response=mr}
`,I()}}a.resolve(),H+=T(),D instanceof Response?(H+=J.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${J1}${Q}.clone(),c.set${s0})else return ${Q}.clone()`:`return ${Q}.clone()`,H+=`
`):H+=J0()}else if(R||z){H+=v?`let r=await ${Q}
`:`let r=${Q}
`,Y1.resolve(),k("afterHandle").resolve();let a=k("mapResponse",{total:$.mapResponse?.length});if($.mapResponse?.length){H+=`c.response= r
`;for(let w=0;w<$.mapResponse.length;w++){let h=$.mapResponse[w],I=a.resolveChild(h.fn.name);H+=`if(mr===undefined){mr=${fF(h)?"await ":""}e.mapResponse[${w}](c)
if(mr!==undefined)r=c.response=mr}`,I()}}a.resolve(),H+=T()+J0()}else{Y1.resolve();let a=v?`await ${Q}`:Q;k("afterHandle").resolve(),D instanceof Response?H+=J.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${J1}${Q}.clone(),c.set${s0})
else return ${Q}.clone()
`:`return ${Q}.clone()
`:H+=J0(a)}}if(H+=`
}catch(error){`,!r&&$.error?.length&&(H+="return(async()=>{"),H+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,R&&(H+=T()),z&&$.trace)for(let Y1=0;Y1<$.trace.length;Y1++)H+=`report${Y1}?.resolve(error);reportChild${Y1}?.(error)
`;let v6=k("error",{total:$.error?.length});if($.error?.length){H+=`c.error=error
`,U?H+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`:H+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`,H+=`let er
`;for(let Y1=0;Y1<$.error.length;Y1++){let a=v6.resolveChild($.error[Y1].fn.name);A6($.error[Y1])?H+=`er=await e.error[${Y1}](c)
`:H+=`er=e.error[${Y1}](c)
if(er instanceof Promise)er=await er
`,a();let w=k("mapResponse",{total:$.mapResponse?.length});if($.mapResponse?.length)for(let h=0;h<$.mapResponse.length;h++){let I=$.mapResponse[h],$1=w.resolveChild(I.fn.name);H+=`c.response=er
er=e.mapResponse[${h}](c)
if(er instanceof Promise)er=await er
`,$1()}if(w.resolve(),H+=`er=mapEarlyResponse(er,set${s0})
`,H+="if(er){",z&&$.trace){for(let h=0;h<$.trace.length;h++)H+=`report${h}.resolve()
`;v6.resolve()}H+="return er}"}}if(v6.resolve(),H+="return handleError(c,error,true)",!r&&$.error?.length&&(H+="})()"),H+="}",q||z){H+="finally{ ",r||(H+=";(async()=>{");let Y1=k("afterResponse",{total:$.afterResponse?.length});if(q&&$.afterResponse)for(let a=0;a<$.afterResponse.length;a++){let w=Y1.resolveChild($.afterResponse[a].fn.name);H+=`
await e.afterResponse[${a}](c)
`,w()}Y1.resolve(),r||(H+="})()"),H+="}"}let _4=Y.inject?Object.keys(Y.inject).join(",")+",":"",a0="const {handler,handleError,hooks:e, "+k2("validator,",U)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+k2("parseQuery,",L)+k2("parseQueryFromURL,",K)+"},error:{"+k2("ValidationError,",U)+k2("ParseError",L)+"},validateFileExtension,schema,definitions,ERROR_CODE,"+k2("parseCookie,",R)+k2("signCookie,",R)+k2("decodeURIComponent,",K)+"ElysiaCustomStatusResponse,"+k2("ELYSIA_TRACE,",z)+k2("ELYSIA_REQUEST_ID,",z)+k2("parser,",$.parse?.length)+k2("getServer,",J.server)+k2("fileUnions,",D6.length)+_4+k2("TypeBoxError",U)+`}=hooks
const trace=e.trace
return ${r?"async ":""}function handle(c){`;$.beforeHandle?.length&&(a0+=`let be
`),$.afterHandle?.length&&(a0+=`let af
`),$.mapResponse?.length&&(a0+=`let mr
`),X&&(a0+=`c.schema=schema
c.defs=definitions
`),H=a0+H+"}",a0="";try{return Function("hooks",`"use strict";
`+H)({handler:D,hooks:GT($),validator:U?Z:void 0,handleError:A.handleError,mapResponse:W.mapResponse,mapCompactResponse:W.mapCompactResponse,mapEarlyResponse:W.mapEarlyResponse,isNotEmpty:o0,utils:{parseQuery:L?lJ:void 0,parseQueryFromURL:K?RJ1:void 0},error:{ValidationError:U?G2:void 0,ParseError:L?QJ1:void 0},validateFileExtension:bT,schema:A.router.history,definitions:A.definitions.type,ERROR_CODE:sJ,parseCookie:R?vT:void 0,signCookie:R?nJ:void 0,decodeURIComponent:K?cT.default:void 0,ElysiaCustomStatusResponse:E4,ELYSIA_TRACE:z?XY:void 0,ELYSIA_REQUEST_ID:z?WZ:void 0,getServer:J.server?()=>A.getServer():void 0,fileUnions:D6.length?D6:void 0,TypeBoxError:U?P1:void 0,parser:A["~parser"],...Y.inject})}catch(Y1){let a=GT($);console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof D=="function"?D.toString():D,instruction:H,hooks:{...a,transform:a?.transform?.map?.((w)=>w.toString()),resolve:a?.resolve?.map?.((w)=>w.toString()),beforeHandle:a?.beforeHandle?.map?.((w)=>w.toString()),afterHandle:a?.afterHandle?.map?.((w)=>w.toString()),mapResponse:a?.mapResponse?.map?.((w)=>w.toString()),parse:a?.parse?.map?.((w)=>w.toString()),error:a?.error?.map?.((w)=>w.toString()),afterResponse:a?.afterResponse?.map?.((w)=>w.toString()),stop:a?.stop?.map?.((w)=>w.toString())},validator:Z,definitions:A.definitions.type,error:Y1}),console.log("---"),process.exit(1)}},pT=(A,F)=>{let B="",$=JH({trace:A.event.trace,addFn:F??((Z)=>{B+=Z})})("request",{total:A.event.request?.length});if(A.event.request?.length){B+="try{";for(let Z=0;Z<A.event.request.length;Z++){let D=A.event.request[Z],X=DZ(D),J=A6(D),Y=$.resolveChild(A.event.request[Z].fn.name);X?(B+=`re=mapEarlyResponse(${J?"await ":""}onRequest[${Z}](c),c.set)
`,Y("re"),B+=`if(re!==undefined)return re
`):(B+=`${J?"await ":""}onRequest[${Z}](c)
`,Y())}B+="}catch(error){return app.handleError(c,error,false)}"}return $.resolve(),B},iT=(A,F="map")=>{let B=A.extender.higherOrderFunctions;if(!B.length)return"return "+F;let $=A["~adapter"].composeGeneralHandler,Z=F;for(let D=0;D<B.length;D++)Z=`hoc[${D}](${Z},${$.parameters})`;return`return function hocMap(${$.parameters}){return ${Z}(${$.parameters})}`},pq=(A)=>{let F=A["~adapter"].composeGeneralHandler;A.router.http.build();let B=F.error404(!!A.event.request?.length,!!A.event.error?.length),$=A.event.trace?.length,Z="",D=A.router,X=D.http.root.WS?`const route=router.find(r.method === "GET" && r.headers.get('upgrade')==='websocket'?'WS':r.method,p)`:"const route=router.find(r.method,p)";X+=D.http.root.ALL?`??router.find("ALL",p)
`:`
`,X+=B.code,X+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let J="";for(let[q,z]of Object.entries(D.static)){J+=`case'${q}':`,A.config.strictPath!==!0&&(J+=`case'${FZ(q)}':`);let H=BZ(q);q!==H&&(J+=`case'${H}':`),J+="switch(r.method){",(("GET"in z)||("WS"in z))&&(J+="case 'GET':",("WS"in z)&&(J+=`if(r.headers.get('upgrade')==='websocket')return ht[${z.WS}].composed(c)
`),("GET"in z)&&(J+=`return ht[${z.GET}].composed(c)
`));for(let[U,K]of Object.entries(z))U==="ALL"||U==="GET"||U==="WS"||(J+=`case '${U}':return ht[${K}].composed(c)
`);"ALL"in z?J+=`default:return ht[${z.ALL}].composed(c)
`:J+=`default:break map
`,J+="}"}let Y=!!A.event.request?.some(A6),W=F.inject?Object.keys(F.inject).join(",")+",":"";Z+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,`+k2("ELYSIA_TRACE,",$)+k2("ELYSIA_REQUEST_ID,",$)+W+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,A.event.request?.length&&(Z+=`const onRequest=app.event.request.map(x=>x.fn)
`),Z+=B.declare,A.event.trace?.length&&(Z+="const "+A.event.trace.map((q,z)=>`tr${z}=app.event.trace[${z}].fn`).join(",")+`
`),Z+=`${Y?"async ":""}function map(${F.parameters}){`,A.event.request?.length&&(Z+=`let re
`),Z+=F.createContext(A),A.event.trace?.length&&(Z+="c[ELYSIA_TRACE]=["+A.event.trace.map((q,z)=>`tr${z}(c)`).join(",")+`]
`),Z+=pT(A),J&&(Z+=`
map: switch(p){
`+J+"}"),Z+=X+`}
`+iT(A);let G=nT(A);A.handleError=G;let Q=Function("data",`"use strict";
`+Z)({app:A,mapEarlyResponse:A["~adapter"].handler.mapEarlyResponse,NotFoundError:xT,randomId:BY,handleError:G,status:aJ,redirect:ZH,ELYSIA_TRACE:$?XY:void 0,ELYSIA_REQUEST_ID:$?WZ:void 0,...F.inject});return gF&&Bun.gc(!1),Q},nT=(A)=>{let F=A.event,B="",$=A["~adapter"].composeError,Z=$.inject?Object.keys($.inject).join(",")+",":"",D=!!A.event.trace?.length;B+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,"+k2("onError,",A.event.error)+k2("afterResponse,",A.event.afterResponse)+k2("trace,",A.event.trace)+k2("onMapResponse,",A.event.mapResponse)+k2("ELYSIA_TRACE,",D)+k2("ELYSIA_REQUEST_ID,",D)+Z+`}=inject
`,B+=`return ${A.event.error?.find(A6)||A.event.mapResponse?.find(A6)?"async ":""}function(context,error,skipGlobal){`,B+="",D&&(B+=`const id=context[ELYSIA_REQUEST_ID]
`);let X=JH({context:"context",trace:F.trace,addFn:(G)=>{B+=G}});B+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,$.declare&&(B+=$.declare);let J=D||F.afterResponse?.length||F.afterResponse?.length?"context.response = ":"";if(A.event.error)for(let G=0;G<A.event.error.length;G++){let Q=A.event.error[G],q=`${A6(Q)?"await ":""}onError[${G}](context)
`;if(B+="if(skipGlobal!==true){",DZ(Q)){B+=`_r=${q}
if(_r!==undefined){if(_r instanceof Response)return mapResponse(_r,set${$.mapResponseContext})
if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let z=X("mapResponse",{total:F.mapResponse?.length,name:"context"});if(F.mapResponse?.length)for(let H=0;H<F.mapResponse.length;H++){let U=F.mapResponse[H],K=z.resolveChild(U.fn.name);B+=`context.response=_r_r=${fF(U)?"await ":""}onMapResponse[${H}](context)
`,K()}z.resolve(),B+=`return mapResponse(${J}_r,set${$.mapResponseContext})}`}else B+=q;B+="}"}B+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+$.validationError+`
}
`,B+=`if(error instanceof Error){
if(typeof error.toResponse==='function')return context.response=error.toResponse()
`+$.unknownError+`
}`;let Y=X("mapResponse",{total:F.mapResponse?.length,name:"context"});if(B+=`
if(!context.response)context.response=error.message??error
`,F.mapResponse?.length){B+=`let mr
`;for(let G=0;G<F.mapResponse.length;G++){let Q=F.mapResponse[G],q=Y.resolveChild(Q.fn.name);B+=`if(mr===undefined){mr=${fF(Q)?"await ":""}onMapResponse[${G}](context)
if(mr!==undefined)error=context.response=mr}`,q()}}Y.resolve(),B+=`
return mapResponse(${J}error,set${$.mapResponseContext})}`;let W=(G)=>typeof G=="function"?G:G.fn;return Function("inject",`"use strict";
`+B)({mapResponse:A["~adapter"].handler.mapResponse,ERROR_CODE:sJ,ElysiaCustomStatusResponse:E4,onError:A.event.error?.map(W),afterResponse:A.event.afterResponse?.map(W),trace:A.event.trace?.map(W),onMapResponse:A.event.mapResponse?.map(W),ELYSIA_TRACE:D?XY:void 0,ELYSIA_REQUEST_ID:D?WZ:void 0,...$.inject})},K4=(A,F,B)=>{if(o0(F.headers)||F.status!==200||F.cookie)switch(DY(F),A?.constructor?.name){case"String":return new Response(A,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return R2(A.value);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,K4(A.response,F,B);case"ReadableStream":return F.headers["content-type"]?.startsWith("text/event-stream")||(F.headers["content-type"]="text/event-stream; charset=utf-8"),B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,F);case void 0:return A?new Response(JSON.stringify(A),F):new Response("",F);case"Response":return AY(A,F,B);case"Error":return s3(A,F);case"Promise":return A.then(($)=>K4($,F,B));case"Function":return K4(A(),F,B);case"Number":case"Boolean":return new Response(A.toString(),F);case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);case"FormData":return new Response(A,F);default:if(A instanceof Response)return AY(A,F,B);if(A instanceof Promise)return A.then(($)=>K4($,F));if(A instanceof Error)return s3(A,F);if(A instanceof E4)return F.status=A.code,K4(A.response,F,B);if(typeof A?.next=="function")return t3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>K4($,F));if(typeof A?.toResponse=="function")return K4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A,F)}return A instanceof Response&&!A.headers.has("content-length")&&A.headers.get("transfer-encoding")==="chunked"?t3(e3(A),o3(A,F),B):typeof A?.next=="function"||A instanceof ReadableStream?t3(A,F,B):r8(A,B)},C4=(A,F,B)=>{if(A!=null)if(o0(F.headers)||F.status!==200||F.cookie)switch(DY(F),A?.constructor?.name){case"String":return new Response(A,F);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return R2(A.value);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,C4(A.response,F,B);case"ReadableStream":return F.headers["content-type"]?.startsWith("text/event-stream")||(F.headers["content-type"]="text/event-stream; charset=utf-8"),B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,F);case void 0:return A?new Response(JSON.stringify(A),F):void 0;case"Response":return AY(A,F,B);case"Promise":return A.then(($)=>C4($,F));case"Error":return s3(A,F);case"Function":return C4(A(),F);case"Number":case"Boolean":return new Response(A.toString(),F);case"FormData":return new Response(A);case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);default:if(A instanceof Response)return AY(A,F,B);if(A instanceof Promise)return A.then(($)=>C4($,F));if(A instanceof Error)return s3(A,F);if(A instanceof E4)return F.status=A.code,C4(A.response,F,B);if(typeof A?.next=="function")return t3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>C4($,F));if(typeof A?.toResponse=="function")return C4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A,F)}else switch(A?.constructor?.name){case"String":return new Response(A);case"Array":case"Object":return F.headers["content-type"]="application/json",new Response(JSON.stringify(A),F);case"ElysiaFile":return R2(A.value);case"File":return R2(A,F);case"Blob":return R2(A,F);case"ElysiaCustomStatusResponse":return F.status=A.code,C4(A.response,F,B);case"ReadableStream":return B?.signal?.addEventListener("abort",{handleEvent(){B?.signal&&!B?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:return A?new Response(JSON.stringify(A),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return!A.headers.has("content-length")&&A.headers.get("transfer-encoding")==="chunked"?t3(e3(A),o3(A),B):A;case"Promise":return A.then(($)=>{let Z=C4($,F);if(Z!==void 0)return Z});case"Error":return s3(A,F);case"Function":return r8(A(),B);case"Number":case"Boolean":return new Response(A.toString());case"Cookie":return A instanceof r3?new Response(A.value,F):new Response(A?.toString(),F);case"FormData":return new Response(A);default:if(A instanceof Response)return A;if(A instanceof Promise)return A.then(($)=>C4($,F));if(A instanceof Error)return s3(A,F);if(A instanceof E4)return F.status=A.code,C4(A.response,F,B);if(typeof A?.next=="function")return t3(A,F,B);if(typeof A?.then=="function")return A.then(($)=>C4($,F));if(typeof A?.toResponse=="function")return C4(A.toResponse(),F);if("charCodeAt"in A){let $=A.charCodeAt(0);if($===123||$===91)return F.headers["Content-Type"]||(F.headers["Content-Type"]="application/json"),new Response(JSON.stringify(A),F)}return new Response(A)}},r8=(A,F)=>{switch(A?.constructor?.name){case"String":return new Response(A);case"Object":case"Array":return new Response(JSON.stringify(A),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return R2(A.value);case"File":return R2(A);case"Blob":return R2(A);case"ElysiaCustomStatusResponse":return K4(A.response,{status:A.code,headers:{}});case"ReadableStream":return F?.signal?.addEventListener("abort",{handleEvent(){F?.signal&&!F?.signal?.aborted&&A.cancel()}},{once:!0}),new Response(A,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:return A?new Response(JSON.stringify(A),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return A.headers.get("transfer-encoding")==="chunked"?t3(e3(A),o3(A),F):A;case"Error":return s3(A);case"Promise":return A.then((B)=>r8(B,F));case"Function":return r8(A(),F);case"Number":case"Boolean":return new Response(A.toString());case"FormData":return new Response(A);default:if(A instanceof Response)return A;if(A instanceof Promise)return A.then((B)=>r8(B,F));if(A instanceof Error)return s3(A);if(A instanceof E4)return K4(A.response,{status:A.code,headers:{}});if(typeof A?.next=="function")return t3(A,void 0,F);if(typeof A?.then=="function")return A.then((B)=>K4(B,set));if(typeof A?.toResponse=="function")return r8(A.toResponse());if("charCodeAt"in A){let B=A.charCodeAt(0);if(B===123||B===91)return new Response(JSON.stringify(A),{headers:{"Content-Type":"application/json"}})}return new Response(A)}},s3=(A,F)=>new Response(JSON.stringify({name:A?.name,message:A?.message,cause:A?.cause}),{status:F?.status!==200?F?.status??500:500,headers:F?.headers}),xJ1=(A,F,B={})=>{if(typeof A=="function")return;let $=K4(A,{headers:B});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length)return $.clone.bind($)},AY=mT({mapResponse:K4,mapCompactResponse:r8}),t3=XH({mapResponse:K4,mapCompactResponse:r8}),a8=(A,F)=>F?A:"",VT=(A,F,B,$=!1)=>{let Z="",D=A.setHeaders,X=!!A.event.trace?.length;X&&(Z+=`const id=randomId()
`);let J=/[:*]/.test(F.path),Y=`const u=request.url,s=u.indexOf('/',${A.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`,W=B.query||!!F.hooks.query||!!F.standaloneValidators?.find((Q)=>Q.query)||A.event.request?.length;W&&(Z+=Y);let G=B.path?J?"get path(){"+(W?"":Y)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`:`path:'${F.path}',`:"";Z+=a8("const c=",!$)+"{request,store,"+a8("qi,",W)+a8("params:request.params,",J)+G+a8("url:request.url,",X||B.url||W)+"redirect,error:status,status,set:{headers:"+(o0(D)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",B.server&&(Z+=",get server(){return app.getServer()}"),X&&(Z+=",[ELYSIA_REQUEST_ID]:id");{let Q="";for(let q of Object.keys(A.singleton.decorator))Q+=`,'${q}':decorator['${q}']`;Z+=Q}return Z+=`}
`,Z},iq=(A,F)=>{let B=!!A.event.trace?.length,$=!!A.extender.higherOrderFunctions.length,Z=JZ(F.hooks,A.inference);Z=JZ({handler:F.handler},Z);let D="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+a8("randomId=data.randomId,",B)+a8("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",B)+a8("ELYSIA_TRACE=data.ELYSIA_TRACE,",B)+a8("trace=data.trace,",B)+a8("hoc=data.hoc,",$)+`status=data.status
`;A.event.request?.length&&(D+=`const onRequest=app.event.request.map(x=>x.fn)
`),D+=`${A.event.request?.find(A6)?"async":""} function map(request){`;let X=Z.query||!!F.hooks.query||!!F.standaloneValidators?.find((J)=>J.query);return B||X||A.event.request?.length?(D+=VT(A,F,Z),D+=pT(A),D+="return handler(c)}"):D+=`return handler(${VT(A,F,Z,!0)})}`,D+=iT(A),Function("data",D)({app:A,handler:F.compile?.()??F.composed,redirect:ZH,status:aJ,hoc:A.extender.higherOrderFunctions.map((J)=>J.fn),store:A.store,decorator:A.decorator,route:F.path,randomId:B?BY:void 0,ELYSIA_TRACE:B?XY:void 0,ELYSIA_REQUEST_ID:B?WZ:void 0,trace:B?A.event.trace?.map((J)=>J?.fn??J):void 0,mapEarlyResponse:C4})},bJ1=(A,F,B={})=>{if(typeof A=="function"||A instanceof Blob)return;if(typeof A=="object"&&A?.toString()==="[object HTMLBundle]")return()=>A;let $=K4(A,{headers:B});if(!F.parse?.length&&!F.transform?.length&&!F.beforeHandle?.length&&!F.afterHandle?.length)return $ instanceof Promise?$.then((Z)=>{if(Z)return Z.headers.has("content-type")||Z.headers.append("content-type","text/plain"),Z.clone()}):($.headers.has("content-type")||$.headers.append("content-type","text/plain"),()=>$.clone())},NT={open(A){A.data.open?.(A)},message(A,F){A.data.message?.(A,F)},drain(A){A.data.drain?.(A)},close(A,F,B){A.data.close?.(A,F,B)}},mJ=class{constructor(A,F,B=void 0){this.raw=A,this.data=F,this.body=B,this.validator=A.data?.validator,this.sendText=A.sendText.bind(A),this.sendBinary=A.sendBinary.bind(A),this.close=A.close.bind(A),this.terminate=A.terminate.bind(A),this.publishText=A.publishText.bind(A),this.publishBinary=A.publishBinary.bind(A),this.subscribe=A.subscribe.bind(A),this.unsubscribe=A.unsubscribe.bind(A),this.isSubscribed=A.isSubscribed.bind(A),this.cork=A.cork.bind(A),this.remoteAddress=A.remoteAddress,this.binaryType=A.binaryType,this.data=A.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}get id(){return this.data.id}send(A,F){return Buffer.isBuffer(A)?this.raw.send(A,F):this.validator?.Check(A)===!1?this.raw.send(new G2("message",this.validator,A).message):(typeof A=="object"&&(A=JSON.stringify(A)),this.raw.send(A,F))}ping(A){return Buffer.isBuffer(A)?this.raw.ping(A):this.validator?.Check(A)===!1?this.raw.send(new G2("message",this.validator,A).message):(typeof A=="object"&&(A=JSON.stringify(A)),this.raw.ping(A))}pong(A){return Buffer.isBuffer(A)?this.raw.pong(A):this.validator?.Check(A)===!1?this.raw.send(new G2("message",this.validator,A).message):(typeof A=="object"&&(A=JSON.stringify(A)),this.raw.pong(A))}publish(A,F,B){return Buffer.isBuffer(F)?this.raw.publish(A,F,B):this.validator?.Check(F)===!1?this.raw.send(new G2("message",this.validator,F).message):(typeof F=="object"&&(F=JSON.stringify(F)),this.raw.publish(A,F,B))}get readyState(){return this.raw.readyState}},fJ1=(A)=>{let F=typeof A=="function"?[A]:A;return async function(B,$){if(typeof $=="string"){let Z=$?.charCodeAt(0);if(Z===34||Z===47||Z===91||Z===123)try{$=JSON.parse($)}catch{}else $H($)?$=+$:$==="true"?$=!0:$==="false"?$=!1:$==="null"&&($=null)}if(F)for(let Z=0;Z<F.length;Z++){let D=F[Z](B,$);if(D instanceof Promise&&(D=await D),D!==void 0)return D}return $}},gJ1=(A)=>{let F=(B,$)=>{if($ instanceof Promise)return $.then((X)=>F(B,X));if(Buffer.isBuffer($))return B.send($.toString());if($===void 0)return;let Z=(X)=>{if(A?.Check(X)===!1)return B.send(new G2("message",A,X).message);if(typeof X=="object")return B.send(JSON.stringify(X));B.send(X)};if(typeof $?.next!="function")return void Z($);let D=$.next();if(D instanceof Promise)return(async()=>{let X=await D;if(A?.Check(X)===!1)return B.send(new G2("message",A,X).message);if(Z(X.value),!X.done)for await(let J of $)Z(J)})();if(Z(D.value),!D.done)for(let X of $)Z(X)};return F},uJ1=/:.+?\?(?=\/|$)/,sT=(A)=>{let F=uJ1.exec(A);if(!F)return[A];let B=[],$=A.slice(0,F.index),Z=F[0].slice(0,-1),D=A.slice(F.index+F[0].length);B.push($.slice(0,-1)),B.push($+Z);for(let X of sT(D))X&&(X.startsWith("/:")||B.push($.slice(0,-1)+X),B.push($+Z+X));return B},aT={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},nq=(A)=>{if(!A.config.aot||!A.config.systemRouter)return;let F={},B=(Z,D)=>{F[Z.path]?F[Z.path][Z.method]||(F[Z.path][Z.method]=D):F[Z.path]={[Z.method]:D}},$=A.routeTree;for(let Z of A.router.history){if(typeof Z.handler!="function")continue;let D=Z.method;if(D==="GET"&&`WS_${Z.path}`in $||D==="WS"||Z.path.charCodeAt(Z.path.length-1)===42||!(D in aT))continue;if(D==="ALL"){`WS_${Z.path}`in $||(F[Z.path]=Z.hooks?.config?.mount?Z.hooks.trace||A.event.trace||A.extender.higherOrderFunctions?iq(A,Z):Z.hooks.mount||Z.handler:Z.handler);continue}let X,J=A.config.precompile?iq(A,Z):(Y)=>X?X(Y):(X=iq(A,Z))(Y);for(let Y of sT(Z.path))B({method:D,path:Y},J)}return F},xF=(A,F)=>{if(!F)return A;for(let B of Object.keys(F))if(A[B]!==F[B]){if(!A[B]){A[B]=F[B];continue}if(A[B]&&F[B]){if(typeof A[B]=="function"||A[B]instanceof Response){A[B]=F[B];continue}A[B]={...A[B],...F[B]}}}return A},yJ1={...eq,name:"bun",handler:{mapResponse:K4,mapEarlyResponse:C4,mapCompactResponse:r8,createStaticHandler:xJ1,createNativeStaticHandler:bJ1},composeHandler:{...eq.composeHandler,headers:iJ?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen(A){return(F,B)=>{if(typeof Bun>"u")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(A.compile(),typeof F=="string"){if(!$H(F))throw new Error("Port must be a numeric value");F=parseInt(F)}let $=(D,{withAsync:X=!1}={})=>{let J={},Y=[];for(let[W,G]of Object.entries(D))if(_T){if(!G)continue;for(let[Q,q]of Object.entries(G))if(!(!q||!(Q in aT))){if(q instanceof Promise){X&&(J[W]||(J[W]={}),Y.push(q.then((z)=>{z instanceof Response&&(J[W][Q]=z),typeof z=="object"&&z?.toString()==="[object HTMLBundle]"&&(J[W][Q]=z)})));continue}!(q instanceof Response)&&!(typeof q=="object"&&q?.toString()==="[object HTMLBundle]")||(J[W]||(J[W]={}),J[W][Q]=q)}}else{if(!G)continue;if(G instanceof Promise){X&&(J[W]||(J[W]={}),Y.push(G.then((Q)=>{Q instanceof Response&&(J[W]=Q)})));continue}if(!(G instanceof Response))continue;J[W]=G}return X?Promise.all(Y).then(()=>J):J},Z=typeof F=="object"?{development:!XZ,reusePort:!0,...A.config.serve||{},...F||{},routes:xF(xF($(A.router.response),nq(A)),A.config.serve?.routes),websocket:{...A.config.websocket||{},...NT||{}},fetch:A.fetch}:{development:!XZ,reusePort:!0,...A.config.serve||{},routes:xF(xF($(A.router.response),nq(A)),A.config.serve?.routes),websocket:{...A.config.websocket||{},...NT||{}},port:F,fetch:A.fetch};if(A.server=Bun.serve(Z),A.event.start)for(let D=0;D<A.event.start.length;D++)A.event.start[D].fn(A);B&&B(A.server),process.on("beforeExit",()=>{if(A.server&&(A.server.stop?.(),A.server=null,A.event.stop))for(let D=0;D<A.event.stop.length;D++)A.event.stop[D].fn(A)}),A.promisedModules.then(async()=>{A.server?.reload({...Z,fetch:A.fetch,routes:xF(xF(await $(A.router.response,{withAsync:!0}),nq(A)),A.config.serve?.routes)}),Bun?.gc(!1)})}},async stop(A,F){if(A.server){if(A.server.stop(F),A.server=null,A.event.stop?.length)for(let B=0;B<A.event.stop.length;B++)A.event.stop[B].fn(A)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",new Error().stack)},ws(A,F,B){let{parse:$,body:Z,response:D,...X}=B,J=K6(Z,{modules:A.definitions.typebox,models:A.definitions.type,normalize:A.config.normalize}),Y=K6(D,{modules:A.definitions.typebox,models:A.definitions.type,normalize:A.config.normalize});A.route("WS",F,async(W)=>{let G=W.server??A.server,{set:Q,path:q,qi:z,headers:H,query:U,params:K}=W;if(W.validator=Y,B.upgrade)if(typeof B.upgrade=="function"){let R=B.upgrade(W);R instanceof Promise&&await R}else B.upgrade&&Object.assign(Q.headers,B.upgrade);if(Q.cookie&&o0(Q.cookie)){let R=hT(Q.cookie);R&&(Q.headers["set-cookie"]=R)}Q.headers["set-cookie"]&&Array.isArray(Q.headers["set-cookie"])&&(Q.headers=dT(new Headers(Q.headers),Q.headers["set-cookie"]));let E=gJ1(Y),L=fJ1($),V;if(typeof B.beforeHandle=="function"){let R=B.beforeHandle(W);R instanceof Promise&&await R}let M=[...B.error?Array.isArray(B.error)?B.error:[B.error]:[],...(A.event.error??[]).map((R)=>typeof R=="function"?R:R.fn)].filter((R)=>R),O=M.length?async(R,_)=>{for(let P of M){let T=P(Object.assign(W,{error:_}));if(T instanceof Promise&&(T=await T),await E(R,T),T)break}}:()=>{};if(!G?.upgrade(W.request,{headers:o0(Q.headers)?Q.headers:void 0,data:{...W,get id(){return V||(V=BY())},validator:Y,ping(R){B.ping?.(R)},pong(R){B.pong?.(R)},open:async(R)=>{try{await E(R,B.open?.(new mJ(R,W)))}catch(_){O(R,_)}},message:async(R,_)=>{let P=await L(R,_);if(J?.Check(P)===!1)return void R.send(new G2("message",J,P).message);try{await E(R,B.message?.(new mJ(R,W,P),P))}catch(T){O(R,T)}},drain:async(R)=>{try{await E(R,B.drain?.(new mJ(R,W)))}catch(_){O(R,_)}},close:async(R,_,P)=>{try{await E(R,B.close?.(new mJ(R,W),_,P))}catch(T){O(R,T)}}}}))return Q.status=400,"Expected a websocket connection"},{...X,websocket:B})}},MT=gF?Bun.env:typeof process<"u"&&process?.env?process.env:{},sq=(A,F)=>{for(let[B,$]of Object.entries(A.schema.properties))F[B]??=$.default},RT=(A)=>{let{mapResponse:F,mapEarlyResponse:B}=A["~adapter"].handler;return async($)=>{let Z=$.url,D=Z.indexOf("/",11),X=Z.indexOf("?",D+1),J=X===-1?Z.substring(D):Z.substring(D,X),Y={cookie:{},status:200,headers:{}},W=Object.assign({},A.singleton.decorator,{set:Y,store:A.singleton.store,request:$,path:J,qi:X,error:aJ,status:aJ,redirect:ZH});try{if(A.event.request)for(let P=0;P<A.event.request.length;P++){let T=A.event.request[P].fn,N=T(W);if(N instanceof Promise&&(N=await N),N=B(N,Y),N)return W.response=N}let G=$.method==="GET"&&$.headers.get("upgrade")?.toLowerCase()==="websocket"?"WS":$.method,Q=A.router.dynamic.find($.method,J)??A.router.dynamic.find(G,J)??A.router.dynamic.find("ALL",J);if(!Q)throw new xT;let{handle:q,hooks:z,validator:H,content:U,route:K}=Q.store,E;if($.method!=="GET"&&$.method!=="HEAD")if(U)switch(U){case"application/json":E=await $.json();break;case"text/plain":E=await $.text();break;case"application/x-www-form-urlencoded":E=lJ(await $.text());break;case"application/octet-stream":E=await $.arrayBuffer();break;case"multipart/form-data":E={};let P=await $.formData();for(let T of P.keys()){if(E[T])continue;let N=P.getAll(T);N.length===1?E[T]=N[0]:E[T]=N}break}else{let P=$.headers.get("content-type");if(P){let T=P.indexOf(";");if(T!==-1&&(P=P.slice(0,T)),W.contentType=P,z.parse)for(let N=0;N<z.parse.length;N++){let y=z.parse[N].fn,S=y(W,P);if(S instanceof Promise&&(S=await S),S){E=S;break}}if(delete W.contentType,E===void 0)switch(P){case"application/json":E=await $.json();break;case"text/plain":E=await $.text();break;case"application/x-www-form-urlencoded":E=lJ(await $.text());break;case"application/octet-stream":E=await $.arrayBuffer();break;case"multipart/form-data":E={};let N=await $.formData();for(let y of N.keys()){if(E[y])continue;let S=N.getAll(y);S.length===1?E[y]=S[0]:E[y]=S}break}}}W.route=K,W.body=E,W.params=Q?.params||void 0,W.query=X===-1?{}:lJ(Z.substring(X+1)),W.headers={};for(let[P,T]of $.headers.entries())W.headers[P]=T;let L=Object.assign({},A.config?.cookie,H?.cookie?.config),V=$.headers.get("cookie");W.cookie=await vT(W.set,V,L?{secrets:L.secrets!==void 0?typeof L.secrets=="string"?L.secrets:L.secrets.join(","):void 0,sign:L.sign===!0?!0:L.sign!==void 0?typeof L.sign=="string"?L.sign:L.sign.join(","):void 0}:void 0);let M=H?.createHeaders?.();M&&sq(M,W.headers);let O=H?.createParams?.();O&&sq(O,W.params);let R=H?.createQuery?.();if(R&&sq(R,W.query),z.transform)for(let P=0;P<z.transform.length;P++){let T=z.transform[P],N=T.fn(W);if(N instanceof Promise&&(N=await N),N instanceof E4){let y=B(N,W.set);if(y)return W.response=y}T.subType==="derive"&&Object.assign(W,N)}if(H){if(M){let P=structuredClone(W.headers);for(let[T,N]of $.headers)P[T]=N;if(H.headers.Check(P)===!1)throw new G2("header",H.headers,P)}else H.headers?.Decode&&(W.headers=H.headers.Decode(W.headers));if(O?.Check(W.params)===!1)throw new G2("params",H.params,W.params);if(H.params?.Decode&&(W.params=H.params.Decode(W.params)),R?.Check(W.query)===!1)throw new G2("query",H.query,W.query);if(H.query?.Decode&&(W.query=H.query.Decode(W.query)),H.createCookie?.()){let P={};for(let[T,N]of Object.entries(W.cookie))P[T]=N.value;if(H.cookie.Check(P)===!1)throw new G2("cookie",H.cookie,P);H.cookie?.Decode&&(P=H.cookie.Decode(P))}if(H.createBody?.()?.Check(E)===!1)throw new G2("body",H.body,E);H.body?.Decode&&(W.body=H.body.Decode(E))}if(z.beforeHandle)for(let P=0;P<z.beforeHandle.length;P++){let T=z.beforeHandle[P],N=T.fn(W);if(N instanceof Promise&&(N=await N),N instanceof E4){let y=B(N,W.set);if(y)return W.response=y}if(T.subType==="resolve"){Object.assign(W,N);continue}if(N!==void 0){if(W.response=N,z.afterHandle)for(let S=0;S<z.afterHandle.length;S++){let k=z.afterHandle[S].fn(W);k instanceof Promise&&(k=await k),k&&(N=k)}let y=B(N,W.set);if(y)return W.response=y}}let _=typeof q=="function"?q(W):q;if(_ instanceof Promise&&(_=await _),z.afterHandle)if(z.afterHandle.length){W.response=_;for(let P=0;P<z.afterHandle.length;P++){let T=z.afterHandle[P].fn(W);T instanceof Promise&&(T=await T);let N=B(T,W.set);if(N!==void 0){let y=H?.response?.[N.status];if(y?.Check(N)===!1)throw new G2("response",y,N);return y?.Encode&&(_=y.Encode(_)),W.response=N}}}else{let P=_ instanceof E4?_.code:Y.status?typeof Y.status=="string"?FY[Y.status]:Y.status:200,T=H?.createResponse?.()?.[P];if(T?.Check(_)===!1)throw new G2("response",T,_);T?.Encode&&(_=T.Encode(_))}if(W.set.cookie&&L?.sign){let P=L.secrets?typeof L.secrets=="string"?L.secrets:L.secrets[0]:void 0;if(L.sign===!0){if(P)for(let[T,N]of Object.entries(W.set.cookie))W.set.cookie[T].value=await nJ(N.value,P)}else{let T=H?.cookie?.schema?.properties;if(P)for(let N of L.sign)N in T&&W.set.cookie[N]?.value&&(W.set.cookie[N].value=await nJ(W.set.cookie[N].value,P))}}return F(W.response=_,W.set)}catch(G){let Q=G instanceof SJ&&G.error?G.error:G;return A.handleError(W,Q)}finally{if(A.event.afterResponse)for(let G of A.event.afterResponse)await G.fn(W)}}},vJ1=(A)=>{let{mapResponse:F}=A["~adapter"].handler;return async(B,$)=>{let Z=Object.assign(B,{error:$,code:$.code});if(Z.set=B.set,A.event.error)for(let D=0;D<A.event.error.length;D++){let X=A.event.error[D].fn(Z);if(X instanceof Promise&&(X=await X),X!=null)return B.response=F(X,B.set)}return new Response(typeof $.cause=="string"?$.cause:$.message,{headers:B.set.headers,status:$.status??500})}},tT;tT=Symbol.dispose;var hJ1=class A{constructor(F={}){this.server=null,this.dependencies={},this["~Prefix"]="",this["~Singleton"]=null,this["~Definitions"]=null,this["~Metadata"]=null,this["~Ephemeral"]=null,this["~Volatile"]=null,this["~Routes"]=null,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={typebox:F1.Module({}),type:{},error:{}},this.extender={macros:[],higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return!this.global&&!this.scoped&&!this.local?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:o$(o$(this.global,this.scoped),this.local)}},this.standaloneValidator={global:null,scoped:null,local:null},this.event={},this.router={"~http":void 0,get http(){return this["~http"]||(this["~http"]=new eI({lazy:!0})),this["~http"]},"~dynamic":void 0,get dynamic(){return this["~dynamic"]||(this["~dynamic"]=new eI),this["~dynamic"]},static:{},response:{},history:[]},this.routeTree={},this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1},this["~parser"]={},this.handle=async(B)=>this.fetch(B),this.fetch=(B)=>(this.fetch=this.config.aot?pq(this):RT(this))(B),this.handleError=async(B,$)=>(this.handleError=this.config.aot?nT(this):vJ1(this))(B,$),this.listen=(B,$)=>(this["~adapter"].listen(this)(B,$),this.promisedModules.size&&ET(5000),this.promisedModules.then(()=>{ET(1000)}),this),this.stop=async(B)=>(await this["~adapter"].stop?.(this,B),this),this[tT]=()=>{this.server&&this.stop()},F.tags&&(F.detail?F.detail.tags=F.tags:F.detail={tags:F.tags}),this.config={prefix:"",aot:MT.ELYSIA_AOT!=="false",nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...F,cookie:{path:"/",...F?.cookie},experimental:F?.experimental??{},seed:F?.seed===void 0?"":F?.seed},this["~adapter"]=F.adapter??(typeof Bun<"u"?yJ1:eq),F?.analytic&&(F?.name||F?.seed!==void 0)&&(this.telemetry={stack:new Error().stack})}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}getServer(){return this.server}getParent(){return null}get promisedModules(){return this._promisedModules||(this._promisedModules=new YJ1(console.error,()=>{})),this._promisedModules}env(F,B=MT){if(K6(F,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(B)===!1){let $=new G2("env",F,B);throw new Error($.all.map((Z)=>Z.summary).join(`
`))}return this}wrap(F){return this.extender.higherOrderFunctions.push({checksum:bF(JSON.stringify({name:this.config.name,seed:this.config.seed,content:F.toString()})),fn:F}),this}applyMacro(F){if(this.extender.macros.length){let B=XJ1({globalHook:this.event,localHook:F}),$={events:{global:this.event,local:F},get onParse(){return B("parse")},get onTransform(){return B("transform")},get onBeforeHandle(){return B("beforeHandle")},get onAfterHandle(){return B("afterHandle")},get mapResponse(){return B("mapResponse")},get onAfterResponse(){return B("afterResponse")},get onError(){return B("error")}};for(let Z of this.extender.macros)DJ1(Z.fn($),F,B)}}get models(){let F={};for(let B of Object.keys(this.definitions.type))F[B]=K6(this.definitions.typebox.Import(B));return F.modules=this.definitions.typebox,F}add(F,B,$,Z,D,X){let J=D?.skipPrefix??!1,Y=D?.allowMeta??!1;if(Z??={},X===void 0&&(X=[],this.standaloneValidator.local&&(X=X.concat(this.standaloneValidator.local)),this.standaloneValidator.scoped&&(X=X.concat(this.standaloneValidator.scoped)),this.standaloneValidator.global&&(X=X.concat(this.standaloneValidator.global))),B!==""&&B.charCodeAt(0)!==47&&(B="/"+B),this.config.prefix&&!J&&(B=this.config.prefix+B),Z?.type)switch(Z.type){case"text":Z.type="text/plain";break;case"json":Z.type="application/json";break;case"formdata":Z.type="multipart/form-data";break;case"urlencoded":Z.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Z.type="application/octet-stream";break;default:break}let W=this.validator.getCandidate(),G={body:Z?.body??W?.body,headers:Z?.headers??W?.headers,params:Z?.params??W?.params,query:Z?.query??W?.query,cookie:Z?.cookie??W?.cookie,response:Z?.response??W?.response},Q=this.config.precompile===!0||typeof this.config.precompile=="object"&&this.config.precompile.compose===!0,q=()=>{let N=this.definitions.type,y=!this.config.aot,S=this.config.normalize,k=this.definitions.typebox,v=()=>this.config.sanitize,J1=()=>{if(G.cookie||X.find((r)=>r.cookie))return lT({modules:k,validator:G.cookie,defaultConfig:this.config.cookie,config:G.cookie?.config??{},dynamic:y,models:N,validators:X.map((r)=>r.cookie),sanitize:v})};return Q?{body:K6(G.body,{modules:k,dynamic:y,models:N,normalize:S,additionalCoerce:FH(),validators:X.map((r)=>r.body),sanitize:v}),headers:K6(G.headers,{modules:k,dynamic:y,models:N,additionalProperties:!0,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.headers),sanitize:v}),params:K6(G.params,{modules:k,dynamic:y,models:N,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.params),sanitize:v}),query:K6(G.query,{modules:k,dynamic:y,models:N,normalize:S,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.query),sanitize:v}),cookie:J1(),response:wT(G.response,{modules:k,dynamic:y,models:N,normalize:S,validators:X.map((r)=>r.response),sanitize:v})}:{createBody(){return this.body?this.body:this.body=K6(G.body,{modules:k,dynamic:y,models:N,normalize:S,additionalCoerce:FH(),validators:X.map((r)=>r.body),sanitize:v})},createHeaders(){return this.headers?this.headers:this.headers=K6(G.headers,{modules:k,dynamic:y,models:N,additionalProperties:!S,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.headers),sanitize:v})},createParams(){return this.params?this.params:this.params=K6(G.params,{modules:k,dynamic:y,models:N,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.params),sanitize:v})},createQuery(){return this.query?this.query:this.query=K6(G.query,{modules:k,dynamic:y,models:N,coerce:!0,additionalCoerce:BA(),validators:X.map((r)=>r.query),sanitize:v})},createCookie(){return this.cookie?this.cookie:this.cookie=J1()},createResponse(){return this.response?this.response:this.response=wT(G.response,{modules:k,dynamic:y,models:N,normalize:S,validators:X.map((r)=>r.response),sanitize:v})}}};(W.body||W.cookie||W.headers||W.params||W.query||W.response)&&(Z=n8(Z,W)),Z.tags&&(Z.detail?Z.detail.tags=Z.tags:Z.detail={tags:Z.tags}),o0(this.config.detail)&&(Z.detail=d4(Object.assign({},this.config.detail),Z.detail)),this.applyMacro(Z);let z=o0(this.event)?n8(this.event,WT(Z)):AJ1(WT(Z));if(this.config.aot===!1){let N=q();this.router.dynamic.add(F,B,{validator:N,hooks:z,content:Z?.type,handle:$,route:B});let y=BZ(B,{dynamic:!0});if(B!==y&&this.router.dynamic.add(F,y,{validator:N,hooks:z,content:Z?.type,handle:$,route:B}),this.config.strictPath===!1){let S=FZ(B);this.router.dynamic.add(F,S,{validator:N,hooks:z,content:Z?.type,handle:$,route:B});let k=BZ(S);S!==k&&this.router.dynamic.add(F,S,{validator:N,hooks:z,content:Z?.type,handle:$,route:B})}this.router.history.push({method:F,path:B,composed:null,handler:$,compile:void 0,hooks:z,standaloneValidators:X});return}let H=this["~adapter"].handler,U=typeof $!="function"?()=>{let N=H.createNativeStaticHandler?.($,z,this.setHeaders);return N instanceof Promise?N.then((y)=>{if(y)return y}):N?.()}:void 0,K=this.config.nativeStaticResponse===!0,E=(N)=>{!K||!U||(_T?this.router.response[N]?this.router.response[N][F]=U():this.router.response[N]={[F]:U()}:this.router.response[N]=U())};E(B);let L,V=()=>L||(L=_J1({app:this,path:B,method:F,hooks:z,validator:q(),handler:typeof $!="function"&&typeof H.createStaticHandler!="function"?()=>$:$,allowMeta:Y,inference:this.inference})),M;if(`${F}_${B}`in this.routeTree)for(let N=0;N<this.router.history.length;N++){let y=this.router.history[N];if(y.path===B&&y.method===F){M=N;break}}else this.routeTree[`${F}_${B}`]=this.router.history.length;let O=M??this.router.history.length,R=Q?V():(N)=>(this.router.history[O].composed=V())(N);M!==void 0?this.router.history[M]=Object.assign({method:F,path:B,composed:R,compile:V,handler:$,hooks:z},X.length?{standaloneValidators:X}:void 0,Z.webSocket?{websocket:Z.websocket}:void 0):this.router.history.push(Object.assign({method:F,path:B,composed:R,compile:V,handler:$,hooks:z},X.length?{standaloneValidators:X}:void 0,Z.webSocket?{websocket:Z.websocket}:void 0));let _={handler:Q?R:void 0,compile(){return this.handler=V()}},P=this.router.static,T=B.indexOf(":")===-1&&B.indexOf("*")===-1;if(F==="WS"){if(T){B in P?P[B][F]=O:P[B]={[F]:O};return}this.router.http.add("WS",B,_),this.config.strictPath||this.router.http.add("WS",FZ(B),_);let N=BZ(B,{dynamic:!0});B!==N&&this.router.http.add("WS",N,_);return}if(T)B in P?P[B][F]=O:P[B]={[F]:O},this.config.strictPath||E(FZ(B));else{if(this.router.http.add(F,B,_),!this.config.strictPath){let y=FZ(B);E(y),this.router.http.add(F,y,_)}let N=BZ(B,{dynamic:!0});B!==N&&(this.router.http.add(F,N,_),E(N))}}headers(F){return F?(this.setHeaders||(this.setHeaders={}),this.setHeaders=d4(this.setHeaders,F),this):this}onStart(F){return this.on("start",F),this}onRequest(F){return this.on("request",F),this}onParse(F,B){return B?this.on(F,"parse",B):typeof F=="string"?this.on("parse",this["~parser"][F]):this.on("parse",F)}parser(F,B){return this["~parser"][F]=B,this}onTransform(F,B){return B?this.on(F,"transform",B):this.on("transform",F)}resolve(F,B){B||(B=F,F={as:"local"});let $={subType:"resolve",fn:B};return this.onBeforeHandle(F,$)}mapResolve(F,B){B||(B=F,F={as:"local"});let $={subType:"mapResolve",fn:B};return this.onBeforeHandle(F,$)}onBeforeHandle(F,B){return B?this.on(F,"beforeHandle",B):this.on("beforeHandle",F)}onAfterHandle(F,B){return B?this.on(F,"afterHandle",B):this.on("afterHandle",F)}mapResponse(F,B){return B?this.on(F,"mapResponse",B):this.on("mapResponse",F)}onAfterResponse(F,B){return B?this.on(F,"afterResponse",B):this.on("afterResponse",F)}trace(F,B){B||(B=F,F={as:"local"}),Array.isArray(B)||(B=[B]);for(let $ of B)this.on(F,"trace",PJ1($));return this}error(F,B){switch(typeof F){case"string":return B.prototype[sJ]=F,this.definitions.error[F]=B,this;case"function":return this.definitions.error=F(this.definitions.error),this}for(let[$,Z]of Object.entries(F))Z.prototype[sJ]=$,this.definitions.error[$]=Z;return this}onError(F,B){return B?this.on(F,"error",B):this.on("error",F)}onStop(F){return this.on("stop",F),this}on(F,B,$){let Z;switch(typeof F){case"string":Z=F,$=B;break;case"object":Z=B,!Array.isArray(B)&&typeof B=="object"&&($=B);break}Array.isArray($)?$=G6($):typeof $=="function"?$=[{fn:$}]:$=[$];let D=$;for(let X of D)X.scope=typeof F=="string"?"local":F?.as??"local",(Z==="resolve"||Z==="derive")&&(X.subType=Z);Z!=="trace"&&(this.inference=JZ({[Z]:D.map((X)=>X.fn)},this.inference));for(let X of D){let J=$J1(X,"global",{skipIfHasType:!0});switch(Z){case"start":this.event.start??=[],this.event.start.push(J);break;case"request":this.event.request??=[],this.event.request.push(J);break;case"parse":this.event.parse??=[],this.event.parse.push(J);break;case"transform":this.event.transform??=[],this.event.transform.push(J);break;case"derive":this.event.transform??=[],this.event.transform.push(G6(J,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(J);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(G6(J,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(J);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(J);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(J);break;case"trace":this.event.trace??=[],this.event.trace.push(J);break;case"error":this.event.error??=[],this.event.error.push(J);break;case"stop":this.event.stop??=[],this.event.stop.push(J);break}}return this}as(F){return p3(this.event.parse,F),p3(this.event.transform,F),p3(this.event.beforeHandle,F),p3(this.event.afterHandle,F),p3(this.event.mapResponse,F),p3(this.event.afterResponse,F),p3(this.event.trace,F),p3(this.event.error,F),F==="scoped"?(this.validator.scoped=o$(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null)):F==="global"&&(this.validator.global=o$(this.validator.global,o$(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null),this.standaloneValidator.scoped!==null&&(this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null)),this}group(F,B,$){let Z=new A({...this.config,prefix:""});Z.singleton={...this.singleton},Z.definitions={...this.definitions},Z.getServer=()=>this.getServer(),Z.inference=QT(this.inference),Z.extender={...this.extender},Z["~parser"]=this["~parser"],Z.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let D=typeof B=="object",X=(D?$:B)(Z);return this.singleton=d4(this.singleton,Z.singleton),this.definitions=d4(this.definitions,Z.definitions),X.event.request?.length&&(this.event.request=[...this.event.request||[],...X.event.request||[]]),X.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...X.event.mapResponse||[]]),this.model(X.definitions.type),Object.values(Z.router.history).forEach(({method:J,path:Y,handler:W,hooks:G,standaloneValidators:Q})=>{if(Y=(D?"":this.config.prefix)+F+Y,D){let q=B,z=G;this.add(J,Y,W,n8(q,{...z||{},error:z.error?Array.isArray(z.error)?[...z.error??[],...X.event.error??[]]:[z.error,...X.event.error??[]]:X.event.error}),void 0,Q)}else this.add(J,Y,W,n8(G,{error:X.event.error}),{skipPrefix:!0},Q)}),this}guard(F,B){if(!B){if(typeof F=="object"){this.applyMacro(F),F.detail&&(this.config.detail?this.config.detail=d4(Object.assign({},this.config.detail),F.detail):this.config.detail=F.detail),F.tags&&(this.config.detail?this.config.detail.tags=F.tags:this.config.detail={tags:F.tags});let D=F.as??"local";if(F.schema==="standalone"){this.standaloneValidator[D]||(this.standaloneValidator[D]=[]);let X=F?.response||typeof F?.response=="string"||F?.response&&g in F.response?{200:F.response}:F?.response;this.standaloneValidator[D].push({body:F.body,headers:F.headers,params:F.params,query:F.query,response:X,cookie:F.cookie})}else this.validator[D]={body:F.body??this.validator[D]?.body,headers:F.headers??this.validator[D]?.headers,params:F.params??this.validator[D]?.params,query:F.query??this.validator[D]?.query,response:F.response??this.validator[D]?.response,cookie:F.cookie??this.validator[D]?.cookie};return F.parse&&this.on({as:D},"parse",F.parse),F.transform&&this.on({as:D},"transform",F.transform),F.derive&&this.on({as:D},"derive",F.derive),F.beforeHandle&&this.on({as:D},"beforeHandle",F.beforeHandle),F.resolve&&this.on({as:D},"resolve",F.resolve),F.afterHandle&&this.on({as:D},"afterHandle",F.afterHandle),F.mapResponse&&this.on({as:D},"mapResponse",F.mapResponse),F.afterResponse&&this.on({as:D},"afterResponse",F.afterResponse),F.error&&this.on({as:D},"error",F.error),this}return this.guard({},F)}let $=new A({...this.config,prefix:""});$.singleton={...this.singleton},$.definitions={...this.definitions},$.inference=QT(this.inference),$.extender={...this.extender},$.getServer=()=>this.getServer();let Z=B($);return this.singleton=d4(this.singleton,$.singleton),this.definitions=d4(this.definitions,$.definitions),Z.getServer=()=>this.server,Z.event.request?.length&&(this.event.request=[...this.event.request||[],...Z.event.request||[]]),Z.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...Z.event.mapResponse||[]]),this.model(Z.definitions.type),Object.values($.router.history).forEach(({method:D,path:X,handler:J,hooks:Y})=>{this.add(D,X,J,n8(F,{...Y||{},error:Y.error?Array.isArray(Y.error)?[...Y.error??[],...Z.event.error??[]]:[Y.error,...Z.event.error??[]]:Z.event.error}))}),this}use(F){if(Array.isArray(F)){let B=this;for(let $ of F)B=B.use($);return B}return F instanceof Promise?(this.promisedModules.add(F.then((B)=>{if(typeof B=="function")return B(this);if(B instanceof A)return this._use(B).compile();if(B.constructor.name==="Elysia")return this._use(B).compile();if(typeof B.default=="function")return B.default(this);if(B.default instanceof A)return this._use(B.default);if(B.constructor.name==="Elysia")return this._use(B.default);if(B.constructor.name==="_Elysia")return this._use(B.default);try{return this._use(B.default)}catch($){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),$}}).then((B)=>(B&&typeof B.compile=="function"&&B.compile(),B))),this):this._use(F)}propagatePromiseModules(F){if(F.promisedModules.size<=0)return this;for(let B of F.promisedModules.promises)this.promisedModules.add(B.then(($)=>{if(!$)return;let Z=this._use($);return Z instanceof Promise?Z.then((D)=>{D?D.compile():$.compile()}):$.compile()}));return this}_use(F){if(typeof F=="function"){let Z=F(this);return Z instanceof Promise?(this.promisedModules.add(Z.then((D)=>{if(D instanceof A){D.getServer=()=>this.getServer(),D.getGlobalRoutes=()=>this.getGlobalRoutes(),D.getGlobalDefinitions=()=>this.getGlobalDefinitions(),D.model(this.definitions.type),D.error(this.definitions.error);for(let{method:X,path:J,handler:Y,hooks:W,standaloneValidators:G}of Object.values(D.router.history))this.add(X,J,Y,o0(D.event.error)?n8(W,{error:D.event.error}):W,void 0,G);return D===this?void 0:(this.propagatePromiseModules(D),D)}return typeof D=="function"?D(this):typeof D.default=="function"?D.default(this):this._use(D)}).then((D)=>(D&&typeof D.compile=="function"&&D.compile(),D))),this):Z}this.propagatePromiseModules(F);let B=F.config.name,$=F.config.seed;if(F.getParent=()=>this,F.getServer=()=>this.getServer(),F.getGlobalRoutes=()=>this.getGlobalRoutes(),F.getGlobalDefinitions=()=>this.getGlobalDefinitions(),F.standaloneValidator?.scoped&&(this.standaloneValidator.local?this.standaloneValidator.local=this.standaloneValidator.local.concat(F.standaloneValidator.scoped):this.standaloneValidator.local=F.standaloneValidator.scoped),F.standaloneValidator?.global&&(this.standaloneValidator.global?this.standaloneValidator.global=this.standaloneValidator.global.concat(F.standaloneValidator.global):this.standaloneValidator.global=F.standaloneValidator.global),o0(F["~parser"])&&(this["~parser"]={...F["~parser"],...this["~parser"]}),F.setHeaders&&this.headers(F.setHeaders),B){B in this.dependencies||(this.dependencies[B]=[]);let Z=$!==void 0?bF(B+JSON.stringify($)):0;this.dependencies[B].some(({checksum:D})=>Z===D)||(this.extender.macros=this.extender.macros.concat(F.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(F.extender.higherOrderFunctions))}else F.extender.macros.length&&(this.extender.macros=this.extender.macros.concat(F.extender.macros)),F.extender.higherOrderFunctions.length&&(this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(F.extender.higherOrderFunctions));if(zT(this.extender.macros),F.extender.higherOrderFunctions.length){zT(this.extender.higherOrderFunctions);let Z=[];for(let D=0;D<this.extender.higherOrderFunctions.length;D++){let X=this.extender.higherOrderFunctions[D];X.checksum&&(Z.includes(X.checksum)&&(this.extender.higherOrderFunctions.splice(D,1),D--),Z.push(X.checksum))}Z.length=0}this.inference=oq(this.inference,F.inference),o0(F.singleton.decorator)&&this.decorate(F.singleton.decorator),o0(F.singleton.store)&&this.state(F.singleton.store),o0(F.definitions.type)&&this.model(F.definitions.type),o0(F.definitions.error)&&this.error(F.definitions.error),o0(F.definitions.error)&&(F.extender.macros=this.extender.macros.concat(F.extender.macros));for(let{method:Z,path:D,handler:X,hooks:J,standaloneValidators:Y}of Object.values(F.router.history))this.add(Z,D,X,o0(F.event.error)?n8(J,{error:F.event.error}):J,void 0,Y);if(B){B in this.dependencies||(this.dependencies[B]=[]);let Z=$!==void 0?bF(B+JSON.stringify($)):0;if(this.dependencies[B].some(({checksum:D})=>Z===D))return this;this.dependencies[B].push(this.config?.analytic?{name:F.config.name,seed:F.config.seed,checksum:Z,dependencies:F.dependencies,stack:F.telemetry?.stack,routes:F.router.history,decorators:F.singleton,store:F.singleton.store,error:F.definitions.error,derive:F.event.transform?.filter((D)=>D?.subType==="derive").map((D)=>({fn:D.toString(),stack:new Error().stack??""})),resolve:F.event.transform?.filter((D)=>D?.subType==="resolve").map((D)=>({fn:D.toString(),stack:new Error().stack??""}))}:{name:F.config.name,seed:F.config.seed,checksum:Z,dependencies:F.dependencies}),o0(F.event)&&(this.event=ZT(this.event,DT(F.event),Z))}else o0(F.event)&&(this.event=ZT(this.event,DT(F.event)));return F.validator.global&&(this.validator.global=n8(this.validator.global,{...F.validator.global})),F.validator.scoped&&(this.validator.local=n8(this.validator.local,{...F.validator.scoped})),this}macro(F){if(typeof F=="function"){let B={checksum:bF(JSON.stringify({name:this.config.name,seed:this.config.seed,content:F.toString()})),fn:F};this.extender.macros.push(B)}else if(typeof F=="object"){for(let $ of Object.keys(F))if(typeof F[$]=="object"){let Z={...F[$]};F[$]=(D)=>{if(D===!0)return Z}}let B={checksum:bF(JSON.stringify({name:this.config.name,seed:this.config.seed,content:Object.entries(F).map(([$,Z])=>`${$}+${Z}`).join(",")})),fn:()=>F};this.extender.macros.push(B)}return this}mount(F,B,$){if(F instanceof A||typeof F=="function"||F.length===0||F==="/"){let J=typeof F=="function"?F:F instanceof A?F.compile().fetch:B instanceof A?B.compile().fetch:typeof B=="function"?B:(()=>{throw new Error("Invalid handler")})(),Y=({request:W,path:G})=>J(new Request($T(W.url,G),{method:W.method,headers:W.headers,signal:W.signal,credentials:W.credentials,referrerPolicy:W.referrerPolicy,duplex:W.duplex,redirect:W.redirect,mode:W.mode,keepalive:W.keepalive,integrity:W.integrity,body:W.body}));return this.route("ALL","/*",Y,{parse:"none",...$,detail:{...$?.detail,hide:!0},config:{mount:J}}),this}let Z=B instanceof A?B.compile().fetch:typeof B=="function"?B:(()=>{throw new Error("Invalid handler")})(),D=F.length-(F.endsWith("*")?1:0),X=({request:J,path:Y})=>Z(new Request($T(J.url,Y.slice(D)||"/"),{method:J.method,headers:J.headers,signal:J.signal,credentials:J.credentials,referrerPolicy:J.referrerPolicy,duplex:J.duplex,redirect:J.redirect,mode:J.mode,keepalive:J.keepalive,integrity:J.integrity,body:J.body}));return this.route("ALL",F,X,{parse:"none",...$,detail:{...$?.detail,hide:!0},config:{mount:Z}}),this.route("ALL",F+(F.endsWith("/")?"*":"/*"),X,{parse:"none",...$,detail:{...$?.detail,hide:!0},config:{mount:Z}}),this}get(F,B,$){return this.add("GET",F,B,$),this}post(F,B,$){return this.add("POST",F,B,$),this}put(F,B,$){return this.add("PUT",F,B,$),this}patch(F,B,$){return this.add("PATCH",F,B,$),this}delete(F,B,$){return this.add("DELETE",F,B,$),this}options(F,B,$){return this.add("OPTIONS",F,B,$),this}all(F,B,$){return this.add("ALL",F,B,$),this}head(F,B,$){return this.add("HEAD",F,B,$),this}connect(F,B,$){return this.add("CONNECT",F,B,$),this}route(F,B,$,Z){return this.add(F.toUpperCase(),B,$,Z,Z?.config),this}ws(F,B){return this["~adapter"].ws?this["~adapter"].ws(this,F,B):console.warn("Current adapter doesn't support WebSocket"),this}state(F,B,$){B===void 0?($=F,F={as:"append"},B=""):$===void 0&&(typeof F=="string"?($=B,B=F,F={as:"append"}):typeof F=="object"&&($=B,B=""));let{as:Z}=F;if(typeof B!="string")return this;switch(typeof $){case"object":return!$||!o0($)?this:B?((B in this.singleton.store)?this.singleton.store[B]=d4(this.singleton.store[B],$,{override:Z==="override"}):this.singleton.store[B]=$,this):$===null?this:(this.singleton.store=d4(this.singleton.store,$,{override:Z==="override"}),this);case"function":return B?(Z==="override"||!(B in this.singleton.store))&&(this.singleton.store[B]=$):this.singleton.store=$(this.singleton.store),this;default:return(Z==="override"||!(B in this.singleton.store))&&(this.singleton.store[B]=$),this}}decorate(F,B,$){B===void 0?($=F,F={as:"append"},B=""):$===void 0&&(typeof F=="string"?($=B,B=F,F={as:"append"}):typeof F=="object"&&($=B,B=""));let{as:Z}=F;if(typeof B!="string")return this;switch(typeof $){case"object":return B?((B in this.singleton.decorator)?this.singleton.decorator[B]=d4(this.singleton.decorator[B],$,{override:Z==="override"}):this.singleton.decorator[B]=$,this):$===null?this:(this.singleton.decorator=d4(this.singleton.decorator,$,{override:Z==="override"}),this);case"function":return B?(Z==="override"||!(B in this.singleton.decorator))&&(this.singleton.decorator[B]=$):this.singleton.decorator=$(this.singleton.decorator),this;default:return(Z==="override"||!(B in this.singleton.decorator))&&(this.singleton.decorator[B]=$),this}}derive(F,B){B||(B=F,F={as:"local"});let $={subType:"derive",fn:B};return this.onTransform(F,$)}model(F,B){switch(typeof F){case"object":let $={},Z=Object.entries(F);if(!Z.length)return this;for(let[J,Y]of Z)J in this.definitions.type||($[J]=this.definitions.type[J]=Y,$[J].$id??=`#/components/schemas/${J}`);return this.definitions.typebox=F1.Module({...this.definitions.typebox.$defs,...$}),this;case"function":let D=F(this.definitions.type);return this.definitions.type=D,this.definitions.typebox=F1.Module(D),this;case"string":if(!B)break;let X={...B,id:B.$id??`#/components/schemas/${F}`};return this.definitions.type[F]=B,this.definitions.typebox=F1.Module({...this.definitions.typebox.$defs,...X}),this}return this.definitions.type[F]=B,this.definitions.typebox=F1.Module({...this.definitions.typebox.$defs,[F]:B}),this}Ref(F){return F1.Ref(F)}mapDerive(F,B){B||(B=F,F={as:"local"});let $={subType:"mapDerive",fn:B};return this.onTransform(F,$)}affix(F,B,$){if($==="")return this;let Z=["_","-"," "],D=(W)=>W[0].toUpperCase()+W.slice(1),X=F==="prefix"?(W,G)=>Z.includes(W.at(-1)??"")?W+G:W+D(G):Z.includes($.at(-1)??"")?(W,G)=>G+W:(W,G)=>G+D(W),J=(W)=>{let G={};switch(W){case"decorator":for(let Q in this.singleton.decorator)G[X($,Q)]=this.singleton.decorator[Q];this.singleton.decorator=G;break;case"state":for(let Q in this.singleton.store)G[X($,Q)]=this.singleton.store[Q];this.singleton.store=G;break;case"model":for(let Q in this.definitions.type)G[X($,Q)]=this.definitions.type[Q];this.definitions.type=G;break;case"error":for(let Q in this.definitions.error)G[X($,Q)]=this.definitions.error[Q];this.definitions.error=G;break}},Y=Array.isArray(B)?B:[B];for(let W of Y.some((G)=>G==="all")?["decorator","state","model","error"]:Y)J(W);return this}prefix(F,B){return this.affix("prefix",F,B)}suffix(F,B){return this.affix("suffix",F,B)}compile(){return this["~adapter"].isWebStandard?(this.fetch=this.config.aot?pq(this):RT(this),typeof this.server?.reload=="function"&&this.server.reload({...this.server||{},fetch:this.fetch}),this):(typeof this.server?.reload=="function"&&this.server.reload(this.server||{}),this._handle=pq(this),this)}get modules(){return this.promisedModules}},Q8=hJ1;var x21=C7(uM(),1);var _21=C7(k21(),1),xX={GET:"96",POST:"95",PUT:"94",DELETE:"91",PATCH:"92",OPTIONS:"90",HEAD:"97",URL:"93",info:"90",warn:"33",error:"31",success:"34"},bX=()=>{return"["+_21.default().format("hh:mm:ss A")+"]"},fX=(A,F)=>{return`\x1B[${A}m${F}\x1B[0m`},Ip1={info:(...A)=>{console.log(bX(),fX(xX.info,"[INFO]"),...A)},warn:(...A)=>{console.log(bX(),fX(xX.warn,"[WARN]"),...A)},error:(...A)=>{console.log(bX(),fX(xX.error,"[ERROR]"),...A)},success:(...A)=>{console.log(bX(),fX(xX.success,"[SUCC]"),...A)},RequestMethod:(A,...F)=>{console.log(bX(),fX(xX[A],`[${A}]`),...F)}},u5=Ip1;var I8={PORT:3000,SECRET:"nota",DB_NAME:"nota",DB_URL:process.env.DB_URL||"mongodb://127.0.0.1:27017/",GIT_REPO:process.env.GIT_REPO,GIT_TOKEN:process.env.GIT_TOKEN,SWAGGER:{path:"/docs",documentation:{info:{title:"Nota's Documentation",version:"1.0.0"}}},CORS:{origin:["http://localhost:3000","*"],methods:["GET","POST","PUT","DELETE","OPTIONS"],credentials:!0,exposedHeaders:[],allowedHeaders:["Content-Type","Authorization"]}};var b21=async()=>{try{u5.info("Connecting to MongoDB ..."),await x21.default.connect(I8.DB_URL,{dbName:I8.DB_NAME}),u5.success(`Successfully connected to MongoDB: ${I8.DB_NAME}.`)}catch(A){u5.error(A.message),process.exit(400)}};var Tp1={body:F1.Object({name:F1.String({minLength:2,maxLength:8}),psw:F1.String({minLength:8,maxLength:20,pattern:"^(?=.*[a-zA-Z])(?=.*\\d).+$"}),email:F1.String({format:"email"})})},Op1={body:F1.Object({name:F1.String({minLength:2,maxLength:8}),psw:F1.String({minLength:8,maxLength:20,pattern:"^(?=.*[a-zA-Z])(?=.*\\d).+$"})})},hM={RegisterSchema:Tp1,LoginSchema:Op1};var Sp1=process.env.NEXT_RUNTIME==="edge"?setTimeout:setImmediate;var E$="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),y5=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],kp1=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],_p1=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,2909710000,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409000,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],u21=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892],dM=(A,F)=>{if(F<=0||F>A.length)throw Error(`Illegal length: ${F}`);let B=0,$,Z,D=[];for(;B<F;){if($=A[B++]&255,D.push(E$[$>>2&63]),$=($&3)<<4,B>=F){D.push(E$[$&63]);break}if(Z=A[B++]&255,$|=Z>>4&15,D.push(E$[$&63]),$=(Z&15)<<2,B>=F){D.push(E$[$&63]);break}Z=A[B++]&255,$|=Z>>6&3,D.push(E$[$&63]),D.push(E$[Z&63])}return D.join("")},xp1=(A,F)=>{let B=A.length,$=0,Z=0,D,X,J,Y,W,G,Q=[];for(;$<B-1&&Z<F&&(G=A.charCodeAt($++),D=G<y5.length?y5[G]:-1,G=A.charCodeAt($++),X=G<y5.length?y5[G]:-1,!(D===-1||X===-1||(W=D<<2>>>0,W|=(X&48)>>4,Q.push(String.fromCharCode(W)),++Z>=F||$>=B)||(G=A.charCodeAt($++),J=G<y5.length?y5[G]:-1,J===-1)||(W=(X&15)<<4>>>0,W|=(J&60)>>2,Q.push(String.fromCharCode(W)),++Z>=F||$>=B)));)G=A.charCodeAt($++),Y=G<y5.length?y5[G]:-1,W=(J&3)<<6>>>0,W|=Y,Q.push(String.fromCharCode(W)),++Z;return Q.map((q)=>q.charCodeAt(0))},gX=(A,F,B,$)=>{let Z,D=A[F],X=A[F+1];return D^=B[0],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[1],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[2],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[3],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[4],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[5],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[6],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[7],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[8],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[9],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[10],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[11],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[12],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[13],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[14],Z=$[D>>>24],Z+=$[256|D>>16&255],Z^=$[512|D>>8&255],Z+=$[768|D&255],X^=Z^B[15],Z=$[X>>>24],Z+=$[256|X>>16&255],Z^=$[512|X>>8&255],Z+=$[768|X&255],D^=Z^B[16],A[F]=X^B[17],A[F+1]=D,A},L$=(A,F)=>{let B=0;for(let $=0;$<4;++$)B=B<<8|A[F]&255,F=(F+1)%A.length;return{key:B,offp:F}},f21=(A,F,B)=>{let $=F.length,Z=B.length,D=0,X=new Int32Array([0,0]),J;for(let Y=0;Y<$;Y++)J=L$(A,D),D=J.offp,F[Y]^=J.key;for(let Y=0;Y<$;Y+=2)X=gX(X,0,F,B),F[Y]=X[0],F[Y+1]=X[1];for(let Y=0;Y<Z;Y+=2)X=gX(X,0,F,B),B[Y]=X[0],B[Y+1]=X[1]},bp1=(A,F,B,$)=>{let Z=B.length,D=$.length,X=0,J=new Int32Array([0,0]),Y;for(let W=0;W<Z;W++)Y=L$(F,X),X=Y.offp,B[W]^=Y.key;X=0;for(let W=0;W<Z;W+=2)Y=L$(A,X),X=Y.offp,J[0]^=Y.key,Y=L$(A,X),X=Y.offp,J[1]^=Y.key,J=gX(J,0,B,$),B[W]=J[0],B[W+1]=J[1];for(let W=0;W<D;W+=2)Y=L$(A,X),X=Y.offp,J[0]^=Y.key,Y=L$(A,X),X=Y.offp,J[1]^=Y.key,J=gX(J,0,B,$),$[W]=J[0],$[W+1]=J[1]},g21=(A,F,B,$,Z)=>{let D=new Int32Array(u21),X=D.length;B=1<<B>>>0;let J=new Int32Array(kp1),Y=new Int32Array(_p1);bp1(F,A,J,Y);let W=0,G=()=>{if(Z&&Z(W/B),W<B){let q=Date.now();for(;W<B&&(W+=1,f21(A,J,Y),f21(F,J,Y),!(Date.now()-q>100)););}else{for(let z=0;z<64;z++)for(let H=0;H<X>>1;H++)gX(D,H<<1,J,Y);let q=[];for(let z=0;z<X;z++)q.push(D[z]>>24&255),q.push(D[z]>>16&255),q.push(D[z]>>8&255),q.push(D[z]&255);return $?q:Promise.resolve(q)}if(!$)return new Promise((q)=>Sp1(()=>{G().then(q)}))};if(!$)return G();let Q;do Q=G();while(!Q);return Q},fp1=(A)=>globalThis.crypto.getRandomValues(new Uint8Array(A)),y21=(...A)=>new Error(`Illegal arguments: ${A.map((F)=>typeof F).join(", ")}`),mM=(A=10)=>{if(typeof A!="number")throw y21(A);return A=A<4?4:A>31?31:A,`$2b$${A<10?"0":""}${A}$${dM(fp1(16),16)}`};var gp1=(A)=>{let F=0,B=0;for(let $=0;$<A.length;++$)B=A.charCodeAt($),B<128?F+=1:B<2048?F+=2:(B&64512)===55296&&(A.charCodeAt($+1)&64512)===56320?($++,F+=4):F+=3;return F},up1=(A)=>{let F=0,B,$,Z=new Array(gp1(A));for(let D=0,X=A.length;D<X;++D)B=A.charCodeAt(D),B<128?Z[F++]=B:B<2048?(Z[F++]=B>>6|192,Z[F++]=B&63|128):(B&64512)===55296&&(($=A.charCodeAt(D+1))&64512)===56320?(B=65536+((B&1023)<<10)+($&1023),++D,Z[F++]=B>>18|240,Z[F++]=B>>12&63|128,Z[F++]=B>>6&63|128,Z[F++]=B&63|128):(Z[F++]=B>>12|224,Z[F++]=B>>6&63|128,Z[F++]=B&63|128);return Z},yp1=(A,F,B,$)=>{if(typeof A!="string"||typeof F!="string"){let q=new Error("Invalid content / salt: not a string");if(!B)return Promise.reject(q);throw q}let Z,D;if(F.charAt(0)!=="$"||F.charAt(1)!=="2"){let q=new Error("Invalid salt version: "+F.substring(0,2));if(!B)return Promise.reject(q);throw q}if(F.charAt(2)==="$")Z="\x00",D=3;else{if(Z=F.charAt(2),Z!=="a"&&Z!=="b"&&Z!=="y"||F.charAt(3)!=="$"){let q=Error("Invalid salt revision: "+F.substring(2,4));if(!B)return Promise.reject(q);throw q}D=4}let X=F.substring(D,D+2),J=/\d\d/.test(X)?Number(X):null;if(J===null){let q=new Error("Missing salt rounds");if(!B)return Promise.reject(q);throw q}if(J<4||J>31){let q=new Error(`Illegal number of rounds (4-31): ${J}`);if(!B)return Promise.reject(q);throw q}let Y=F.substring(D+3,D+25);A+=Z>="a"?"\x00":"";let W=up1(A),G=xp1(Y,16);if(G.length!==16){let q=new Error(`Illegal salt: ${Y}`);if(!B)return Promise.reject(q);throw q}let Q=(q)=>`$2${Z>="a"?Z:""}$${J<10?"0":""}${J}$${dM(G,16)}${dM(q,u21.length*4-1)}`;return B?Q(g21(W,G,J,!0,$)):g21(W,G,J,!1,$).then((q)=>Q(q))},cM=(A,F=10)=>yp1(A,typeof F=="number"?mM(F):F,!0);var v21=(A,F)=>{if(typeof A!="string"||typeof F!="string")throw y21(A,F);return F.length!==60?!1:cM(A,F.substring(0,29))===F};var lM=C7(uM(),1);function w$(A,F,B,$){let Z=new lM.default.Schema(F,B);if($)$(Z);return lM.default.model(A,Z)}var V$={versionKey:!1,virtuals:!1,timestamps:!1};var N$=w$("user",{name:{type:String,unique:[!0,"409:This name has already been registered."],trim:!0,required:!0},psw:{type:String,trim:!0,required:!0},level:{type:Number,enum:[1,2,3],default:1},email:{type:String,unique:[!0,"409:The same email has already been registered."],trim:!0,required:!0}},V$);var TR=C7(H71(),1);var U71=(A,F)=>{return A+"."+TR.default.sign({id:F.toString()},I8.SECRET,{expiresIn:"7d"})},cr1=(A)=>{let F=A.split("."),B=F[0],$=F.slice(1).join(".");return{name:B,token:$}},C71=async(A)=>{let{name:F,token:B}=cr1(A),$=await N$.findOne({name:F},{psw:0});if(!$)throw Error("Token not legal.");let Z=TR.default.verify(B,I8.SECRET,(D,X)=>{if(D)throw Error("Token has expired.");return X});if(Z.id){if(Z.id!==$._id.toString())throw Error("Token invalid.")}return delete $.psw,{user:$,token:B}};var lr1=async({body:A})=>{let{name:F,psw:B,email:$}=A,Z={name:F,psw:cM(B,mM(10)),email:$,level:1};if(await N$.findOne({level:3})===null)Z.level=3;let X=(await new N$(Z,{psw:0}).save()).toJSON();if(delete X.psw,X)return{user:X,msg:`User "${Z.name}" registration successful.`}},pr1=async({body:A,status:F,cookie:{nota_token:B,nota_auth:$}})=>{let{name:Z,psw:D}=A;if($.value&&B.value)try{let{user:X}=await C71(B.value);return delete X.psw,{user:X,ok:!0,msg:`${X.name} token login successful`}}catch(X){throw B.remove(),$.remove(),F(401,X.message)}else if(Z&&D){let X=await N$.findOne({name:Z}).lean();if(!X)throw F(401,"Not found this user");if(!v21(D,X.psw))throw F(401,"The password is incorrect");let Y=U71(Z,X._id);return B.set({value:Y,maxAge:604800,httpOnly:!0}),$.set({value:!0,maxAge:604800,httpOnly:!1}),delete X.psw,{user:X,ok:!0,msg:`${X.name} password login successful`}}else F(400,{msg:"Login failed"})},ir1=async({status:A,cookie:F,cookie:{nota_token:B,nota_auth:$}})=>{if($.value&&B.value)return B.remove(),$.remove(),delete F.nota_auth,delete F.nota_token,{ok:!0,msg:"Logout successful"};else throw A(400,"Please log in first")},lz={Register:lr1,Login:pr1,Logout:ir1};var nr1=new Q8({prefix:"/user"}).post("/reg",lz.Register,hM.RegisterSchema).post("/login",lz.Login,hM.LoginSchema).post("/logout",lz.Logout),K71=nr1;var OR={params:F1.Object({id:F1.String()})},sr1={params:F1.Object({page:F1.Number({minimum:0}),size:F1.Number({minimum:2,maximum:50,error:"Size must be between 5 and 50"})})},ar1={body:F1.Object({text:F1.String({minLength:5,maxLength:500}),img:F1.Array(F1.String())})},tr1={params:OR.params,body:F1.Object({date:F1.Number(),text:F1.String({minLength:5,maxLength:500}),img:F1.Array(F1.String())})},rr1={params:OR.params},O$={GetMemoSchema:OR,GetMemoListSchema:sr1,MemoSchema:ar1,UpdateMemoSchema:tr1,DeleteMemoSchema:rr1};var h5=w$("memo",{date:{type:Number,default:Date.now()},text:{type:String,required:!0,minlength:[5,"409:Memo content can't be less than 5 bytes"],maxlength:[500,"409:Memo content can't be exceed than 500 bytes"]},img:[{type:String}]},V$);var or1=async({params:{id:A},body:F})=>{return{data:await h5.findById(A),ok:!0,msg:"Get Memo successful"}},er1=async({status:A,params:{page:F,size:B}})=>{let $=Number(F),Z=Number(B),D=await h5.find().sort({date:-1}).skip($*Z).limit(Z).lean();if(D.length<=0)throw A(400,"Not found moment.");let X=await h5.countDocuments(),J=Math.ceil(X/Z);return{data:D,count:X,max:J,ok:!0}},Ao1=async({body:A})=>{return{data:await new h5(A).save(),msg:"Post memo successful"}},Fo1=async({params:{id:A},body:F})=>{return{data:await h5.findByIdAndUpdate(A,F,{new:!0}),msg:"Update memo successful"}},Bo1=async({params:{id:A},status:F})=>{if(await h5.findByIdAndDelete(A)===null)throw F(400,"Not found this memo");return{msg:"Memo deletion successful"}},S$={GetMemo:or1,GetMemoList:er1,PostMemo:Ao1,UpdateMemo:Fo1,DeleteMemo:Bo1};var $o1=new Q8({prefix:"/memo"}).get("/:id",S$.GetMemo,O$.GetMemoSchema).get("/li/:page/:size",S$.GetMemoList,O$.GetMemoListSchema).post("/",S$.PostMemo,O$.MemoSchema).put("/:id",S$.UpdateMemo,O$.UpdateMemoSchema).delete("/:id",S$.DeleteMemo,O$.DeleteMemoSchema),E71=$o1;var pz=w$("album",{name:{type:String,unique:[!0,"409:This image has already been registered."]},sha:{type:String},group:{type:String,default:"daily"}},V$);var iz=async(A,F,B)=>{try{let $=`https://api.gitcode.com/api/v5/repos/${I8.GIT_REPO}${A}?access_token=${I8.GIT_TOKEN}${F}`,Z=Object.assign({headers:{"Content-Type":"application/json",Accept:"application/json"}},B),D=await fetch($,Z);if(!D.ok)throw new Error("Bad request");return await D.json()}catch($){throw new Error($.message)}};var Zo1=async({status:A,body:F})=>{try{let{name:B,content:$,group:Z}=F,D=Z||"daily",X=`/contents/${D}/${B}.png`,J=await iz(X,"",{method:"POST",body:JSON.stringify({content:$,message:Date()})}),W=(await iz(X,"")).sha;return{data:await new pz({name:B,sha:W,group:D}).save(),ok:!0,msg:`Image ${B} upload successful`}}catch(B){throw A(400,B.message||"Upload failed")}},Do1=async({status:A,params:F})=>{try{let{name:B}=F;console.log(B);let{group:$,sha:Z}=await pz.findOne({name:B});return await iz(`/contents/${$}/${B}.png`,"",{method:"DELETE",body:JSON.stringify({sha:Z,message:"delete image"})}),await pz.deleteOne({name:B}),{ok:!0,msg:`Image ${B} upload successful`}}catch(B){throw A(400,B.message||"Upload failed")}},SR={PostImage:Zo1,DeleteImage:Do1};var Xo1={body:F1.Object({name:F1.String(),content:F1.String()})},Jo1={params:F1.Object({name:F1.String()})},kR={AlbumSchema:Xo1,DeleteAlbumSchema:Jo1};var Yo1=new Q8({prefix:"/img"}).post("/",SR.PostImage,kR.AlbumSchema).delete("/:name",SR.DeleteImage,kR.DeleteAlbumSchema),L71=Yo1;var Wo1=new Q8().get("/",()=>{return"Hello Nota! "}).options("/*",({set:A})=>{return{ok:!0}}).get("/up",async()=>{let A=await Bun.file("public/upload.html");return new Response(A,{headers:{"Content-Type":"text/html"}})}).get("/favicon.ico",({set:A})=>{return A.headers["Content-Type"]="image/svg+xml",'<svg id="Nota" width="120" height="120" xmlns="http://www.w3.org/2000/svg"><text x="60" y="60" fill="#8942ed" font-family="Times New Roman,sans-serif" font-weight="700" font-size="40" text-anchor="middle" dominant-baseline="middle" style="animation:fade 1.5s ease-out .5s infinite;opacity:.8">Nota</text><style>@keyframes fade{50%{opacity:.5}}</style></svg>'}).use(K71).use(E71).use(L71),w71=Wo1;var V71=(A)=>A.onError(({code:F,status:B,error:$})=>{let Z=$.response||$.toString();if(u5.error(Z),F==="NOT_FOUND")return B(404,{msg:"Route Not Found :(",ok:!1,code:404});if(F==="VALIDATION")return B(400,{msg:"Bad Request! :(",ok:!1,code:400});if(Z.includes("409:"))return B(409,{msg:Z.replace("409:",""),ok:!1,code:409});return B(F,{msg:Z||"Server Error! :(",ok:!1,code:F})});var N71=(A)=>A.onBeforeHandle(({request:F,path:B,status:$})=>{if(F.method==="OPTIONS")throw $(200,"success");u5.RequestMethod(F.method,B)});var M71=(A)=>A.onAfterResponse(({set:F})=>{F.headers["Access-Control-Allow-Origin"]="*",F.headers["Access-Control-Allow-Methods"]="*",F.headers["Access-Control-Allow-Headers"]="Content-Type,Authorization",F.headers["Content-Type"]="text/plain; charset=utf-8"});await b21();var Go1=new Q8().use(N71).use(M71).use(V71).use(w71),QC0=Go1;export{QC0 as default};
